(function(){var e={1507:function(e,t,o){var a={"./":[5931,7,[931]],"./css-shim-e1e1ea5e":[4833,7,[833]],"./css-shim-e1e1ea5e.js":[4833,7,[833]],"./debounce-0e5b22a1":[6547,9,[547]],"./debounce-0e5b22a1.js":[6547,9,[547]],"./dom-21bd1807":[7667,7,[667]],"./dom-21bd1807.js":[7667,7,[667]],"./index":[5931,7,[931]],"./index-6f753b3c":[8083,9,[]],"./index-6f753b3c.js":[8083,9,[]],"./index.js":[5931,7,[931]],"./loader":[9944,9,[]],"./loader.js":[9944,9,[]],"./resize-observer-00c48d78":[4063,9,[63]],"./resize-observer-00c48d78.js":[4063,9,[63]],"./revo-grid":[302,9,[302]],"./revo-grid.js":[302,9,[302]],"./revo-grid_11.entry":[5849,9,[849]],"./revo-grid_11.entry.js":[5849,9,[849]],"./revogr-clipboard.entry":[521,9,[521]],"./revogr-clipboard.entry.js":[521,9,[521]],"./revogr-filter-panel.entry":[6834,9,[834]],"./revogr-filter-panel.entry.js":[6834,9,[834]]};function l(e){if(!o.o(a,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=a[e],l=t[0];return Promise.all(t[2].map(o.e)).then(function(){return o.t(l,16|t[1])})}l.keys=function(){return Object.keys(a)},l.id=1507,e.exports=l},78:function(e,t,o){"use strict";var a=o(9726);function l(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createBlock)(r,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.save"),type:"submit"},null,8,["label"])}var n={name:"SubmitButton"},i=o(6262);const r=(0,i.A)(n,[["render",l]]);var s=r;const d={key:0},c={class:"XHRM-horizontal-padding XHRM-vertical-padding"},u={key:0};function m(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-text"),m=(0,a.resolveComponent)("oxd-button");return o.loading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",d,[o.showDivider?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,class:"XHRM-horizontal-margin"})):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",c,[o.selected>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createVNode)(s,{tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.n_records_selected",{count:o.selected})),1)]),_:1}),(0,a.createVNode)(m,{label:e.$t("general.delete_selected"),"icon-name":"trash-fill","display-type":"label-danger",class:"XHRM-horizontal-margin",onClick:t[0]||(t[0]=t=>e.$emit("delete",t))},null,8,["label"])])):((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t(o.recordsFoundLangString,{count:o.total})),1)]),_:1}))])]))}var p={name:"TableHeader",props:{loading:{type:Boolean,required:!0},selected:{type:Number,required:!0},total:{type:Number,required:!0},showDivider:{type:Boolean,required:!1,default:!0},recordsFoundLangString:{type:String,required:!1,default:"general.n_records_found"}},emits:["delete"]};const h=(0,i.A)(p,[["render",m],["__scopeId","data-v-3b3b8aa1"]]);var g=h;function v(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createBlock)(r,{tag:"p",class:"XHRM-form-hint"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)(" * "+(0,a.toDisplayString)(e.$t("general.required")),1)]),_:1})}var f={name:"RequiredText"};const y=(0,i.A)(f,[["render",v],["__scopeId","data-v-65240c3e"]]);var C=y;const V=["href"],b={key:0},w=["href"],x=["href"];function N(e,t,o,l,n,i){const r=(0,a.resolveComponent)("dark-mode-toggle"),s=(0,a.resolveComponent)("oxd-icon-button"),d=(0,a.resolveComponent)("oxd-layout"),c=(0,a.resolveComponent)("about");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(d,(0,a.normalizeProps)((0,a.guardReactiveProps)(e.$attrs)),(0,a.createSlots)({"topbar-header-right-area":(0,a.withCtx)(()=>[(0,a.createVNode)(r)]),"user-actions":(0,a.withCtx)(()=>[(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",{href:"#",role:"menuitem",class:"oxd-userdropdown-link",onClick:t[0]||(t[0]=(...e)=>l.openAboutModel&&l.openAboutModel(...e))},(0,a.toDisplayString)(e.$t("general.about")),1)]),(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",{href:o.supportUrl,role:"menuitem",class:"oxd-userdropdown-link"},(0,a.toDisplayString)(e.$t("general.support")),9,V)]),o.updatePasswordUrl?((0,a.openBlock)(),(0,a.createElementBlock)("li",b,[(0,a.createElementVNode)("a",{href:o.updatePasswordUrl,role:"menuitem",class:"oxd-userdropdown-link"},(0,a.toDisplayString)(e.$t("general.change_password")),9,w)])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("li",null,[(0,a.createElementVNode)("a",{href:o.logoutUrl,role:"menuitem",class:"oxd-userdropdown-link"},(0,a.toDisplayString)(e.$t("general.logout")),9,x)])]),"nav-actions":(0,a.withCtx)(()=>[(0,a.createVNode)(s,{name:"question-lg",title:e.$t("general.help"),onClick:l.onClickSupport},null,8,["title","onClick"])]),_:2},[(0,a.renderList)(e.$slots,(t,o)=>({name:o,fn:(0,a.withCtx)(t=>[(0,a.renderSlot)(e.$slots,o,(0,a.normalizeProps)((0,a.guardReactiveProps)(t)))])}))]),1040),l.showAboutModel?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,onClose:l.closeAboutModel},null,8,["onClose"])):(0,a.createCommentVNode)("",!0)],64)}const k={class:"XHRM-modal-header"},_={key:0,class:"XHRM-loader"};function S(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-loading-spinner"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(m,{style:{width:"90%",maxWidth:"450px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",k,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.about")),1)]),_:1})]),(0,a.createVNode)(s),n.isLoading?((0,a.openBlock)(),(0,a.createElementBlock)("div",_,[(0,a.createVNode)(d)])):((0,a.openBlock)(),(0,a.createBlock)(u,{key:1,cols:2,class:"XHRM-about"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.company_name"))+": ",1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.data.companyName),1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.version"))+": ",1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.data.productName)+" "+(0,a.toDisplayString)(n.data.version),1)]),_:1})]),_:1}),void 0!==n.data.numberOfActiveEmployee?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active_employees"))+": ",1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.data.numberOfActiveEmployee),1)]),_:1})]),_:1})],64)):(0,a.createCommentVNode)("",!0),void 0!==n.data.numberOfPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.employees_terminated"))+": ",1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-about-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.data.numberOfPastEmployee),1)]),_:1})]),_:1})],64)):(0,a.createCommentVNode)("",!0)]),_:1}))]),_:1},8,["onUpdate:show"])}var D=o(3772),$=(o(9112),o(3110),o(4335));o(4979);class M{constructor(){(0,D.A)(this,"_tempStorage",{})}clear(){this._tempStorage={}}getItem(e){return this._tempStorage[e]||null}key(e){return Object.keys(this._tempStorage)[e]||null}removeItem(e){delete this._tempStorage[e]}setItem(e,t){this._tempStorage[e]=t}}function E(e){try{const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}}class R{constructor(e){(0,D.A)(this,"_storage",void 0),E(e)?this._storage=e:this._storage=new M}clear(){this._storage.clear()}getItem(e){return this._storage.getItem(e)}key(e){return this._storage.key(e)}removeItem(e){this._storage.removeItem(e)}setItem(e,t){this._storage.setItem(e,t)}}o(8111),o(7588);const T=function(e,t={},o={}){let a=e;o=JSON.parse(JSON.stringify(o)),Object.keys(t).forEach(e=>{const o=`{${e}}`;if(a.includes(o)){let l=t[e];"number"===typeof l&&(l=l.toString()),a=a.replace(o,l)}else console.error("Invalid parameter.")});let l="?";const n=Object.keys(o);return n.forEach((e,t)=>{0!==t&&(l+="&");const a=o[e];Array.isArray(a)?a.forEach((t,o)=>{0!==o&&(l+="&"),l+=`${e}[]=${t}`}):l+=`${e}=${a}`}),encodeURI(a+(0===n.length?"":l))},B=function(e,t={},o={}){return window.appGlobal.baseUrl+T(e,t,o)},I=function(e,t={},o={}){window.location.href=B(e,t,o)},A=function(){window.location.reload()};class H{constructor(e,t){(0,D.A)(this,"_http",void 0),(0,D.A)(this,"_baseUrl",void 0),(0,D.A)(this,"_apiSection",void 0),(0,D.A)(this,"_cacheStorage",void 0),(0,D.A)(this,"_ignorePathRegex",void 0),this._baseUrl=e,this._apiSection=t,this._http=$.A.create({baseURL:this._baseUrl}),this._cacheStorage=new R(localStorage),this.setupResponseInterceptors((0,a.getCurrentInstance)())}setIgnorePath(e){this._ignorePathRegex=new RegExp(e)}getAll(e){const t={"Content-Type":"application/json",Accept:"application/json","Cache-Control":"no-store, no-cache, must-revalidate, post-check=0, pre-check=0"};return this._http.get(this._apiSection,{headers:t,params:e})}get(e,t){const o={"Content-Type":"application/json"};return this._http.get(`${this._apiSection}/${e}`,{headers:o,params:t})}create(e){const t={"Content-Type":"application/json",Accept:"application/json"};return this._http.post(this._apiSection,e,{headers:t})}update(e,t){const o={"Content-Type":"application/json"};return this._http.put(`${this._apiSection}/${e}`,t,{headers:o})}delete(e){const t={"Content-Type":"application/json"};return this._http.delete(`${this._apiSection}/${e}`,{headers:t})}deleteAll(e){const t={"Content-Type":"application/json"};return this._http.delete(`${this._apiSection}`,{headers:t,data:e})}request(e){const t={"Content-Type":"application/json"};return this._http.request({url:this._apiSection,headers:t,...e})}ignoreError(e){if(this._ignorePathRegex&&(422===e.response?.status||400===e.response?.status)){const t=e.response.config.url??"";return this._ignorePathRegex.test(t)}return!1}setupResponseInterceptors(e){this._http.interceptors.response.use(e=>e,t=>{if(401===t.response?.status)return A(),Promise.reject();if(this.ignoreError(t))return Promise.reject(t.response);const o=e?.appContext.config.globalProperties.$toast;if(o&&"ECONNABORTED"!==t.code){const e=t.response?.data;o.unexpectedError(e?.error.message||null)}return Promise.reject(t)});{const e=e=>e.startsWith("W/")?e.substring(2):e;this._http.interceptors.request.use(e=>{if(e.url){const t=e.url,o=this._cacheStorage.getItem(t);o&&e.headers.set("If-None-Match",o)}return e},e=>Promise.reject(e)),this._http.interceptors.response.use(t=>{const{config:o,headers:a}=t;if(o.url&&a){const l=o.url,n=a["etag"],i=this._cacheStorage.getItem(l);n&&n!==i&&(this._cacheStorage.removeItem(l),this._cacheStorage.setItem(l,e(n)),i&&this._cacheStorage.removeItem(i),this._cacheStorage.setItem(e(n),JSON.stringify(t.data)))}return t},t=>{if(304===t.response?.status){const o=t.response.headers["etag"];if(o){const a=this._cacheStorage.getItem(e(o));if(a)return Promise.resolve({...t.response,status:200,data:JSON.parse(a)})}}return Promise.reject(t)})}}get http(){return this._http}get baseUrl(){return this._baseUrl}set apiSection(e){this._apiSection=e}}var X=o(7152),U={components:{"oxd-loading-spinner":X.VJ,"oxd-dialog":X.KB},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/core/about");return{http:e}},data(){return{isLoading:!1,data:null}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.data={...t}}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){this.$emit("close",!0)}}};const L=(0,i.A)(U,[["render",S],["__scopeId","data-v-ca8c7460"]]);var P=L;const q=Symbol("dateFormat");function F(){const e=(0,a.inject)(q);if(!e)throw new Error("Date format is invalid");const t=(0,X.f4)(e.id),o=e.label,l="HH:mm",n="hh:mm a";return{timeFormat:l,jsTimeFormat:n,jsDateFormat:t,userDateFormat:o}}const z={class:"XHRM-dark-mode-toggle"},j=["title"],O={key:0,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"XHRM-theme-icon"},G={key:1,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"XHRM-theme-icon"};function Q(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",z,[(0,a.createElementVNode)("button",{type:"button",class:"xhrm-theme-toggle-btn",title:l.isDarkMode?e.$t("general.switch_to_light_mode"):e.$t("general.switch_to_dark_mode"),onClick:t[0]||(t[0]=(...e)=>l.toggleDarkMode&&l.toggleDarkMode(...e))},[l.isDarkMode?((0,a.openBlock)(),(0,a.createElementBlock)("svg",O,[...t[1]||(t[1]=[(0,a.createStaticVNode)('<circle cx="12" cy="12" r="5" data-v-ad4f3748></circle><line x1="12" y1="1" x2="12" y2="3" data-v-ad4f3748></line><line x1="12" y1="21" x2="12" y2="23" data-v-ad4f3748></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-ad4f3748></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-ad4f3748></line><line x1="1" y1="12" x2="3" y2="12" data-v-ad4f3748></line><line x1="21" y1="12" x2="23" y2="12" data-v-ad4f3748></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-ad4f3748></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-ad4f3748></line>',9)])])):((0,a.openBlock)(),(0,a.createElementBlock)("svg",G,[...t[2]||(t[2]=[(0,a.createElementVNode)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])]))],8,j)])}var K={name:"DarkModeToggle",setup(){const e=(0,a.ref)(!1),t=t=>{e.value=t,t?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("xhrm-theme","dark")):(document.documentElement.removeAttribute("data-theme"),localStorage.setItem("xhrm-theme","light"))},o=()=>{t(!e.value)};return(0,a.onMounted)(()=>{const e=localStorage.getItem("xhrm-theme");("dark"===e||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&t(!0)}),{isDarkMode:e,toggleDarkMode:o}}};const W=(0,i.A)(K,[["render",Q],["__scopeId","data-v-ad4f3748"]]);var J=W,Y={components:{about:P,"oxd-layout":X.aM,"dark-mode-toggle":J},inheritAttrs:!1,props:{permissions:{type:Object,default:()=>({})},logoutUrl:{type:String,default:"#"},supportUrl:{type:String,default:"#"},updatePasswordUrl:{type:String,default:"#"},dateFormat:{type:Object,default:null},helpUrl:{type:String,default:null},showUpgrade:{type:Boolean,default:!1}},setup(e){const t=(0,a.ref)(!1);(0,a.provide)("permissions",(0,a.readonly)(e.permissions)),(0,a.provide)(q,(0,a.readonly)(e.dateFormat));const o=()=>{t.value=!0},l=()=>{t.value=!1},n=()=>{e.helpUrl&&window.open(e.helpUrl,"_blank")};return{onClickSupport:n,showAboutModel:t,openAboutModel:o,closeAboutModel:l}}};const Z=(0,i.A)(Y,[["render",N]]);var ee=Z;function te(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"date",placeholder:l.userDateFormat,"day-attributes":e.attributes,events:e.events,"display-format":l.jsDateFormat,locale:l.locale,onSelectYear:l.onSelectYear},null,8,["placeholder","day-attributes","events","display-format","locale","onSelectYear"])}o(1701);var oe=o(3840),ae=o(9123),le=o(6982),ne=o(1810),ie=o(63),re=o(5306),se=o(7054),de=o(3039),ce=o(2998),ue=o(1447);const me=[{offset:0,label:"Europe/London"},{offset:1,label:"Europe/Belgrade"},{offset:2,label:"Europe/Minsk"},{offset:3,label:"Asia/Kuwait"},{offset:4,label:"Asia/Muscat"},{offset:5,label:"Asia/Yekaterinburg"},{offset:5.5,label:"Asia/Kolkata"},{offset:6,label:"Asia/Dhaka"},{offset:7,label:"Asia/Krasnoyarsk"},{offset:8,label:"Asia/Brunei"},{offset:9,label:"Asia/Seoul"},{offset:9.5,label:"Australia/Darwin"},{offset:10,label:"Australia/Canberra"},{offset:11,label:"Asia/Magadan"},{offset:12,label:"Pacific/Fiji"},{offset:-11,label:"Pacific/Midway"},{offset:-10,label:"Pacific/Honolulu"},{offset:-9,label:"America/Anchorage"},{offset:-8,label:"America/Los_Angeles"},{offset:-7,label:"America/Denver"},{offset:-6,label:"America/Tegucigalpa"},{offset:-5,label:"America/New_York"},{offset:-4,label:"America/Halifax"},{offset:-3.5,label:"America/St_Johns"},{offset:-3,label:"America/Argentina/Buenos_Aires"},{offset:-2,label:"Atlantic/South_Georgia"},{offset:-1,label:"Atlantic/Azores"}],pe=()=>new Date((new Date).setHours(0,0,0,0)),he=(e,t="yyyy-MM-dd",o={})=>{try{const a=(0,oe.A)(e,t,pe(),o);return!isNaN(a.valueOf())&&a.getFullYear()>=1e3?a:null}catch(a){return null}},ge=(e,t,o={})=>{try{return(0,ae.A)(e,t,o)}catch(a){return null}},ve=(e,t,o)=>{const a=he(e,o),l=he(t,o);return!(!a||!l)&&-1===(0,le.A)(a,l)},fe=(e,t,o)=>{const a=he(e,o),l=he(t,o);return!(!a||!l)&&1===(0,le.A)(a,l)},ye=(e,t,o)=>{const a=he(e,o),l=he(t,o);return!(!a||!l)&&0===(0,le.A)(a,l)},Ce=(e,t)=>he(e,t),Ve=(e,t,o={})=>ge(e,t,o),be=(e,t,o)=>{const a=he(e,o),l=he(t,o);if(a&&l){if(a.valueOf()<l.valueOf())return 1;if(a.valueOf()>l.valueOf())return-1;if(a.valueOf()===l.valueOf())return 0}return NaN},we=(e,t,o="yyyy-MM-dd")=>{const a=he(e,o),l=he(t,o);return a&&l?(0,ne.A)(l,a)?1:(0,ie.A)(l,a)+1:0},xe=(e,t,o="HH:mm")=>{const a=Ce(e,o),l=Ce(t,o);if(a&&l){const e=(0,re.A)(l,a);if(e>0)return e}return 0},Ne=e=>{const t=Math.floor(e/3600),o=Math.floor((e-3600*t)/60);return`${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},ke=e=>{if(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(e)){const t=e.split(":");return 60*parseInt(t[0])*60+60*parseInt(t[1])}return parseFloat(e)<24&&/^([0-9])+(?:\.[0-9]{1,2})?$/.test(e)?60*parseFloat(e)*60:-1},_e=(e,t=1e3)=>{t=t<1e3?1e3:t;const o=()=>{e(),setTimeout(o,t-(new Date).getTime()%t)};o()},Se=e=>(e>0?"+":"-")+String(Math.abs(e).toFixed(2)).split(".").map((e,t)=>0===t?e.padStart(2,"0"):String(.6*parseInt(e)).padEnd(2,"0")).join(":"),De=()=>{let e=Intl.DateTimeFormat().resolvedOptions().timeZone;const t=(new Date).getTimezoneOffset()/60*-1;if(void 0===e){const o=me.find(e=>e.offset===t);e=o?o.label:me[0].label}const o=Se(t);return{name:e,label:`(GMT ${o}) ${e}`,offset:t}};var $e=o(2926);const Me={},Ee=()=>(e,t={})=>{try{if(!Me[e])return e;const o=Me[e].format(t);return Array.isArray(o)?"string"===typeof o[0]?o[0]:e:o}catch(o){return console.error(o),e}},Re=()=>({beforeCreate(){this.$t=Ee()}});function Te(e){const t=new H(e.baseUrl,e.resourceUrl);return{init:function(){return new Promise(e=>{t.request({method:"GET",headers:{Accept:"application/json",contentType:"application/json"}}).then(e=>{const{data:t}=e,o={};for(const a in t)o[a]=t[a].target||t[a].source,Me[a]=new $e.Ay(t[a].target||t[a].source,void 0,void 0,{ignoreTag:!0});X.nd.mergeConfig({language:o})}).finally(()=>e())})},i18n:function(e){e.mixin(Re())}}}var Be=Te;function Ie(){const e=Ee();return{$t:e}}function Ae(){const{$t:e}=Ie(),t=(0,X.Xf)({months:{wide:[e("general.january"),e("general.february"),e("general.march"),e("general.april"),e("general.may"),e("general.june"),e("general.july"),e("general.august"),e("general.september"),e("general.october"),e("general.november"),e("general.december")],abbreviated:[e("general.jan"),e("general.feb"),e("general.mar"),e("general.apr"),e("general.may"),e("general.jun"),e("general.jul"),e("general.aug"),e("general.sep"),e("general.oct"),e("general.nov"),e("general.dec")]},days:{abbreviated:[e("general.sun"),e("general.mon"),e("general.tue"),e("general.wed"),e("general.thu"),e("general.fri"),e("general.sat")],wide:[e("general.sunday"),e("general.monday"),e("general.tuesday"),e("general.wednesday"),e("general.thursday"),e("general.friday"),e("general.saturday")]}});return{locale:t}}var He={name:"DateInput",setup(){const e=(0,a.reactive)({attributes:[],events:[]}),t=new H(window.appGlobal.baseUrl,""),{jsDateFormat:o,userDateFormat:l}=F(),{locale:n}=Ae(),i=e=>e>=200&&e<300||403===e,r=async()=>{t.request({method:"GET",url:"/api/v2/leave/workweek",params:{model:"indexed"},validateStatus:i}).then(({data:t})=>{t?.data&&(e.attributes=Object.keys(t.data).map(e=>({index:parseInt(e),class:8===t.data[e]?"--non-working-day":4===t.data[e]?"--working-day-half":""})))})},s=async(o,a)=>{t.request({method:"GET",url:"/api/v2/leave/holidays",params:{fromDate:o,toDate:a},validateStatus:i}).then(({data:t})=>{Array.isArray(t?.data)&&(e.events=t.data.map(e=>({date:he(e.date,"yyyy-MM-dd"),type:e.name,class:0===e.length?"--holiday-full":"--holiday-half"})))})},d=async({year:e})=>{const t=(new Date).setFullYear(e),o=ge((0,se.A)(t),"yyyy-MM-dd"),a=ge((0,de.A)(t),"yyyy-MM-dd");s(o,a)};return(0,a.onBeforeMount)(async()=>{await r(),await d({year:(new Date).getFullYear()})}),{jsDateFormat:o,userDateFormat:l,...(0,a.toRefs)(e),onSelectYear:d,locale:n}}};const Xe=(0,i.A)(He,[["render",te]]);var Ue=Xe;function Le(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"time",step:15,placeholder:e.$t("attendance.hh_mm")},null,8,["placeholder"])}var Pe={name:"TimeInput"};const qe=(0,i.A)(Pe,[["render",Le]]);var Fe=qe,ze={install:e=>{e.component("OxdLayout",ee),e.component("OxdCardTable",X.q_),e.component("OxdButton",X.II),e.component("OxdPagination",X.YM),e.component("OxdDivider",X.zQ),e.component("OxdText",X.FA),e.component("OxdIconButton",X.L0),e.component("OxdForm",X.wH),e.component("OxdFormRow",X.g3),e.component("OxdFormActions",X.lB),e.component("OxdInputField",X.C3),e.component("OxdInputGroup",X.Ze),e.component("OxdGrid",X.ib),e.component("OxdGridItem",X.rZ),e.component("OxdTableFilter",X.AP),e.component("SubmitButton",s),e.component("TableHeader",g),e.component("RequiredText",C),e.component("DateInput",Ue),e.component("TimeInput",Fe)}};function je(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-alert");return(0,a.openBlock)(),(0,a.createBlock)(r,{show:!0,type:"warn",message:e.$t("general.no_records_found")},null,8,["message"])}var Oe={components:{"oxd-alert":X.qO}};const Ge=(0,i.A)(Oe,[["render",je]]);var Qe=Ge;function Ke(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-alert");return(0,a.openBlock)(),(0,a.createBlock)(r,{show:!0,type:"warn",message:e.$t("general.bad_request")},null,8,["message"])}var We={components:{"oxd-alert":X.qO}};const Je=(0,i.A)(We,[["render",Ke]]);var Ye=Je;const Ze={class:"XHRM-background-container"},et={class:"XHRM-card-container"},tt={class:"XHRM-module-under-development"},ot=["src"],at={target:"_blank",class:"XHRM-module-under-development-link",href:"https://sourceforge.net/projects/XHRM/files/latest/download"};function lt(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ze,[(0,a.createElementVNode)("div",et,[(0,a.createElementVNode)("div",tt,[(0,a.createVNode)(r,{tag:"h4",class:"XHRM-module-under-development-heading"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.launching_soon")),1)]),_:1}),(0,a.createElementVNode)("img",{src:n.moduleUnderDevelopment,class:"XHRM-module-under-development-img",alt:"this module is under development"},null,8,ot),(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-under-development-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.page_under_development"))+" ",1),(0,a.createElementVNode)("a",at,(0,a.toDisplayString)(e.$t("general.click_here")),1),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("general.download_latest_release")),1)]),_:1})])])])}var nt={data(){return{moduleUnderDevelopment:`${window.appGlobal.publicPath}/images/web_under_construction.png`}}};const it=(0,i.A)(nt,[["render",lt],["__scopeId","data-v-d8ba6d26"]]);var rt=it;const st={class:"XHRM-background-container"},dt={class:"XHRM-card-container"},ct={class:"XHRM-module-disabled"};function ut(e,t){const o=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)("div",st,[(0,a.createElementVNode)("div",dt,[(0,a.createElementVNode)("div",ct,[(0,a.createVNode)(o,{tag:"h1",class:"XHRM-module-disabled-heading"},{default:(0,a.withCtx)(()=>[...t[0]||(t[0]=[(0,a.createTextVNode)(" 403 ",-1)])]),_:1}),(0,a.createVNode)(o,{tag:"h4",class:"XHRM-module-disabled-sub-heading"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.module_forbidden")),1)]),_:1}),(0,a.createVNode)(o,{tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.module_access_restriction")),1)]),_:1})])])])}const mt={},pt=(0,i.A)(mt,[["render",ut],["__scopeId","data-v-316e5371"]]);var ht=pt;function gt(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-alert");return(0,a.openBlock)(),(0,a.createBlock)(r,{show:!0,type:"warn",message:e.$t("time.timesheet_period_not_defined")},null,8,["message"])}var vt={components:{"oxd-alert":X.qO}};const ft=(0,i.A)(vt,[["render",gt]]);var yt=ft,Ct={"bad-request":Ye,"no-records-found":Qe,"module-under-development":rt,"disabled-module":ht,"time-sheet-period-not-defined":yt};const Vt={class:"XHRM-background-container"},bt={class:"XHRM-paper-container"},wt={class:"XHRM-header-container"},xt={class:"XHRM-container"},Nt={class:"XHRM-bottom-container"};function kt(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Vt,[(0,a.createElementVNode)("div",bt,[(0,a.createElementVNode)("div",wt,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.job_titles")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",xt,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[1]||(t[1]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",Nt,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[2]||(t[2]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}o(4114);function _t(){const e=(0,a.getCurrentInstance)()?.appContext.config.globalProperties.$toast,t=e=>(...t)=>e&&e(...t);return{notify:t(e?.notify),show:t(e?.show),success:t(e?.success),error:t(e?.error),info:t(e?.info),warn:t(e?.warn),clear:t(e?.clear),clearAll:t(e?.clearAll),saveSuccess:t(e?.saveSuccess),addSuccess:t(e?.addSuccess),updateSuccess:t(e?.updateSuccess),deleteSuccess:t(e?.deleteSuccess),cannotDelete:t(e?.cannotDelete),noRecordsFound:t(e?.noRecordsFound)}}async function St(e,t){try{const o=await e.getAll(t);return{data:o.data.data,meta:o.data.meta,error:!1}}catch(o){return{error:!0,message:o.message}}}function Dt(e,t){const o=e*(t-1);return{limit:e,offset:o}}function $t(e){const t=JSON.parse(JSON.stringify((0,a.unref)(e)));for(const[o,a]of Object.entries(t))t[o]=null===a||""===a?void 0:a;return t}function Mt(e){return e}function Et(e,{query:t={},normalizer:o=Mt,prefetch:l=!0,toastNoRecords:n=!0,pageSize:i=50}={}){const r=(0,a.reactive)({showPaginator:!1,isLoading:!1,response:{},total:0,pages:0,currentPage:1}),{noRecordsFound:s}=_t(),d=async()=>{r.isLoading=!0;const a=Dt(i,r.currentPage),l=$t(t);if(r.response=await St(e,{...a,...l}),!r.response.error){const{data:e,...t}=r.response,a=o(e);r.response={data:a,...t}}r.response.meta&&(r.total=r.response.meta.total,r.total>i?(r.showPaginator=!0,r.pages=Math.ceil(r.total/i)):(r.currentPage=1,r.pages=1,r.showPaginator=!1),0===r.total&&n&&s()),r.isLoading=!1};return l&&(0,a.onBeforeMount)(d),(0,a.watch)(()=>r.currentPage,d),{...(0,a.toRefs)(r),execQuery:d}}const Rt={class:"XHRM-modal-header"},Tt={class:"XHRM-text-center-align"},Bt={class:"XHRM-modal-footer"};function It(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-dialog-popup","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Rt,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.are_you_sure")),1)]),_:1})]),(0,a.createElementVNode)("div",Tt,[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.message||e.$t("general.delete_confirmation_message")),1)]),_:1})]),(0,a.createElementVNode)("div",Bt,[(0,a.createVNode)(s,{label:e.$t("general.no_cancel"),"display-type":"ghost",class:"XHRM-button-margin",onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(s,{label:e.$t("general.yes_delete"),"icon-name":"trash","display-type":"label-danger",class:"XHRM-button-margin",onClick:i.onDelete},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var At={components:{"oxd-dialog":X.KB},props:{message:{type:String,default:null,required:!1}},data(){return{show:!1,reject:null,resolve:null}},methods:{showDialog(){return new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})},onDelete(){this.show=!1,this.resolve&&this.resolve("ok")},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")}}};const Ht=(0,i.A)(At,[["render",It],["__scopeId","data-v-1a94b1db"]]);var Xt=Ht;o(2489);function Ut(e){const t=(0,a.ref)({...JSON.parse(JSON.stringify(e.sortDefinition))}),o=(0,a.computed)(()=>Object.keys(t.value).filter(e=>{const o=t.value[e];return o&&"DEFAULT"!=o})[0]),l=(0,a.computed)(()=>t.value[o.value]),n=e=>(0,a.watch)(t,e);return{sortDefinition:t,sortField:o,sortOrder:l,onSort:n}}const Lt={jobTitleName:"",jobDescription:""},Pt={"jt.jobTitleName":"ASC"};var qt={components:{"delete-confirmation":Xt},setup(){const e=(0,a.ref)({...Lt}),{sortDefinition:t,sortField:o,sortOrder:l,onSort:n}=Ut({sortDefinition:Pt}),i=(0,a.computed)(()=>({jobTitleName:e.value.jobTitleName,jobDescription:e.value.jobDescription,sortField:o.value,sortOrder:l.value})),r=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-titles"),{showPaginator:s,currentPage:d,total:c,pages:u,pageSize:m,response:p,isLoading:h,execQuery:g}=Et(r,{query:i});return n(g),{http:r,showPaginator:s,currentPage:d,isLoading:h,total:c,pages:u,pageSize:m,execQuery:g,items:p,filters:e,sortDefinition:t}},data(){return{headers:[{name:"title",slot:"title",title:this.$t("admin.job_titles"),sortField:"jt.jobTitleName",style:{flex:2}},{name:"description",cellType:"oxd-table-cell-truncate",title:this.$t("admin.job_description"),style:{flex:4}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveJobTitle")},onClickEdit(e){I("/admin/saveJobTitle/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const Ft=(0,i.A)(qt,[["render",kt]]);var zt=Ft;const jt={class:"XHRM-background-container"},Ot={class:"XHRM-card-container"};function Gt(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("file-upload-input"),m=(0,a.resolveComponent)("required-text"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",jt,[(0,a.createElementVNode)("div",Ot,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_job_title")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.jobTitle.title=e),label:e.$t("general.job_title"),rules:n.rules.title,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.jobTitle.description=e),type:"textarea",label:e.$t("admin.job_description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{newFile:n.jobTitle.newSpecification,"onUpdate:newFile":t[2]||(t[2]=e=>n.jobTitle.newSpecification=e),method:n.jobTitle.method,"onUpdate:method":t[3]||(t[3]=e=>n.jobTitle.method=e),label:e.$t("general.job_specification"),"button-label":e.$t("general.browse"),file:n.jobTitle.oldSpecification,rules:n.rules.specification,url:"admin/viewJobSpecification/attachId",hint:e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.note,"onUpdate:modelValue":t[4]||(t[4]=e=>n.jobTitle.note=e),type:"textarea",label:e.$t("general.note"),placeholder:e.$t("general.add_note"),rules:n.rules.note,"label-icon":"pencil-square"},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(h)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}o(8237);const Qt=Ee(),Kt=function(e){return"string"===typeof e?!!e&&""!==e.trim()||Qt("general.required"):"number"===typeof e?!Number.isNaN(e)||"general.required":Array.isArray(e)?!!e&&0!==e.length||Qt("general.required"):"object"===typeof e&&null!==e||Qt("general.required")},Wt=function(e){return function(t){return!t||new String(t).length<=e||Qt("general.should_be_less_n_characters",{amount:e})}},Jt=function(e="yyyy-mm-dd",t="yyyy-MM-dd"){return function(o){if(!o)return!0;const a=he(o,t);return!!a||Qt("general.should_be_a_valid_date_in_x_format",{format:e})}},Yt=function(){return function(e){if(!e)return!0;const t="yyyy-MM-dd",o=ge(new Date,t)||"",a=we(e,o,t);return a>0||Qt("recruitment.should_be_current_date_previous_date")}},Zt=function(e){if(!e)return!0;const t=he(e,"HH:mm");return!!t||Qt("general.should_be_a_valid_date_in_hh:mm_format")},eo=function(e){return function(t){return Number.isNaN(parseFloat(t))||parseFloat(t)<e||Qt("general.should_be_less_than_n",{amount:e})}},to=function(e){return""==e||/^\d+$/.test(e)&&!Number.isNaN(parseFloat(e))||Qt("general.should_be_a_number")},oo=function(e){return""==e||/^\d+$/.test(e)&&!Number.isNaN(parseFloat(e))||Qt("general.should_be_a_numeric_value")},ao=function(e){return""==e||/^\d*\.?\d*$/.test(e)&&!Number.isNaN(parseFloat(e))||Qt("general.should_be_a_number")},lo=function(e){return""==e||/^-?\d*\.?\d*$/.test(e)&&!Number.isNaN(parseFloat(e))||Qt("general.should_be_a_number")},no=function(e,t,o="yyyy-MM-dd"){return!e||!t||ve(e,t,o)},io=function(e,t,o="yyyy-MM-dd"){return!e||!t||fe(e,t,o)},ro=function(e,t,o="yyyy-MM-dd"){return!e||!t||ye(e,t,o)},so=(e,t,o={allowSameDate:!1,dateFormat:"yyyy-MM-dd"})=>a=>{const l="function"===typeof e?e():e,n="string"===typeof t?t:Qt("general.end_date_should_be_after_start_date");return o.allowSameDate?ro(a,l)||io(a,l,o.dateFormat)||n:io(a,l,o.dateFormat)||n},co=function(e,t,o="yyyy-MM-dd"){return!e||!t||1===be(e,t,o)},uo=function(e,t,o="HH:mm"){return!e||!t||-1===be(e,t,o)},mo=function(e,t,o="HH:mm"){return!e||!t||0===be(e,t,o)},po=(e,t,o={allowSameTime:!1,timeFormat:"HH:mm"})=>a=>{const l="function"===typeof e?e():e,n="string"===typeof t?t:Qt("general.end_time_should_be_after_start_time");return o.allowSameTime?mo(a,l)||uo(a,l,o.timeFormat)||n:uo(a,l,o.timeFormat)||n},ho=function(e){return function(t){return null===t||t.size&&t.size<=e||Qt("general.attachment_size_exceeded")}},go=function(e){return function(t){return null===t||t&&e.findIndex(e=>e===t.type)>-1||Qt("general.file_type_not_allowed")}},vo=function(e){return!e||/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/.test(e)||Qt("general.expected_email_address_format_not_matched")},fo=function(e){return!e||/^[0-9+\-/() ]+$/.test(e)||Qt("general.allows_phone_numbers_only")},yo=(e,t,o={allowSameDate:!1,dateFormat:"yyyy-MM-dd"})=>a=>{const l="function"===typeof e?e():e,n="string"===typeof t?t:Qt("general.start_date_should_be_before_end_date");return o.allowSameDate?ro(a,l)||no(a,l,o.dateFormat)||n:no(a,l,o.dateFormat)||n},Co=function(e){return function(t){return Number.isNaN(parseFloat(t))||parseFloat(t)<e||Qt("general.should_be_less_than_n",{amount:e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")})}},Vo=(e,t,o={allowSameTime:!1,timeFormat:"HH:mm"})=>a=>{const l="function"===typeof e?e():e,n="string"===typeof t?t:Qt("general.start_time_should_be_before_end_time");return o.allowSameTime?mo(a,l)||co(a,l,o.timeFormat)||n:co(a,l,o.timeFormat)||n},bo=function(e){return function(t){return!t||String(t).length>=e||Qt("general.should_be_least_n_characters",{amount:e})}},wo=(e,t)=>o=>{const a="function"===typeof e?e():e,l="string"===typeof t?t:Qt("general.should_be_higher_than_minimum_value");return null===a||(void 0===a||(""===a||""===a&&""===o||("0"===a||"0"===a&&"0"===o||(parseFloat(a)<parseFloat(o)||l))))},xo=(e,t)=>o=>{const a="function"===typeof e?e():e,l="string"===typeof t?t:Qt("general.should_be_lower_than_maximum_value");return null===a||null===o||(void 0===a||void 0===o||(""===a||""===o||("0"===a||"0"===o||(parseFloat(a)>parseFloat(o)||l))))},No=(e,t,o)=>a=>{const l="string"===typeof o?o:Qt("general.should_be_a_number_between_min_and_max",{min:e,max:t});return!0===to(a)&&parseFloat(a)>=e&&parseFloat(a)<=t||l},ko=function(e){return!e||(!!/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i.test(e)||Qt("general.invalid"))},_o=function(e,t=.1){return function(o){return new Promise(a=>{if(null===o||"image/svg+xml"===o.type)return a(!0);const l=new Image;l.src=`data:${o.type};base64, ${o.base64}`,l.decode().then(()=>{Math.abs(l.width/l.height-e)<t?a(!0):a(Qt("general.incorrect_dimensions"))})})}},So=function(e,t){const o="string"===typeof t?t:Qt("general.greater_than_or_equal_to_n",{minValue:e});return function(t){return null===t||""===t||(!0!==lo(t)?o:parseFloat(t)>=e||o)}},Do=function(e,t){const o="string"===typeof t?t:Qt("general.less_than_or_equal_to_n",{maxValue:e});return function(t){return null===t||""===t||(!0!==lo(t)?o:parseFloat(t)<=e||o)}},$o=function(e){return"string"!==typeof e||Qt("general.invalid")},Mo=function(e){let t;return t=/\p{L}/u.test(e)?/^([\p{L}\p{N}\p{S}\-.])+(\.?([\p{L}\p{N}]|xn--[\p{L}\p{N}-]+)+\.?)(:[0-9]+)?$/gu:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,!e||t.test(e)||Qt("general.invalid")},Eo=function(e,t,o){return function(a){return!a||/^\d+$/.test(a)&&!Number.isNaN(parseFloat(a))&&String(a).length<=e&&parseInt(a)>=t&&parseInt(a)<=o||Qt("general.enter_valid_port_between_a_to_b",{minValue:t,maxValue:o})}},Ro=function(e){return""==e||/^\d+?(?:\.\d{1,2})?$/.test(e)||Qt("claim.should_be_a_valid_number")},To={class:"XHRM-file-current"},Bo={key:0,class:"XHRM-file-options"},Io={key:1,class:"XHRM-file-input"};function Ao(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-input-group");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[i.fileSelected?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,label:o.label},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",To,[(0,a.createElementVNode)("div",{class:"XHRM-file-preview",onClick:t[0]||(t[0]=(...e)=>i.downloadFile&&i.downloadFile(...e))},[(0,a.createVNode)(r,{class:"XHRM-file-icon",name:"file-earmark-text"}),(0,a.createVNode)(s,{class:"XHRM-file-name",tag:"p",title:o.file.filename},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.file.filename)+" ",1),(0,a.createVNode)(r,{class:"XHRM-file-download",name:"download"})]),_:1},8,["title"])]),o.disabled?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",Bo,[(0,a.createVNode)(d,{type:"radio","option-label":e.$t("general.keep_current"),value:"keepCurrent","model-value":o.method,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:method",t))},null,8,["option-label","model-value"]),o.deletable?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,type:"radio","option-label":e.$t("general.delete_current"),value:"deleteCurrent","model-value":o.method,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:method",t))},null,8,["option-label","model-value"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{type:"radio","option-label":e.$t("general.replace_current"),value:"replaceCurrent","model-value":o.method,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$emit("update:method",t))},null,8,["option-label","model-value"])]))])]),_:1},8,["label"])):(0,a.createCommentVNode)("",!0),"replaceCurrent"!==o.method&&i.fileSelected?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",Io,[(0,a.createVNode)(d,(0,a.mergeProps)(e.$attrs,{type:"file",label:i.fieldLabel,"model-value":o.newFile,disabled:o.disabled,placeholder:e.$t("general.no_file_selected"),"onUpdate:modelValue":t[4]||(t[4]=t=>e.$emit("update:newFile",t))}),null,16,["label","model-value","disabled","placeholder"]),(0,a.createVNode)(s,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.hint),1)]),_:1})]))],64)}var Ho={name:"FileUploadInput",components:{"oxd-icon":X.dp},inheritAttrs:!1,props:{label:{type:String,default:""},hint:{type:String,default:""},url:{type:[String,Function],required:!0},method:{type:String,required:!0},file:{type:Object,required:!1,default:()=>null},newFile:{type:Object,required:!1,default:()=>null},disabled:{type:Boolean,default:!1},deletable:{type:Boolean,default:!0}},emits:["update:method","update:newFile"],computed:{fileSelected(){return this.file&&Object.keys(this.file).length>0},fieldLabel(){return"replaceCurrent"===this.method&&this.fileSelected?this.$t("general.upload_n_file",{fileName:this.label}):this.label}},methods:{downloadFile(){let e;if("function"===typeof this.url)e=this.url(this.$props);else{if(!this.file?.id)return;e=`${window.appGlobal.baseUrl}/${this.url}/${this.file.id}`}window.open(e,"_blank")}}};const Xo=(0,i.A)(Ho,[["render",Ao],["__scopeId","data-v-864bc308"]]);var Uo=Xo;function Lo(e,t={debounce:!0,debounceOffset:500}){const o=Ee(),a=(a,l,n={translateKey:"general.already_exists"})=>{const i=t=>new Promise((i,r)=>{t.trim()?e.request({method:"GET",url:"api/v2/core/validation/unique",params:{value:t,entityName:a,attributeName:l,entityId:n.entityId,matchByField:n.matchByField,matchByValue:n.matchByValue}}).then(e=>{const{data:t}=e.data;!0===t.valid?i(!0):i(o(n.translateKey??"general.already_exists"))}).catch(e=>r(e)):i(!0)});return t.debounce?(0,X.Ld)(i,t.debounceOffset):i};return{createUniqueValidator:a}}const Po={title:"",description:"",oldSpecification:"",newSpecification:null,method:"keepCurrent",note:""};var qo={components:{"file-upload-input":Uo},props:{jobTitleId:{type:String,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-titles"),{createUniqueValidator:o}=Lo(t),a=o("JobTitle","jobTitleName",{entityId:e.jobTitleId,matchByField:"isDeleted",matchByValue:"false"});return{http:t,jobTitleUniqueValidation:a}},data(){return{isLoading:!1,jobTitle:{...Po},rules:{title:[Kt,this.jobTitleUniqueValidation,Wt(100)],description:[Wt(400)],specification:[e=>"replaceCurrent"!=this.jobTitle.method||Kt(e),go(this.allowedFileTypes),ho(this.maxFileSize)],note:[Wt(400)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},created(){this.isLoading=!0,this.http.get(this.jobTitleId).then(e=>{const{data:t}=e.data;this.jobTitle.title=t.title,this.jobTitle.description=t.description,this.jobTitle.note=t.note,this.jobTitle.oldSpecification=t.jobSpecification?.id?t.jobSpecification:null,this.jobTitle.newSpecification=null,this.jobTitle.method="keepCurrent"}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/admin/viewJobTitleList")},onSave(){this.isLoading=!0,this.http.update(this.jobTitleId,{title:this.jobTitle.title,description:this.jobTitle.description,note:this.jobTitle.note,currentJobSpecification:this.jobTitle.oldSpecification?this.jobTitle.method:void 0,specification:this.jobTitle.newSpecification?this.jobTitle.newSpecification:void 0}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})}}};const Fo=(0,i.A)(qo,[["render",Gt]]);var zo=Fo;const jo={class:"XHRM-background-container"},Oo={class:"XHRM-card-container"};function Go(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",jo,[(0,a.createElementVNode)("div",Oo,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_job_title")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.jobTitle.title=e),label:e.$t("general.job_title"),rules:n.rules.title,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.jobTitle.description=e),type:"textarea",label:e.$t("admin.job_description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.specification,"onUpdate:modelValue":t[2]||(t[2]=e=>n.jobTitle.specification=e),type:"file",label:e.$t("general.job_specification"),"button-label":e.$t("general.browse"),rules:n.rules.specification},null,8,["modelValue","label","button-label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.jobTitle.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.jobTitle.note=e),type:"textarea",label:e.$t("general.note"),placeholder:e.$t("general.add_note"),"label-icon":"pencil-square",rules:n.rules.note},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Qo={title:"",description:"",specification:null,note:""};var Ko={props:{allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-titles"),{createUniqueValidator:t}=Lo(e),o=t("JobTitle","jobTitleName",{matchByField:"isDeleted",matchByValue:"false"});return{http:e,jobTitleUniqueValidation:o}},data(){return{isLoading:!1,jobTitle:{...Qo},rules:{title:[Kt,this.jobTitleUniqueValidation,Wt(100)],description:[Wt(400)],specification:[go(this.allowedFileTypes),ho(this.maxFileSize)],note:[Wt(400)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onCancel(){I("/admin/viewJobTitleList")},onSave(){this.isLoading=!0,this.http.create({...this.jobTitle}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const Wo=(0,i.A)(Ko,[["render",Go]]);var Jo=Wo;const Yo={class:"XHRM-background-container"},Zo={class:"XHRM-paper-container"},ea={class:"XHRM-header-container"},ta={class:"XHRM-container"},oa={class:"XHRM-bottom-container"};function aa(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Yo,[(0,a.createElementVNode)("div",Zo,[(0,a.createElementVNode)("div",ea,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.job_categories")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",ta,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",oa,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var la={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-categories"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.job_category"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveJobCategory")},onClickEdit(e){I("/admin/saveJobCategory/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const na=(0,i.A)(la,[["render",aa]]);var ia=na;const ra={class:"XHRM-background-container"},sa={class:"XHRM-card-container"};function da(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ra,[(0,a.createElementVNode)("div",sa,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_job_category")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.category.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.category.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var ca={props:{jobCategoryId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-categories"),{createUniqueValidator:o}=Lo(t),a=o("JobCategory","name",{entityId:e.jobCategoryId});return{http:t,jobCategoryUniqueValidation:a}},data(){return{isLoading:!1,category:{id:"",name:""},rules:{name:[Kt,Wt(50),this.jobCategoryUniqueValidation]},errors:[]}},created(){this.isLoading=!0,this.http.get(this.jobCategoryId).then(e=>{const{data:t}=e.data;this.category.id=t.id,this.category.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.jobCategoryId,{name:this.category.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/jobCategory")}}};const ua=(0,i.A)(ca,[["render",da]]);var ma=ua;const pa={class:"XHRM-background-container"},ha={class:"XHRM-card-container"};function ga(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",pa,[(0,a.createElementVNode)("div",ha,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_job_category")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.category.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.category.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var va={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-categories"),{createUniqueValidator:t}=Lo(e),o=t("JobCategory","name");return{http:e,jobCategoryUniqueValidation:o}},data(){return{isLoading:!1,category:{id:"",name:""},rules:{name:[Kt,Wt(50),this.jobCategoryUniqueValidation]},errors:[]}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.category.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/jobCategory")}}};const fa=(0,i.A)(va,[["render",ga]]);var ya=fa;const Ca={class:"XHRM-background-container"},Va={class:"XHRM-paper-container"},ba={class:"XHRM-header-container"},wa={class:"XHRM-container"},xa={class:"XHRM-bottom-container"};function Na(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("table-header"),y=(0,a.resolveComponent)("oxd-card-table"),C=(0,a.resolveComponent)("oxd-pagination"),V=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ca,[(0,a.createVNode)(v,{"filter-title":e.$t("admin.system_users")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.username,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.username=e),label:e.$t("general.username")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.userRoleId,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.userRoleId=e),type:"select",label:e.$t("general.user_role"),options:n.userRoles},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.empNumber,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.empNumber=e),rules:n.rules.employee},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.status,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.status=e),type:"select",label:e.$t("general.status"),options:n.userStatuses},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",Va,[(0,a.createElementVNode)("div",ba,[(0,a.createVNode)(p,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(f,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",wa,[(0,a.createVNode)(y,{selected:n.checkedItems,"onUpdate:selected":t[4]||(t[4]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[5]||(t[5]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",xa,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,current:l.currentPage,"onUpdate:current":t[6]||(t[6]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(V,{ref:"deleteDialog"},null,512)])}const ka={key:0,class:"past-employee-tag"};function _a(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",label:e.$t("general.employee_name"),clear:!1,"create-options":i.loadEmployees},{afterSelected:(0,a.withCtx)(({data:t})=>[t.isPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.past_employee")),1)],64)):(0,a.createCommentVNode)("",!0)]),option:(0,a.withCtx)(({data:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.label),1),t.isPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)("div",ka,(0,a.toDisplayString)(e.$t("general.past_employee")),1)):(0,a.createCommentVNode)("",!0)]),_:1},8,["label","create-options"])}var Sa={name:"EmployeeAutocomplete",props:{params:{type:Object,default:()=>({})},apiPath:{type:String,default:"/api/v2/pim/employees"}},setup(e){const t=new H(window.appGlobal.baseUrl,e.apiPath);return{http:t}},methods:{async loadEmployees(e){return new Promise(t=>{e.trim()&&e.length<100?this.http.getAll({nameOrId:e.trim(),...this.params}).then(({data:e})=>{t(e.data.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,_employee:e,isPastEmployee:!!e.terminationId})))}):t([])})}}};const Da=(0,i.A)(Sa,[["render",_a],["__scopeId","data-v-69ab8eec"]]);var $a=Da;function Ma(){const{$t:e}=Ie(),t=(t,o)=>{if("Purged"===t.firstName&&"Employee"===t.lastName)return e("general.purged_employee");const a=o?.includeMiddle,l=o?.excludePastEmpTag,n="boolean"===typeof a&&a&&"string"===typeof t.middleName?` ${t.middleName} `:" ";if(t.terminationId){const o="undefined"===typeof l?` ${e("general.past_employee")}`:l?"":` ${e("general.past_employee")}`;return`${t.firstName}${n}${t.lastName}${o}`}return`${t.firstName}${n}${t.lastName}`};return{$tEmpName:t}}const Ea={username:"",userRoleId:null,empNumber:null,status:null},Ra={"u.userName":"ASC","r.displayName":"ASC","e.firstName":"ASC","u.status":"DEFAULT"};var Ta={components:{"delete-confirmation":Xt,"employee-autocomplete":$a},props:{unselectableIds:{type:Array,default:()=>[]}},setup(e){const{$t:t}=Ie(),{$tEmpName:o}=Ma(),l=a=>a.map(a=>{const l=e.unselectableIds.findIndex(e=>e==a.id);return{id:a.id,userName:a.userName,role:"Admin"===a.userRole?.displayName?t("general.admin"):t("general.ess"),empName:o(a.employee,{includeMiddle:!1}),status:a.status?t("general.enabled"):t("general.disabled"),isSelectable:-1===l}}),n=(0,a.ref)({...Ea}),{sortDefinition:i,sortField:r,sortOrder:s,onSort:d}=Ut({sortDefinition:Ra}),c=(0,a.computed)(()=>({username:n.value.username,userRoleId:n.value.userRoleId?.id,empNumber:n.value.empNumber?.id,status:n.value.status?.id,sortField:r.value,sortOrder:s.value})),u=new H(window.appGlobal.baseUrl,"/api/v2/admin/users"),{showPaginator:m,currentPage:p,total:h,pages:g,pageSize:v,response:f,isLoading:y,execQuery:C}=Et(u,{query:c,normalizer:l});return d(C),{http:u,showPaginator:m,currentPage:p,isLoading:y,total:h,pages:g,pageSize:v,execQuery:C,items:f,filters:n,sortDefinition:i}},data(){return{headers:[{name:"userName",title:this.$t("general.username"),sortField:"u.userName",style:{flex:1}},{name:"role",title:this.$t("general.user_role"),style:{flex:1},sortField:"r.displayName"},{name:"empName",slot:"title",title:this.$t("general.employee_name"),sortField:"e.firstName",style:{flex:1}},{name:"status",title:this.$t("general.status"),sortField:"u.status",style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],userRoles:[{id:1,label:this.$t("general.admin")},{id:2,label:this.$t("general.ess")}],userStatuses:[{id:1,label:this.$t("general.enabled")},{id:0,label:this.$t("general.disabled")}],checkedItems:[],rules:{employee:[Wt(100),$o]}}},methods:{onClickAdd(){I("/admin/saveSystemUser")},onClickEdit(e){I("/admin/saveSystemUser/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.cannotDelete();this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...Ea},this.filterItems()}}};const Ba=(0,i.A)(Ta,[["render",Na]]);var Ia=Ba;const Aa={class:"XHRM-background-container"},Ha={class:"XHRM-card-container"};function Xa(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("employee-autocomplete"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("password-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Aa,[(0,a.createElementVNode)("div",Ha,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_user")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.role,"onUpdate:modelValue":t[0]||(t[0]=e=>n.user.role=e),type:"select",label:e.$t("general.user_role"),rules:n.rules.role,options:n.userRoles,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.user.employee,"onUpdate:modelValue":t[1]||(t[1]=e=>n.user.employee=e),rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.user.status=e),type:"select",label:e.$t("general.status"),rules:n.rules.status,options:n.userStatuses,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.username,"onUpdate:modelValue":t[3]||(t[3]=e=>n.user.username=e),label:e.$t("general.username"),rules:n.rules.username,required:"",autocomplete:"off"},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,{password:n.user.password,"onUpdate:password":t[4]||(t[4]=e=>n.user.password=e),passwordConfirm:n.user.passwordConfirm,"onUpdate:passwordConfirm":t[5]||(t[5]=e=>n.user.passwordConfirm=e),"is-password-required":o.isPasswordRequired},null,8,["password","passwordConfirm","is-password-required"]),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}function Ua(e,t,o,l,n,i){const r=(0,a.resolveComponent)("password-strength-indicator"),s=(0,a.resolveComponent)("oxd-input-field"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row");return(0,a.openBlock)(),(0,a.createBlock)(m,{class:"user-password-row"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"user-password-cell"},{default:(0,a.withCtx)(()=>[o.password?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,"password-strength":l.passwordStrength},null,8,["password-strength"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s,{type:"password",autocomplete:"off",required:o.isPasswordRequired,"model-value":o.password,rules:n.rules.password,label:e.$t("general.password"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:password",t))},null,8,["required","model-value","rules","label"]),(0,a.createVNode)(d,{class:"user-password-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.password_strength_message")),1)]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{ref:"passwordConfirm",type:"password",autocomplete:"off",required:o.isPasswordRequired,"model-value":o.passwordConfirm,rules:n.rules.passwordConfirm,label:e.$t("general.confirm_password"),"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:passwordConfirm",t))},null,8,["required","model-value","rules","label"])]),_:1})]),_:1})]),_:1})}function La(e){const t=(0,a.ref)(0),o=o=>new Promise(a=>{""!==o.trim()?e.request({method:"POST",url:"/api/v2/auth/public/validation/password",data:{password:o}}).then(e=>{const{data:o,meta:l}=e.data;t.value=l?.strength||0,Array.isArray(o?.messages)&&o.messages.length>0?a(o.messages[0]):a(!0)}):(t.value=0,a(!0))});return{passwordStrength:t,validatePassword:o}}function Pa(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-chip");return(0,a.openBlock)(),(0,a.createBlock)(r,{class:(0,a.normalizeClass)(i.chipClasses),label:i.passwordStrengthLabel},null,8,["class","label"])}var qa={name:"PasswordStrengthIndicator",components:{"oxd-chip":X.E3},props:{passwordStrength:{type:Number,required:!0}},computed:{passwordStrengthLabel(){switch(this.passwordStrength){case 1:return this.$t("general.weak");case 2:return this.$t("general.better");case 3:return this.$t("general.strong");case 4:return this.$t("general.strongest");default:return this.$t("general.very_weak")}},chipClasses(){return{"XHRM-password-chip":!0,"--strength-better":2===this.passwordStrength,"--strength-strong":3===this.passwordStrength,"--strength-strongest":4===this.passwordStrength}}}};const Fa=(0,i.A)(qa,[["render",Pa],["__scopeId","data-v-06e41997"]]);var za=Fa,ja={name:"PasswordInput",components:{"password-strength-indicator":za},props:{password:{type:String,required:!0},passwordConfirm:{type:String,required:!0},isPasswordRequired:{type:Boolean,default:!0}},emits:["update:password","update:passwordConfirm"],setup(){const e=new H(window.appGlobal.baseUrl,""),{passwordStrength:t,validatePassword:o}=La(e);return{passwordStrength:t,validatePassword:o}},data(){return{rules:{password:[e=>!this.isPasswordRequired||Kt(e),Wt(64),(0,X.Ld)(this.validatePassword,500)],passwordConfirm:[e=>!(this.isPasswordRequired||this.password.length>0)||(!!e&&e===this.password||this.$t("general.passwords_do_not_match"))]}}},watch:{password(e){(this.passwordConfirm&&e!==this.passwordConfirm||this.passwordConfirm&&e===this.passwordConfirm)&&this.$nextTick(this.$refs.passwordConfirm.triggerUpdate)}}};const Oa=(0,i.A)(ja,[["render",Ua],["__scopeId","data-v-38724c72"]]);var Ga=Oa;const Qa={username:"",role:null,employee:null,status:null,password:"",passwordConfirm:""};var Ka={components:{"employee-autocomplete":$a,"password-input":Ga},props:{isPasswordRequired:{type:Boolean,default:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/users");return e.setIgnorePath("/api/v2/admin/validation/user-name"),{http:e}},data(){return{isLoading:!1,user:{...Qa},rules:{username:[Kt,bo(5),Wt(40),(0,X.Ld)(this.validateUserName,500)],role:[Kt],employee:[Kt,$o],status:[Kt]},userRoles:[{id:1,label:this.$t("general.admin")},{id:2,label:this.$t("general.ess")}],userStatuses:[{id:1,label:this.$t("general.enabled")},{id:2,label:this.$t("general.disabled")}]}},methods:{onCancel(){I("/admin/viewSystemUsers")},onSave(){this.isLoading=!0,this.http.create({username:this.user.username.trim(),password:this.user.password,status:this.user.status&&1===this.user.status.id,userRoleId:this.user.role?.id,empNumber:this.user.employee?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},validateUserName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/admin/validation/user-name",params:{userName:this.user.username.trim()}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const Wa=(0,i.A)(Ka,[["render",Xa]]);var Ja=Wa;const Ya={class:"XHRM-background-container"},Za={class:"XHRM-card-container"};function el(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("employee-autocomplete"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("password-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ya,[(0,a.createElementVNode)("div",Za,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_user")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.role,"onUpdate:modelValue":t[0]||(t[0]=e=>n.user.role=e),type:"select",label:e.$t("general.user_role"),rules:n.rules.role,options:n.userRoles,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.user.employee,"onUpdate:modelValue":t[1]||(t[1]=e=>n.user.employee=e),rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.user.status=e),type:"select",label:e.$t("general.status"),rules:n.rules.status,options:n.userStatuses,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.username,"onUpdate:modelValue":t[3]||(t[3]=e=>n.user.username=e),label:e.$t("general.username"),rules:n.rules.username,required:"",autocomplete:"off"},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.user.changePassword,"onUpdate:modelValue":t[4]||(t[4]=e=>n.user.changePassword=e),type:"checkbox",value:"true","true-value":!0,"false-value":!1,"option-label":"Yes",label:e.$t("general.change_password_question")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),n.user.changePassword?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0,password:n.user.password,"onUpdate:password":t[5]||(t[5]=e=>n.user.password=e),passwordConfirm:n.user.passwordConfirm,"onUpdate:passwordConfirm":t[6]||(t[6]=e=>n.user.passwordConfirm=e),"is-password-required":o.isPasswordRequired},null,8,["password","passwordConfirm","is-password-required"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}o(116);const tl={id:"",username:"",role:null,employee:null,status:null,changePassword:!1,password:"",passwordConfirm:""};var ol={components:{"employee-autocomplete":$a,"password-input":Ga},props:{systemUserId:{type:Number,required:!0},isPasswordRequired:{type:Boolean,default:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/users");return e.setIgnorePath("/api/v2/admin/validation/user-name"),{http:e}},data(){return{isLoading:!1,user:{...tl},rules:{username:[Kt,bo(5),Wt(40),(0,X.Ld)(this.validateUserName,500)],role:[Kt],employee:[Kt,$o],status:[Kt]},userRoles:[{id:1,label:this.$t("general.admin")},{id:2,label:this.$t("general.ess")}],userStatuses:[{id:1,label:this.$t("general.enabled")},{id:2,label:this.$t("general.disabled")}]}},beforeMount(){this.isLoading=!0,this.http.get(this.systemUserId).then(e=>{const{data:t}=e.data;this.user.id=t.id,this.user.username=t.userName,this.user.role=this.userRoles.find(e=>e.id===t.userRole.id),this.user.employee={id:t.employee.empNumber,label:`${t.employee.firstName} ${t.employee.middleName} ${t.employee.lastName}`,isPastEmployee:t.employee.terminationId},t.status?this.user.status={id:1,label:this.$t("general.enabled")}:this.user.status={id:2,label:this.$t("general.disabled")}}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/admin/viewSystemUsers")},onSave(){this.isLoading=!0,this.http.update(this.systemUserId,{username:this.user.username.trim(),password:this.user.password,status:this.user.status&&1===this.user.status.id,userRoleId:this.user.role?.id,empNumber:this.user.employee?.id,changePassword:this.user.changePassword}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},validateUserName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/admin/validation/user-name",params:{userName:this.user.username.trim(),userId:this.systemUserId}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const al=(0,i.A)(ol,[["render",el]]);var ll=al;const nl={class:"XHRM-background-container"},il={class:"XHRM-paper-container"},rl={class:"XHRM-header-container"},sl={key:1,class:"org-root-container"},dl={class:"org-container"},cl={key:0,class:"loader"},ul={class:"org-name"},ml={key:0,class:"org-action"},pl=["onClick"],hl=["onClick"],gl=["onClick"];function vl(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-switch-input"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("oxd-loading-spinner"),m=(0,a.resolveComponent)("oxd-icon-button"),p=(0,a.resolveComponent)("oxd-dropdown"),h=(0,a.resolveComponent)("oxd-sheet"),g=(0,a.resolveComponent)("oxd-tree-view"),v=(0,a.resolveComponent)("delete-confirmation"),f=(0,a.resolveComponent)("save-org-unit"),y=(0,a.resolveComponent)("edit-org-unit");return(0,a.openBlock)(),(0,a.createElementBlock)("div",nl,[(0,a.createElementVNode)("div",il,[(0,a.createElementVNode)("div",rl,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.organization_structure")),1)]),_:1}),n.isLoading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,modelValue:n.editable,"onUpdate:modelValue":t[0]||(t[0]=e=>n.editable=e),"option-label":e.$t("general.edit"),"label-position":"left"},null,8,["modelValue","option-label"]))]),n.isLoading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-horizontal-margin XHRM-clear-margins"})),n.isLoading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",sl,[(0,a.createVNode)(r,{tag:"p",class:(0,a.normalizeClass)({"--parent":n.data&&0!=n.data.children})},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.data.name),1)]),_:1},8,["class"]),(0,a.withDirectives)((0,a.createVNode)(c,{class:"org-structure-add",label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:t[1]||(t[1]=e=>i.onAddOrglevel(n.data))},null,8,["label"]),[[a.vShow,n.editable]])])),(0,a.createElementVNode)("div",dl,[n.isLoading?((0,a.openBlock)(),(0,a.createElementBlock)("div",cl,[(0,a.createVNode)(u)])):((0,a.openBlock)(),(0,a.createBlock)(g,{key:1,data:n.data,open:!0,"show-root":!1,class:"org-structure"},{content:(0,a.withCtx)(({nodeData:t})=>[(0,a.createVNode)(h,{type:"pastel-white",class:(0,a.normalizeClass)({"org-structure-card":!0,"--edit":n.editable})},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",ul,(0,a.toDisplayString)(t.unitId?`${t.unitId}: ${t.name}`:`${t.name}`),1),n.editable?((0,a.openBlock)(),(0,a.createElementBlock)("div",ml,[l.isMobile?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0},{content:(0,a.withCtx)(()=>[(0,a.createElementVNode)("li",{class:"org-action-description",onClick:e=>i.onDelete(t)},[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.delete")),1)]),_:1})],8,pl),(0,a.createElementVNode)("li",{class:"org-action-description",onClick:e=>i.onEditOrglevel(t)},[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit")),1)]),_:1})],8,hl),(0,a.createElementVNode)("li",{class:"org-action-description",onClick:e=>i.onAddOrglevel(t)},[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add")),1)]),_:1})],8,gl)]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{name:"three-dots","with-container":!0})]),_:2},1024)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createVNode)(m,{class:"org-action-icon",name:"trash-fill",role:"none",onClick:e=>i.onDelete(t)},null,8,["onClick"]),(0,a.createVNode)(m,{class:"org-action-icon",name:"pencil-fill",role:"none",onClick:e=>i.onEditOrglevel(t)},null,8,["onClick"]),(0,a.createVNode)(m,{class:"org-action-icon",name:"plus",role:"none",onClick:e=>i.onAddOrglevel(t)},null,8,["onClick"])],64))])):(0,a.createCommentVNode)("",!0)]),_:2},1032,["class"])]),_:1},8,["data"]))])]),(0,a.createVNode)(v,{ref:"deleteDialog"},null,512),n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,data:n.saveModalState,onClose:i.onSaveModalClose},null,8,["data","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(y,{key:1,data:n.editModalState,onClose:i.onEditModalClose},null,8,["data","onClose"])):(0,a.createCommentVNode)("",!0)])}const fl={class:"XHRM-modal-header"};function yl(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",fl,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_organization_unit")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.orgUnit.unitId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.orgUnit.unitId=e),label:e.$t("admin.unit_id"),rules:n.rules.unitId},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.orgUnit.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.orgUnit.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.orgUnit.description,"onUpdate:modelValue":t[2]||(t[2]=e=>n.orgUnit.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"level-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.this_unit_will_be_added_under"))+" ",1),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(o.data?.unitId?`${o.data.unitId}: ${o.data?.name}`:`${o.data?.name}`),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const Cl={unitId:"",name:"",description:""};var Vl={name:"SaveOrgUnit",components:{"oxd-dialog":X.KB},props:{data:{type:Object,default:()=>({})}},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/subunits");return{http:e}},data(){return{isLoading:!1,orgUnit:{...Cl},rules:{unitId:[Wt(100)],name:[Kt,Wt(100)],description:[Wt(400)]}}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;t&&this.rules.name.push(e=>{const o=t.findIndex(t=>String(t.name).toLowerCase()==String(e).toLowerCase());return!(o>-1)||this.$t("admin.organization_unit_name_should_be_unique")})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({...this.orgUnit,parentId:this.data?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.orgUnit={...Cl},this.$emit("close",!0)}}};const bl=(0,i.A)(Vl,[["render",yl],["__scopeId","data-v-1d26f030"]]);var wl=bl;const xl={class:"XHRM-modal-header"};function Nl(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",xl,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_organization_unit")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.orgUnit.unitId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.orgUnit.unitId=e),label:e.$t("admin.unit_id"),rules:n.rules.unitId},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.orgUnit.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.orgUnit.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.orgUnit.description,"onUpdate:modelValue":t[2]||(t[2]=e=>n.orgUnit.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const kl={unitId:"",name:"",description:""};var _l={name:"EditOrgUnit",components:{"oxd-dialog":X.KB},props:{data:{type:Object,default:()=>({})}},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/subunits");return{http:e}},data(){return{isLoading:!1,orgUnit:{...kl},rules:{unitId:[Wt(100)],name:[Kt,Wt(100)],description:[Wt(400)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;return this.orgUnit.name=t.name,this.orgUnit.description=t.description,this.orgUnit.unitId=t.unitId,this.http.getAll()}).then(e=>{const{data:t}=e.data;t&&this.rules.name.push(e=>{const o=t.findIndex(t=>String(t.name).toLowerCase()==String(e).toLowerCase());if(o>-1){const{id:e}=t[o];return e==this.data.id||this.$t("admin.organization_unit_name_should_be_unique")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.orgUnit}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Sl=(0,i.A)(_l,[["render",Nl]]);var Dl=Sl,$l={components:{"oxd-sheet":X.tg,"save-org-unit":wl,"edit-org-unit":Dl,"oxd-tree-view":X.H6,"oxd-dropdown":X.EL,"oxd-loading-spinner":X.VJ,"oxd-switch-input":X.Ay,"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/subunits"),t=(0,X.Qs)(),o=(0,a.computed)(()=>!(t.screenType===X.Xr.DEVICE_LG||t.screenType===X.Xr.DEVICE_XL));return{http:e,isMobile:o}},data(){return{isLoading:!1,editable:!1,showSaveModal:!1,saveModalState:null,showEditModal:!1,editModalState:null,data:{}}},created(){this.fetchOrgStructure()},methods:{onDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&(this.isLoading=!0,this.http.delete(e.id).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.fetchOrgStructure()}))})},onAddOrglevel(e){this.editable&&(this.saveModalState=e,this.showSaveModal=!0)},onEditOrglevel(e){this.editable&&(this.editModalState=e,this.showEditModal=!0)},onSaveModalClose(){this.saveModalState=null,this.showSaveModal=!1,this.fetchOrgStructure()},onEditModalClose(){this.editModalState=null,this.showEditModal=!1,this.fetchOrgStructure()},fetchOrgStructure(){this.isLoading=!0,this.http.getAll({mode:"tree"}).then(e=>{const{data:t}=e.data;this.data=t[0]}).finally(()=>{this.isLoading=!1})}}};const Ml=(0,i.A)($l,[["render",vl],["__scopeId","data-v-41f2574d"]]);var El=Ml;const Rl={class:"XHRM-background-container"},Tl={class:"XHRM-card-container"};function Bl(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Rl,[(0,a.createElementVNode)("div",Tl,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_employment_status")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.employmentStatus.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employmentStatus.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Il={props:{employmentStatusId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/employment-statuses"),{createUniqueValidator:o}=Lo(t),a=o("EmploymentStatus","name",{entityId:e.employmentStatusId});return{http:t,employmentStatusValidation:a}},data(){return{isLoading:!1,employmentStatus:{id:"",name:""},rules:{name:[Kt,this.employmentStatusValidation,Wt(50)]}}},created(){this.isLoading=!0,this.http.get(this.employmentStatusId).then(e=>{const{data:t}=e.data;this.employmentStatus.id=t.id,this.employmentStatus.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.employmentStatusId,{name:this.employmentStatus.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/employmentStatus")}}};const Al=(0,i.A)(Il,[["render",Bl]]);var Hl=Al;const Xl={class:"XHRM-background-container"},Ul={class:"XHRM-paper-container"},Ll={class:"XHRM-header-container"},Pl={class:"XHRM-container"},ql={class:"XHRM-bottom-container"};function Fl(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Xl,[(0,a.createElementVNode)("div",Ul,[(0,a.createElementVNode)("div",Ll,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.employment_status")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Pl,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",ql,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var zl={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/employment-statuses"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.employment_status"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveEmploymentStatus")},onClickEdit(e){I("/admin/saveEmploymentStatus/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const jl=(0,i.A)(zl,[["render",Fl]]);var Ol=jl;const Gl={class:"XHRM-background-container"},Ql={class:"XHRM-card-container"};function Kl(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Gl,[(0,a.createElementVNode)("div",Ql,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_employment_status")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.employmentStatus.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employmentStatus.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Wl={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/employment-statuses"),{createUniqueValidator:t}=Lo(e),o=t("EmploymentStatus","name");return{http:e,employmentStatusValidation:o}},data(){return{isLoading:!1,employmentStatus:{id:"",name:""},rules:{name:[Kt,this.employmentStatusValidation,Wt(50)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.employmentStatus.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/employmentStatus")}}};const Jl=(0,i.A)(Wl,[["render",Kl]]);var Yl=Jl;const Zl={class:"XHRM-background-container"},en={class:"XHRM-paper-container"},tn={class:"XHRM-header-container"},on={class:"XHRM-container"},an={class:"XHRM-bottom-container"};function ln(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Zl,[(0,a.createElementVNode)("div",en,[(0,a.createElementVNode)("div",tn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.education")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",on,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",an,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var nn={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/educations"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.level"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveEducation")},onClickEdit(e){I("/admin/saveEducation/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const rn=(0,i.A)(nn,[["render",ln]]);var sn=rn;const dn={class:"XHRM-background-container"},cn={class:"XHRM-card-container"};function un(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",dn,[(0,a.createElementVNode)("div",cn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_education")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.qualification.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.qualification.name=e),label:e.$t("general.level"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var mn={props:{educationId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/educations"),{createUniqueValidator:o}=Lo(t),a=o("Education","name",{entityId:e.educationId});return{http:t,educationUniqueValidation:a}},data(){return{isLoading:!1,qualification:{id:"",name:""},rules:{name:[Kt,this.educationUniqueValidation,Wt(100)]}}},created(){this.isLoading=!0,this.http.get(this.educationId).then(e=>{const{data:t}=e.data;this.qualification.id=t.id,this.qualification.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.educationId,{name:this.qualification.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/viewEducation")}}};const pn=(0,i.A)(mn,[["render",un]]);var hn=pn;const gn={class:"XHRM-background-container"},vn={class:"XHRM-card-container"};function fn(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",gn,[(0,a.createElementVNode)("div",vn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_education")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.qualification.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.qualification.name=e),label:e.$t("general.level"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var yn={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/educations"),{createUniqueValidator:t}=Lo(e),o=t("Education","name");return{http:e,educationUniqueValidation:o}},data(){return{isLoading:!1,qualification:{id:"",name:""},rules:{name:[Kt,this.educationUniqueValidation,Wt(100)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.qualification.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/viewEducation")}}};const Cn=(0,i.A)(yn,[["render",fn]]);var Vn=Cn;const bn={class:"XHRM-background-container"},wn={class:"XHRM-paper-container"},xn={class:"XHRM-header-container"},Nn={class:"XHRM-container"},kn={class:"XHRM-bottom-container"};function _n(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bn,[(0,a.createElementVNode)("div",wn,[(0,a.createElementVNode)("div",xn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.skills")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Nn,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",kn,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var Sn={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/skills"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:2}},{name:"description",title:this.$t("general.description"),style:{flex:4}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveSkills")},onClickEdit(e){I("/admin/saveSkills/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const Dn=(0,i.A)(Sn,[["render",_n]]);var $n=Dn;const Mn={class:"XHRM-background-container"},En={class:"XHRM-card-container"};function Rn(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Mn,[(0,a.createElementVNode)("div",En,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_skill")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.skill.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.skill.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Tn={id:"",name:"",description:""};var Bn={props:{qualificationSkillId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/skills"),{createUniqueValidator:o}=Lo(t),a=o("Skill","name",{entityId:e.qualificationSkillId});return{http:t,skillUniqueValidation:a}},data(){return{isLoading:!1,skill:{...Tn},rules:{name:[Kt,Wt(120),this.skillUniqueValidation],description:[Wt(400)]}}},created(){this.isLoading=!0,this.http.get(this.qualificationSkillId).then(e=>{const{data:t}=e.data;this.skill.id=t.id,this.skill.name=t.name,this.skill.description=t.description}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.qualificationSkillId,{name:this.skill.name,description:this.skill.description}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/viewSkills")}}};const In=(0,i.A)(Bn,[["render",Rn]]);var An=In;const Hn={class:"XHRM-background-container"},Xn={class:"XHRM-card-container"};function Un(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Hn,[(0,a.createElementVNode)("div",Xn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_skill")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.skill.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.skill.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Ln={id:"",name:"",description:""};var Pn={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/skills"),{createUniqueValidator:t}=Lo(e),o=t("Skill","name");return{http:e,skillUniqueValidation:o}},data(){return{isLoading:!1,skill:{...Ln},rules:{name:[Kt,Wt(120),this.skillUniqueValidation],description:[Wt(400)]},errors:[]}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.skill.name,description:this.skill.description}).then(()=>this.$toast.saveSuccess()).then(()=>{this.skill.name="",this.skill.description="",this.onCancel()})},onCancel(){I("/admin/viewSkills")}}};const qn=(0,i.A)(Pn,[["render",Un]]);var Fn=qn;const zn={class:"XHRM-background-container"},jn={class:"XHRM-card-container"};function On(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zn,[(0,a.createElementVNode)("div",jn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_license")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.license.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.license.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Gn={props:{licenseId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/licenses"),{createUniqueValidator:o}=Lo(t),a=o("License","name",{entityId:e.licenseId});return{http:t,licenseUniqueValidation:a}},data(){return{isLoading:!1,license:{id:"",name:""},rules:{name:[Kt,Wt(100),this.licenseUniqueValidation]}}},created(){this.isLoading=!0,this.http.get(this.licenseId).then(e=>{const{data:t}=e.data;this.license.id=t.id,this.license.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.licenseId,{name:this.license.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/viewLicenses")}}};const Qn=(0,i.A)(Gn,[["render",On]]);var Kn=Qn;const Wn={class:"XHRM-background-container"},Jn={class:"XHRM-card-container"};function Yn(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Wn,[(0,a.createElementVNode)("div",Jn,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_license")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.license.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.license.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Zn={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/licenses"),{createUniqueValidator:t}=Lo(e),o=t("License","name");return{http:e,licenseUniqueValidation:o}},data(){return{isLoading:!1,license:{id:"",name:""},rules:{name:[Kt,Wt(100),this.licenseUniqueValidation]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.license.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.license.name="",this.onCancel()})},onCancel(){I("/admin/viewLicenses")}}};const ei=(0,i.A)(Zn,[["render",Yn]]);var ti=ei;const oi={class:"XHRM-background-container"},ai={class:"XHRM-paper-container"},li={class:"XHRM-header-container"},ni={class:"XHRM-container"},ii={class:"XHRM-bottom-container"};function ri(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",oi,[(0,a.createElementVNode)("div",ai,[(0,a.createElementVNode)("div",li,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.licenses")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",ni,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",ii,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var si={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/licenses"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveLicenses")},onClickEdit(e){I("/admin/saveLicenses/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const di=(0,i.A)(si,[["render",ri]]);var ci=di;const ui={class:"XHRM-background-container"},mi={class:"XHRM-card-container"};function pi(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ui,[(0,a.createElementVNode)("div",mi,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_language")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.language.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var hi={props:{qualificationLanguageId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/languages"),{createUniqueValidator:o}=Lo(t),a=o("Language","name",{entityId:e.qualificationLanguageId});return{http:t,langugageUniqueValidation:a}},data(){return{isLoading:!1,language:{id:"",name:""},rules:{name:[Kt,Wt(120),this.langugageUniqueValidation]}}},created(){this.isLoading=!0,this.http.get(this.qualificationLanguageId).then(e=>{const{data:t}=e.data;this.language.id=t.id,this.language.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.qualificationLanguageId,{name:this.language.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/viewLanguages")}}};const gi=(0,i.A)(hi,[["render",pi]]);var vi=gi;const fi={class:"XHRM-background-container"},yi={class:"XHRM-card-container"};function Ci(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",fi,[(0,a.createElementVNode)("div",yi,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_language")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.language.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Vi={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/languages"),{createUniqueValidator:t}=Lo(e),o=t("Language","name");return{http:e,langugageUniqueValidation:o}},data(){return{isLoading:!1,language:{id:"",name:""},rules:{name:[Kt,Wt(120),this.langugageUniqueValidation]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.language.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.language.name="",this.onCancel()})},onCancel(){I("/admin/viewLanguages")}}};const bi=(0,i.A)(Vi,[["render",Ci]]);var wi=bi;const xi={class:"XHRM-background-container"},Ni={class:"XHRM-paper-container"},ki={class:"XHRM-header-container"},_i={class:"XHRM-container"},Si={class:"XHRM-bottom-container"};function Di(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",xi,[(0,a.createElementVNode)("div",Ni,[(0,a.createElementVNode)("div",ki,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.languages")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",_i,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",Si,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var $i={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/languages"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveLanguages")},onClickEdit(e){I("/admin/saveLanguages/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const Mi=(0,i.A)($i,[["render",Di]]);var Ei=Mi;const Ri={class:"XHRM-background-container"},Ti={class:"XHRM-paper-container"},Bi={class:"XHRM-header-container"},Ii={class:"XHRM-container"},Ai={class:"XHRM-bottom-container"};function Hi(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ri,[(0,a.createElementVNode)("div",Ti,[(0,a.createElementVNode)("div",Bi,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.memberships")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Ii,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",Ai,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var Xi={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/memberships"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("pim.membership"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveMemberships")},onClickEdit(e){I("/admin/saveMemberships/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const Ui=(0,i.A)(Xi,[["render",Hi]]);var Li=Ui;const Pi={class:"XHRM-background-container"},qi={class:"XHRM-card-container"};function Fi(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Pi,[(0,a.createElementVNode)("div",qi,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_membership")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.membership.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var zi={props:{qualificationMembershipId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/memberships"),{createUniqueValidator:o}=Lo(t),a=o("Membership","name",{entityId:e.qualificationMembershipId});return{http:t,membershipUniqueValidation:a}},data(){return{isLoading:!1,membership:{id:"",name:""},rules:{name:[Kt,Wt(50),this.membershipUniqueValidation]}}},created(){this.isLoading=!0,this.http.get(this.qualificationMembershipId).then(e=>{const{data:t}=e.data;this.membership.id=t.id,this.membership.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.qualificationMembershipId,{name:this.membership.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/membership")}}};const ji=(0,i.A)(zi,[["render",Fi]]);var Oi=ji;const Gi={class:"XHRM-background-container"},Qi={class:"XHRM-card-container"};function Ki(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Gi,[(0,a.createElementVNode)("div",Qi,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_membership")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.membership.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Wi={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/memberships"),{createUniqueValidator:t}=Lo(e),o=t("Membership","name");return{http:e,membershipUniqueValidation:o}},data(){return{isLoading:!1,membership:{id:"",name:""},rules:{name:[Kt,Wt(50),this.membershipUniqueValidation]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.membership.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.membership.name="",this.onCancel()})},onCancel(){I("/admin/membership")}}};const Ji=(0,i.A)(Wi,[["render",Ki]]);var Yi=Ji;const Zi={class:"XHRM-background-container"},er={class:"XHRM-card-container"},tr={class:"XHRM-header-container"};function or(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-switch-input"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-input-group"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Zi,[(0,a.createElementVNode)("div",er,[(0,a.createElementVNode)("div",tr,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.general_information")),1)]),_:1}),(0,a.createVNode)(s,{modelValue:n.editable,"onUpdate:modelValue":t[0]||(t[0]=e=>n.editable=e),"option-label":e.$t("general.edit"),"label-position":"left"},null,8,["modelValue","option-label"])]),(0,a.createVNode)(d),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.organization.name=e),label:e.$t("admin.organization_name"),rules:n.rules.name,disabled:!n.editable,required:""},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{label:e.$t("admin.number_of_employees")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"no-of-employees-value"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.organization.noOfEmployees),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.registrationNumber,"onUpdate:modelValue":t[2]||(t[2]=e=>n.organization.registrationNumber=e),label:e.$t("admin.registration_number"),rules:n.rules.registrationNumber,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.taxId,"onUpdate:modelValue":t[3]||(t[3]=e=>n.organization.taxId=e),label:e.$t("admin.tax_id"),rules:n.rules.taxId,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>n.organization.phone=e),modelModifiers:{trim:!0},label:e.$t("general.phone"),rules:n.rules.phone,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.fax,"onUpdate:modelValue":t[5]||(t[5]=e=>n.organization.fax=e),label:e.$t("general.fax"),rules:n.rules.fax,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.email,"onUpdate:modelValue":t[6]||(t[6]=e=>n.organization.email=e),label:e.$t("general.email"),rules:n.rules.email,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.street1,"onUpdate:modelValue":t[7]||(t[7]=e=>n.organization.street1=e),label:e.$t("general.address_street_1"),rules:n.rules.street1,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.street2,"onUpdate:modelValue":t[8]||(t[8]=e=>n.organization.street2=e),label:e.$t("general.address_street_2"),rules:n.rules.street2,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.city,"onUpdate:modelValue":t[9]||(t[9]=e=>n.organization.city=e),label:e.$t("general.city"),rules:n.rules.city,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.province,"onUpdate:modelValue":t[10]||(t[10]=e=>n.organization.province=e),label:e.$t("general.state_province"),rules:n.rules.province,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.zipCode,"onUpdate:modelValue":t[11]||(t[11]=e=>n.organization.zipCode=e),label:e.$t("general.zip_postal_code"),rules:n.rules.zipCode,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.country,"onUpdate:modelValue":t[12]||(t[12]=e=>n.organization.country=e),label:e.$t("general.country"),type:"select",rules:n.rules.country,options:o.countryList,disabled:!n.editable},null,8,["modelValue","label","rules","options","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.organization.note,"onUpdate:modelValue":t[13]||(t[13]=e=>n.organization.note=e),label:e.$t("general.notes"),type:"textarea",rules:n.rules.note,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),n.editable?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var ar={components:{"oxd-switch-input":X.Ay},props:{numberOfEmployees:{type:Number,required:!0},countryList:{type:Array,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/organization");return{http:e}},data(){return{editable:!1,isLoading:!1,organization:{name:"",noOfEmployees:this.numberOfEmployees,registrationNumber:"",taxId:"",phone:"",fax:"",email:"",street1:"",street2:"",city:"",province:"",country:null,zipCode:"",note:""},rules:{name:[Kt,Wt(100)],registrationNumber:[Wt(30)],taxId:[Wt(30)],phone:[Wt(30),fo],fax:[Wt(30),fo],email:[Wt(30),vo],street1:[Wt(100)],street2:[Wt(100)],city:[Wt(30)],province:[Wt(30)],zipCode:[Wt(30)],note:[Wt(255)],country:[]},errors:[]}},created(){this.isLoading=!0,this.http.http.get("/api/v2/admin/organization").then(e=>{const{data:t}=e.data;this.organization.name=t.name,this.organization.registrationNumber=t.registrationNumber,this.organization.taxId=t.taxId,this.organization.phone=t.phone,this.organization.fax=t.fax,this.organization.email=t.email,this.organization.street1=t.street1,this.organization.street2=t.street2,this.organization.city=t.city,this.organization.province=t.province,""!==t.country&&null!==t.country&&(this.organization.country=this.countryList.find(e=>e.id===t.country)),this.organization.zipCode=t.zipCode,this.organization.note=t.note}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.http.put("/api/v2/admin/organization",{name:this.organization.name,registrationNumber:this.organization.registrationNumber,taxId:this.organization.taxId,phone:this.organization.phone,fax:this.organization.fax,email:this.organization.email,street1:this.organization.street1,street2:this.organization.street2,city:this.organization.city,province:this.organization.province,country:this.organization.country?.id,zipCode:this.organization.zipCode,note:this.organization.note}).then(()=>this.$toast.updateSuccess()).then(()=>{this.isLoading=!1,this.editable=!1})}}};const lr=(0,i.A)(ar,[["render",or],["__scopeId","data-v-1b990fd9"]]);var nr=lr;const ir={class:"XHRM-background-container"},rr={class:"XHRM-paper-container"},sr={class:"XHRM-header-container"},dr={class:"XHRM-container"},cr={class:"XHRM-bottom-container"};function ur(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ir,[(0,a.createElementVNode)("div",rr,[(0,a.createElementVNode)("div",sr,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.nationalities")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",dr,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",cr,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var mr={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/nationalities"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.nationality"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveNationality")},onClickEdit(e){I("/admin/saveNationality/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const pr=(0,i.A)(mr,[["render",ur]]);var hr=pr;const gr={class:"XHRM-background-container"},vr={class:"XHRM-card-container"};function fr(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",gr,[(0,a.createElementVNode)("div",vr,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_nationality")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.nationality.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.nationality.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var yr={props:{nationalityId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/nationalities"),{createUniqueValidator:o}=Lo(t),a=o("Nationality","name",{entityId:e.nationalityId});return{http:t,nationalityUniqueValidation:a}},data(){return{isLoading:!1,nationality:{id:"",name:""},rules:{name:[Kt,Wt(100),this.nationalityUniqueValidation]}}},created(){this.isLoading=!0,this.http.get(this.nationalityId).then(e=>{const{data:t}=e.data;this.nationality.id=t.id,this.nationality.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.nationalityId,{name:this.nationality.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/nationality")}}};const Cr=(0,i.A)(yr,[["render",fr]]);var Vr=Cr;const br={class:"XHRM-background-container"},wr={class:"XHRM-card-container"};function xr(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",br,[(0,a.createElementVNode)("div",wr,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_nationality")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.nationality.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.nationality.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Nr={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/nationalities"),{createUniqueValidator:t}=Lo(e),o=t("Nationality","name");return{http:e,nationalityUniqueValidation:o}},data(){return{isLoading:!1,nationality:{id:"",name:""},rules:{name:[Kt,Wt(100),this.nationalityUniqueValidation]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.nationality.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/nationality")}}};const kr=(0,i.A)(Nr,[["render",xr]]);var _r=kr;const Sr={class:"XHRM-background-container"},Dr={class:"XHRM-card-container"},$r={class:"send-method-div"},Mr={class:"XHRM-optional-field-row"},Er={class:"XHRM-optional-field-row"};function Rr(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-group"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Sr,[(0,a.createElementVNode)("div",Dr,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.email_configuration")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.sentAs,"onUpdate:modelValue":t[0]||(t[0]=e=>n.emailConfiguration.sentAs=e),label:e.$t("admin.mail_sent_as"),rules:n.rules.sentAs,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{label:e.$t("admin.sending_method")},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",$r,[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.mailType,"onUpdate:modelValue":t[1]||(t[1]=e=>n.emailConfiguration.mailType=e),type:"radio","option-label":e.$t("admin.secure_smtp"),value:"smtps"},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.emailConfiguration.mailType,"onUpdate:modelValue":t[2]||(t[2]=e=>n.emailConfiguration.mailType=e),type:"radio","option-label":e.$t("admin.smtp"),value:"smtp"},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.emailConfiguration.mailType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.emailConfiguration.mailType=e),type:"radio","option-label":e.$t("admin.sendmail"),value:"sendmail"},null,8,["modelValue","option-label"])])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),"sendmail"===n.emailConfiguration.mailType?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{label:e.$t("admin.path_to_sendmail")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"sendmail-path-value"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.emailConfiguration.pathToSendmail),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),"sendmail"!==n.emailConfiguration.mailType?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.smtpHost,"onUpdate:modelValue":t[4]||(t[4]=e=>n.emailConfiguration.smtpHost=e),label:e.$t("admin.smtp_host"),rules:n.rules.smtpHost,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.smtpPort,"onUpdate:modelValue":t[5]||(t[5]=e=>n.emailConfiguration.smtpPort=e),label:e.$t("admin.smtp_port"),rules:n.rules.smtpPort},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),"sendmail"!==n.emailConfiguration.mailType?((0,a.openBlock)(),(0,a.createBlock)(p,{key:2},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{label:e.$t("admin.use_smtp_authentication"),classes:{wrapper:"--status-grouped-field"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.smtpAuthType,"onUpdate:modelValue":t[6]||(t[6]=e=>n.emailConfiguration.smtpAuthType=e),type:"radio","option-label":e.$t("general.yes"),value:"login"},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.emailConfiguration.smtpAuthType,"onUpdate:modelValue":t[7]||(t[7]=e=>n.emailConfiguration.smtpAuthType=e),type:"radio","option-label":e.$t("general.no"),value:"none"},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),"sendmail"!==n.emailConfiguration.mailType&&"login"===n.emailConfiguration.smtpAuthType?((0,a.openBlock)(),(0,a.createBlock)(p,{key:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.smtpUsername,"onUpdate:modelValue":t[8]||(t[8]=e=>n.emailConfiguration.smtpUsername=e),label:e.$t("admin.smtp_user"),rules:n.rules.smtpUsername,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.smtpPassword,"onUpdate:modelValue":t[9]||(t[9]=e=>n.emailConfiguration.smtpPassword=e),label:e.$t("admin.smtp_password"),rules:n.rules.smtpPassword,type:"password",placeholder:n.passwordPlaceHolder,required:""},null,8,["modelValue","label","rules","placeholder"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),"sendmail"!==n.emailConfiguration.mailType?((0,a.openBlock)(),(0,a.createBlock)(p,{key:4,class:"XHRM-input-field-bottom-space"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Mr,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-optional-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.tls")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.useTLSSecureConnection,"onUpdate:modelValue":t[10]||(t[10]=e=>n.useTLSSecureConnection=e)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),"sendmail"!==n.emailConfiguration.mailType?((0,a.openBlock)(),(0,a.createBlock)(p,{key:5},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"tls-hint"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.optional_the_mail_server_requires_the_use_of_tls_security")),1)]),_:1})]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Er,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-optional-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.send_test_email")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.sendTestMailEditable,"onUpdate:modelValue":t[11]||(t[11]=e=>n.sendTestMailEditable=e)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),n.sendTestMailEditable?((0,a.openBlock)(),(0,a.createBlock)(p,{key:6},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.emailConfiguration.testEmailAddress,"onUpdate:modelValue":t[12]||(t[12]=e=>n.emailConfiguration.testEmailAddress=e),label:e.$t("admin.test_email_address"),rules:n.rules.testEmailAddress,disabled:!n.sendTestMailEditable,required:""},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onReset},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Tr={components:{"oxd-switch-input":X.Ay},props:{pathToSendmail:{type:String,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/email-configuration");return{http:e}},data(){return{passwordPlaceHolder:"",defaultValues:{smtpSecurityType:"tls"},useTLSSecureConnection:!0,sendTestMailEditable:!1,isLoading:!1,emailConfiguration:{mailType:"",sentAs:"",pathToSendmail:this.pathToSendmail,smtpHost:"",smtpPort:null,smtpUsername:"",smtpPassword:null,smtpAuthType:"",smtpSecurityType:"",testEmailAddress:""},initialEmailConfiguration:{...this.emailConfiguration,useTLSSecureConnection:!1},rules:{mailType:[Kt,Wt(50)],sentAs:[Kt,Wt(100),vo],smtpHost:[Kt,Wt(100)],smtpPort:[Wt(10)],smtpUsername:[Kt,Wt(100)],smtpPassword:[Wt(100)],smtpAuthType:[Wt(50)],smtpSecurityType:[Wt(50)],testEmailAddress:[Kt,Wt(250),vo]}}},created(){this.isLoading=!0,this.http.request({method:"GET",url:"/api/v2/admin/email-configuration"}).then(e=>{const{data:t}=e.data;this.emailConfiguration.mailType=t.mailType,this.emailConfiguration.sentAs=t.sentAs,this.emailConfiguration.smtpHost=t.smtpHost,this.emailConfiguration.smtpPort=t.smtpPort,this.emailConfiguration.smtpUsername=t.smtpUsername,this.passwordPlaceHolder=t.smtpUsername?"******":"",this.emailConfiguration.smtpAuthType=t.smtpAuthType??"none",this.emailConfiguration.testEmailAddress=t.testEmailAddress,this.useTLSSecureConnection="tls"===t.smtpSecurityType,this.initialEmailConfiguration={...this.emailConfiguration,useTLSSecureConnection:this.useTLSSecureConnection},t.smtpUsername||this.rules.smtpPassword.push(Kt)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{mailType:this.emailConfiguration.mailType,sentAs:this.emailConfiguration.sentAs,smtpHost:this.emailConfiguration.smtpHost,smtpPort:parseInt(this.emailConfiguration.smtpPort),smtpUsername:"login"===this.emailConfiguration.smtpAuthType?this.emailConfiguration.smtpUsername:"",smtpPassword:""===this.emailConfiguration.smtpPassword?null:this.emailConfiguration.smtpPassword,smtpAuthType:this.emailConfiguration.smtpAuthType,smtpSecurityType:this.useTLSSecureConnection?"tls":"none",testEmailAddress:this.emailConfiguration.testEmailAddress}}).then(e=>{const t=e.data.meta?.testEmailStatus;return 1===t&&this.sendTestMailEditable?this.$toast.success({title:this.$t("general.success"),message:this.$t("admin.test_email_sent")}):0===t&&this.sendTestMailEditable&&this.$toast.warn({title:this.$t("general.failed"),message:this.$t("admin.test_email_not_sent")}),this.$toast.saveSuccess()}).then(()=>{this.isLoading=!1})},onReset(){this.emailConfiguration={...this.initialEmailConfiguration},this.useTLSSecureConnection=this.initialEmailConfiguration.useTLSSecureConnection}}};const Br=(0,i.A)(Tr,[["render",Rr],["__scopeId","data-v-27c67e36"]]);var Ir=Br;const Ar={class:"XHRM-background-container"},Hr={class:"XHRM-paper-container"},Xr={class:"XHRM-header-container"},Ur={class:"XHRM-container"},Lr={class:"XHRM-bottom-container"};function Pr(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-table-filter"),v=(0,a.resolveComponent)("table-header"),f=(0,a.resolveComponent)("oxd-card-table"),y=(0,a.resolveComponent)("oxd-pagination"),C=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ar,[(0,a.createVNode)(g,{"filter-title":e.$t("admin.locations")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.name=e),label:e.$t("general.name")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.city,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.city=e),label:e.$t("general.city")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.countryCode,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.countryCode=e),type:"select",label:e.$t("general.country"),clear:!1,options:o.countries},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(m,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[6]||(t[6]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",Hr,[(0,a.createElementVNode)("div",Xr,[(0,a.createElementVNode)("div",null,[e.$can.create("locations")?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(v,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Ur,[(0,a.createVNode)(f,{selected:n.checkedItems,"onUpdate:selected":t[3]||(t[3]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[4]||(t[4]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:e.$can.delete("locations"),disabled:!(e.$can.delete("locations")&&e.$can.update("locations")),clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","selectable","disabled","loading"])]),(0,a.createElementVNode)("div",Lr,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,current:l.currentPage,"onUpdate:current":t[5]||(t[5]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(C,{ref:"deleteDialog"},null,512)])}const qr={name:"",city:"",countryCode:{}},Fr={"location.name":"ASC","location.city":"DEFAULT","country.countryName":"DEFAULT","location.phone":"DEFAULT",noOfEmployees:"DEFAULT"},zr=e=>e.map(e=>({id:e.id,name:e.name,city:e.city,country:e.country.countryName,phone:e.phone,noOfEmployees:e.noOfEmployees?e.noOfEmployees:0}));var jr={components:{"delete-confirmation":Xt},props:{countries:{type:Array,default:()=>[]}},setup(){const{sortDefinition:e,sortField:t,sortOrder:o,onSort:l}=Ut({sortDefinition:Fr}),n=(0,a.ref)({...qr}),i=(0,a.computed)(()=>({name:n.value.name,city:n.value.city,countryCode:n.value.countryCode?.id,sortField:t.value,sortOrder:o.value})),r=new H(window.appGlobal.baseUrl,"/api/v2/admin/locations"),{showPaginator:s,currentPage:d,total:c,pages:u,pageSize:m,response:p,isLoading:h,execQuery:g}=Et(r,{query:i,normalizer:zr});return l(g),{http:r,showPaginator:s,currentPage:d,isLoading:h,total:c,pages:u,pageSize:m,execQuery:g,items:p,filters:n,sortDefinition:e}},data(){const e={delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}};return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:1},sortField:"location.name"},{name:"city",title:this.$t("general.city"),style:{flex:1},sortField:"location.city"},{name:"country",title:this.$t("general.country"),style:{flex:1},sortField:"country.countryName"},{name:"phone",title:this.$t("general.phone"),style:{flex:1},sortField:"location.phone"},{name:"noOfEmployees",title:this.$t("admin.number_of_employees"),style:{flex:1},sortField:"noOfEmployees"},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:e}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveLocation")},onClickEdit(e){I("/admin/saveLocation/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...qr},this.filterItems()}}};const Or=(0,i.A)(jr,[["render",Pr]]);var Gr=Or;const Qr={class:"XHRM-background-container"},Kr={class:"XHRM-card-container"};function Wr(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Qr,[(0,a.createElementVNode)("div",Kr,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_location")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.location.name=e),label:e.$t("general.name"),rules:n.rules.name,required:"",disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.city,"onUpdate:modelValue":t[1]||(t[1]=e=>n.location.city=e),label:e.$t("general.city"),rules:n.rules.city,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.province,"onUpdate:modelValue":t[2]||(t[2]=e=>n.location.province=e),label:e.$t("general.state_province"),rules:n.rules.province,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.zipCode,"onUpdate:modelValue":t[3]||(t[3]=e=>n.location.zipCode=e),label:e.$t("general.zip_postal_code"),rules:n.rules.zipCode,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.countryCode,"onUpdate:modelValue":t[4]||(t[4]=e=>n.location.countryCode=e),type:"select",label:e.$t("general.country"),rules:n.rules.countryCode,clear:!1,options:o.countries,required:"",disabled:!i.hasCreatePermissions},null,8,["modelValue","label","rules","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>n.location.phone=e),modelModifiers:{trim:!0},label:e.$t("general.phone"),rules:n.rules.phone,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.fax,"onUpdate:modelValue":t[6]||(t[6]=e=>n.location.fax=e),label:e.$t("general.fax"),rules:n.rules.fax,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.address,"onUpdate:modelValue":t[7]||(t[7]=e=>n.location.address=e),type:"textarea",label:e.$t("admin.address"),rules:n.rules.address,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.note,"onUpdate:modelValue":t[8]||(t[8]=e=>n.location.note=e),type:"textarea",label:e.$t("general.notes"),rules:n.rules.note,disabled:!i.hasCreatePermissions,placeholder:e.$t("general.type_here_message")},null,8,["modelValue","label","rules","disabled","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),i.hasCreatePermissions?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Jr={name:"",countryCode:null,province:"",city:"",address:"",zipCode:"",phone:"",fax:"",note:""};var Yr={props:{countries:{type:Array,default:()=>[]}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/locations"),{createUniqueValidator:t}=Lo(e),o=t("Location","name");return{http:e,locationUniqueValidation:o}},data(){return{isLoading:!1,location:{...Jr},rules:{name:[Kt,Wt(100),this.locationUniqueValidation],countryCode:[Kt],province:[Wt(50)],city:[Wt(50)],address:[Wt(250)],zipCode:[Wt(30)],phone:[Wt(30),fo],fax:[Wt(30),fo],note:[Wt(250)]}}},computed:{hasCreatePermissions(){return this.$can.create("locations")}},methods:{onCancel(){I("/admin/viewLocations")},onSave(){this.isLoading=!0,this.http.create({...this.location,countryCode:this.location.countryCode.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const Zr=(0,i.A)(Yr,[["render",Wr]]);var es=Zr;const ts={class:"XHRM-background-container"},os={class:"XHRM-card-container"};function as(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ts,[(0,a.createElementVNode)("div",os,[(0,a.createVNode)(r,{class:"XHRM-main-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_location")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.location.name=e),disabled:!i.hasUpdatePermissions,rules:n.rules.name,label:e.$t("general.name"),required:""},null,8,["modelValue","disabled","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.city,"onUpdate:modelValue":t[1]||(t[1]=e=>n.location.city=e),disabled:!i.hasUpdatePermissions,rules:n.rules.city,label:e.$t("general.city")},null,8,["modelValue","disabled","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.province,"onUpdate:modelValue":t[2]||(t[2]=e=>n.location.province=e),disabled:!i.hasUpdatePermissions,rules:n.rules.province,label:e.$t("general.state_province")},null,8,["modelValue","disabled","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.zipCode,"onUpdate:modelValue":t[3]||(t[3]=e=>n.location.zipCode=e),disabled:!i.hasUpdatePermissions,rules:n.rules.zipCode,label:e.$t("general.zip_postal_code")},null,8,["modelValue","disabled","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.countryCode,"onUpdate:modelValue":t[4]||(t[4]=e=>n.location.countryCode=e),clear:!1,disabled:!i.hasUpdatePermissions,options:o.countries,rules:n.rules.countryCode,label:e.$t("general.country"),required:"",type:"select"},null,8,["modelValue","disabled","options","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>n.location.phone=e),modelModifiers:{trim:!0},disabled:!i.hasUpdatePermissions,rules:n.rules.phone,label:e.$t("general.phone")},null,8,["modelValue","disabled","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.fax,"onUpdate:modelValue":t[6]||(t[6]=e=>n.location.fax=e),disabled:!i.hasUpdatePermissions,rules:n.rules.fax,label:e.$t("general.fax")},null,8,["modelValue","disabled","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.address,"onUpdate:modelValue":t[7]||(t[7]=e=>n.location.address=e),disabled:!i.hasUpdatePermissions,rules:n.rules.address,label:e.$t("admin.address"),type:"textarea"},null,8,["modelValue","disabled","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.location.note,"onUpdate:modelValue":t[8]||(t[8]=e=>n.location.note=e),disabled:!i.hasUpdatePermissions,rules:n.rules.note,label:e.$t("general.note"),type:"textarea"},null,8,["modelValue","disabled","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),i.hasUpdatePermissions?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const ls={name:"",countryCode:null,province:"",city:"",address:"",zipCode:"",phone:"",fax:"",note:""};var ns={props:{locationId:{type:String,required:!0},countries:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/locations"),{createUniqueValidator:o}=Lo(t),a=o("Location","name",{entityId:e.locationId});return{http:t,locationUniqueValidation:a}},data(){return{isLoading:!1,location:{...ls},rules:{name:[Kt,Wt(100),this.locationUniqueValidation],countryCode:[Kt],province:[Wt(50)],city:[Wt(50)],address:[Wt(250)],zipCode:[Wt(30)],phone:[Wt(30),fo],fax:[Wt(30),fo],note:[Wt(250)]}}},computed:{hasUpdatePermissions(){return this.$can.update("locations")}},created(){this.isLoading=!0,this.http.get(parseInt(this.locationId,10)).then(e=>{const{data:t}=e.data;this.location.name=t.name,this.location.countryCode=this.countries.find(e=>e.id===t.country.countryCode),this.location.province=t.province,this.location.city=t.city,this.location.address=t.address,this.location.zipCode=t.zipCode,this.location.phone=t.phone,this.location.fax=t.fax,this.location.note=t.note}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/admin/viewLocations")},onSave(){this.isLoading=!0,this.http.update(this.locationId,{name:this.location.name,countryCode:this.location.countryCode.id,province:this.location.province,city:this.location.city,address:this.location.address,zipCode:this.location.zipCode,phone:this.location.phone,fax:this.location.fax,note:this.location.note}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})}}};const is=(0,i.A)(ns,[["render",as]]);var rs=is;const ss={class:"XHRM-background-container"},ds={class:"XHRM-paper-container"},cs={class:"XHRM-header-container"},us={class:"XHRM-container"},ms={class:"XHRM-bottom-container"};function ps(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ss,[(0,a.createElementVNode)("div",ds,[(0,a.createElementVNode)("div",cs,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.pay_grades")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",us,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",ms,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}const hs=e=>e.map(e=>{const t=e.currencies.map(e=>e.name);return{id:e.id,name:e.name,currency:t.join(",")}});var gs={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/pay-grades"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e,{normalizer:hs});return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{"flex-basis":"40%"}},{name:"currency",title:this.$t("general.currency"),style:{"flex-basis":"40%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/payGrade")},onClickEdit(e){I("/admin/payGrade/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const vs=(0,i.A)(gs,[["render",ps]]);var fs=vs;const ys={class:"XHRM-background-container"},Cs={class:"XHRM-card-container"};function Vs(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ys,[(0,a.createElementVNode)("div",Cs,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_pay_grade")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.grade.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.grade.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var bs={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/pay-grades"),{createUniqueValidator:t}=Lo(e),o=t("PayGrade","name");return{http:e,payGradeUniqueValidation:o}},data(){return{isLoading:!1,grade:{id:"",name:""},rules:{name:[Kt,this.payGradeUniqueValidation,Wt(50)]},errors:[]}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.grade.name}).then(e=>{const{data:t}=e.data;this.$toast.saveSuccess(),I("/admin/payGrade/{id}",{id:t.id})})},onCancel(){I("/admin/viewPayGrades")}}};const ws=(0,i.A)(bs,[["render",Vs]]);var xs=ws;const Ns={class:"XHRM-background-container"},ks={class:"XHRM-card-container"};function _s(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("pay-grade-currency");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",Ns,[(0,a.createElementVNode)("div",ks,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_pay_grade")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.grade.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.grade.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])]),(0,a.createVNode)(y,{"pay-grade-id":o.payGradeId},null,8,["pay-grade-id"])],64)}const Ss={class:"XHRM-background-container"},Ds={class:"XHRM-paper-container"},$s={class:"XHRM-header-container"},Ms={class:"XHRM-container"},Es={class:"XHRM-bottom-container"};function Rs(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-pay-currency"),s=(0,a.resolveComponent)("edit-pay-currency"),d=(0,a.resolveComponent)("inline-action-button"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,"pay-grade-id":o.payGradeId,onClose:i.onSaveModalClose},null,8,["pay-grade-id","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,data:n.editModalState,"pay-grade-id":o.payGradeId,onClose:i.onEditModalClose},null,8,["data","pay-grade-id","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Ss,[(0,a.createElementVNode)("div",Ds,[(0,a.createElementVNode)("div",$s,[(0,a.createVNode)(d,{"display-type":"secondary",onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.currencies")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Ms,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:i.selectable,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","loading"])]),(0,a.createElementVNode)("div",Es,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])])],64)}const Ts={class:"XHRM-action-header"};function Bs(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ts,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)]),_:3}),(0,a.createVNode)(s,(0,a.mergeProps)({label:e.$t("general.add"),"icon-name":"plus","display-type":"text"},e.$attrs),null,16,["label"])])}var Is={name:"InlineActionButton",inheritAttrs:!1};const As=(0,i.A)(Is,[["render",Bs],["__scopeId","data-v-7dcc2186"]]);var Hs=As;const Xs={class:"XHRM-card-container"};function Us(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Xs,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_currency")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.payCurrency.currencyId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.payCurrency.currencyId=e),type:"select",label:e.$t("general.currency"),options:n.currencies,rules:n.rules.currencyId,required:""},null,8,["modelValue","label","options","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.payCurrency.minSalary,"onUpdate:modelValue":t[1]||(t[1]=e=>n.payCurrency.minSalary=e),label:e.$t("admin.minimum_salary"),rules:n.rules.minSalary},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.payCurrency.maxSalary,"onUpdate:modelValue":t[2]||(t[2]=e=>n.payCurrency.maxSalary=e),label:e.$t("admin.maximum_salary"),rules:n.rules.maxSalary},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])}const Ls={currencyId:null,minSalary:"",maxSalary:""};var Ps={name:"SavePayCurrency",props:{payGradeId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/pay-grades/${e.payGradeId}/currencies`);return{http:t}},data(){return{isLoading:!1,payCurrency:{...Ls},currencies:[],rules:{currencyId:[Kt],minSalary:[Co(1e9),Ro,xo(()=>this.payCurrency.maxSalary,this.$t("admin.should_be_lower_than_maximum_salary"))],maxSalary:[Co(1e9),Ro,wo(()=>this.payCurrency.minSalary,this.$t("admin.should_be_higher_than_minimum_salary"))]}}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET",url:`/api/v2/admin/pay-grades/${this.payGradeId}/currencies/allowed`,params:{limit:0}}).then(e=>{const{data:t}=e.data;this.currencies=t.map(e=>({id:e.id,label:e.id+" - "+e.name}))}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({...this.payCurrency,currencyId:this.payCurrency.currencyId.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const qs=(0,i.A)(Ps,[["render",Us]]);var Fs=qs;const zs={class:"XHRM-card-container"};function js(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zs,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_currency")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.payCurrency.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.payCurrency.name=e),label:e.$t("general.currency"),required:"",readonly:"",disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.payCurrency.minSalary,"onUpdate:modelValue":t[1]||(t[1]=e=>n.payCurrency.minSalary=e),label:e.$t("admin.minimum_salary"),rules:n.rules.minSalary},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.payCurrency.maxSalary,"onUpdate:modelValue":t[2]||(t[2]=e=>n.payCurrency.maxSalary=e),label:e.$t("admin.maximum_salary"),rules:n.rules.maxSalary},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])}const Os={currencyId:null,minSalary:"",maxSalary:""};var Gs={name:"EditPayCurrency",props:{payGradeId:{type:Number,required:!0},data:{type:Object,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/pay-grades/${e.payGradeId}/currencies`);return{http:t}},data(){return{isLoading:!1,payCurrency:{...Os},rules:{currencyId:[Kt],minSalary:[Co(1e9),Ro,xo(()=>this.payCurrency.maxSalary,this.$t("admin.should_be_lower_than_maximum_salary"))],maxSalary:[Co(1e9),Ro,wo(()=>this.payCurrency.minSalary,this.$t("admin.should_be_higher_than_minimum_salary"))]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.payCurrency.name=t.currencyType.name,this.payCurrency.minSalary=t.minSalary?t.minSalary:"0",this.payCurrency.maxSalary=t.maxSalary?t.maxSalary:"0"}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{minSalary:this.payCurrency.minSalary,maxSalary:this.payCurrency.maxSalary}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Qs=(0,i.A)(Gs,[["render",js]]);var Ks=Qs;const Ws=e=>e.map(e=>{let t=e.maxSalary?Number(e.maxSalary):0,o=e.minSalary?Number(e.minSalary):0;return t=t.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}),o=o.toLocaleString("en-US",{maximumFractionDigits:2,minimumFractionDigits:2}),{id:e.currencyType.id,name:e.currencyType.name,maxSalary:t,minSalary:o}});var Js={name:"PayGradeCurrency",components:{"inline-action-button":Hs,"save-pay-currency":Fs,"edit-pay-currency":Ks,"delete-confirmation":Xt},props:{payGradeId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/pay-grades/${e.payGradeId}/currencies`),{showPaginator:o,currentPage:a,total:l,pages:n,pageSize:i,response:r,isLoading:s,execQuery:d}=Et(t,{normalizer:Ws});return{http:t,showPaginator:o,currentPage:a,isLoading:s,total:l,pages:n,pageSize:i,execQuery:d,items:r}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.currency"),style:{flex:2}},{name:"minSalary",title:this.$t("admin.minimum_salary"),style:{flex:1}},{name:"maxSalary",title:this.$t("admin.maximum_salary"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{selectable(){return!(this.showSaveModal||this.showEditModal)}},methods:{onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0,this.checkedItems=[]},onClickDelete(e){this.selectable&&this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},onClickDeleteSelected(){if(!this.selectable)return;const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0,this.checkedItems=[]},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const Ys=(0,i.A)(Js,[["render",Rs]]);var Zs=Ys,ed={components:{"pay-grade-currency":Zs},props:{payGradeId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/pay-grades"),{createUniqueValidator:o}=Lo(t),a=o("PayGrade","name",{entityId:e.payGradeId});return{http:t,payGradeUniqueValidation:a}},data(){return{isLoading:!1,grade:{id:"",name:""},rules:{name:[Kt,this.payGradeUniqueValidation,Wt(50)]},errors:[]}},created(){this.isLoading=!0,this.http.get(this.payGradeId).then(e=>{const{data:t}=e.data;this.grade.id=t.id,this.grade.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.payGradeId,{name:this.grade.name}).then(()=>this.$toast.updateSuccess()).then(()=>{A()})},onCancel(){I("/admin/viewPayGrades")}}};const td=(0,i.A)(ed,[["render",_s]]);var od=td;const ad={class:"XHRM-background-container"},ld={class:"XHRM-card-container"},nd={class:"XHRM-module-field-row"},id={class:"XHRM-module-field-row"},rd={class:"XHRM-module-field-row"},sd={class:"XHRM-module-field-row"},dd={class:"XHRM-module-field-row"},cd={class:"XHRM-module-field-row"},ud={class:"XHRM-module-field-row"},md={class:"XHRM-module-field-row"},pd={class:"XHRM-module-field-row"},hd={class:"XHRM-module-field-row"},gd={class:"XHRM-module-field-row"};function vd(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-switch-input"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("submit-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ad,[(0,a.createElementVNode)("div",ld,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.module_configuration")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",nd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.admin_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.admin,"onUpdate:modelValue":t[0]||(t[0]=e=>n.modules.admin=e),disabled:!0},null,8,["modelValue"])]),(0,a.createElementVNode)("div",id,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.pim_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.pim,"onUpdate:modelValue":t[1]||(t[1]=e=>n.modules.pim=e),disabled:!0},null,8,["modelValue"])]),(0,a.createElementVNode)("div",rd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.leave_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.leave,"onUpdate:modelValue":t[2]||(t[2]=e=>n.modules.leave=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",sd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.time_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.time,"onUpdate:modelValue":t[3]||(t[3]=e=>n.modules.time=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",dd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.recruitment_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.recruitment,"onUpdate:modelValue":t[4]||(t[4]=e=>n.modules.recruitment=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",cd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.performance_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.performance,"onUpdate:modelValue":t[5]||(t[5]=e=>n.modules.performance=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",ud,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.directory_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.directory,"onUpdate:modelValue":t[6]||(t[6]=e=>n.modules.directory=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",md,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.maintenance_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.maintenance,"onUpdate:modelValue":t[7]||(t[7]=e=>n.modules.maintenance=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",pd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.mobile")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.mobile,"onUpdate:modelValue":t[8]||(t[8]=e=>n.modules.mobile=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",hd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.claim_module")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.claim,"onUpdate:modelValue":t[9]||(t[9]=e=>n.modules.claim=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",gd,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.buzz")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.modules.buzz,"onUpdate:modelValue":t[10]||(t[10]=e=>n.modules.buzz=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const fd={admin:!1,pim:!1,leave:!1,time:!1,recruitment:!1,performance:!1,maintenance:!1,mobile:!1,directory:!1,claim:!1,buzz:!1};var yd={components:{"oxd-switch-input":X.Ay},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/modules");return{http:e}},data(){return{modules:{...fd},isLoading:!1}},created(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.modules.admin=t.admin,this.modules.pim=t.pim,this.modules.leave=t.leave,this.modules.time=t.time,this.modules.recruitment=t.recruitment,this.modules.performance=t.performance,this.modules.maintenance=t.maintenance,this.modules.mobile=t.mobile,this.modules.directory=t.directory,this.modules.claim=t.claim,this.modules.buzz=t.buzz}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0;const e={admin:!0,pim:!0,leave:this.modules.leave,time:this.modules.time,recruitment:this.modules.recruitment,performance:this.modules.performance,maintenance:this.modules.maintenance,mobile:this.modules.mobile,directory:this.modules.directory,claim:this.modules.claim,buzz:this.modules.buzz};this.http.request({method:"PUT",data:e}).then(e=>{const{data:t}=e.data;return this.modules=t,this.$toast.saveSuccess()}).finally(()=>{this.isLoading=!1,A()})}}};const Cd=(0,i.A)(yd,[["render",vd],["__scopeId","data-v-b78c5704"]]);var Vd=Cd;const bd={class:"XHRM-background-container"},wd={class:"XHRM-paper-container"},xd={class:"XHRM-header-container"},Nd={class:"XHRM-container"},kd={class:"XHRM-bottom-container"};function _d(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bd,[(0,a.createElementVNode)("div",wd,[(0,a.createElementVNode)("div",xd,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.work_shifts")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Nd,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",kd,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var Sd={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/work-shifts"),{timeFormat:t,jsTimeFormat:o}=F(),a=e=>e.map(e=>({id:e.id,name:e.name,startTime:Ve(Ce(e.startTime,t),o),endTime:Ve(Ce(e.endTime,t),o),hoursPerDay:parseFloat(e.hoursPerDay).toFixed(2)})),{showPaginator:l,currentPage:n,total:i,pages:r,pageSize:s,response:d,isLoading:c,execQuery:u}=Et(e,{normalizer:a});return{http:e,showPaginator:l,currentPage:n,isLoading:c,total:i,pages:r,pageSize:s,execQuery:u,items:d}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:1}},{name:"startTime",title:this.$t("general.from"),style:{flex:1}},{name:"endTime",title:this.$t("general.to"),style:{flex:1}},{name:"hoursPerDay",title:this.$t("admin.hours_per_day"),style:{flex:1}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveWorkShifts")},onClickEdit(e){I("/admin/saveWorkShifts/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const Dd=(0,i.A)(Sd,[["render",_d]]);var $d=Dd;const Md={class:"XHRM-background-container"},Ed={class:"XHRM-card-container"};function Rd(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("time-input"),h=(0,a.resolveComponent)("oxd-input-group"),g=(0,a.resolveComponent)("work-shift-employee-autocomplete"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Md,[(0,a.createElementVNode)("div",Ed,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_work_shift")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workShift.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.workShift.name=e),label:e.$t("admin.shift_name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.working_hours"))+" *",1)]),_:1}),(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workShift.startTime,"onUpdate:modelValue":t[1]||(t[1]=e=>n.workShift.startTime=e),rules:n.rules.fromTime,label:e.$t("general.from")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workShift.endTime,"onUpdate:modelValue":t[2]||(t[2]=e=>n.workShift.endTime=e),rules:n.rules.endTime,label:e.$t("general.to")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{label:e.$t("admin.duration_per_day")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-workshift-duration",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.selectedTimeDuration),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.workShift.empNumbers,"onUpdate:modelValue":t[3]||(t[3]=e=>n.workShift.empNumbers=e),rules:n.rules.empNumbers},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(y)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}function Td(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete");return(0,a.openBlock)(),(0,a.createBlock)(r,{label:e.$t("admin.assigned_employees"),multiple:!0,clear:!1,"create-options":i.loadEmployees},null,8,["label","create-options"])}var Bd={name:"WorkShiftEmployeeAutocomplete",components:{"employee-autocomplete":$a},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/work-shifts/employees");return{http:e}},methods:{async loadEmployees(e){return new Promise(t=>{e.trim()?this.http.getAll({nameOrId:e.trim()}).then(({data:e})=>{t(e.data.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,isPastEmployee:!!e.terminationId})))}):t([])})}}};const Id=(0,i.A)(Bd,[["render",Td]]);var Ad=Id;const Hd={id:"",name:"",hoursPerDay:"",startTime:"",endTime:"",empNumbers:[]};var Xd={components:{"work-shift-employee-autocomplete":Ad},props:{workShiftConfig:{type:Object,required:!0,default:()=>({})}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/work-shifts"),{createUniqueValidator:t}=Lo(e),o=t("WorkShift","name");return{http:e,workShiftUniqueValidation:o}},data(){return{isLoading:!1,workShift:{...Hd},rules:{name:[Kt,this.workShiftUniqueValidation,Wt(50)],fromTime:[Kt,Zt],endTime:[Kt,Zt,po(()=>this.workShift.startTime,this.$t("general.to_time_should_be_after_from_time"))],empNumbers:[$o]}}},computed:{selectedTimeDuration(){return parseFloat(xe(this.workShift.startTime,this.workShift.endTime)/3600).toFixed(2)}},beforeMount(){this.workShift.endTime=this.workShiftConfig.endTime,this.workShift.startTime=this.workShiftConfig.startTime},methods:{onSave(){this.isLoading=!0;const e={name:this.workShift.name,hoursPerDay:this.selectedTimeDuration,startTime:this.workShift.startTime,endTime:this.workShift.endTime,empNumbers:this.workShift.empNumbers.map(e=>e.id)};this.http.create(e).then(()=>this.$toast.saveSuccess()).then(()=>{this.workShift={...Hd},this.onCancel()})},onCancel(){I("/admin/workShift")}}};const Ud=(0,i.A)(Xd,[["render",Rd],["__scopeId","data-v-5ff9b7c1"]]);var Ld=Ud;const Pd={class:"XHRM-background-container"},qd={class:"XHRM-card-container"};function Fd(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("time-input"),h=(0,a.resolveComponent)("oxd-input-group"),g=(0,a.resolveComponent)("work-shift-employee-autocomplete"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Pd,[(0,a.createElementVNode)("div",qd,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_work_shift")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workShift.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.workShift.name=e),label:e.$t("admin.shift_name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title"},{default:(0,a.withCtx)(()=>[...t[4]||(t[4]=[(0,a.createTextVNode)("Working Hours*",-1)])]),_:1}),(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workShift.startTime,"onUpdate:modelValue":t[1]||(t[1]=e=>n.workShift.startTime=e),rules:n.rules.fromTime,label:e.$t("general.from")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workShift.endTime,"onUpdate:modelValue":t[2]||(t[2]=e=>n.workShift.endTime=e),rules:n.rules.endTime,label:e.$t("general.to")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{label:e.$t("admin.duration_per_day")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-workshift-duration",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.selectedTimeDuration),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.workShift.empNumbers,"onUpdate:modelValue":t[3]||(t[3]=e=>n.workShift.empNumbers=e),rules:n.rules.empNumbers},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(y)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const zd={id:"",name:"",hoursPerDay:"",startTime:null,endTime:null,empNumbers:[]};var jd={components:{"work-shift-employee-autocomplete":Ad},props:{workShiftId:{type:Number,required:!0,default:null}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/work-shifts"),{createUniqueValidator:o}=Lo(t),a=o("WorkShift","name",{entityId:e.workShiftId});return{http:t,workShiftUniqueValidation:a}},data(){return{isLoading:!1,workShift:{...zd},rules:{name:[Kt,this.workShiftUniqueValidation,Wt(50)],fromTime:[Kt,Zt],endTime:[Kt,Zt,po(()=>this.workShift.startTime,"To time should be after from time")],empNumbers:[$o]}}},computed:{selectedTimeDuration(){return parseFloat(xe(this.workShift.startTime,this.workShift.endTime)/3600).toFixed(2)}},beforeMount(){this.isLoading=!0,this.http.get(this.workShiftId).then(e=>{const{data:t}=e.data;this.workShift.id=t.id,this.workShift.name=t.name,this.workShift.hoursPerDay=t.hoursPerDay,this.workShift.startTime=t.startTime,this.workShift.endTime=t.endTime,this.workShift.empNumbers=t.employees.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,isPastEmployee:!!e.terminationId}))}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0;const e={name:this.workShift.name,hoursPerDay:this.selectedTimeDuration,startTime:this.workShift.startTime,endTime:this.workShift.endTime,empNumbers:this.workShift.empNumbers.map(e=>e.id)};this.http.update(this.workShiftId,e).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/admin/workShift")}}};const Od=(0,i.A)(jd,[["render",Fd],["__scopeId","data-v-984b3c3c"]]);var Gd=Od;const Qd={class:"XHRM-background-container"},Kd={class:"XHRM-paper-container"},Wd={class:"XHRM-header-container"},Jd={class:"XHRM-container"};function Yd(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("table-header"),d=(0,a.resolveComponent)("oxd-card-table");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Qd,[(0,a.createElementVNode)("div",Kd,[(0,a.createElementVNode)("div",Wd,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.email_subscriptions")),1)]),_:1})]),(0,a.createVNode)(s,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",Jd,[(0,a.createVNode)(d,{loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!1,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["loading","headers","items"])]),t[0]||(t[0]=(0,a.createElementVNode)("div",{class:"XHRM-bottom-container"},null,-1))])])}var Zd={setup(){const{$t:e}=Ie(),t=t=>t.map(t=>{const o=Array.isArray(t.subscribers)?t.subscribers.slice(0,10):[];let a=t.name;switch(a){case"Leave Applications":a=e("admin.leave_applications");break;case"Leave Approvals":a=e("admin.leave_approvals");break;case"Leave Assignments":a=e("admin.leave_assignments");break;case"Leave Cancellations":a=e("admin.leave_cancellation");break;case"Leave Rejections":a=e("admin.leave_rejections");break}return{id:t.id,type:a,subscribers:o.map(e=>`${e.name} <${e.email}>`).join(", "),enabled:t.isEnabled,_loading:!1}}),o=new H(window.appGlobal.baseUrl,"/api/v2/admin/email-subscriptions"),{total:a,response:l,isLoading:n}=Et(o,{normalizer:t});return{http:o,isLoading:n,total:a,items:l}},data(){return{headers:[{name:"type",slot:"title",title:this.$t("admin.notification_type"),style:{flex:"20%"}},{name:"subscribers",title:this.$t("admin.subscribers"),style:{flex:"65%"}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:"15%"},cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer}]}},methods:{cellRenderer(...e){const[t,,,o]=e,a={component:"oxd-icon-button",props:{name:"person-plus-fill",onClick:()=>{I("/admin/saveSubscriber/{id}",{id:o.id})}}},l={component:X.Ay,props:{modelValue:o.enabled,"onUpdate:modelValue":e=>{this.items.data[t]._loading=!0,this.http.update(o.id,{enabled:e}).then(e=>{const{data:o}=e.data;this.items.data[t].enabled=o.isEnabled,this.$toast.updateSuccess()}).finally(()=>{this.items.data[t]._loading=!1})},style:{"margin-left":"1rem","text-align":"left"}}},n={component:X.VJ,props:{withContainer:!1}};return{props:{header:{cellConfig:{...o._loading?{loader:n}:{addSubscriber:a,switchSubscription:l}}}}}}}};const ec=(0,i.A)(Zd,[["render",Yd]]);var tc=ec;const oc={class:"XHRM-background-container"},ac={class:"XHRM-paper-container"},lc={class:"XHRM-header-container"},nc={class:"XHRM-container"},ic={class:"XHRM-bottom-container"};function rc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation"),p=(0,a.resolveComponent)("save-subscriber"),h=(0,a.resolveComponent)("edit-subscriber");return(0,a.openBlock)(),(0,a.createElementBlock)("div",oc,[(0,a.createElementVNode)("div",ac,[(0,a.createElementVNode)("div",lc,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.subscribers"))+": "+(0,a.toDisplayString)(i.title),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",nc,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",ic,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512),n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,data:{subscriptionId:o.subscriptionId},onClose:i.onSaveModalClose},null,8,["data","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(h,{key:1,data:n.editModalState,onClose:i.onEditModalClose},null,8,["data","onClose"])):(0,a.createCommentVNode)("",!0)])}const sc={class:"XHRM-modal-header"};function dc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",sc,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_subscriber")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.subscriber.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.subscriber.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.subscriber.email,"onUpdate:modelValue":t[1]||(t[1]=e=>n.subscriber.email=e),label:e.$t("general.email"),rules:n.rules.email,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const cc={name:"",email:""};var uc={name:"SaveSubscriber",components:{"oxd-dialog":X.KB},props:{data:{type:Object,default:()=>({})}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/email-subscriptions/${e.data.subscriptionId}/subscribers`),{createUniqueValidator:o}=Lo(t),a=o("EmailSubscriber","email",{matchByField:"emailNotification",matchByValue:e.data.subscriptionId});return{http:t,subscriberUniqueValidation:a}},data(){return{isLoading:!1,subscriber:{...cc},rules:{name:[Kt,Wt(100)],email:[Kt,vo,this.subscriberUniqueValidation,Wt(100)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.subscriber}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.subscriber={...cc},this.$emit("close",!0)}}};const mc=(0,i.A)(uc,[["render",dc],["__scopeId","data-v-27a4fffc"]]);var pc=mc;const hc={class:"XHRM-modal-header"};function gc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",hc,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_subscriber")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.subscriber.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.subscriber.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.subscriber.email,"onUpdate:modelValue":t[1]||(t[1]=e=>n.subscriber.email=e),label:e.$t("general.email"),rules:n.rules.email,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const vc={name:"",email:""};var fc={name:"EditSubscriber",components:{"oxd-dialog":X.KB},props:{data:{type:Object,default:()=>({})}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/email-subscriptions/${e.data.subscriptionId}/subscribers`),{createUniqueValidator:o}=Lo(t),a=o("EmailSubscriber","email",{entityId:e.data.id,matchByField:"emailNotification",matchByValue:e.data.subscriptionId});return{http:t,subscriberUniqueValidation:a}},data(){return{isLoading:!1,subscriber:{...vc},rules:{name:[Kt,Wt(100)],email:[Kt,vo,this.subscriberUniqueValidation,Wt(100)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.subscriber.name=t.name,this.subscriber.email=t.email}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.subscriber}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.subscriber={...vc},this.$emit("close",!0)}}};const yc=(0,i.A)(fc,[["render",gc],["__scopeId","data-v-583900a0"]]);var Cc=yc,Vc={components:{"save-subscriber":pc,"edit-subscriber":Cc,"delete-confirmation":Xt},props:{subscriptionId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/email-subscriptions/${e.subscriptionId}/subscribers`),{showPaginator:o,currentPage:a,total:l,pages:n,pageSize:i,response:r,isLoading:s,execQuery:d}=Et(t);return{http:t,showPaginator:o,currentPage:a,isLoading:s,total:l,pages:n,pageSize:i,execQuery:d,items:r}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:"30%"}},{name:"email",title:this.$t("general.email"),style:{flex:"55%"}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:"15%"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{title(){return this.items.meta?this.items.meta?.name:""}},methods:{onClickAdd(){this.showSaveModal=!0},onClickEdit(e){this.editModalState={...e,subscriptionId:this.subscriptionId},this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.editModalState=null,this.showEditModal=!1,this.resetDataTable()},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const bc=(0,i.A)(Vc,[["render",rc]]);var wc=bc;const xc={class:"XHRM-background-container"},Nc={class:"XHRM-card-container"};function kc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",xc,[(0,a.createElementVNode)("div",Nc,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.localization")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.configuration.language,"onUpdate:modelValue":t[0]||(t[0]=e=>n.configuration.language=e),label:e.$t("general.language"),type:"select","show-empty-selector":!1,options:o.languageList},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.configuration.dateFormat,"onUpdate:modelValue":t[1]||(t[1]=e=>n.configuration.dateFormat=e),label:e.$t("admin.date_format"),type:"select","show-empty-selector":!1,options:o.dateFormatList},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var _c={props:{dateFormatList:{type:Array,required:!0},languageList:{type:Array,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/localization");return{http:e}},data(){return{isLoading:!1,configuration:{language:null,dateFormat:null}}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.configuration.language=this.languageList.find(e=>e.id===t.language),this.configuration.dateFormat=this.dateFormatList.find(e=>e.id===t.dateFormat)}).finally(()=>this.isLoading=!1)},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",url:"/api/v2/admin/localization",data:{language:this.configuration.language?.id,dateFormat:this.configuration.dateFormat?.id}}).then(()=>this.$toast.updateSuccess()).then(()=>A())}}};const Sc=(0,i.A)(_c,[["render",kc]]);var Dc=Sc;const $c={class:"XHRM-background-container"},Mc={class:"XHRM-card-container"},Ec={class:"XHRM-sm-field"},Rc={class:"XHRM-actions-group"};function Tc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("inline-color-input"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("file-upload-input"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",$c,[(0,a.createElementVNode)("div",Mc,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.corporate_branding")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{ref:"formRef",loading:e.isLoading,onSubmitValid:l.onFormSubmit},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.colors.primaryColor,"onUpdate:modelValue":t[0]||(t[0]=t=>e.colors.primaryColor=t),rules:l.rules.color,label:e.$t("admin.primary_color"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-column-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.colors.secondaryColor,"onUpdate:modelValue":t[1]||(t[1]=t=>e.colors.secondaryColor=t),rules:l.rules.color,label:e.$t("admin.secondary_color"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.colors.primaryFontColor,"onUpdate:modelValue":t[2]||(t[2]=t=>e.colors.primaryFontColor=t),rules:l.rules.color,label:e.$t("admin.primary_font_color"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2 --offset-column-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.colors.secondaryFontColor,"onUpdate:modelValue":t[3]||(t[3]=t=>e.colors.secondaryFontColor=t),rules:l.rules.color,label:e.$t("admin.secondary_font_color"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.colors.primaryGradientStartColor,"onUpdate:modelValue":t[4]||(t[4]=t=>e.colors.primaryGradientStartColor=t),rules:l.rules.color,label:e.$t("admin.primary_gradient_color_one"),type:"color",required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-3 --offset-column-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.colors.primaryGradientEndColor,"onUpdate:modelValue":t[5]||(t[5]=t=>e.colors.primaryGradientEndColor=t),rules:l.rules.color,label:e.$t("admin.primary_gradient_color_two"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),t[13]||(t[13]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),t[14]||(t[14]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{newFile:e.clientLogo.newAttachment,"onUpdate:newFile":t[6]||(t[6]=t=>e.clientLogo.newAttachment=t),method:e.clientLogo.method,"onUpdate:method":t[7]||(t[7]=t=>e.clientLogo.method=t),label:e.$t("admin.client_logo"),"button-label":e.$t("general.browse"),file:e.clientLogo.oldAttachment,rules:l.rules.clientLogo,hint:e.$t("general.accept_jpg_png_gif_upto_recommended_dimensions",{fileSize:i.formattedFileSize,width:50,height:50}),"button-icon":"",url:"admin/theme/attachments/image"},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{newFile:e.clientBanner.newAttachment,"onUpdate:newFile":t[8]||(t[8]=t=>e.clientBanner.newAttachment=t),method:e.clientBanner.method,"onUpdate:method":t[9]||(t[9]=t=>e.clientBanner.method=t),label:e.$t("admin.client_banner"),"button-label":e.$t("general.browse"),file:e.clientBanner.oldAttachment,rules:l.rules.clientBanner,hint:e.$t("general.accept_jpg_png_gif_upto_recommended_dimensions",{fileSize:i.formattedFileSize,width:182,height:50}),"button-icon":"",url:"admin/theme/attachments/image"},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{newFile:e.loginBanner.newAttachment,"onUpdate:newFile":t[10]||(t[10]=t=>e.loginBanner.newAttachment=t),method:e.loginBanner.method,"onUpdate:method":t[11]||(t[11]=t=>e.loginBanner.method=t),label:e.$t("admin.login_banner"),"button-label":e.$t("general.browse"),file:e.loginBanner.oldAttachment,rules:l.rules.loginBanner,hint:e.$t("general.accept_jpg_png_gif_upto_recommended_dimensions",{fileSize:i.formattedFileSize,width:340,height:65}),"button-icon":"",url:"admin/theme/attachments/image"},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Ec,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-sm-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.social_media_images")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:e.showSocialMediaImages,"onUpdate:modelValue":t[12]||(t[12]=t=>e.showSocialMediaImages=t)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createElementVNode)("div",Rc,[(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.reset_to_default"),onClick:l.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.preview"),onClick:l.onClickPreview},null,8,["label","onClick"]),(0,a.createVNode)(v,{type:"submit","display-type":"secondary",label:e.$t("general.publish")},null,8,["label"])])]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}function Bc({refName:e="formRef"}={}){const t=(0,a.ref)(),o=()=>t.value?.onSubmit(new Event("submit")),l=()=>t.value?.onReset(),n=()=>t.value?.validate(),i=(0,a.computed)(()=>t.value?.isFromInvalid),r=(0,a.computed)(()=>t.value?.errorbag);return{reset:l,submit:o,validate:n,[e]:t,errorbag:r,invalid:i}}function Ic(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-label"),s=(0,a.resolveComponent)("oxd-color-input"),d=(0,a.resolveComponent)("oxd-input-group");return(0,a.openBlock)(),(0,a.createBlock)(d,{class:"oxd-input-field-bottom-space",message:l.message,classes:l.classes},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{label:o.label,class:(0,a.normalizeClass)(l.classes.label)},null,8,["label","class"]),(0,a.createVNode)(s,(0,a.mergeProps)(e.$attrs,{disabled:o.disabled,"has-error":l.hasError,"model-value":o.modelValue,"dropdown-position":"left","onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t))}),null,16,["disabled","has-error","model-value"])]),_:1},8,["message","classes"])}var Ac={name:"InlineColorInput",components:{"oxd-label":X.YP,"oxd-color-input":X.tv},inheritAttrs:!1,props:{label:{type:String,default:null,required:!1},rules:{type:Array,default:()=>[],required:!1},required:{type:Boolean,default:!1,required:!1},modelValue:{type:String,default:null,required:!1},disabled:{type:Boolean,default:!1,required:!1}},emits:["update:modelValue"],setup(e,t){const o=(0,a.toRef)(e,"disabled"),l=(0,a.toRef)(e,"modelValue"),n=l.value,i=async()=>{t.emit("update:modelValue",n),await(0,a.nextTick)()},{hasError:r,message:s}=(0,X.Mt)({fieldLabel:e.label??"",rules:e.rules,modelValue:l,onReset:i,disabled:o}),d=(0,a.computed)(()=>({label:{"oxd-input-field-required":e.required},message:{"oxd-input-field-error-message":r},wrapper:{"XHRM-color-input-wrapper":!0}}));return{classes:d,message:s,hasError:r}}};const Hc=(0,i.A)(Ac,[["render",Ic],["__scopeId","data-v-5afef8d1"]]);var Xc=Hc;const Uc={primaryColor:null,primaryFontColor:null,secondaryColor:null,secondaryFontColor:null,primaryGradientStartColor:null,primaryGradientEndColor:null},Lc={oldAttachment:null,newAttachment:null,method:"keepCurrent"};var Pc={components:{"oxd-switch-input":X.Ay,"file-upload-input":Uo,"inline-color-input":Xc},props:{allowedImageTypes:{type:Array,required:!0},aspectRatios:{type:Object,required:!0},aspectRatioTolerance:{type:Number,required:!0},maxFileSize:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/admin/theme"),{saveSuccess:o}=_t(),{formRef:l,invalid:n,validate:i}=Bc(),r=(0,a.reactive)({isLoading:!1,colors:{...Uc},clientLogo:{...Lc},clientBanner:{...Lc},loginBanner:{...Lc},showSocialMediaImages:!0}),s={color:[Kt,ko],clientLogo:[e=>"replaceCurrent"!==r.clientLogo.method||Kt(e),ho(e.maxFileSize),_o(e.aspectRatios.clientLogo,e.aspectRatioTolerance),go(e.allowedImageTypes)],clientBanner:[e=>"replaceCurrent"!==r.clientBanner.method||Kt(e),ho(e.maxFileSize),_o(e.aspectRatios.clientBanner,e.aspectRatioTolerance),go(e.allowedImageTypes)],loginBanner:[e=>"replaceCurrent"!==r.loginBanner.method||Kt(e),ho(e.maxFileSize),_o(e.aspectRatios.loginBanner,e.aspectRatioTolerance),go(e.allowedImageTypes)]},d=()=>{const e=e=>{if(null===e.method||"replaceCurrent"===e.method)return e.newAttachment};r.isLoading=!0,t.request({method:"PUT",url:"/api/v2/admin/theme",data:{variables:r.colors,showSocialMediaImages:r.showSocialMediaImages,currentClientLogo:r.clientLogo.method,clientLogo:e(r.clientLogo),currentClientBanner:r.clientBanner.method,clientBanner:e(r.clientBanner),currentLoginBanner:r.loginBanner.method,loginBanner:e(r.loginBanner)}}).then(()=>o()).then(()=>A())},c=()=>{r.isLoading=!0,t.request({method:"DELETE",url:"/api/v2/admin/theme"}).then(()=>A())},u=()=>{i().then(()=>{!0!==n.value&&(r.isLoading=!0,t.request({method:"POST",url:"/api/v2/admin/theme/preview",data:{...r.colors}}).then(e=>{const{data:t}=e.data;for(const o in t){const e=t[o];document.documentElement.style.setProperty(o,e)}}).finally(()=>r.isLoading=!1))})};return(0,a.onBeforeMount)(()=>{r.isLoading=!0,t.getAll().then(e=>{const{data:t}=e.data,{clientLogo:o,clientBanner:a,loginBanner:l,showSocialMediaImages:n,variables:i}=t;r.colors=i,null===o?r.clientLogo.method=null:(r.clientLogo.oldAttachment=o,r.clientLogo.oldAttachment.id="clientLogo"),null===a?r.clientBanner.method=null:(r.clientBanner.oldAttachment=a,r.clientBanner.oldAttachment.id="clientBanner"),null===l?r.loginBanner.method=null:(r.loginBanner.oldAttachment=l,r.loginBanner.oldAttachment.id="loginBanner"),r.showSocialMediaImages=n}).finally(()=>r.isLoading=!1)}),{rules:s,formRef:l,onFormSubmit:d,onClickReset:c,onClickPreview:u,...(0,a.toRefs)(r)}},computed:{formattedFileSize(){let e=Math.round(this.maxFileSize/1048576*100)/100;return 1===e?e+"MB":e+"MBs"}}};const qc=(0,i.A)(Pc,[["render",Tc],["__scopeId","data-v-3351a720"]]);var Fc=qc;const zc={class:"XHRM-background-container"},jc={class:"XHRM-paper-container"},Oc={class:"XHRM-header-container"},Gc={class:"XHRM-container"},Qc={class:"XHRM-bottom-container"};function Kc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("add-language-modal"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zc,[(0,a.createElementVNode)("div",jc,[(0,a.createElementVNode)("div",Oc,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.language_packages")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAddLanguage},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Gc,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[1]||(t[1]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",Qc,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[2]||(t[2]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),n.showAddLanguageModal?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,onClose:i.onAddLanguageModalClose},null,8,["onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const Wc={class:"XHRM-modal-header"},Jc={class:"addlanguage-note"},Yc={class:"addlanguage-note-text"};function Zc(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("languages-dropdown"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(g,{"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Wc,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_language_package")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(h,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language,"onUpdate:modelValue":t[0]||(t[0]=e=>n.language=e),rules:n.rules.language},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Jc,[(0,a.createElementVNode)("div",Yc,[(0,a.createVNode)(r,{class:"XHRM-sub-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.note")),1)]),_:1}),(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.translate_text_manually")),1)]),_:1})])])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,{class:"XHRM-form-action"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(m,{"display-type":"secondary",label:e.$t("general.save"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}function eu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("general.name"),options:l.options,required:""},null,8,["label","options"])}var tu={name:"LanguagesDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/admin/i18n/languages");return(0,a.onBeforeMount)(()=>{t.getAll({activeOnly:!1,limit:0}).then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.name}))})}),{options:e}}};const ou=(0,i.A)(tu,[["render",eu]]);var au=ou,lu={name:"AddLanguageModal",components:{"oxd-dialog":X.KB,"languages-dropdown":au},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/i18n/languages");return{http:e}},data(){return{isLoading:!1,language:null,rules:{language:[Kt]}}},methods:{onSave(){this.http.update(this.language.id,null).then(e=>{if(e)return this.$toast.saveSuccess()}).then(()=>{this.isLoading=!1,this.$emit("close")})},onCancel(){this.$emit("close")}}};const nu=(0,i.A)(lu,[["render",Zc],["__scopeId","data-v-607bfb1d"]]);var iu=nu;const ru={languageName:""},su={languageName:"ASC"};var du={name:"LanguagePackageList",components:{"delete-confirmation":Xt,"add-language-modal":iu},setup(){const e=(0,a.ref)({...ru}),{sortDefinition:t,sortOrder:o,onSort:l}=Ut({sortDefinition:su}),n=(0,a.computed)(()=>({sortOrder:o.value,activeOnly:!0})),i=new H(window.appGlobal.baseUrl,"/api/v2/admin/i18n/languages"),{showPaginator:r,currentPage:s,total:d,pages:c,pageSize:u,response:m,isLoading:p,execQuery:h}=Et(i,{query:n});return l(h),{http:i,showPaginator:r,currentPage:s,isLoading:p,total:d,pages:c,pageSize:u,execQuery:h,items:m,filters:e,sortDefinition:t}},data(){return{showAddLanguageModal:!1,headers:[{name:"name",slot:"title",title:this.$t("general.language_packages"),sortField:"languageName",style:{flex:"70%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),cellType:"oxd-table-cell-actions",style:{flex:1},cellConfig:{import:{component:"oxd-icon-button",onClick:this.onClickImport,props:{name:"upload"}},translate:{component:"oxd-icon-button",onClick:this.onClickTranslate,props:{name:"translate"}},export:{component:"oxd-icon-button",props:{name:"download"},onClick:this.onClickExport},delete:{component:"oxd-icon-button",props:{name:"trash"},onClick:this.onClickDelete}}}],checkedItems:[]}},methods:{onClickAddLanguage(){this.showAddLanguageModal=!0},onAddLanguageModalClose(){this.showAddLanguageModal=!1,this.reloadLanguages()},onCancel(){I("/admin/languagePackage")},async reloadLanguages(){await this.execQuery()},onClickTranslate(e){I("/admin/languageCustomization/{id}",{id:e.id})},onClickExport(e){const t=B("/admin/viewLanguagePackage/languageId/{languageId}",{languageId:e.id});window.open(t,"_blank")},onClickImport(e){I("/admin/languageImport/{languageId}",{languageId:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const cu=(0,i.A)(du,[["render",Kc],["__scopeId","data-v-e8f08714"]]);var uu=cu;const mu={class:"XHRM-background-container"},pu={class:"XHRM-paper-container"},hu={class:"XHRM-header-container"},gu={class:"XHRM-bottom-container"};function vu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("language-group-list-dropdown"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("oxd-alert"),y=(0,a.resolveComponent)("oxd-pagination"),C=(0,a.resolveComponent)("table-header"),V=(0,a.resolveComponent)("edit-translations");return(0,a.openBlock)(),(0,a.createElementBlock)("div",mu,[(0,a.createVNode)(v,{"filter-title":e.$t("admin.translate_language_package")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:l.onSubmit,onReset:l.onReset},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{value:o.languagePackage,label:e.$t("admin.language_package"),disabled:""},null,8,["value","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{value:o.sourceLanguage,label:e.$t("admin.source_language"),disabled:""},null,8,["value","label"])]),_:1})]),_:1}),(0,a.createVNode)(d,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.groupId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.groupId=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.sourceText,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.sourceText=e),label:e.$t("admin.source_text")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.translatedText,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.translatedText=e),label:e.$t("admin.translated_text")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.onlyTranslated,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.onlyTranslated=e),type:"select",label:e.$t("admin.show"),options:l.translationOptions},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.sortOrder,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.sortOrder=e),type:"select",label:e.$t("admin.order"),options:l.sortOptions},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(f,{show:!l.isLoading&&l.itemsModified,type:"info",message:e.$t("admin.please_save_before_pagination")},null,8,["show","message"]),(0,a.createElementVNode)("div",pu,[l.total>0?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0,loading:l.isLoading,onSubmitValid:l.onSubmitLangString,onReset:l.onReset},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",hu,[l.showPaginator&&!l.itemsModified?((0,a.openBlock)(),(0,a.createBlock)(y,{key:l.currentPage,current:l.currentPage,"onUpdate:current":t[5]||(t[5]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(C,{loading:l.isLoading,total:l.total,selected:0},null,8,["loading","total"]),l.items?.data?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,langstrings:l.items.data,"onUpdate:langstrings":[t[6]||(t[6]=e=>l.items.data=e),l.checkItemsModified]},null,8,["langstrings","onUpdate:langstrings"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",gu,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.cancel"),type:"reset"},null,8,["label"]),(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.save"),type:"submit"},null,8,["label"])])])]),_:1})]),_:1},8,["loading","onSubmitValid","onReset"])):(0,a.createCommentVNode)("",!0)])])}const fu={class:"XHRM-translation-container"};function yu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("lang-string-target-input"),u=(0,a.resolveComponent)("oxd-grid");return(0,a.openBlock)(),(0,a.createElementBlock)("div",fu,[(0,a.createVNode)(r),(0,a.createVNode)(u,{cols:3,class:"XHRM-translation-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.source_text")),1)]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.source_note")),1)]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.translated_text")),1)]),_:1})]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.langstrings,(t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:o},[(0,a.createVNode)(d,{class:"XHRM-translation-grid-text"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-translation-grid-langstring-header",type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.source_text")),1)]),_:1}),(0,a.createVNode)(s,{title:t.source},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.source),1)]),_:2},1032,["title"])]),_:2},1024),(0,a.createVNode)(d,{class:"XHRM-translation-grid-text"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-translation-grid-langstring-header-note",type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.source_note")),1)]),_:1}),(0,a.createVNode)(s,{title:t.note,class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.note),1)]),_:2},1032,["title"])]),_:2},1024),(0,a.createVNode)(d,{class:"XHRM-translation-grid-text"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-translation-grid-langstring-header",type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.translated_text")),1)]),_:1}),(0,a.createVNode)(c,{"lang-string-id":t.langStringId,placeholder:t.target,"model-value":t.target,"onUpdate:modelValue":e=>l.onUpdateTranslation(e,o)},null,8,["lang-string-id","placeholder","model-value","onUpdate:modelValue"]),(0,a.createVNode)(r,{class:"XHRM-translation-grid-langstring-header"})]),_:2},1024)],64))),128))]),_:1}),(0,a.createVNode)(r)])}function Cu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"input",rules:n.rules.langStringTarget},null,8,["rules"])}var Vu={props:{langStringId:{type:Number,required:!0},required:{type:Boolean,default:!1}},setup(e){const{$t:t}=Ie(),o=o=>new Promise(a=>{if(o){const l=new H(window.appGlobal.baseUrl,`/api/v2/admin/i18n/translation/${e.langStringId}/validate`);l.request({method:"GET",params:{translation:o}}).then(e=>{const{data:o}=e.data;return!0===o.valid?a(!0):a(t("admin."+o.code))})}else a(!0)});return{validateLangString:o}},data(){return{rules:{langStringTarget:this.required?[Kt,Wt(1e3),(0,X.Ld)(this.validateLangString,500)]:[Wt(1e3),(0,X.Ld)(this.validateLangString,500)]}}}};const bu=(0,i.A)(Vu,[["render",Cu]]);var wu=bu,xu={components:{LangStringTargetInput:wu},props:{langstrings:{type:Array,required:!0}},emits:["update:langstrings"],setup(e,t){const o=(o,a)=>{t.emit("update:langstrings",e.langstrings.map((e,t)=>{let l=e.modified?e.oldTarget:e.target??"";return t===a?{...e,target:o,oldTarget:l,modified:!0}:e}))};return{onUpdateTranslation:o}}};const Nu=(0,i.A)(xu,[["render",yu],["__scopeId","data-v-0ece836a"]]);var ku=Nu;function _u(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("admin.module"),options:l.options},null,8,["label","options"])}var Su={name:"GroupListDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/admin/i18n/groups");return(0,a.onBeforeMount)(()=>{t.getAll().then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.title}))})}),{options:e}}};const Du=(0,i.A)(Su,[["render",_u]]);var $u=Du;const Mu={sourceText:null,translatedText:null,groupId:null,sortOrder:null,onlyTranslated:null};var Eu={name:"LanguageTranslationList",components:{"language-group-list-dropdown":$u,"edit-translations":ku,"oxd-alert":X.qO},props:{languageId:{type:Number,required:!0},languagePackage:{type:String,required:!0},sourceLanguage:{type:String,required:!0}},setup(e){const{$t:t}=Ie(),{saveSuccess:o}=_t(),l=(0,a.ref)([{id:1,label:t("admin.all"),value:null},{id:2,label:t("admin.translated"),value:!0},{id:3,label:t("admin.not_translated"),value:!1}]),n=(0,a.ref)([{id:"ASC",label:t("general.ascending")},{id:"DESC",label:t("general.descending")}]),i=(0,a.ref)({...Mu,sortOrder:n.value[0],onlyTranslated:l.value[0]}),r=(0,a.computed)(()=>({sourceText:i.value.sourceText,translatedText:i.value.translatedText,groupId:i.value.groupId?.id,sortOrder:i.value.sortOrder?.id,onlyTranslated:i.value.onlyTranslated?.value})),s=new H(window.appGlobal.baseUrl,`/api/v2/admin/i18n/languages/${e.languageId}/translations`),{showPaginator:d,currentPage:c,total:u,pages:m,response:p,isLoading:h,execQuery:g}=Et(s,{query:r}),v=(0,a.ref)(!1),f=()=>{c.value=1,v.value=!1,i.value={...Mu,sortOrder:n.value[0]},g()},y=()=>{v.value=!1,g()},C=()=>{v.value=p.value.data.reduce((e,t)=>e||null!==t.target&&t.oldTarget!==t.target&&!0===t.modified,!1)},V=()=>{h.value=!0,s.request({method:"PUT",url:`/api/v2/admin/i18n/languages/${e.languageId}/translations/bulk`,data:{data:p.value.data.filter(e=>null!==e.target&&!0===e.modified).map(e=>({langStringId:e.langStringId,translatedValue:e.target}))}}).then(()=>o()).then(()=>{v.value=!1,g()})};return{showPaginator:d,currentPage:c,isLoading:h,total:u,pages:m,items:p,filters:i,translationOptions:l,sortOptions:n,onReset:f,onSubmit:y,onSubmitLangString:V,itemsModified:v,checkItemsModified:C}}};const Ru=(0,i.A)(Eu,[["render",vu],["__scopeId","data-v-48ed2b97"]]);var Tu=Ru;const Bu={class:"XHRM-background-container"},Iu={class:"XHRM-card-container"},Au={class:"XHRM-information-card-container"};function Hu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("language-string-import-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Bu,[(0,a.createElementVNode)("div",Iu,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.import_language_package"))+": "+(0,a.toDisplayString)(o.languageName),1)]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",Au,[(0,a.createVNode)(r,{class:"XHRM-sub-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.note"))+": ",1)]),_:1}),(0,a.createElementVNode)("ul",null,[(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.use_the_sample_template")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.only_edit_the_target_field")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.do_not_change_the_template")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.sample_xliff"))+": ",1),(0,a.createElementVNode)("a",{href:"#",class:"download-link",onClick:t[0]||(t[0]=(0,a.withModifiers)((...e)=>i.onClickDownload&&i.onClickDownload(...e),["prevent"]))},(0,a.toDisplayString)(e.$t("general.download")),1)]),_:1})])])]),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(v,{ref:"formRef",loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.attachment=e),type:"file",rules:n.rules.attachment,label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),placeholder:e.$t("general.no_file_selected"),required:""},null,8,["modelValue","rules","label","button-label","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{label:e.$t("general.upload")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),n.importModalState?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,data:n.importModalState,"language-id":o.languageId,onClose:i.onImportModalClose},null,8,["data","language-id","onClose"])):(0,a.createCommentVNode)("",!0)])}const Xu={class:"XHRM-modal-header"},Uu={class:"XHRM-text-center-align"},Lu={class:"XHRM-modal-footer"};function Pu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(d,{class:"XHRM-dialog-popup","onUpdate:show":i.onClose},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Xu,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.import_details")),1)]),_:1})]),(0,a.createElementVNode)("div",Uu,[o.data.success>0?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,type:"card-body",class:(0,a.normalizeClass)({"XHRM-success-message":o.data.success>0})},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.n_records_successfully_imported",{count:o.data.success})),1)]),_:1},8,["class"])):(0,a.createCommentVNode)("",!0),o.data.failed>0?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,type:"card-body",class:"XHRM-error-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.n_records_failed_to_import",{count:o.data.failed})),1)]),_:1})):(0,a.createCommentVNode)("",!0),o.data.skipped>0?((0,a.openBlock)(),(0,a.createBlock)(r,{key:2,type:"card-body",class:"XHRM-warn-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.n_records_skipped",{count:o.data.skipped})),1)]),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",Lu,[0===o.data.failed?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"display-type":"secondary",label:e.$t("general.ok"),onClick:i.onClose},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),o.data.failed>0?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,"display-type":"secondary",label:e.$t("admin.fix_errors",{count:o.data.failed}),onClick:i.onClickFixErrors},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)])]),_:1},8,["onUpdate:show"])}var qu={name:"LanguageStringsImportModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,required:!0},languageId:{type:Number,required:!0}},emits:["close"],methods:{onClose(){this.$emit("close",!0)},onClickFixErrors(){I("/admin/fixLanguageStringErrors/{languageId}",{languageId:this.languageId})}}};const Fu=(0,i.A)(qu,[["render",Pu],["__scopeId","data-v-3d5649e4"]]);var zu=Fu;const ju={attachment:null};var Ou={components:{SubmitButton:s,RequiredText:C,"language-string-import-modal":zu},props:{languageId:{type:Number,required:!0},languageName:{type:String,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/i18n/languages/${e.languageId}/import`),{formRef:o,reset:a}=Bc();return{http:t,reset:a,formRef:o}},data(){return{isLoading:!1,attachment:{...ju},rules:{attachment:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)]},importModalState:null}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.attachment}).then(e=>{const{meta:t}=e.data;this.importModalState=t}).finally(()=>{this.reset(),this.isLoading=!1})},onClickDownload(){const e=`${window.appGlobal.baseUrl}/admin/viewLanguagePackage/languageId/${this.languageId}`;window.open(e,"_blank")},onImportModalClose(){this.importModalState=null}}};const Gu=(0,i.A)(Ou,[["render",Hu],["__scopeId","data-v-db309d8c"]]);var Qu=Gu;const Ku={class:"XHRM-background-container"},Wu={class:"XHRM-card-container"},Ju={class:"XHRM-header-container"};function Yu(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-switch-input"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-icon"),g=(0,a.resolveComponent)("oxd-alert"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("ldap-test-connection-modal"),V=(0,a.resolveComponent)("ldap-sync-connection");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ku,[(0,a.createElementVNode)("div",Wu,[(0,a.createElementVNode)("div",Ju,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.ldap_configuration")),1)]),_:1}),(0,a.createVNode)(s,{modelValue:n.configuration.enable,"onUpdate:modelValue":t[0]||(t[0]=e=>n.configuration.enable=e),"label-position":"left","option-label":e.$t("general.enable")},null,8,["modelValue","option-label"])]),(0,a.createVNode)(d),(0,a.createVNode)(y,{ref:"formRef",loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-subtitle"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.server_settings")),1)]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.hostname,"onUpdate:modelValue":t[1]||(t[1]=e=>n.configuration.hostname=e),label:e.$t("admin.host"),rules:n.rules.hostname,required:""},null,8,["modelValue","label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.ldap_host_input_hint")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"XHRM-column-half"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.port,"onUpdate:modelValue":t[2]||(t[2]=e=>n.configuration.port=e),label:e.$t("admin.port"),rules:n.rules.port,required:""},null,8,["modelValue","label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.port_input_hint")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.encryption,"onUpdate:modelValue":t[3]||(t[3]=e=>n.configuration.encryption=e),type:"select",options:n.encryptionOptions,label:e.$t("admin.encryption")},null,8,["modelValue","options","label"])]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.ldapImplementation,"onUpdate:modelValue":t[4]||(t[4]=e=>n.configuration.ldapImplementation=e),type:"select","show-empty-selector":!1,options:n.ldapImplementationOptions,label:e.$t("admin.ldap_implementation")},null,8,["modelValue","options","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-form-divider"}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-subtitle"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.bind_settings")),1)]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-ldap-switch"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-ldap-switch-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.bind_anonymously")),1)]),_:1}),(0,a.createVNode)(s,{modelValue:n.configuration.bindAnonymously,"onUpdate:modelValue":t[5]||(t[5]=e=>n.configuration.bindAnonymously=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),n.configuration.bindAnonymously?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(p,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.bindUserDN,"onUpdate:modelValue":t[6]||(t[6]=e=>n.configuration.bindUserDN=e),label:e.$t("admin.distinguished_name"),rules:n.rules.bindUserDN,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.bindUserPassword,"onUpdate:modelValue":t[7]||(t[7]=e=>n.configuration.bindUserPassword=e),type:"password",label:e.$t("general.password"),placeholder:i.passwordPlaceHolder,rules:n.rules.bindUserPassword,required:!n.configuration.hasBindUserPassword},null,8,["modelValue","label","placeholder","rules","required"])]),_:1})]),_:1})]),_:1})),(0,a.createVNode)(d,{class:"XHRM-form-divider"}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-subtitle"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.user_lookup_settings")),1)]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.baseDistinguishedName,"onUpdate:modelValue":t[8]||(t[8]=e=>n.configuration.baseDistinguishedName=e),label:e.$t("admin.base_distinguished_name"),rules:n.rules.baseDistinguishedName,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.searchScope,"onUpdate:modelValue":t[9]||(t[9]=e=>n.configuration.searchScope=e),type:"select","show-empty-selector":!1,options:n.searchScopeOptions,label:e.$t("admin.search_scope")},null,8,["modelValue","options","label"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.search_scope_input_hint")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.userNameAttribute,"onUpdate:modelValue":t[10]||(t[10]=e=>n.configuration.userNameAttribute=e),label:e.$t("admin.user_name_attribute"),rules:n.rules.userNameAttribute,required:""},null,8,["modelValue","label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.user_name_input_hint")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-4"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.userSearchFilter,"onUpdate:modelValue":t[11]||(t[11]=e=>n.configuration.userSearchFilter=e),label:e.$t("admin.user_search_filter"),rules:n.rules.userSearchFilter,required:""},null,8,["modelValue","label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.user_search_filter_input_hint")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-5"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.userUniqueIdAttribute,"onUpdate:modelValue":t[12]||(t[12]=e=>n.configuration.userUniqueIdAttribute=e),label:e.$t("admin.user_unique_id_attribute"),rules:n.rules.userUniqueIdAttribute},null,8,["modelValue","label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.user_unique_attribute_input_hint")),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-form-divider"}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-subtitle"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.data_mapping")),1)]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-ldap-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-ldap-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.field_in_XHRM")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.field_in_ldap_directory")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.use_this_field_as_the_employee_user_mapping_field")),1)]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"oxd-input-field-required"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.first_name")),1)]),_:1}),(0,a.createVNode)(h,{class:"XHRM-ldap-grid-icon",name:"arrow-left"})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.dataMapping.firstName,"onUpdate:modelValue":t[13]||(t[13]=e=>n.configuration.dataMapping.firstName=e),rules:n.rules.firstNameAttribute,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.middle_name")),1)]),_:1}),(0,a.createVNode)(h,{class:"XHRM-ldap-grid-icon",name:"arrow-left"})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.dataMapping.middleName,"onUpdate:modelValue":t[14]||(t[14]=e=>n.configuration.dataMapping.middleName=e),rules:n.rules.middleNameAttribute},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"oxd-input-field-required"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.last_name")),1)]),_:1}),(0,a.createVNode)(h,{class:"XHRM-ldap-grid-icon",name:"arrow-left"})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.dataMapping.lastName,"onUpdate:modelValue":t[15]||(t[15]=e=>n.configuration.dataMapping.lastName=e),rules:n.rules.lastNameAttribute},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.user_status")),1)]),_:1}),(0,a.createVNode)(h,{class:"XHRM-ldap-grid-icon",name:"arrow-left"})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.dataMapping.userStatus,"onUpdate:modelValue":t[16]||(t[16]=e=>n.configuration.dataMapping.userStatus=e),rules:n.rules.userStatusAttribute},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:(0,a.normalizeClass)(i.workEmailLabelClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.work_email")),1)]),_:1},8,["class"]),(0,a.createVNode)(h,{class:"XHRM-ldap-grid-icon",name:"arrow-left"})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(c,{key:n.configuration.employeeSelectorMapping,modelValue:n.configuration.dataMapping.workEmail,"onUpdate:modelValue":t[17]||(t[17]=e=>n.configuration.dataMapping.workEmail=e),rules:n.rules.workEmailAttribute},null,8,["modelValue","rules"]))]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{modelValue:n.configuration.employeeSelectorMapping,"onUpdate:modelValue":t[18]||(t[18]=e=>n.configuration.employeeSelectorMapping=e),"true-value":"workEmail"},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(u,{class:"XHRM-ldap-grid-content"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:(0,a.normalizeClass)(i.employeeIdLabelClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.employee_id")),1)]),_:1},8,["class"]),(0,a.createVNode)(h,{class:"XHRM-ldap-grid-icon",name:"arrow-left"})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(c,{key:n.configuration.employeeSelectorMapping,modelValue:n.configuration.dataMapping.employeeId,"onUpdate:modelValue":t[19]||(t[19]=e=>n.configuration.dataMapping.employeeId=e),rules:n.rules.employeeIdAttribute},null,8,["modelValue","rules"]))]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{modelValue:n.configuration.employeeSelectorMapping,"onUpdate:modelValue":t[20]||(t[20]=e=>n.configuration.employeeSelectorMapping=e),"true-value":"employeeId"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-form-divider"}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-subtitle"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.additional_settings")),1)]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-ldap-switch --offset-row-1"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-ldap-switch-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.merge_ldap_users_with_existing_system_users")),1)]),_:1}),(0,a.createVNode)(s,{modelValue:n.configuration.mergeLDAPUsersWithExistingSystemUsers,"onUpdate:modelValue":t[21]||(t[21]=e=>n.configuration.mergeLDAPUsersWithExistingSystemUsers=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.configuration.syncInterval,"onUpdate:modelValue":t[22]||(t[22]=e=>n.configuration.syncInterval=e),label:e.$t("admin.sync_interval"),rules:n.rules.syncInterval,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(g,{type:"warn",show:!0,message:e.$t("admin.ldap_configuration_warning_message")},null,8,["message"]),(0,a.createVNode)(d),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("admin.test_connection"),onClick:i.onClickTest},null,8,["label","onClick"]),(0,a.createVNode)(v,{type:"button",class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.save"),onClick:i.onClickSave},null,8,["label","onClick"])]),_:1})]),_:1},8,["loading"])]),n.testModalState?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,data:n.testModalState,onClose:i.onCloseTestModal},null,8,["data","onClose"])):(0,a.createCommentVNode)("",!0),t[23]||(t[23]=(0,a.createElementVNode)("br",null,null,-1)),o.showSync?((0,a.openBlock)(),(0,a.createBlock)(V,{key:1})):(0,a.createCommentVNode)("",!0)])}const Zu={class:"XHRM-paper-container"},em={class:"XHRM-header-container"},tm={class:"XHRM-ldap-sync"};function om(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-loading-spinner"),d=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Zu,[(0,a.createElementVNode)("div",em,[(0,a.createElementVNode)("div",tm,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.sync_connection")),1)]),_:1}),(0,a.withDirectives)((0,a.createVNode)(r,{type:"card-body",class:"XHRM-ldap-sync-time"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)(" ("+(0,a.toDisplayString)(i.lastSync)+") ",1)]),_:1},512),[[a.vShow,i.lastSync]])]),n.isLoading?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"XHRM-ldap-sync-loader"})):((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,"display-type":"secondary",class:"XHRM-ldap-sync-button",label:e.$t("admin.sync_now"),onClick:i.onClickSync},null,8,["label","onClick"]))])])}var am={name:"LdapSyncConnection",components:{"oxd-loading-spinner":X.VJ},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/ldap/user-sync"),{jsDateFormat:t}=F();return{http:e,jsDateFormat:t}},data(){return{isLoading:!1,lastSyncDate:null,lastSyncTime:null,lastSyncStatus:null}},computed:{lastSync(){if(2===this.lastSyncStatus)return null;if(this.lastSyncDate&&this.lastSyncTime){const e=he(`${this.lastSyncDate} ${this.lastSyncTime} +00:00`,"yyyy-MM-dd HH:mm xxx");return this.$t(1===this.lastSyncStatus?"admin.last_synced_on_datetime":"admin.last_sync_failed_on_datetime",{datetime:ge(e,`hh:mm a ${this.jsDateFormat}`)})}return null}},beforeMount(){this.getLastSyncStatus()},methods:{getLastSyncStatus(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.lastSyncStatus=t.syncStatus,this.lastSyncDate=t.syncFinishedAt?.date||t.syncStartedAt?.date,this.lastSyncTime=t.syncFinishedAt?.time||t.syncStartedAt?.time}).finally(()=>{this.isLoading=!1})},onClickSync(){this.isLoading=!0,this.http.create().then(e=>{const{data:t}=e.data;this.lastSyncStatus=t.syncStatus,this.lastSyncDate=t.syncFinishedAt?.date||t.syncStartedAt?.date,this.lastSyncTime=t.syncFinishedAt?.time||t.syncStartedAt?.time,this.$toast.success({title:this.$t("general.success"),message:this.$t("admin.synchronization_successful")})}).catch(()=>{this.getLastSyncStatus(),this.$toast.error({title:this.$t("general.error"),message:this.$t("admin.synchronization_failed")})}).finally(()=>{this.isLoading=!1})}}};const lm=(0,i.A)(am,[["render",om],["__scopeId","data-v-0651e71e"]]);var nm=lm;const im={class:"XHRM-modal-header"};function rm(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(d,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",im,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.connection_status")),1)]),_:1})]),(0,a.createVNode)(s),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.data,e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"XHRM-ldap-test"},[(0,a.createVNode)(r,{tag:"p",class:"XHRM-ldap-test-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.category),1)]),_:2},1024),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.checks,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:"XHRM-ldap-test-row"},[(0,a.createVNode)(r,{class:"XHRM-ldap-test-content"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.label),1)]),_:2},1024),(0,a.createVNode)(r,{class:(0,a.normalizeClass)(i.getClass(e.value.status))},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.value.message),1)]),_:2},1032,["class"])]))),128))]))),128))]),_:1},8,["onUpdate:show"])}var sm={name:"LdapTestConnectionModal",components:{"oxd-dialog":X.KB},props:{data:{type:Array,default:()=>[]}},emits:["close"],methods:{getClass(e){return 1===e?"XHRM-ldap-test-value --success":"XHRM-ldap-test-value --error"},onCancel(){this.$emit("close")}}};const dm=(0,i.A)(sm,[["render",rm],["__scopeId","data-v-66896976"]]);var cm=dm;const um={enable:!1,hostname:"localhost",port:389,encryption:null,ldapImplementation:null,bindAnonymously:!0,bindUserDN:null,bindUserPassword:null,baseDistinguishedName:null,searchScope:null,userNameAttribute:"cn",userSearchFilter:"objectClass=person",userUniqueIdAttribute:null,mergeLDAPUsersWithExistingSystemUsers:!1,syncInterval:1,employeeSelectorMapping:"",hasBindUserPassword:!1},mm={firstName:"givenName",lastName:"sn",middleName:null,userStatus:null,workEmail:null,employeeId:null};var pm={components:{"oxd-icon":X.dp,"oxd-alert":X.qO,"oxd-switch-input":X.Ay,"ldap-sync-connection":nm,"ldap-test-connection-modal":cm},props:{showSync:{type:Boolean,default:!1}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/ldap-config"),{formRef:t,invalid:o,validate:a}=Bc();return{http:e,formRef:t,invalid:o,validate:a}},data(){return{isLoading:!1,configuration:{...um,dataMapping:{...mm}},encryptionOptions:[{id:"tls",label:this.$t("admin.tls")},{id:"ssl",label:this.$t("admin.ssl")}],searchScopeOptions:[{id:"sub",label:this.$t("admin.subtree")},{id:"one",label:this.$t("admin.one_level")}],ldapImplementationOptions:[{id:"OpenLDAP",label:this.$t("admin.open_ldap_v3")},{id:"ActiveDirectory",label:this.$t("admin.ms_active_directory")}],rules:{hostname:[Kt,Mo,Wt(255)],port:[Kt,Eo(5,0,65535)],bindUserDN:[Kt,Wt(255)],bindUserPassword:[e=>this.configuration.hasBindUserPassword||Kt(e),Wt(255)],baseDistinguishedName:[Kt,Wt(255)],userNameAttribute:[Kt,Wt(100)],userSearchFilter:[Kt,Wt(100)],userUniqueIdAttribute:[Wt(100)],firstNameAttribute:[Kt,Wt(100)],lastNameAttribute:[Kt,Wt(100)],syncInterval:[Kt,to,No(1,23)],middleNameAttribute:[Wt(100)],userStatusAttribute:[Wt(100)],workEmailAttribute:[e=>"workEmail"!==this.configuration.employeeSelectorMapping||Kt(e),Wt(100)],employeeIdAttribute:[e=>"employeeId"!==this.configuration.employeeSelectorMapping||Kt(e),Wt(100)]},testModalState:null}},computed:{passwordPlaceHolder(){return this.configuration.hasBindUserPassword?"********":null},workEmailLabelClasses(){return{"oxd-input-field-required":"workEmail"===this.configuration.employeeSelectorMapping}},employeeIdLabelClasses(){return{"oxd-input-field-required":"employeeId"===this.configuration.employeeSelectorMapping}}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data,{userLookupSettings:o}=t,a=o[0];this.configuration.enable=t.enable,this.configuration.hostname=t.hostname,this.configuration.port=t.port,this.configuration.encryption=this.encryptionOptions.find(e=>e.id===t.encryption),this.configuration.ldapImplementation=this.ldapImplementationOptions.find(e=>e.id===t.ldapImplementation)||this.ldapImplementationOptions[0],this.configuration.bindAnonymously=t.bindAnonymously,this.configuration.bindUserDN=t.bindUserDN,this.configuration.hasBindUserPassword=t.hasBindUserPassword,a&&(this.configuration.baseDistinguishedName=a?.baseDN,this.configuration.userNameAttribute=a?.userNameAttribute,this.configuration.userSearchFilter=a?.userSearchFilter,this.configuration.userUniqueIdAttribute=a?.userUniqueIdAttribute,Array.isArray(a?.employeeSelectorMapping)&&(0===a.employeeSelectorMapping.length?this.configuration.employeeSelectorMapping="":this.configuration.employeeSelectorMapping=a.employeeSelectorMapping[0]["field"])),this.configuration.searchScope=this.searchScopeOptions.find(e=>e.id===a?.searchScope)||this.searchScopeOptions[0],this.configuration.dataMapping=t.dataMapping,this.configuration.mergeLDAPUsersWithExistingSystemUsers=t.mergeLDAPUsersWithExistingSystemUsers,this.configuration.syncInterval=t.syncInterval}).finally(()=>{this.isLoading=!1})},methods:{onClickTest(){this.validate().then(()=>{if(!0===this.invalid)return;this.isLoading=!0;const e=this.getRequestBody();delete e.enable,delete e.syncInterval,this.http.request({method:"POST",url:"/api/v2/admin/ldap-test-connection",data:e}).then(e=>{const{data:t}=e.data;this.testModalState=t}).finally(()=>this.isLoading=!1)})},getRequestBody(){let e;return this.configuration.employeeSelectorMapping&&(e=[{field:this.configuration.employeeSelectorMapping,attributeName:this.configuration.dataMapping[this.configuration.employeeSelectorMapping]}]),{enable:this.configuration.enable,hostname:this.configuration.hostname,port:parseInt(this.configuration.port),encryption:this.configuration.encryption?.id||"none",ldapImplementation:this.configuration.ldapImplementation?.id,bindAnonymously:this.configuration.bindAnonymously,bindUserDN:this.configuration.bindUserDN,bindUserPassword:this.configuration.bindUserPassword,userLookupSettings:[{baseDN:this.configuration.baseDistinguishedName,searchScope:this.configuration.searchScope?.id,userNameAttribute:this.configuration.userNameAttribute,userSearchFilter:this.configuration.userSearchFilter,userUniqueIdAttribute:this.configuration.userUniqueIdAttribute,employeeSelectorMapping:e||[]}],dataMapping:this.configuration.dataMapping,mergeLDAPUsersWithExistingSystemUsers:this.configuration.mergeLDAPUsersWithExistingSystemUsers,syncInterval:parseInt(this.configuration.syncInterval)}},onClickSave(){this.validate().then(()=>{!0!==this.invalid&&(this.isLoading=!0,this.http.request({method:"PUT",data:this.getRequestBody()}).then(()=>this.$toast.updateSuccess()).finally(()=>A()))})},onCloseTestModal(){this.testModalState=null}}};const hm=(0,i.A)(pm,[["render",Yu],["__scopeId","data-v-007da83e"]]);var gm=hm;const vm={class:"XHRM-background-container"},fm={class:"XHRM-paper-container"},ym={class:"XHRM-header-container"},Cm={class:"XHRM-container"},Vm={class:"XHRM-bottom-container"};function bm(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",vm,[(0,a.createElementVNode)("div",fm,[(0,a.createElementVNode)("div",ym,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.provider_list")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Cm,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",Vm,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var wm={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/auth/openid-providers"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"providerName",slot:"title",title:this.$t("general.name"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/addAuthProvider")},onClickEdit(e){I("/admin/editAuthProvider/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const xm=(0,i.A)(wm,[["render",bm]]);var Nm=xm;const km={class:"XHRM-background-container"},_m={class:"XHRM-card-container"};function Sm(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",km,[(0,a.createElementVNode)("div",_m,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.add_provider")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.authProvider.name=e),rules:n.rules.name,label:e.$t("general.name"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.url,"onUpdate:modelValue":t[1]||(t[1]=e=>n.authProvider.url=e),rules:n.rules.url,label:e.$t("admin.url"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.clientId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.authProvider.clientId=e),rules:n.rules.clientId,label:e.$t("admin.client_id"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.clientSecret,"onUpdate:modelValue":t[3]||(t[3]=e=>n.authProvider.clientSecret=e),rules:n.rules.clientSecret,label:e.$t("admin.client_secret"),type:"password",required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Dm={name:"",url:"",clientId:"",clientSecret:""};var $m={name:"AddProvider",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/auth/openid-providers"),{createUniqueValidator:t}=Lo(e),o=t("OpenIdProvider","providerName",{matchByField:"status",matchByValue:1});return{http:e,providerNameUniqueValidation:o}},data(){return{isLoading:!1,authProvider:{...Dm},rules:{name:[Kt,this.providerNameUniqueValidation,Wt(40)],clientId:[Kt,Wt(255)],clientSecret:[Kt,Wt(255)],url:[Kt,Wt(2e3)]}}},methods:{onCancel(){I("/admin/openIdProvider")},onSave(){this.isLoading=!0,this.http.create({...this.authProvider,name:this.authProvider.name.trim()}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const Mm=(0,i.A)($m,[["render",Sm]]);var Em=Mm;const Rm={class:"XHRM-background-container"},Tm={class:"XHRM-card-container"};function Bm(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Rm,[(0,a.createElementVNode)("div",Tm,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.edit_provider")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.authProvider.name=e),rules:n.rules.name,label:e.$t("general.name"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.url,"onUpdate:modelValue":t[1]||(t[1]=e=>n.authProvider.url=e),label:e.$t("admin.url"),required:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.clientId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.authProvider.clientId=e),label:e.$t("admin.client_id"),required:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.authProvider.clientSecret,"onUpdate:modelValue":t[3]||(t[3]=e=>n.authProvider.clientSecret=e),label:e.$t("admin.client_secret"),placeholder:n.secretPlaceholder,required:""},null,8,["modelValue","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var Im={name:"EditProvider",props:{id:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/auth/openid-providers"),{createUniqueValidator:o}=Lo(t),a=o("OpenIdProvider","providerName",{entityId:e.id,matchByField:"status",matchByValue:1});return{http:t,providerNameUniqueValidation:a}},data(){return{isLoading:!1,secretPlaceholder:"",authProvider:{name:"",url:"",clientId:"",clientSecret:""},rules:{name:[Kt,this.providerNameUniqueValidation,Wt(40)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.id).then(e=>{const{data:t}=e.data;this.authProvider.name=t.providerName,this.authProvider.url=t.providerUrl,this.authProvider.clientId=t.clientId,this.secretPlaceholder=t.clientId?"******":""}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/admin/openIdProvider")},onSave(){this.isLoading=!0,this.http.update(this.id,{name:this.authProvider.name,url:this.authProvider.url,clientId:this.authProvider.clientId,clientSecret:""===this.authProvider.clientSecret?null:this.authProvider.clientSecret}).then(()=>(this.isLoading=!1,this.$toast.updateSuccess())).then(()=>{this.onCancel()})}}};const Am=(0,i.A)(Im,[["render",Bm]]);var Hm=Am;const Xm={class:"XHRM-background-container"},Um={class:"XHRM-paper-container"},Lm={class:"XHRM-header-container"},Pm={class:"XHRM-bottom-container"},qm={key:0,class:"loading-spinner"};function Fm(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-alert"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-pagination"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("edit-translations"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Xm,[(0,a.createVNode)(r,{show:!l.isLoading&&l.showPaginator&&l.itemsModified,type:"info",message:e.$t("admin.please_save_before_pagination")},null,8,["show","message"]),(0,a.createElementVNode)("div",Um,[l.total>0?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0,loading:l.isLoading,onSubmitValid:l.onSubmitLangString,onReset:l.onReset},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Lm,[(0,a.createVNode)(s,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.errors_in_import_language_packages")),1)]),_:1}),l.showPaginator&&!l.itemsModified?((0,a.openBlock)(),(0,a.createBlock)(d,{key:l.currentPage,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(c,{loading:l.isLoading,total:l.total,selected:0,"records-found-lang-string":"admin.n_errors_found"},null,8,["loading","total"]),l.items?.data?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,langstrings:l.items.data,"onUpdate:langstrings":[t[1]||(t[1]=e=>l.items.data=e),l.checkItemsModified]},null,8,["langstrings","onUpdate:langstrings"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Pm,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(m,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.save"),type:"submit",disabled:l.isLoading},null,8,["label","disabled"]),l.isLoading?((0,a.openBlock)(),(0,a.createElementBlock)("span",qm)):(0,a.createCommentVNode)("",!0)])])]),_:1})]),_:1},8,["loading","onSubmitValid","onReset"])):(0,a.createCommentVNode)("",!0)])])}const zm={class:"XHRM-translation-container"};function jm(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("lang-string-target-input"),u=(0,a.resolveComponent)("oxd-grid");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zm,[(0,a.createVNode)(r),(0,a.createVNode)(u,{cols:2,class:"XHRM-translation-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.source_text")),1)]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.error")),1)]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.translated_text")),1)]),_:1})]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.langstrings,(t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:o},[(0,a.createVNode)(d,{class:"XHRM-translation-grid-text"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-translation-grid-langstring-header",type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.source_text")),1)]),_:1}),(0,a.createVNode)(s,{title:t.source},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.source),1)]),_:2},1032,["title"])]),_:2},1024),(0,a.createVNode)(d,{class:"XHRM-translation-grid-text"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{title:t.error.message,class:"XHRM-translation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin."+t.error.code)),1)]),_:2},1032,["title"])]),_:2},1024),(0,a.createVNode)(d,{class:"XHRM-translation-grid-text"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-translation-grid-langstring-header",type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.translated_text")),1)]),_:1}),(0,a.createVNode)(c,{"lang-string-id":t.langStringId,placeholder:t.target,"model-value":t.target,required:!0,"onUpdate:modelValue":e=>l.onUpdateTranslation(e,o)},null,8,["lang-string-id","placeholder","model-value","onUpdate:modelValue"]),(0,a.createVNode)(r,{class:"XHRM-translation-grid-langstring-header"})]),_:2},1024)],64))),128))]),_:1}),(0,a.createVNode)(r)])}var Om={components:{LangStringTargetInput:wu},props:{langstrings:{type:Array,required:!0}},emits:["update:langstrings"],setup(e,t){const o=(o,a)=>{const l=[...e.langstrings];l[a].target=o,l[a].modified=!0,t.emit("update:langstrings",l)};return{onUpdateTranslation:o}}};const Gm=(0,i.A)(Om,[["render",jm],["__scopeId","data-v-6b3e30ad"]]);var Qm=Gm,Km={name:"FixLanguageStringErrors",components:{"oxd-alert":X.qO,"edit-translations":Qm},props:{languageId:{type:Number,required:!0},empNumber:{type:Number,required:!0},languagePackage:{type:String,required:!0},sourceLanguage:{type:String,required:!0}},setup(e){const{saveSuccess:t}=_t(),o=new H(window.appGlobal.baseUrl,`/api/v2/admin/i18n/languages/${e.languageId}/translations/errors`),{showPaginator:l,currentPage:n,total:i,pages:r,response:s,isLoading:d,execQuery:c}=Et(o),u=(0,a.ref)(!1),m=()=>{n.value=1,u.value=!1,c()},p=()=>{u.value=s.value.data.reduce((e,t)=>e||""!==t.target&&!0===t.modified,!1)},h=()=>{d.value=!0,o.request({method:"PUT",url:`/api/v2/admin/i18n/languages/${e.languageId}/translations/bulk`,data:{data:s.value.data.filter(e=>null!==e.target&&!0===e.modified).map(e=>({langStringId:e.langStringId,translatedValue:e.target}))}}).then(()=>t()).then(()=>{n.value=1,u.value=!1,c()})};return{showPaginator:l,currentPage:n,isLoading:d,total:i,pages:r,items:s,onReset:m,onSubmitLangString:h,itemsModified:u,checkItemsModified:p}},watch:{total(e){0===e&&I("/admin/languagePackage")}}};const Wm=(0,i.A)(Km,[["render",Fm],["__scopeId","data-v-54b36682"]]);var Jm=Wm,Ym={"job-title-list":zt,"job-title-edit":zo,"job-title-save":Jo,"job-category-list":ia,"job-category-edit":ma,"job-category-save":ya,"qualification-education-list":sn,"qualification-education-edit":hn,"qualification-education-save":Vn,"system-user-list":Ia,"system-user-edit":ll,"system-user-save":Ja,"organization-structure":El,"employment-status-list":Ol,"employment-status-save":Yl,"employment-status-edit":Hl,"qualification-skill-list":$n,"qualification-skill-edit":An,"qualification-skill-save":Fn,"license-list":ci,"license-save":ti,"license-edit":Kn,"module-configuration-edit":Vd,"qualification-language-list":Ei,"qualification-language-edit":vi,"qualification-language-save":wi,"qualification-membership-list":Li,"qualification-membership-edit":Oi,"qualification-membership-save":Yi,"organization-general-information-view":nr,"nationality-list":hr,"nationality-edit":Vr,"nationality-save":_r,"location-list":Gr,"location-save":es,"location-edit":rs,"email-configuration-view":Ir,"pay-grade-list":fs,"pay-grade-add":xs,"pay-grade-edit":od,"work-shift-list":$d,"work-shift-save":Ld,"work-shift-edit":Gd,"email-subscription-list":tc,"email-subscription-edit":wc,"localization-configuration":Dc,"corporate-branding":Fc,"language-package-list":uu,"language-translation-edit":Tu,"language-import":Qu,"ldap-configuration":gm,"auth-provider-list":Nm,"add-auth-provider":Em,"edit-auth-provider":Hm,"fix-language-errors":Jm};const Zm={class:"XHRM-background-container"},ep={class:"XHRM-card-container"},tp={class:"XHRM-employee-container"},op={class:"XHRM-employee-image"},ap={class:"XHRM-employee-form"};function lp(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("profile-image-input"),c=(0,a.resolveComponent)("full-name-input"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-input-field"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("oxd-switch-input"),v=(0,a.resolveComponent)("oxd-input-group"),f=(0,a.resolveComponent)("password-input"),y=(0,a.resolveComponent)("required-text"),C=(0,a.resolveComponent)("oxd-button"),V=(0,a.resolveComponent)("submit-button"),b=(0,a.resolveComponent)("oxd-form-actions"),w=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Zm,[(0,a.createElementVNode)("div",ep,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_employee")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(w,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",tp,[(0,a.createElementVNode)("div",op,[(0,a.createVNode)(d,{modelValue:l.employee.empPicture,"onUpdate:modelValue":t[0]||(t[0]=e=>l.employee.empPicture=e),rules:n.rules.empPicture,"img-src":i.profilePicUrl},null,8,["modelValue","rules","img-src"])]),(0,a.createElementVNode)("div",ap,[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{firstName:l.employee.firstName,"onUpdate:firstName":t[1]||(t[1]=e=>l.employee.firstName=e),middleName:l.employee.middleName,"onUpdate:middleName":t[2]||(t[2]=e=>l.employee.middleName=e),lastName:l.employee.lastName,"onUpdate:lastName":t[3]||(t[3]=e=>l.employee.lastName=e),rules:n.rules},null,8,["firstName","middleName","lastName","rules"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.employee.employeeId,"onUpdate:modelValue":t[4]||(t[4]=e=>l.employee.employeeId=e),label:e.$t("general.employee_id"),rules:n.rules.employeeId},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{class:"user-form-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"user-form-header-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.create_login_details")),1)]),_:1}),(0,a.createVNode)(g,{modelValue:n.createLogin,"onUpdate:modelValue":t[5]||(t[5]=e=>n.createLogin=e)},null,8,["modelValue"])]),_:1}),n.createLogin?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.user.username,"onUpdate:modelValue":t[6]||(t[6]=e=>n.user.username=e),label:e.$t("general.username"),rules:n.rules.username,required:"",autocomplete:"off"},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{label:e.$t("general.status"),classes:{wrapper:"--status-grouped-field"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.user.status,"onUpdate:modelValue":t[7]||(t[7]=e=>n.user.status=e),type:"radio","option-label":e.$t("general.enabled"),value:"1"},null,8,["modelValue","option-label"]),(0,a.createVNode)(p,{modelValue:n.user.status,"onUpdate:modelValue":t[8]||(t[8]=e=>n.user.status=e),type:"radio","option-label":e.$t("general.disabled"),value:"2"},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,{password:n.user.password,"onUpdate:password":t[9]||(t[9]=e=>n.user.password=e),passwordConfirm:n.user.passwordConfirm,"onUpdate:passwordConfirm":t[10]||(t[10]=e=>n.user.passwordConfirm=e),"is-password-required":o.isPasswordRequired},null,8,["password","passwordConfirm","is-password-required"])],64)):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(s),(0,a.createVNode)(b,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y),(0,a.createVNode)(C,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(V)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const np={class:"employee-image-wrapper"},ip=["src"];function rp(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("oxd-input-field"),d=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(s,(0,a.mergeProps)({ref:"fileInput"},e.$attrs,{type:"file"}),{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",np,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:o.imgSrc},null,8,ip)]),(0,a.createVNode)(r,{name:"plus",role:"none","display-type":"solid-main",class:"employee-image-action"})]),_:1},16),(0,a.createVNode)(d,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accept_jpg_png_upto_1mb_recomended_dimentions_200px_x_200px")),1)]),_:1})],64)}var sp={name:"ProfileImageInput",inheritAttrs:!1,props:{imgSrc:{type:String,required:!0}}};const dp=(0,i.A)(sp,[["render",rp],["__scopeId","data-v-65adeee7"]]);var cp=dp;function up(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-input-group");return(0,a.openBlock)(),(0,a.createBlock)(s,{label:i.localizedLabel,classes:i.classes},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-firstname",name:"firstName",placeholder:e.$t("general.first_name"),"model-value":o.firstName,rules:o.rules.firstName,disabled:o.disabled,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:firstName",t))},null,8,["placeholder","model-value","rules","disabled"]),(0,a.createVNode)(r,{class:"XHRM-middlename",name:"middleName","model-value":o.middleName,rules:o.rules.middleName,disabled:o.disabled,placeholder:o.showMiddleNamePlaceholder?e.$t("general.middle_name"):"","onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:middleName",t))},null,8,["model-value","rules","disabled","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-lastname",name:"lastName",placeholder:e.$t("general.last_name"),"model-value":o.lastName,rules:o.rules.lastName,disabled:o.disabled,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:lastName",t))},null,8,["placeholder","model-value","rules","disabled"])]),_:1},8,["label","classes"])}var mp={name:"FullNameInput",inheritAttrs:!1,props:{firstName:{type:String,required:!0},middleName:{type:String,required:!0},lastName:{type:String,required:!0},rules:{type:Object,required:!0},disabled:{type:Boolean,default:!1},showMiddleNamePlaceholder:{type:Boolean,default:!0},label:{type:String,default:null}},emits:["update:firstName","update:middleName","update:lastName"],computed:{classes(){return{label:{"oxd-input-field-required":!0},wrapper:{"--name-grouped-field":!0}}},localizedLabel(){return this.label?this.label:this.$t("general.employee_full_name")}}};const pp=(0,i.A)(mp,[["render",up],["__scopeId","data-v-eef0604e"]]);var hp=pp;const gp=`${window.appGlobal.publicPath}/images/default-photo.png`,vp={firstName:"",middleName:"",lastName:"",empPicture:null,employeeId:""},fp={username:"",userRoleId:2,empNumber:0,status:"1",password:"",passwordConfirm:""};var yp={components:{"oxd-switch-input":X.Ay,"profile-image-input":cp,"full-name-input":hp,"password-input":Ga},props:{empId:{type:String,required:!0},allowedImageTypes:{type:Array,required:!0},isPasswordRequired:{type:Boolean,default:!0}},setup(e){const t=(0,a.ref)({...vp,employeeId:e.empId?e.empId:""}),o=new H(window.appGlobal.baseUrl,"/api/v2/pim/employees"),{createUniqueValidator:l}=Lo(o),n=l("Employee","employeeId",{translateKey:"pim.employee_id_exists"}),i=l("User","userName",{matchByField:"deleted",matchByValue:"false",translateKey:"pim.username_already_exists"});return{http:o,employee:t,employeeIdUniqueValidation:n,usernameUniqueValidation:i}},data(){return{isLoading:!1,createLogin:!1,user:{...fp},empNumber:null,rules:{firstName:[Kt,Wt(30)],middleName:[Wt(30)],lastName:[Kt,Wt(30)],employeeId:[this.employeeIdUniqueValidation,Wt(10)],empPicture:[ho(1048576),go(this.allowedImageTypes)],username:[Kt,this.usernameUniqueValidation,bo(5),Wt(40)],status:[Kt]}}},computed:{profilePicUrl(){if(this.employee.empPicture){const e=this.employee.empPicture.base64,t=this.employee.empPicture.type,o=this.allowedImageTypes.findIndex(e=>e===t);return o>-1?`data:${t};base64,${e}`:gp}return gp}},created(){this.isLoading=!0,this.http.getAll().finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/pim/viewEmployeeList")},onSave(){this.isLoading=!0,this.http.create({...this.employee}).then(e=>{const{data:t}=e;return t?.data&&(this.empNumber=t.data.empNumber),this.createLogin&&t?.data?this.http.request({method:"POST",url:"/api/v2/admin/users",data:{username:this.user.username,password:this.user.password,status:"1"==this.user.status,userRoleId:this.user.userRoleId,empNumber:t.data.empNumber}}):void 0}).then(()=>this.$toast.saveSuccess()).then(()=>{this.employee={...vp},this.user={...fp},this.empNumber?I(`/pim/viewPersonalDetails/empNumber/${this.empNumber}`):this.onCancel()})}}};const Cp=(0,i.A)(yp,[["render",lp],["__scopeId","data-v-68e022fa"]]);var Vp=Cp;const bp={class:"XHRM-background-container"},wp={class:"XHRM-paper-container"},xp={key:0,class:"XHRM-header-container"},Np={class:"XHRM-container"},kp={class:"XHRM-bottom-container"};function _p(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("employment-status-dropdown"),u=(0,a.resolveComponent)("include-employee-dropdown"),m=(0,a.resolveComponent)("jobtitle-dropdown"),p=(0,a.resolveComponent)("subunit-dropdown"),h=(0,a.resolveComponent)("oxd-grid"),g=(0,a.resolveComponent)("oxd-form-row"),v=(0,a.resolveComponent)("oxd-divider"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("oxd-table-filter"),b=(0,a.resolveComponent)("table-header"),w=(0,a.resolveComponent)("oxd-card-table"),x=(0,a.resolveComponent)("oxd-pagination"),N=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bp,[(0,a.createVNode)(V,{"filter-title":e.$t("pim.employee_information")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{onSubmitValid:i.filterItems,onReset:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:n.rules.employee,params:{includeEmployees:l.filters.includeEmployees?.param}},null,8,["modelValue","rules","params"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.employeeId,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.employeeId=e),label:e.$t("general.employee_id")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.empStatusId,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.empStatusId=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.includeEmployees,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.includeEmployees=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.supervisor,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.supervisor=e),rules:n.rules.supervisor,label:e.$t("pim.supervisor_name")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.jobTitleId,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.jobTitleId=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.subunitId,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filters.subunitId=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(f,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[10]||(t[10]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",wp,[e.$can.create("employee_list")?((0,a.openBlock)(),(0,a.createElementBlock)("div",xp,[(0,a.createVNode)(f,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(b,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Np,[(0,a.createVNode)(w,{ref:"cardTable",selected:n.checkedItems,"onUpdate:selected":t[7]||(t[7]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[8]||(t[8]=e=>l.sortDefinition=e),headers:i.headers,items:l.items?.data,selectable:e.$can.delete("employee_list"),clickable:!0,loading:l.isLoading,class:"XHRM-employee-list","row-decorator":"oxd-table-decorator-card",onClick:i.onClickEdit},null,8,["selected","order","headers","items","selectable","loading","onClick"])]),(0,a.createElementVNode)("div",kp,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(x,{key:0,current:l.currentPage,"onUpdate:current":t[9]||(t[9]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(N,{ref:"deleteDialog"},null,512)])}function Sp(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("general.job_title"),options:l.options},null,8,["label","options"])}var Dp={name:"JobtitleDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/admin/job-titles");return(0,a.onBeforeMount)(()=>{t.getAll({limit:0}).then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.title}))})}),{options:e}}};const $p=(0,i.A)(Dp,[["render",Sp]]);var Mp=$p;function Ep(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("general.sub_unit"),options:l.options},null,8,["label","options"])}var Rp={name:"SubunitDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/admin/subunits");return(0,a.onBeforeMount)(()=>{t.getAll().then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.name,_indent:e.level?e.level+1:1}))})}),{options:e}}};const Tp=(0,i.A)(Rp,[["render",Ep]]);var Bp=Tp;function Ip(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("general.employment_status"),options:l.options},null,8,["label","options"])}var Ap={name:"EmploymentStatusDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/admin/employment-statuses");return(0,a.onBeforeMount)(()=>{t.getAll({limit:0}).then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.name}))})}),{options:e}}};const Hp=(0,i.A)(Ap,[["render",Ip]]);var Xp=Hp;function Up(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("pim.include"),options:n.includeOpts,"show-empty-selector":!1},null,8,["label","options"])}var Lp={name:"IncludeEmployeeDropdown",data(){return{includeOpts:[{id:1,param:"onlyCurrent",label:this.$t("general.current_employees_only")},{id:2,param:"currentAndPast",label:this.$t("general.current_and_past_employees")},{id:3,param:"onlyPast",label:this.$t("general.past_employees_only")}]}}};const Pp=(0,i.A)(Lp,[["render",Up]]);var qp=Pp;const Fp={"employee.employeeId":"DEFAULT","employee.firstName":"ASC","employee.lastName":"DEFAULT","jobTitle.jobTitleName":"DEFAULT","empStatus.name":"DEFAULT","subunit.name":"DEFAULT","supervisor.firstName":"DEFAULT"};var zp={components:{"delete-confirmation":Xt,"employee-autocomplete":$a,"jobtitle-dropdown":Mp,"subunit-dropdown":Bp,"employment-status-dropdown":Xp,"include-employee-dropdown":qp},props:{unselectableEmpNumbers:{type:Array,default:()=>[]}},setup(e){const{$t:t}=Ie(),o=o=>o.map(o=>{const a=e.unselectableEmpNumbers.findIndex(e=>e==o.empNumber);return{id:o.empNumber,employeeId:o.employeeId,firstAndMiddleName:`${o.firstName} ${o.middleName}`,lastName:o.lastName+(o.terminationId?` ${t("general.past_employee")}`:""),jobTitle:o.jobTitle?.isDeleted?o.jobTitle.title+t("general.deleted"):o.jobTitle?.title,empStatus:o.empStatus?.name,subunit:o.subunit?.name,supervisor:o.supervisors?o.supervisors.map(e=>`${e.firstName} ${e.lastName}`).join(","):"",isSelectable:-1===a}}),l=(0,a.ref)({employee:null,employeeId:"",empStatusId:null,supervisor:null,jobTitleId:null,subunitId:null,includeEmployees:{id:1,param:"onlyCurrent",label:t("general.current_employees_only")}}),{sortDefinition:n,sortField:i,sortOrder:r,onSort:s}=Ut({sortDefinition:Fp}),d=(0,a.computed)(()=>({model:"detailed",nameOrId:"string"===typeof l.value.employee?l.value.employee:void 0,empNumber:l.value.employee?.id,employeeId:l.value.employeeId,empStatusId:l.value.empStatusId?.id,includeEmployees:l.value.includeEmployees?.param,supervisorEmpNumbers:l.value.supervisor?[l.value.supervisor.id]:void 0,jobTitleId:l.value.jobTitleId?.id,subunitId:l.value.subunitId?.id,sortField:i.value,sortOrder:r.value})),c=new H(window.appGlobal.baseUrl,"/api/v2/pim/employees"),{showPaginator:u,currentPage:m,total:p,pages:h,pageSize:g,response:v,isLoading:f,execQuery:y}=Et(c,{query:d,normalizer:o});return s(y),{http:c,showPaginator:u,currentPage:m,isLoading:f,total:p,pages:h,pageSize:g,execQuery:y,items:v,filters:l,sortDefinition:n}},data(){return{checkedItems:[],rules:{employee:[Wt(100)],supervisor:[Wt(100),$o]}}},computed:{headers(){return[{name:"employeeId",slot:"title",title:this.$t("general.id"),sortField:"employee.employeeId",style:{flex:1}},{name:"firstAndMiddleName",title:this.$t("pim.first_middle_name"),sortField:"employee.firstName",style:{flex:1}},{name:"lastName",title:this.$t("general.last_name"),sortField:"employee.lastName",style:{flex:1}},{name:"jobTitle",title:this.$t("general.job_title"),sortField:"jobTitle.jobTitleName",style:{flex:1}},{name:"empStatus",title:this.$t("general.employment_status"),sortField:"empStatus.name",style:{flex:1}},{name:"subunit",title:this.$t("general.sub_unit"),sortField:"subunit.name",style:{flex:1}},{name:"supervisor",title:this.$t("pim.supervisor"),sortField:"supervisor.firstName",style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer}]}},methods:{onClickAdd(){I("/pim/addEmployee")},onClickEdit(e){const t=e.id?e.id:e.item?.id;I("/pim/viewPersonalDetails/empNumber/{id}",{id:t})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e,t){t.stopImmediatePropagation();const o=this.unselectableEmpNumbers.findIndex(t=>t==e.id);if(o>-1)return this.$toast.cannotDelete();this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},cellRenderer(...[,,,e]){const t={edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}};return this.$can.delete("employee_list")&&!this.unselectableEmpNumbers.includes(e.id)&&(t.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),{props:{header:{cellConfig:t}}}}}};const jp=(0,i.A)(zp,[["render",_p],["__scopeId","data-v-6bc7028f"]]);var Op=jp;const Gp={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function Qp(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("full-name-input"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-input-field"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("oxd-input-group"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(V,{"employee-id":o.empNumber,screen:"personal"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Gp,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.personal_details")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{firstName:n.employee.firstName,"onUpdate:firstName":t[0]||(t[0]=e=>n.employee.firstName=e),middleName:n.employee.middleName,"onUpdate:middleName":t[1]||(t[1]=e=>n.employee.middleName=e),lastName:n.employee.lastName,"onUpdate:lastName":t[2]||(t[2]=e=>n.employee.lastName=e),rules:n.rules},null,8,["firstName","middleName","lastName","rules"])]),_:1})]),_:1}),o.showDeprecatedFields?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.nickname,"onUpdate:modelValue":t[3]||(t[3]=e=>n.employee.nickname=e),label:e.$t("pim.nickname"),rules:n.rules.nickname},null,8,["modelValue","label","rules"])]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.employeeId,"onUpdate:modelValue":t[4]||(t[4]=e=>n.employee.employeeId=e),label:e.$t("general.employee_id"),rules:n.rules.employeeId,disabled:!e.$can.update("personal_sensitive_information")},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.otherId,"onUpdate:modelValue":t[5]||(t[5]=e=>n.employee.otherId=e),label:e.$t("pim.other_id"),rules:n.rules.otherId},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.drivingLicenseNo,"onUpdate:modelValue":t[6]||(t[6]=e=>n.employee.drivingLicenseNo=e),label:e.$t("pim.driver_license_number"),rules:n.rules.drivingLicenseNo,disabled:!e.$can.update("personal_sensitive_information")},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.employee.drivingLicenseExpiredDate,"onUpdate:modelValue":t[7]||(t[7]=e=>n.employee.drivingLicenseExpiredDate=e),rules:n.rules.drivingLicenseExpiredDate,label:e.$t("pim.license_expiry_date")},null,8,["modelValue","rules","label"])]),_:1})]),_:1}),(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[o.showSsnField?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.ssnNumber,"onUpdate:modelValue":t[8]||(t[8]=e=>n.employee.ssnNumber=e),label:e.$t("pim.ssn_number"),rules:n.rules.ssnNumber,disabled:!e.$can.update("personal_sensitive_information")},null,8,["modelValue","label","rules","disabled"])]),_:1})):(0,a.createCommentVNode)("",!0),o.showSinField?((0,a.openBlock)(),(0,a.createBlock)(c,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.sinNumber,"onUpdate:modelValue":t[9]||(t[9]=e=>n.employee.sinNumber=e),label:e.$t("pim.sin_number"),rules:n.rules.sinNumber,disabled:!e.$can.update("personal_sensitive_information")},null,8,["modelValue","label","rules","disabled"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.nationality,"onUpdate:modelValue":t[10]||(t[10]=e=>n.employee.nationality=e),type:"select",label:e.$t("general.nationality"),clear:!1,options:o.nationalities},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.maritalStatus,"onUpdate:modelValue":t[11]||(t[11]=e=>n.employee.maritalStatus=e),type:"select",label:e.$t("pim.marital_status"),clear:!1,options:n.maritalStatuses},null,8,["modelValue","label","options"])]),_:1})]),_:1}),(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.employee.birthday,"onUpdate:modelValue":t[12]||(t[12]=e=>n.employee.birthday=e),label:e.$t("pim.date_of_birth"),rules:n.rules.birthday,disabled:!e.$can.update("personal_sensitive_information")},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{label:e.$t("pim.gender"),classes:{wrapper:"--gender-grouped-field"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.gender,"onUpdate:modelValue":t[13]||(t[13]=e=>n.employee.gender=e),type:"radio","option-label":e.$t("general.male"),value:"1"},null,8,["modelValue","option-label"]),(0,a.createVNode)(m,{modelValue:n.employee.gender,"onUpdate:modelValue":t[14]||(t[14]=e=>n.employee.gender=e),type:"radio","option-label":e.$t("general.female"),value:"2"},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),o.showDeprecatedFields?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0})):(0,a.createCommentVNode)("",!0),o.showDeprecatedFields?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.militaryService,"onUpdate:modelValue":t[15]||(t[15]=e=>n.employee.militaryService=e),label:e.$t("pim.military_service"),rules:n.rules.militaryService},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.employee.smoker,"onUpdate:modelValue":t[16]||(t[16]=e=>n.employee.smoker=e),type:"checkbox",label:e.$t("pim.smoker"),"option-label":e.$t("general.yes")},null,8,["modelValue","label","option-label"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])]),_:1},8,["employee-id"])}const Kp={class:"XHRM-background-container"},Wp={class:"XHRM-card-container"},Jp={class:"XHRM-edit-employee"},Yp={class:"XHRM-edit-employee-navigation"},Zp={class:"XHRM-edit-employee-imagesection"},eh={class:"XHRM-edit-employee-name"},th={class:"XHRM-edit-employee-image-wrapper"},oh=["src"],ah={class:"XHRM-edit-employee-content"};function lh(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("tabs-navigation"),d=(0,a.resolveComponent)("profile-custom-fields"),c=(0,a.resolveComponent)("profile-attachments");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Kp,[(0,a.createElementVNode)("div",Wp,[(0,a.createElementVNode)("div",Jp,[(0,a.createElementVNode)("div",Yp,[(0,a.createElementVNode)("div",Zp,[(0,a.createElementVNode)("div",eh,[(0,a.createVNode)(r,{tag:"h6",class:"--strong"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.employeeName),1)]),_:1}),l.isCurrentEmp?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.past_employee")),1)]),_:1}))]),(0,a.createElementVNode)("div",th,[(0,a.createElementVNode)("div",{class:"XHRM-edit-employee-image",onClick:t[0]||(t[0]=(...e)=>l.onClickProfilePic&&l.onClickProfilePic(...e))},[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:l.imgSrc},null,8,oh)])])]),(0,a.createVNode)(s,{tabs:o.tabs},null,8,["tabs"])]),(0,a.createElementVNode)("div",ah,[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0),"default"!==o.screen?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"employee-id":o.employeeId,screen:o.screen},null,8,["employee-id","screen"])):(0,a.createCommentVNode)("",!0),"default"!==o.screen?((0,a.openBlock)(),(0,a.createBlock)(c,{key:1,"employee-id":o.employeeId,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize,screen:o.screen},null,8,["employee-id","allowed-file-types","max-file-size","screen"])):(0,a.createCommentVNode)("",!0)])])])])}const nh={role:"tablist",class:"XHRM-tabs"},ih=["href"];function rh(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",nh,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.tabs,e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,role:"tab",class:"XHRM-tabs-wrapper"},[(0,a.createElementVNode)("a",{class:(0,a.normalizeClass)({"XHRM-tabs-item":!0,"--active":e.active}),href:e.url},(0,a.toDisplayString)(e.name),11,ih)]))),128))])}var sh={name:"TabsNavigation",props:{tabs:{type:Array,required:!0}}};const dh=(0,i.A)(sh,[["render",rh],["__scopeId","data-v-6ded1bc8"]]);var ch=dh;const uh={class:"XHRM-attachment"},mh={class:"XHRM-horizontal-padding XHRM-vertical-padding"},ph={class:"XHRM-container"},hh={key:0,class:"XHRM-bottom-container"};function gh(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("save-attachment"),d=(0,a.resolveComponent)("edit-attachment"),c=(0,a.resolveComponent)("profile-action-header"),u=(0,a.resolveComponent)("table-header"),m=(0,a.resolveComponent)("oxd-card-table"),p=(0,a.resolveComponent)("oxd-pagination"),h=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",uh,[(0,a.createVNode)(r),n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,http:l.http,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize,onClose:i.onSaveModalClose},null,8,["http","allowed-file-types","max-file-size","onClose"])):n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,data:n.editModalState,http:l.http,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize,onClose:i.onEditModalClose},null,8,["data","http","allowed-file-types","max-file-size","onClose"])):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:2},[(0,a.createElementVNode)("div",mh,[(0,a.createVNode)(c,{"action-button-shown":e.$can.create(`${o.screen}_attachment`),onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.attachments")),1)]),_:1},8,["action-button-shown","onClick"])]),(0,a.createVNode)(u,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",ph,[(0,a.createVNode)(m,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:i.tableHeaders,items:l.items?.data,selectable:e.$can.delete(`${o.screen}_attachment`),clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","loading"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",hh,[(0,a.createVNode)(p,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0)],64)),(0,a.createVNode)(h,{ref:"deleteDialog"},null,512)])}const vh=1,fh=1e3,yh=1e6,Ch=1e9,Vh=function(e,t,o=!0){let a,l=vh,n="B";return a="number"===typeof e?e:parseInt(e,10),a>=Ch?(l=Ch,n="GB"):a>=yh?(l=yh,n="MB"):a>=fh&&(l=fh,n="kB"),(a/l).toFixed(t)+(o?" "+n:"")},bh={class:"XHRM-card-container"};function wh(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bh,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_attachment")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attachment.attachment=e),type:"file",label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),rules:n.rules.attachment,placeholder:e.$t("general.no_file_selected"),required:""},null,8,["modelValue","label","button-label","rules","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.description=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])}const xh={attachment:null,description:""};var Nh={name:"SaveAttachment",props:{http:{type:Object,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},emits:["close"],data(){return{isLoading:!1,attachment:{...xh},rules:{description:[Wt(200)],attachment:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.attachment}).then(()=>this.$toast.saveSuccess()).then(()=>{this.attachment={...xh},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const kh=(0,i.A)(Nh,[["render",wh]]);var _h=kh;const Sh={class:"XHRM-card-container"};function Dh(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-input-field"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Sh,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_attachment")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.current_file")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.currentFile),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attachment.attachment=e),type:"file",label:e.$t("general.replace_with"),"button-label":e.$t("general.browse"),rules:n.rules.attachment,placeholder:e.$t("general.no_file_selected")},null,8,["modelValue","label","button-label","rules","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.attachment.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.description=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])])}const $h={attachment:null,description:""};var Mh={name:"EditAttachment",props:{http:{type:Object,required:!0},data:{type:Object,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},emits:["close"],data(){return{isLoading:!1,currentFile:"",attachment:{...$h},rules:{description:[Wt(200)],attachment:[ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.currentFile=t.filename,this.attachment.description=t.description}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.attachment}).then(()=>this.$toast.updateSuccess()).then(()=>{this.attachment={...$h},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Eh=(0,i.A)(Mh,[["render",Dh]]);var Rh=Eh;const Th={class:"XHRM-action-header"};function Bh(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Th,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)]),_:3}),o.actionButtonShown?((0,a.openBlock)(),(0,a.createBlock)(s,(0,a.mergeProps)({key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"text"},e.$attrs),null,16,["label"])):(0,a.createCommentVNode)("",!0)])}var Ih={name:"ProfileActionHeader",inheritAttrs:!1,props:{actionButtonShown:{type:Boolean,required:!1,default:!0}}};const Ah=(0,i.A)(Ih,[["render",Bh],["__scopeId","data-v-5f37f17e"]]);var Hh=Ah,Xh={name:"ProfileAttachments",components:{"save-attachment":_h,"edit-attachment":Rh,"profile-action-header":Hh,"delete-confirmation":Xt},props:{employeeId:{type:String,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0},screen:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/screen/${e.screen}/attachments`),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=e=>e.map(e=>({...e,attachedDate:ge(he(e.attachedDate),o,{locale:a}),size:Vh(e.size,2)})),{showPaginator:n,currentPage:i,total:r,pages:s,pageSize:d,response:c,isLoading:u,execQuery:m}=Et(t,{normalizer:l,toastNoRecords:!1});return{http:t,showPaginator:n,currentPage:i,isLoading:u,total:r,pages:s,pageSize:d,execQuery:m,items:c}},data(){return{headers:[{name:"filename",slot:"title",title:this.$t("general.file_name"),style:{flex:1}},{name:"description",title:this.$t("general.description"),style:{flex:1}},{name:"size",title:this.$t("general.size"),style:{flex:1}},{name:"fileType",title:this.$t("general.type"),style:{flex:1}},{name:"attachedDate",title:this.$t("pim.date_added"),style:{flex:1}},{name:"attachedByName",title:this.$t("pim.added_by"),style:{flex:1}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{tableHeaders(){const e={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.$can.update(`${this.screen}_attachment`)&&(e.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),this.$can.delete(`${this.screen}_attachment`)&&(e.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),this.$can.read(`${this.screen}_attachment`)&&(e.cellConfig.download={onClick:this.onClickDownload,props:{name:"download"}}),Object.keys(e.cellConfig).length>0?this.headers.concat([e]):this.headers}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onClickDownload(e){const t=`${window.appGlobal.baseUrl}/pim/viewAttachment/empNumber/${this.employeeId}/attachId/${e.id}`;window.open(t,"_blank")},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const Uh=(0,i.A)(Xh,[["render",gh],["__scopeId","data-v-6545b054"]]);var Lh=Uh;const Ph={key:0,class:"XHRM-custom-fields"},qh={class:"XHRM-card-container"};function Fh(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return 0!==n.fields.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ph,[(0,a.createVNode)(r),(0,a.createElementVNode)("div",qh,[(0,a.createVNode)(s,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.custom_fields")),1)]),_:1}),(0,a.createVNode)(r),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.fields,t=>((0,a.openBlock)(),(0,a.createBlock)(c,{key:t.id},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customFieldsModel[t.model],"onUpdate:modelValue":e=>n.customFieldsModel[t.model]=e,type:t.type,label:t.label,options:t.extraData,rules:n.rules.default,disabled:!e.$can.update(`${o.screen}_custom_fields`)},null,8,["modelValue","onUpdate:modelValue","type","label","options","rules","disabled"])]),_:2},1024))),128))]),_:1})]),_:1}),e.$can.update(`${o.screen}_custom_fields`)?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(r),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p)]),_:1})],64)):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","onSubmitValid"])])])):(0,a.createCommentVNode)("",!0)}const zh=e=>"string"===typeof e?e.split(",").map((e,t)=>({id:t,label:e})).filter(e=>""!=e.label.trim()):[];var jh={name:"ProfileCustomFields",props:{employeeId:{type:String,required:!0},screen:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/custom-fields?screen=${e.screen}`);return{http:t}},data(){return{isLoading:!1,fields:[],customFieldsModel:{},rules:{default:[Wt(250)]}}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t,meta:o}=e.data;this.customFieldsModel={...t},o.fields&&o.fields.length>0&&(this.fields=o.fields.map(e=>{const o=zh(e.extraData),a=`custom${e.id}`;if(1==e.fieldType&&t[a]){const e=o.find(e=>e.label==t[a]);this.customFieldsModel[a]=e||null}return{id:e.id,label:e.fieldName,type:1==e.fieldType?"select":"input",model:a,extraData:o}}))}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",url:`/api/v2/pim/employees/${this.employeeId}/custom-fields`,data:{...this.customFieldsModel},transformRequest:[e=>{for(const t in e)e[t]?.label&&(e[t]=e[t].label);return JSON.stringify(e)}]}).then(()=>{this.isLoading=!1,this.$toast.saveSuccess()})}}};const Oh=(0,i.A)(jh,[["render",Fh]]);var Gh=Oh;const Qh=`${window.appGlobal.publicPath}/images/default-photo.png`;var Kh={name:"EditEmployeeLayout",components:{"tabs-navigation":ch,"profile-attachments":Lh,"profile-custom-fields":Gh},props:{employeeId:{type:String,required:!0},tabs:{type:Array,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0},screen:{type:String,default:"default",validator(e){return["default","personal","contact","emergency","dependents","immigration","qualifications","tax","salary","job","report-to","membership"].includes(e)}}},setup(e){const t=(0,a.ref)(""),o=(0,a.ref)(!0),l=new H(window.appGlobal.baseUrl,"/api/v2/pim/employees");l.get(e.employeeId).then(({data:e})=>{t.value=`${e.data.firstName} ${e.data.lastName}`,o.value=!e.data.terminationId});const n=(0,a.computed)(()=>e.employeeId?`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.employeeId}`:Qh),i=()=>{I("/pim/viewPhotograph/empNumber/{empNumber}",{empNumber:e.employeeId})};return{imgSrc:n,employeeName:t,isCurrentEmp:o,onClickProfilePic:i}}};const Wh=(0,i.A)(Kh,[["render",lh],["__scopeId","data-v-3ad3fece"]]);var Jh=Wh;const Yh={firstName:"",middleName:"",lastName:"",employeeId:"",otherId:"",drivingLicenseNo:"",drivingLicenseExpiredDate:"",ssnNumber:"",sinNumber:"",nationality:[],maritalStatus:[],birthday:"",gender:"",nickname:"",smoker:"",militaryService:""};var Zh={components:{"edit-employee-layout":Jh,"full-name-input":hp},props:{empNumber:{type:String,required:!0},nationalities:{type:Array,default:()=>[]},showDeprecatedFields:{type:Boolean,default:!1},showSsnField:{type:Boolean,default:!1},showSinField:{type:Boolean,default:!1}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/personal-details`),{userDateFormat:o}=F();return{http:t,userDateFormat:o}},data(){return{isLoading:!1,employee:{...Yh},rules:{firstName:[Kt,Wt(30)],middleName:[Wt(30)],lastName:[Kt,Wt(30)],employeeId:[Wt(10)],otherId:[Wt(30)],drivingLicenseNo:[Wt(30)],ssnNumber:[Wt(30)],sinNumber:[Wt(30)],nickname:[Wt(30)],militaryService:[Wt(30)],birthday:[Jt(this.userDateFormat)],drivingLicenseExpiredDate:[Jt(this.userDateFormat)]},maritalStatuses:[{id:"Single",label:this.$t("pim.single")},{id:"Married",label:this.$t("pim.married")},{id:"Other",label:this.$t("pim.other")}]}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>(this.updateModel(e),this.http.request({method:"GET",url:"/api/v2/pim/employees"}))).then(e=>{const{data:t}=e.data;this.rules.employeeId.push(e=>{const o=t.findIndex(t=>t.employeeId?.trim()&&String(t.employeeId).toLowerCase()==String(e).toLowerCase());if(o>-1){const{empNumber:e}=t[o];return e==this.empNumber||this.$t("pim.employee_id_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{lastName:this.employee.lastName,firstName:this.employee.firstName,middleName:this.employee.middleName,employeeId:this.employee.employeeId,otherId:this.employee.otherId,drivingLicenseNo:this.employee.drivingLicenseNo,drivingLicenseExpiredDate:this.employee.drivingLicenseExpiredDate,gender:this.employee.gender,maritalStatus:this.employee.maritalStatus?.id,birthday:this.employee.birthday,nationalityId:this.employee.nationality?.id,ssnNumber:this.showSsnField?this.employee.ssnNumber:void 0,sinNumber:this.showSinField?this.employee.sinNumber:void 0,nickname:this.showDeprecatedFields?this.employee.nickname:void 0,smoker:this.showDeprecatedFields?this.employee.smoker:void 0,militaryService:this.showDeprecatedFields?this.employee.militaryService:void 0}}).then(e=>(this.updateModel(e),this.$toast.updateSuccess())).then(()=>{this.isLoading=!1})},updateModel(e){const{data:t}=e.data;this.employee={...Yh,...t},this.employee.maritalStatus=this.maritalStatuses.find(e=>e.id===t.maritalStatus),this.employee.nationality=this.nationalities.find(e=>e.id===t.nationality?.id)}}};const eg=(0,i.A)(Zh,[["render",Qp],["__scopeId","data-v-6e9820e6"]]);var tg=eg;const og={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function ag(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(f,{"employee-id":o.empNumber,screen:"contact"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",og,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.contact_details")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.address")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.street1,"onUpdate:modelValue":t[0]||(t[0]=e=>n.contact.street1=e),label:e.$t("pim.street1"),rules:n.rules.street1},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.street2,"onUpdate:modelValue":t[1]||(t[1]=e=>n.contact.street2=e),label:e.$t("pim.street2"),rules:n.rules.street2},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.city,"onUpdate:modelValue":t[2]||(t[2]=e=>n.contact.city=e),label:e.$t("general.city"),rules:n.rules.city},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.province,"onUpdate:modelValue":t[3]||(t[3]=e=>n.contact.province=e),label:e.$t("general.state_province"),rules:n.rules.province},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.zipCode,"onUpdate:modelValue":t[4]||(t[4]=e=>n.contact.zipCode=e),label:e.$t("general.zip_postal_code"),rules:n.rules.zipCode},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.countryCode,"onUpdate:modelValue":t[5]||(t[5]=e=>n.contact.countryCode=e),type:"select",label:e.$t("general.country"),options:o.countries},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.telephone")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.homeTelephone,"onUpdate:modelValue":t[6]||(t[6]=e=>n.contact.homeTelephone=e),modelModifiers:{trim:!0},label:e.$t("pim.home"),rules:n.rules.homeTelephone},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.mobile,"onUpdate:modelValue":t[7]||(t[7]=e=>n.contact.mobile=e),modelModifiers:{trim:!0},label:e.$t("general.mobile"),rules:n.rules.mobile},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.workTelephone,"onUpdate:modelValue":t[8]||(t[8]=e=>n.contact.workTelephone=e),modelModifiers:{trim:!0},label:e.$t("pim.work"),rules:n.rules.workTelephone},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.email")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.workEmail,"onUpdate:modelValue":t[9]||(t[9]=e=>n.contact.workEmail=e),label:e.$t("general.work_email"),rules:n.rules.workEmail},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.otherEmail,"onUpdate:modelValue":t[10]||(t[10]=e=>n.contact.otherEmail=e),label:e.$t("general.other_email"),rules:n.rules.otherEmail},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h)]),_:1})]),_:1},8,["loading","onSubmitValid"])])]),_:1},8,["employee-id"])}const lg={street1:"",street2:"",city:"",province:"",countryCode:[],zipCode:"",homeTelephone:"",workTelephone:"",mobile:"",workEmail:"",otherEmail:""};var ng={components:{"edit-employee-layout":Jh},props:{empNumber:{type:String,required:!0},countries:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employee/${e.empNumber}/contact-details`);return t.setIgnorePath("/api/v2/pim/employees/[0-9]+/contact-details/validation/(work-emails|other-emails)"),{http:t}},data(){return{isLoading:!1,contact:{...lg},rules:{street1:[Wt(70)],street2:[Wt(70)],city:[Wt(70)],province:[Wt(70)],zipCode:[Wt(10)],homeTelephone:[Wt(25),fo],mobile:[Wt(25),fo],workTelephone:[Wt(25),fo],workEmail:[Wt(50),vo,this.createEmailRecipientValidator(this.$t("pim.work_email_invalid_characters")),(0,X.Ld)(this.validateWorkEmail,500)],otherEmail:[Wt(50),vo,(0,X.Ld)(this.validateOtherEmail,500)]}}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{this.updateModel(e)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{...this.contact,countryCode:this.contact.countryCode?.id}}).then(e=>(this.updateModel(e),this.$toast.updateSuccess())).then(()=>{this.isLoading=!1})},validateWorkEmail(e){return new Promise(t=>{if(e){const e=this.contact.workEmail===this.contact.otherEmail;this.http.request({method:"GET",url:`/api/v2/pim/employees/${this.empNumber}/contact-details/validation/work-emails`,params:{workEmail:this.contact.workEmail}}).then(o=>{const{data:a}=o.data;return!0===a.valid?t(!e||this.$t("pim.work_email_and_other_email_cannot_be_the_same")):t(this.$t("general.already_exists"))})}else t(!0)})},validateOtherEmail(e){return new Promise(t=>{if(e){const e=this.contact.otherEmail===this.contact.workEmail;this.http.request({method:"GET",url:`/api/v2/pim/employees/${this.empNumber}/contact-details/validation/other-emails`,params:{otherEmail:this.contact.otherEmail}}).then(o=>{const{data:a}=o.data;return!0===a.valid?t(!e||this.$t("pim.work_email_and_other_email_cannot_be_the_same")):t(this.$t("general.already_exists"))})}else t(!0)})},validateEmailDifferent(e){return t=>{const o=e();return null===o||""===o||(t!==o||this.$t("pim.work_email_and_other_email_cannot_be_the_same"))}},updateModel(e){const{data:t}=e.data;this.contact={...lg,...t},this.contact.countryCode=this.countries.find(e=>e.id===t.countryCode)},isValidEmailRecipient(e){return null===e||void 0===e||""===e||!/^\s*-/.test(e)&&!/[\r\n]/.test(e)},createEmailRecipientValidator(e){return t=>null===t||void 0===t||""===t||(this.isValidEmailRecipient(t)||e)}}};const ig=(0,i.A)(ng,[["render",ag]]);var rg=ig;const sg={class:"XHRM-horizontal-padding XHRM-vertical-padding"},dg={class:"XHRM-container"},cg={class:"XHRM-bottom-container"};function ug(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-emergency-contact"),s=(0,a.resolveComponent)("edit-emergency-contact"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber,screen:"emergency"},{default:(0,a.withCtx)(()=>[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,onClose:i.onSaveModalClose},null,8,["http","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",sg,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_emergency_contacts")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",dg,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","disabled","loading"])]),(0,a.createElementVNode)("div",cg,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)]),_:1},8,["employee-id"])}const mg={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function pg(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",mg,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.save_emergency_contact")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.contact.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.relationship,"onUpdate:modelValue":t[1]||(t[1]=e=>n.contact.relationship=e),label:e.$t("pim.relationship"),rules:n.rules.relationship,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.homePhone,"onUpdate:modelValue":t[2]||(t[2]=e=>n.contact.homePhone=e),modelModifiers:{trim:!0},label:e.$t("pim.home_telephone"),rules:n.rules.homePhone},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.mobilePhone,"onUpdate:modelValue":t[3]||(t[3]=e=>n.contact.mobilePhone=e),modelModifiers:{trim:!0},label:e.$t("general.mobile"),rules:n.rules.mobilePhone},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.officePhone,"onUpdate:modelValue":t[4]||(t[4]=e=>n.contact.officePhone=e),modelModifiers:{trim:!0},label:e.$t("pim.work_telephone"),rules:n.rules.officePhone},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const hg={name:"",relationship:"",homePhone:"",officePhone:"",mobilePhone:""};var gg={name:"SaveEmergencyContact",props:{http:{type:Object,required:!0}},emits:["close"],data(){return{isLoading:!1,contact:{...hg},rules:{name:[Kt,Wt(100)],relationship:[Kt,Wt(100)],homePhone:[fo,Wt(30),e=>""!==e||""!==this.contact.mobilePhone||""!==this.contact.officePhone||this.$t("pim.at_least_one_phone_number_is_required")],mobilePhone:[fo,Wt(30)],officePhone:[fo,Wt(30)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.contact}).then(()=>this.$toast.saveSuccess()).then(()=>{this.contact={...hg},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const vg=(0,i.A)(gg,[["render",pg]]);var fg=vg;const yg={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function Cg(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",yg,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_emergency_contact")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.contact.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.relationship,"onUpdate:modelValue":t[1]||(t[1]=e=>n.contact.relationship=e),label:e.$t("pim.relationship"),rules:n.rules.relationship,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.homePhone,"onUpdate:modelValue":t[2]||(t[2]=e=>n.contact.homePhone=e),modelModifiers:{trim:!0},label:e.$t("pim.home_telephone"),rules:n.rules.homePhone},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.mobilePhone,"onUpdate:modelValue":t[3]||(t[3]=e=>n.contact.mobilePhone=e),modelModifiers:{trim:!0},label:e.$t("general.mobile"),rules:n.rules.mobilePhone},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contact.officePhone,"onUpdate:modelValue":t[4]||(t[4]=e=>n.contact.officePhone=e),modelModifiers:{trim:!0},label:e.$t("pim.work_telephone"),rules:n.rules.officePhone},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const Vg={name:"",relationship:"",homePhone:"",officePhone:"",mobilePhone:""};var bg={name:"EditEmergencyContact",props:{http:{type:Object,required:!0},data:{type:Object,required:!0}},emits:["close"],data(){return{isLoading:!1,contact:{...Vg},rules:{name:[Kt,Wt(100)],relationship:[Kt,Wt(100)],homePhone:[fo,Wt(30),e=>""!==e||""!==this.contact.mobilePhone||""!==this.contact.officePhone||this.$t("pim.at_least_one_phone_number_is_required")],mobilePhone:[fo,Wt(30)],officePhone:[fo,Wt(30)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.contact={...Vg,...t}}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.contact}).then(()=>this.$toast.updateSuccess()).then(()=>{this.contact={...Vg},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const wg=(0,i.A)(bg,[["render",Cg]]);var xg=wg,Ng={components:{"profile-action-header":Hh,"edit-employee-layout":Jh,"save-emergency-contact":fg,"edit-emergency-contact":xg,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},countries:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/emergency-contacts`),{showPaginator:o,currentPage:a,total:l,pages:n,pageSize:i,response:r,isLoading:s,execQuery:d}=Et(t,{toastNoRecords:!1});return{http:t,showPaginator:o,currentPage:a,isLoading:s,total:l,pages:n,pageSize:i,execQuery:d,items:r}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:1}},{name:"relationship",title:this.$t("pim.relationship"),style:{flex:1}},{name:"homePhone",title:this.$t("pim.home_telephone"),style:{flex:1}},{name:"mobilePhone",title:this.$t("general.mobile"),style:{flex:1}},{name:"officePhone",title:this.$t("pim.work_telephone"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const kg=(0,i.A)(Ng,[["render",ug],["__scopeId","data-v-7c8c2406"]]);var _g=kg;const Sg={class:"XHRM-horizontal-padding XHRM-vertical-padding"},Dg={class:"XHRM-container"},$g={class:"XHRM-bottom-container"};function Mg(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-dependent"),s=(0,a.resolveComponent)("edit-dependent"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber,screen:"dependents"},{default:(0,a.withCtx)(()=>[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,onClose:i.onSaveModalClose},null,8,["http","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Sg,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_dependents")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Dg,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","disabled","loading"])]),(0,a.createElementVNode)("div",$g,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)]),_:1},8,["employee-id"])}const Eg={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function Rg(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",Eg,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_dependent")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.dependent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.dependent.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.dependent.relationshipType,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dependent.relationshipType=e),type:"select",label:e.$t("pim.relationship"),rules:n.rules.relationshipType,options:n.relationshipOptions,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),i.showRelationship?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.dependent.relationship,"onUpdate:modelValue":t[2]||(t[2]=e=>n.dependent.relationship=e),label:e.$t("pim.please_specify"),rules:n.rules.relationship,required:""},null,8,["modelValue","label","rules"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.dependent.dateOfBirth,"onUpdate:modelValue":t[3]||(t[3]=e=>n.dependent.dateOfBirth=e),label:e.$t("pim.date_of_birth"),rules:n.rules.dateOfBirth},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const Tg={name:"",relationshipType:null,relationship:"",dateOfBirth:""};var Bg={name:"SaveDependent",props:{http:{type:Object,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,dependent:{...Tg},rules:{name:[Kt,Wt(100)],relationshipType:[Kt],relationship:[Kt,Wt(100)],dateOfBirth:[Jt(this.userDateFormat)]},relationshipOptions:[{id:"child",label:this.$t("pim.child")},{id:"other",label:this.$t("pim.other")}]}},computed:{showRelationship(){return"other"==this.dependent.relationshipType?.id}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.dependent,relationshipType:this.dependent.relationshipType?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.dependent={...Tg},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Ig=(0,i.A)(Bg,[["render",Rg]]);var Ag=Ig;const Hg={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function Xg(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",Hg,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_dependent")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.dependent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.dependent.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.dependent.relationshipType,"onUpdate:modelValue":t[1]||(t[1]=e=>n.dependent.relationshipType=e),type:"select",label:e.$t("pim.relationship"),rules:n.rules.relationshipType,options:n.relationshipOptions,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),i.showRelationship?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.dependent.relationship,"onUpdate:modelValue":t[2]||(t[2]=e=>n.dependent.relationship=e),label:e.$t("pim.please_specify"),rules:n.rules.relationship,required:""},null,8,["modelValue","label","rules"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.dependent.dateOfBirth,"onUpdate:modelValue":t[3]||(t[3]=e=>n.dependent.dateOfBirth=e),label:e.$t("pim.date_of_birth"),rules:n.rules.dateOfBirth},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const Ug={name:"",relationshipType:null,relationship:"",dateOfBirth:""};var Lg={name:"EditDependent",props:{http:{type:Object,required:!0},data:{type:Object,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,dependent:{...Ug},rules:{name:[Kt,Wt(100)],relationshipType:[Kt],relationship:[Kt,Wt(100)],dateOfBirth:[Jt(this.userDateFormat)]},relationshipOptions:[{id:"child",label:this.$t("pim.child")},{id:"other",label:this.$t("pim.other")}]}},computed:{showRelationship(){return"other"==this.dependent.relationshipType?.id}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.dependent={...Ug,...t},this.dependent.relationshipType=this.relationshipOptions.find(e=>e.id===t.relationshipType)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.dependent,relationshipType:this.dependent.relationshipType?.id}).then(()=>this.$toast.updateSuccess()).then(()=>{this.dependent={...Ug},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Pg=(0,i.A)(Lg,[["render",Xg]]);var qg=Pg,Fg={components:{"profile-action-header":Hh,"edit-employee-layout":Jh,"save-dependent":Ag,"edit-dependent":qg,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},countries:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/dependents`),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=e=>e.map(e=>({id:e.id,name:e.name,dateOfBirth:ge(he(e.dateOfBirth),o,{locale:a}),relationship:"other"==e.relationshipType?e.relationship:"Child"})),{showPaginator:n,currentPage:i,total:r,pages:s,pageSize:d,response:c,isLoading:u,execQuery:m}=Et(t,{normalizer:l,toastNoRecords:!1});return{http:t,showPaginator:n,currentPage:i,isLoading:u,total:r,pages:s,pageSize:d,execQuery:m,items:c}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:1}},{name:"relationship",title:this.$t("pim.relationship"),style:{flex:1}},{name:"dateOfBirth",title:this.$t("pim.date_of_birth"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:"0.5"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const zg=(0,i.A)(Fg,[["render",Mg]]);var jg=zg;const Og={class:"XHRM-horizontal-padding XHRM-vertical-padding"},Gg={class:"XHRM-employee-picture"};function Qg(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("profile-image-input"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("submit-button"),m=(0,a.resolveComponent)("oxd-form-actions"),p=(0,a.resolveComponent)("oxd-form"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Og,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.change_profile_picture")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Gg,[(0,a.createVNode)(d,{modelValue:n.empPicture,"onUpdate:modelValue":t[0]||(t[0]=e=>n.empPicture=e),rules:n.rules.empPicture,"img-src":i.profilePicUrl},null,8,["modelValue","rules","img-src"])])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u)]),_:1})]),_:1},8,["loading","onSubmitValid"])])]),_:1},8,["employee-id"])}const Kg=`${window.appGlobal.publicPath}/images/default-photo.png`;var Wg={components:{"profile-image-input":cp,"edit-employee-layout":Jh},props:{empNumber:{type:String,required:!0},allowedImageTypes:{type:Array,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/picture`);return{http:t}},data(){return{isLoading:!1,empPicture:null,rules:{empPicture:[Kt,ho(1048576),go(this.allowedImageTypes)]}}},computed:{profilePicUrl(){if(this.empPicture){const e=this.empPicture.base64,t=this.empPicture.type,o=this.allowedImageTypes.findIndex(e=>e===t);return o>-1?`data:${t};base64,${e}`:Kg}return Kg}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{empPicture:this.empPicture}}).then(()=>this.$toast.updateSuccess()).then(()=>{location.reload()})}}};const Jg=(0,i.A)(Wg,[["render",Qg],["__scopeId","data-v-1d365769"]]);var Yg=Jg;const Zg={class:"XHRM-horizontal-padding XHRM-vertical-padding"},ev={class:"XHRM-container"},tv={class:"XHRM-bottom-container"};function ov(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-salary-component"),s=(0,a.resolveComponent)("edit-salary-component"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber,screen:"salary"},{default:(0,a.withCtx)(()=>[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,paygrades:o.paygrades,"pay-frequencies":o.payFrequencies,currencies:o.currencies,"account-types":o.accountTypes,onClose:i.onSaveModalClose},null,8,["http","paygrades","pay-frequencies","currencies","account-types","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,paygrades:o.paygrades,"pay-frequencies":o.payFrequencies,currencies:o.currencies,"account-types":o.accountTypes,onClose:i.onEditModalClose},null,8,["http","data","paygrades","pay-frequencies","currencies","account-types","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Zg,[(0,a.createVNode)(d,{"action-button-shown":e.$can.update("salary_details"),onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_salary_components")),1)]),_:1},8,["action-button-shown","onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",ev,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:i.tableHeaders,items:l.items?.data,selectable:e.$can.delete("salary_details"),disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","disabled","loading"])]),(0,a.createElementVNode)("div",tv,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)]),_:1},8,["employee-id"])}const av={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function lv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-switch-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",av,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[...t[12]||(t[12]=[(0,a.createTextVNode)(" Add Salary Component ",-1)])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.salaryComponent.name=e),label:e.$t("pim.salary_component"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.payGradeId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.salaryComponent.payGradeId=e),type:"select",label:e.$t("general.pay_grade"),options:o.paygrades},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.payFrequencyId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.salaryComponent.payFrequencyId=e),type:"select",label:e.$t("pim.pay_frequency"),options:o.payFrequencies},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(d,{key:i.currenciesOpts,modelValue:n.salaryComponent.currencyId,"onUpdate:modelValue":t[3]||(t[3]=e=>n.salaryComponent.currencyId=e),type:"select",label:e.$t("general.currency"),options:i.currenciesOpts,rules:n.rules.currencyId,required:""},null,8,["modelValue","label","options","rules"]))]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.salaryAmount,"onUpdate:modelValue":t[4]||(t[4]=e=>n.salaryComponent.salaryAmount=e),label:e.$t("general.amount"),rules:n.rules.salaryAmount,required:""},null,8,["modelValue","label","rules"]),void 0!==i.minAmount||void 0!==i.maxAmount?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)(" Min: "+(0,a.toDisplayString)(i.minAmount??0)+" - Max: "+(0,a.toDisplayString)(i.maxAmount??0),1)]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.comment,"onUpdate:modelValue":t[5]||(t[5]=e=>n.salaryComponent.comment=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,{class:"directdeposit-form-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"directdeposit-form-header-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.include_direct_deposit_details")),1)]),_:1}),(0,a.createVNode)(p,{modelValue:n.includeDirectDeposit,"onUpdate:modelValue":t[6]||(t[6]=e=>n.includeDirectDeposit=e)},null,8,["modelValue"])]),_:1}),n.includeDirectDeposit?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositAccount,"onUpdate:modelValue":t[7]||(t[7]=e=>n.directDeposit.directDepositAccount=e),label:e.$t("pim.account_number"),rules:n.rules.directDepositAccount,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositAccountType,"onUpdate:modelValue":t[8]||(t[8]=e=>n.directDeposit.directDepositAccountType=e),type:"select",label:e.$t("pim.account_type"),rules:n.rules.directDepositAccountType,options:o.accountTypes,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),i.showOptionalAccountType?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.accountType,"onUpdate:modelValue":t[9]||(t[9]=e=>n.accountType=e),label:e.$t("pim.please_specify"),rules:n.rules.accountType,required:""},null,8,["modelValue","label","rules"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1}),(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositRoutingNumber,"onUpdate:modelValue":t[10]||(t[10]=e=>n.directDeposit.directDepositRoutingNumber=e),label:e.$t("pim.routing_number"),rules:n.rules.directDepositRoutingNumber,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositAmount,"onUpdate:modelValue":t[11]||(t[11]=e=>n.directDeposit.directDepositAmount=e),label:e.$t("general.amount"),rules:n.rules.directDepositAmount,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const nv={name:"",salaryAmount:"",comment:"",payGradeId:null,payFrequencyId:null,currencyId:null},iv={directDepositAccount:"",directDepositAccountType:null,directDepositRoutingNumber:"",directDepositAmount:""};var rv={name:"SaveSalaryComponent",components:{"oxd-switch-input":X.Ay},props:{http:{type:Object,required:!0},paygrades:{type:Array,default:()=>[]},payFrequencies:{type:Array,default:()=>[]},currencies:{type:Array,default:()=>[]},accountTypes:{type:Array,default:()=>[]}},emits:["close"],data(){return{isLoading:!1,includeDirectDeposit:!1,salaryComponent:{...nv},directDeposit:{...iv},accountType:"",usableCurrencies:[],rules:{name:[Kt,Wt(100)],salaryAmount:[Kt,ao,Co(1e9)],comment:[Wt(250)],currencyId:[Kt],directDepositAccount:[Kt,Wt(100)],directDepositAccountType:[Kt],accountType:[Kt,Wt(20)],directDepositRoutingNumber:[Kt,Wt(9),ao],directDepositAmount:[Kt,ao,Co(1e9)]}}},computed:{showOptionalAccountType(){return"OTHER"==this.directDeposit.directDepositAccountType?.id},minAmount(){return this.currencyInfo?.minAmount},maxAmount(){return this.currencyInfo?.maxAmount},currenciesOpts(){const e=this.salaryComponent.payGradeId?.id;return e?e&&this.usableCurrencies.length>0?this.currencies.filter(e=>this.usableCurrencies.findIndex(t=>t.id===e.id)>-1):[]:this.currencies},currencyInfo(){return this.usableCurrencies.find(e=>e.id===this.salaryComponent.currencyId?.id)}},watch:{"salaryComponent.payGradeId":function(e){e?.id?(this.isLoading=!0,this.http.request({url:`/api/v2/admin/pay-grades/${e.id}/currencies`,method:"GET",params:{limit:0}}).then(e=>{const{data:t}=e.data;this.usableCurrencies=t.map(e=>({id:e.currencyType.id,name:e.currencyType.name,minAmount:e.minSalary,maxAmount:e.maxSalary}));const o=this.salaryComponent.currencyId,a=this.usableCurrencies.findIndex(e=>e.id===o?.id);this.salaryComponent.currencyId=-1===a?null:this.salaryComponent.currencyId}).then(()=>{this.isLoading=!1})):this.usableCurrencies=[]}},mounted(){this.$nextTick(()=>{this.rules.salaryAmount.push(e=>{const t=this.minAmount?this.minAmount:0;return e>=t||this.$t("pim.should_be_within_min_max_values")}),this.rules.salaryAmount.push(e=>{const t=this.maxAmount?this.maxAmount:999999999;return e<=t||this.$t("pim.should_be_within_min_max_values")})})},methods:{onSave(){this.isLoading=!0;const e=this.showOptionalAccountType?this.accountType:this.directDeposit.directDepositAccountType?.id;this.http.create({salaryComponent:this.salaryComponent.name,salaryAmount:this.salaryComponent.salaryAmount,payGradeId:this.salaryComponent.payGradeId?.id,currencyId:this.salaryComponent.currencyId?.id,payFrequencyId:this.salaryComponent.payFrequencyId?.id,comment:this.salaryComponent.comment?this.salaryComponent.comment:null,addDirectDeposit:this.includeDirectDeposit,directDepositAccount:this.includeDirectDeposit?this.directDeposit.directDepositAccount:void 0,directDepositAccountType:this.includeDirectDeposit?e:void 0,directDepositAmount:this.includeDirectDeposit?this.directDeposit.directDepositAmount:void 0,directDepositRoutingNumber:this.includeDirectDeposit?this.directDeposit.directDepositRoutingNumber:void 0}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const sv=(0,i.A)(rv,[["render",lv],["__scopeId","data-v-ec36ca3c"]]);var dv=sv;const cv={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function uv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-switch-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",cv,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_salary_component")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.salaryComponent.name=e),label:e.$t("pim.salary_component"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.payGradeId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.salaryComponent.payGradeId=e),type:"select",label:e.$t("general.pay_grade"),options:o.paygrades},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.payFrequencyId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.salaryComponent.payFrequencyId=e),type:"select",label:e.$t("pim.pay_frequency"),options:o.payFrequencies},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(d,{key:i.currenciesOpts,modelValue:n.salaryComponent.currencyId,"onUpdate:modelValue":t[3]||(t[3]=e=>n.salaryComponent.currencyId=e),type:"select",label:e.$t("general.currency"),options:i.currenciesOpts,rules:n.rules.currencyId,required:""},null,8,["modelValue","label","options","rules"]))]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.salaryAmount,"onUpdate:modelValue":t[4]||(t[4]=e=>n.salaryComponent.salaryAmount=e),label:e.$t("general.amount"),rules:n.rules.salaryAmount,required:""},null,8,["modelValue","label","rules"]),void 0!==i.minAmount||void 0!==i.maxAmount?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)(" Min: "+(0,a.toDisplayString)(i.minAmount??0)+" - Max: "+(0,a.toDisplayString)(i.maxAmount??0),1)]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.salaryComponent.comment,"onUpdate:modelValue":t[5]||(t[5]=e=>n.salaryComponent.comment=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,{class:"directdeposit-form-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"directdeposit-form-header-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.include_direct_deposit_details")),1)]),_:1}),(0,a.createVNode)(p,{modelValue:n.includeDirectDeposit,"onUpdate:modelValue":t[6]||(t[6]=e=>n.includeDirectDeposit=e)},null,8,["modelValue"])]),_:1}),n.includeDirectDeposit?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositAccount,"onUpdate:modelValue":t[7]||(t[7]=e=>n.directDeposit.directDepositAccount=e),label:e.$t("pim.account_number"),rules:n.rules.directDepositAccount,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositAccountType,"onUpdate:modelValue":t[8]||(t[8]=e=>n.directDeposit.directDepositAccountType=e),type:"select",label:e.$t("pim.account_type"),rules:n.rules.directDepositAccountType,options:o.accountTypes,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),i.showOptionalAccountType?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.accountType,"onUpdate:modelValue":t[9]||(t[9]=e=>n.accountType=e),label:e.$t("pim.please_specify"),rules:n.rules.accountType,required:""},null,8,["modelValue","label","rules"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1}),(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositRoutingNumber,"onUpdate:modelValue":t[10]||(t[10]=e=>n.directDeposit.directDepositRoutingNumber=e),label:e.$t("pim.routing_number"),rules:n.rules.directDepositRoutingNumber,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.directDeposit.directDepositAmount,"onUpdate:modelValue":t[11]||(t[11]=e=>n.directDeposit.directDepositAmount=e),label:e.$t("general.amount"),rules:n.rules.directDepositAmount,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const mv={name:"",salaryAmount:"",comment:"",payGradeId:null,payFrequencyId:null,currencyId:null},pv={directDepositAccount:"",directDepositAccountType:null,directDepositRoutingNumber:"",directDepositAmount:""};var hv={name:"EditSalaryComponent",components:{"oxd-switch-input":X.Ay},props:{http:{type:Object,required:!0},data:{type:Object,required:!0},paygrades:{type:Array,default:()=>[]},payFrequencies:{type:Array,default:()=>[]},currencies:{type:Array,default:()=>[]},accountTypes:{type:Array,default:()=>[]}},emits:["close"],data(){return{isLoading:!1,includeDirectDeposit:!1,salaryComponent:{...mv},directDeposit:{...pv},accountType:"",usableCurrencies:[],rules:{name:[Kt,Wt(100)],salaryAmount:[Kt,ao,Co(1e9)],comment:[Wt(250)],currencyId:[Kt],directDepositAccount:[Kt,Wt(100)],directDepositAccountType:[Kt],accountType:[Kt,Wt(20)],directDepositRoutingNumber:[Kt,Wt(9),ao],directDepositAmount:[Kt,ao,Co(1e9)]}}},computed:{showOptionalAccountType(){return"OTHER"==this.directDeposit.directDepositAccountType?.id},minAmount(){return this.currencyInfo?.minAmount},maxAmount(){return this.currencyInfo?.maxAmount},currenciesOpts(){const e=this.salaryComponent.payGradeId?.id;return e?e&&this.usableCurrencies.length>0?this.currencies.filter(e=>this.usableCurrencies.findIndex(t=>t.id===e.id)>-1):[]:this.currencies},currencyInfo(){return this.usableCurrencies.find(e=>e.id===this.salaryComponent.currencyId?.id)}},watch:{"salaryComponent.payGradeId":function(e){e?.id?(this.isLoading=!0,this.http.request({url:`/api/v2/admin/pay-grades/${e.id}/currencies`,method:"GET",params:{limit:0}}).then(e=>{const{data:t}=e.data;this.usableCurrencies=t.map(e=>({id:e.currencyType.id,name:e.currencyType.name,minAmount:e.minSalary,maxAmount:e.maxSalary}));const o=this.salaryComponent.currencyId,a=this.usableCurrencies.findIndex(e=>e.id===o?.id);this.salaryComponent.currencyId=-1===a?[]:this.salaryComponent.currencyId}).then(()=>{this.isLoading=!1})):this.usableCurrencies=[]}},mounted(){this.$nextTick(()=>{this.rules.salaryAmount.push(e=>{const t=this.minAmount?this.minAmount:0;return e>=t||this.$t("pim.should_be_within_min_max_values")}),this.rules.salaryAmount.push(e=>{const t=this.maxAmount?this.maxAmount:999999999;return e<=t||this.$t("pim.should_be_within_min_max_values")})})},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;if(this.salaryComponent.name=t.salaryName,this.salaryComponent.salaryAmount=t.amount,this.salaryComponent.comment=t.comment?t.comment:"",this.salaryComponent.payGradeId=this.paygrades.find(e=>e.id===t.payGrade?.id),this.salaryComponent.payFrequencyId=this.payFrequencies.find(e=>e.id===t.payPeriod?.id),this.salaryComponent.currencyId=this.currencies.find(e=>e.id===t.currencyType?.id),null!==t.directDebit.id){this.includeDirectDeposit=!0,this.directDeposit.directDepositAccount=t.directDebit.account;const e=this.accountTypes.find(e=>e.id===t.directDebit.accountType);this.directDeposit.directDepositAccountType=e||{id:"OTHER",label:this.$t("pim.other")},this.accountType=0===e.length?t.directDebit.accountType:"",this.directDeposit.directDepositRoutingNumber=t.directDebit.routingNumber,this.directDeposit.directDepositAmount=t.directDebit.amount}}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0;const e=this.showOptionalAccountType?this.accountType:this.directDeposit.directDepositAccountType?.id;this.http.update(this.data.id,{salaryComponent:this.salaryComponent.name,salaryAmount:this.salaryComponent.salaryAmount,payGradeId:this.salaryComponent.payGradeId?.id,currencyId:this.salaryComponent.currencyId?.id,payFrequencyId:this.salaryComponent.payFrequencyId?.id,comment:this.salaryComponent.comment?this.salaryComponent.comment:null,addDirectDeposit:this.includeDirectDeposit,directDepositAccount:this.includeDirectDeposit?this.directDeposit.directDepositAccount:void 0,directDepositAccountType:this.includeDirectDeposit?e:void 0,directDepositAmount:this.includeDirectDeposit?this.directDeposit.directDepositAmount:void 0,directDepositRoutingNumber:this.includeDirectDeposit?this.directDeposit.directDepositRoutingNumber:void 0}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const gv=(0,i.A)(hv,[["render",uv],["__scopeId","data-v-0d3c12f8"]]);var vv=gv;const fv=e=>e.map(e=>({id:e.id,name:e.salaryName,amount:e.amount,currency:e.currencyType?.name,frequency:e.payPeriod?.name,depositAmount:e.directDebit?.amount}));var yv={components:{"profile-action-header":Hh,"edit-employee-layout":Jh,"save-salary-component":dv,"edit-salary-component":vv,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},paygrades:{type:Array,default:()=>[]},payFrequencies:{type:Array,default:()=>[]},currencies:{type:Array,default:()=>[]},accountTypes:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/salary-components`),{showPaginator:o,currentPage:a,total:l,pages:n,pageSize:i,response:r,isLoading:s,execQuery:d}=Et(t,{normalizer:fv,toastNoRecords:!1});return{http:t,showPaginator:o,currentPage:a,isLoading:s,total:l,pages:n,pageSize:i,execQuery:d,items:r}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("pim.salary_component"),style:{flex:1}},{name:"amount",title:this.$t("general.amount"),style:{flex:1}},{name:"currency",title:this.$t("general.currency"),style:{flex:1}},{name:"frequency",title:this.$t("pim.pay_frequency"),style:{flex:1}},{name:"depositAmount",title:this.$t("pim.direct_deposit_amount"),style:{flex:1}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal},tableHeaders(){const e={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.$can.delete("salary_details")&&(e.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),this.$can.update("salary_details")&&(e.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),Object.keys(e.cellConfig).length>0?this.headers.concat([e]):this.headers}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const Cv=(0,i.A)(yv,[["render",ov]]);var Vv=Cv;const bv={class:"XHRM-horizontal-padding XHRM-vertical-padding"},wv={key:1,class:"XHRM-horizontal-padding XHRM-vertical-padding"};function xv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("date-input"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("job-spec-download"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("oxd-switch-input"),v=(0,a.resolveComponent)("file-upload-input"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("profile-action-header"),b=(0,a.resolveComponent)("terminate-modal"),w=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(w,{screen:"job","employee-id":o.empNumber,"max-file-size":o.maxFileSize,"allowed-file-types":o.allowedFileTypes},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",bv,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.job_details")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.job.joinedDate,"onUpdate:modelValue":t[0]||(t[0]=e=>n.job.joinedDate=e),label:e.$t("general.joined_date"),rules:n.rules.joinedDate,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.job.jobTitleId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.job.jobTitleId=e),type:"select",label:e.$t("general.job_title"),options:i.normalizedJobTitles,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(m,{key:`jobspec-${i.selectedJobTitleId}`,"resource-id":i.selectedJobTitleId},null,8,["resource-id"]))]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.job.jobCategoryId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.job.jobCategoryId=e),type:"select",label:e.$t("general.job_category"),options:o.jobCategories,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.job.subunitId,"onUpdate:modelValue":t[3]||(t[3]=e=>n.job.subunitId=e),type:"select",label:e.$t("general.sub_unit"),options:o.subunits,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.job.locationId,"onUpdate:modelValue":t[4]||(t[4]=e=>n.job.locationId=e),type:"select",label:e.$t("general.location"),options:o.locations,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.job.empStatusId,"onUpdate:modelValue":t[5]||(t[5]=e=>n.job.empStatusId=e),type:"select",label:e.$t("general.employment_status"),options:o.employmentStatuses,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","options","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{class:"user-form-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"user-form-header-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.include_employment_contract_details")),1)]),_:1}),(0,a.createVNode)(g,{modelValue:n.showContractDetails,"onUpdate:modelValue":t[6]||(t[6]=e=>n.showContractDetails=e)},null,8,["modelValue"])]),_:1}),n.showContractDetails?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contract.startDate,"onUpdate:modelValue":t[7]||(t[7]=e=>n.contract.startDate=e),label:e.$t("pim.contract_start_date"),rules:n.rules.startDate,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.contract.endDate,"onUpdate:modelValue":t[8]||(t[8]=e=>n.contract.endDate=e),label:e.$t("pim.contract_end_date"),rules:n.rules.endDate,disabled:!i.hasUpdatePermissions},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{newFile:n.contract.newAttachment,"onUpdate:newFile":t[9]||(t[9]=e=>n.contract.newAttachment=e),method:n.contract.method,"onUpdate:method":t[10]||(t[10]=e=>n.contract.method=e),label:e.$t("pim.contract_details"),"button-label":e.$t("general.browse"),file:n.contract.oldAttachment,rules:n.rules.contractAttachment,url:`pim/viewAttachment/empNumber/${o.empNumber}/attachId`,hint:e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize}),disabled:!i.hasUpdatePermissions},null,8,["newFile","method","label","button-label","file","rules","url","hint","disabled"])]),_:1})]),_:1})]),_:1})],64)):(0,a.createCommentVNode)("",!0),i.hasUpdatePermissions?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f)]),_:1})],64)):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","onSubmitValid"])]),i.hasUpdatePermissions&&!n.isLoading?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0})):(0,a.createCommentVNode)("",!0),i.hasUpdatePermissions&&!n.isLoading?((0,a.openBlock)(),(0,a.createElementBlock)("div",wv,[(0,a.createVNode)(V,{"icon-name":"","display-type":i.terminationActionType,label:i.terminationActionLabel,title:i.terminationActionLabel,class:"--termination-button",onClick:i.onClickTerminate},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.employee_termination_activation"))+" ",1),n.termination&&n.termination.id?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,tag:"p",class:"XHRM-terminate-date",onClick:i.openTerminateModal},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.terminated_on"))+": "+(0,a.toDisplayString)(i.terminationDate),1)]),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["display-type","label","title","onClick"])])):(0,a.createCommentVNode)("",!0),n.showTerminateModal?((0,a.openBlock)(),(0,a.createBlock)(b,{key:2,"employee-id":o.empNumber,"termination-reasons":o.terminationReasons,"termination-id":n.termination.id,onClose:i.closeTerminateModal},null,8,["employee-id","termination-reasons","termination-id","onClose"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["employee-id","max-file-size","allowed-file-types"])}function Nv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-icon-button"),d=(0,a.resolveComponent)("oxd-loading-spinner"),c=(0,a.resolveComponent)("oxd-input-group");return(0,a.openBlock)(),(0,a.createBlock)(c,{label:e.$t("general.job_specification")},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)({"input-container":!0,"--disabled":!e.file.id})},[(0,a.createVNode)(r,{class:"input-container-filename",tag:"p",title:e.file.filename,onClick:l.downloadFile},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.file.id?e.file.filename:"Not Defined"),1)]),_:1},8,["title","onClick"]),!e.isLoading&&e.file.id?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"input-container-icon",name:"download",onClick:l.downloadFile},null,8,["onClick"])):(0,a.createCommentVNode)("",!0),e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,class:"input-container-loader","with-container":!1})):(0,a.createCommentVNode)("",!0)],2)]),_:1},8,["label"])}var kv={name:"JobSpecDownload",components:{"oxd-loading-spinner":X.VJ},props:{resourceId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/admin/job-titles/${e.resourceId}/specification`),o=(0,a.reactive)({isLoading:!1,file:{id:"",filename:"",fileType:"",fileSize:0}}),l=async()=>{o.isLoading=!0,t.request({method:"GET",validateStatus:e=>e>=200&&e<300||404==e}).then(({data:e})=>{o.file={...e.data}}).finally(()=>{o.isLoading=!1})},n=()=>{if(!o.file.id)return;const e=`${window.appGlobal.baseUrl}/admin/viewJobSpecification/attachId/${o.file.id}`;window.open(e,"_blank")};return e.resourceId&&(0,a.onBeforeMount)(l),{...(0,a.toRefs)(o),downloadFile:n}}};const _v=(0,i.A)(kv,[["render",Nv],["__scopeId","data-v-0a119a00"]]);var Sv=_v;const Dv={class:"XHRM-modal-header"};function $v(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("date-input"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("required-text"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(f,{class:"XHRM-dialog-modal","onUpdate:show":t[4]||(t[4]=e=>i.onCancel(!1))},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Dv,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.terminate_employment")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(v,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.termination.date,"onUpdate:modelValue":t[0]||(t[0]=e=>n.termination.date=e),label:e.$t("pim.termination_date"),rules:n.rules.date,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.termination.terminationReason,"onUpdate:modelValue":t[1]||(t[1]=e=>n.termination.terminationReason=e),type:"select",label:e.$t("pim.termination_reason"),rules:n.rules.terminationReason,options:o.terminationReasons,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.termination.note,"onUpdate:modelValue":t[2]||(t[2]=e=>n.termination.note=e),type:"textarea",label:e.$t("general.note"),placeholder:e.$t("general.type_here"),rules:n.rules.note},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:t[3]||(t[3]=e=>i.onCancel(!1))},null,8,["label"]),(0,a.createVNode)(h)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1})}const Mv={terminationReason:null,date:"",note:null};var Ev={name:"TerminateModal",components:{"oxd-dialog":X.KB},props:{employeeId:{type:String,required:!0},terminationReasons:{type:Array,required:!0},terminationId:{type:Number,required:!1,default:null}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/terminations`),{userDateFormat:o}=F();return{http:t,userDateFormat:o}},data(){return{isLoading:!1,termination:{...Mv},rules:{terminationReason:[Kt],date:[Kt,Jt(this.userDateFormat)],note:[Wt(250)]}}},beforeMount(){this.terminationId&&(this.isLoading=!0,this.http.get(this.terminationId).then(e=>{const{data:t}=e.data;this.termination.terminationReason=this.terminationReasons.find(e=>e.id===t.terminationReason?.id),this.termination.date=t.date,this.termination.note=t.note}).finally(()=>{this.isLoading=!1}))},methods:{onSave(){this.isLoading=!0;const e={date:this.termination.date,note:this.termination.note,terminationReasonId:this.termination.terminationReason?.id};this.submitData(e,this.terminationId).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel(!0)})},async submitData(e,t){return t?this.http.update(t,e):this.http.create(e)},onCancel(e){this.$emit("close",e)}}};const Rv=(0,i.A)(Ev,[["render",$v]]);var Tv=Rv;const Bv={joinedDate:"",jobTitleId:[],empStatusId:[],jobCategoryId:[],subunitId:[],locationId:[]},Iv={startDate:"",endDate:"",oldAttachment:null,newAttachment:null,method:"keepCurrent"};var Av={components:{"edit-employee-layout":Jh,"oxd-switch-input":X.Ay,"job-spec-download":Sv,"file-upload-input":Uo,"profile-action-header":Hh,"terminate-modal":Tv},props:{empNumber:{type:String,required:!0},locations:{type:Array,default:()=>[]},jobTitles:{type:Array,default:()=>[]},jobCategories:{type:Array,default:()=>[]},subunits:{type:Array,default:()=>[]},employmentStatuses:{type:Array,default:()=>[]},terminationReasons:{type:Array,default:()=>[]},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/job-details`),{jsDateFormat:o,userDateFormat:a}=F(),{locale:l}=Ae();return{http:t,locale:l,jsDateFormat:o,userDateFormat:a}},data(){return{isLoading:!1,showContractDetails:!1,job:{...Bv},contract:{...Iv},termination:null,showTerminateModal:!1,rules:{joinedDate:[Jt(this.userDateFormat)],startDate:[Jt(this.userDateFormat)],endDate:[Jt(this.userDateFormat),so(()=>this.contract.startDate)],contractAttachment:[e=>"replaceCurrent"!=this.contract.method||Kt(e),go(this.allowedFileTypes),ho(this.maxFileSize)]}}},computed:{selectedJobTitleId(){const e=this.job.jobTitleId?.id;return e||0},terminationActionLabel(){return this.termination?.id?this.$t("pim.activate_employment"):this.$t("pim.terminate_employment")},terminationActionType(){return this.termination?.id?"ghost-success":"label-danger"},hasUpdatePermissions(){return this.$can.update("job_details")},normalizedJobTitles(){return this.jobTitles.map(e=>({id:e.id,label:e?.deleted?e.label+this.$t("general.deleted"):e.label}))},terminationDate(){return this.termination?.date?ge(he(this.termination.date),this.jsDateFormat,{locale:this.locale}):null},formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{this.updateJobModel(e)}).then(()=>this.http.request({method:"GET",url:`/api/v2/pim/employees/${this.empNumber}/employment-contract`})).then(e=>{this.updateContractModel(e)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{...this.job,jobTitleId:this.job.jobTitleId?.id,jobCategoryId:this.job.jobCategoryId?.id,subunitId:this.job.subunitId?.id,empStatusId:this.job.empStatusId?.id,locationId:this.job.locationId?.id}}).then(e=>(this.updateJobModel(e),this.http.request({method:"PUT",url:`/api/v2/pim/employees/${this.empNumber}/employment-contract`,data:{startDate:this.contract.startDate,endDate:this.contract.endDate,currentContractAttachment:this.contract.oldAttachment?this.contract.method:void 0,contractAttachment:this.contract.newAttachment?this.contract.newAttachment:void 0}}))).then(e=>(e&&this.updateContractModel(e),this.$toast.updateSuccess())).then(()=>{this.isLoading=!1})},onClickTerminate(){this.termination?.id?(this.isLoading=!0,this.http.request({method:"DELETE",url:`/api/v2/pim/employees/${this.empNumber}/terminations`}).then(()=>this.$toast.updateSuccess()).then(()=>{location.reload()})):this.openTerminateModal()},openTerminateModal(){this.showTerminateModal=!0},closeTerminateModal(e){this.showTerminateModal=!1,e&&location.reload()},updateContractModel(e){const{data:t}=e.data;this.contract.startDate=t.startDate,this.contract.endDate=t.endDate,this.contract.oldAttachment=t.contractAttachment?.id?t.contractAttachment:null,this.contract.newAttachment=null,this.contract.method="keepCurrent",t.startDate||t.endDate||t.contractAttachment?.id?this.showContractDetails=!0:this.showContractDetails=!1},updateJobModel(e){const{data:t}=e.data;this.job.joinedDate=t.joinedDate,this.job.jobTitleId=this.normalizedJobTitles.find(e=>e.id===t.jobTitle?.id),this.job.jobCategoryId=this.jobCategories.find(e=>e.id===t.jobCategory?.id),this.job.subunitId=this.subunits.find(e=>e.id===t.subunit?.id),this.job.empStatusId=this.employmentStatuses.find(e=>e.id===t.empStatus?.id),this.job.locationId=this.locations.find(e=>e.id===t.location?.id),this.termination=t.employeeTerminationRecord}}};const Hv=(0,i.A)(Av,[["render",xv],["__scopeId","data-v-73f2754b"]]);var Xv=Hv;const Uv={class:"XHRM-horizontal-padding XHRM-top-padding"};function Lv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-work-experience"),c=(0,a.resolveComponent)("employee-education"),u=(0,a.resolveComponent)("employee-skills"),m=(0,a.resolveComponent)("employee-languages"),p=(0,a.resolveComponent)("employee-license"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber,screen:"qualifications"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Uv,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.qualifications")),1)]),_:1}),(0,a.createVNode)(s)]),(0,a.createVNode)(d,{"employee-id":o.empNumber},null,8,["employee-id"]),(0,a.createVNode)(c,{"employee-id":o.empNumber},null,8,["employee-id"]),(0,a.createVNode)(u,{"employee-id":o.empNumber},null,8,["employee-id"]),(0,a.createVNode)(m,{"employee-id":o.empNumber,fluencies:o.fluencies,competencies:o.competencies},null,8,["employee-id","fluencies","competencies"]),(0,a.createVNode)(p,{"employee-id":o.empNumber},null,8,["employee-id"])]),_:1},8,["employee-id"])}const Pv={class:"XHRM-horizontal-padding XHRM-vertical-padding"},qv={class:"XHRM-container"},Fv={key:2,class:"XHRM-bottom-container"};function zv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-skill"),s=(0,a.resolveComponent)("edit-skill"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,api:l.skillsEndpoint,onClose:i.onSaveModalClose},null,8,["http","api","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Pv,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.skills")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",qv,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,disabled:i.isDisabled,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading","disabled"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",Fv,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const jv={class:"XHRM-horizontal-padding XHRM-top-padding"};function Ov(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("qualification-dropdown"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",jv,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_skill")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.skillId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.skill.skillId=e),label:e.$t("pim.skill"),rules:n.rules.skillId,api:o.api,required:""},null,8,["modelValue","label","rules","api"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.skill.yearsOfExperience,"onUpdate:modelValue":t[1]||(t[1]=e=>n.skill.yearsOfExperience=e),label:e.$t("pim.years_of_experience"),rules:n.rules.yearsOfExperience},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.skill.comments,"onUpdate:modelValue":t[2]||(t[2]=e=>n.skill.comments=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comments},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}function Gv(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",options:l.options},null,8,["options"])}var Qv={name:"QualificationDropdown",props:{api:{type:String,required:!0}},setup(e){const t=(0,a.ref)([]),o=new H(window.appGlobal.baseUrl,e.api);return(0,a.onBeforeMount)(()=>{o.getAll({limit:0}).then(({data:e})=>{t.value=e.data.map(e=>({id:e.id,label:e.name}))})}),{options:t}}};const Kv=(0,i.A)(Qv,[["render",Gv]]);var Wv=Kv;const Jv={yearsOfExperience:"",comments:"",skillId:null};var Yv={name:"SaveSkill",components:{"qualification-dropdown":Wv},props:{http:{type:Object,required:!0},api:{type:String,required:!0}},emits:["close"],data(){return{isLoading:!1,skill:{...Jv},rules:{skillId:[Kt],yearsOfExperience:[to,eo(100)],comments:[Wt(100)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({skillId:this.skill.skillId?.id,yearsOfExperience:parseInt(this.skill.yearsOfExperience),comments:""!==this.skill.comments?this.skill.comments:""}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Zv=(0,i.A)(Yv,[["render",Ov]]);var ef=Zv;const tf={class:"XHRM-horizontal-padding XHRM-top-padding"};function of(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",tf,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_skill")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.skill.name=e),label:e.$t("pim.skill"),required:"",readonly:"",disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.yearsOfExperience,"onUpdate:modelValue":t[1]||(t[1]=e=>n.skill.yearsOfExperience=e),label:e.$t("pim.years_of_experience"),rules:n.rules.yearsOfExperience},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.skill.comments,"onUpdate:modelValue":t[2]||(t[2]=e=>n.skill.comments=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comments},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const af={yearsOfExperience:0,comments:"",name:""};var lf={name:"EditSkill",props:{http:{type:Object,required:!0},data:{type:Object,required:!0}},emits:["close"],data(){return{isLoading:!1,skill:{...af},rules:{yearsOfExperience:[to,eo(100)],comments:[Wt(100)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.skill.name=t.skill.name,this.skill.comments=t.comments,this.skill.yearsOfExperience=t.yearsOfExperience}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{yearsOfExperience:parseInt(this.skill.yearsOfExperience),comments:""!==this.skill.comments?this.skill.comments:""}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const nf=(0,i.A)(lf,[["render",of]]);var rf=nf;const sf=e=>e.map(e=>({id:e.skill.id,name:e.skill.name,yearsOfExperience:e.yearsOfExperience,comments:e.comments}));var df={name:"EmployeeSkills",components:{"profile-action-header":Hh,"save-skill":ef,"edit-skill":rf,"delete-confirmation":Xt},props:{employeeId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/skills`),o=`/api/v2/pim/employees/${e.employeeId}/skills/allowed`,{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(t,{normalizer:sf,toastNoRecords:!1});return{http:t,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s,skillsEndpoint:o}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("pim.skill"),style:{flex:1}},{name:"yearsOfExperience",title:this.$t("pim.years_of_experience"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-basis":"10em"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const cf=(0,i.A)(df,[["render",zv]]);var uf=cf;const mf={class:"XHRM-horizontal-padding XHRM-vertical-padding"},pf={class:"XHRM-container"},hf={key:2,class:"XHRM-bottom-container"};function gf(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-education"),s=(0,a.resolveComponent)("edit-education"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,api:l.educationEndpoint,onClose:i.onSaveModalClose},null,8,["http","api","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",mf,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.education")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",pf,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,disabled:i.isDisabled,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading","disabled"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",hf,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const vf={class:"XHRM-horizontal-padding XHRM-top-padding"};function ff(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("qualification-dropdown"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",vf,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_education")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.education.educationId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.education.educationId=e),label:e.$t("general.level"),rules:n.rules.educationId,api:o.api,required:""},null,8,["modelValue","label","rules","api"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.education.institute,"onUpdate:modelValue":t[1]||(t[1]=e=>n.education.institute=e),label:e.$t("pim.institute"),rules:n.rules.institute},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.education.major,"onUpdate:modelValue":t[2]||(t[2]=e=>n.education.major=e),label:e.$t("pim.major_specialization"),rules:n.rules.major},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.education.year,"onUpdate:modelValue":t[3]||(t[3]=e=>n.education.year=e),label:e.$t("general.year"),rules:n.rules.year},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.education.score,"onUpdate:modelValue":t[4]||(t[4]=e=>n.education.score=e),label:e.$t("pim.gpa_score"),rules:n.rules.score},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.education.startDate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.education.startDate=e),label:e.$t("general.start_date"),rules:n.rules.startDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.education.endDate,"onUpdate:modelValue":t[6]||(t[6]=e=>n.education.endDate=e),label:e.$t("general.end_date"),rules:n.rules.endDate},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const yf={educationId:null,institute:"",major:"",year:"",score:"",startDate:"",endDate:""};var Cf={name:"SaveEducation",components:{"qualification-dropdown":Wv},props:{http:{type:Object,required:!0},api:{type:String,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,education:{...yf},rules:{educationId:[Kt],institute:[Wt(100)],major:[Wt(100)],score:[Wt(25)],year:[Wt(4),to],startDate:[Jt(this.userDateFormat)],endDate:[Jt(this.userDateFormat),so(()=>this.education.startDate)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.education,educationId:this.education.educationId?.id,year:parseInt(this.education.year)}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Vf=(0,i.A)(Cf,[["render",ff]]);var bf=Vf;const wf={class:"XHRM-horizontal-padding XHRM-top-padding"};function xf(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",wf,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_education")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.education.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.education.name=e),label:e.$t("general.level"),required:"",readonly:"",disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.education.institute,"onUpdate:modelValue":t[1]||(t[1]=e=>n.education.institute=e),label:e.$t("pim.institute"),rules:n.rules.institute},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.education.major,"onUpdate:modelValue":t[2]||(t[2]=e=>n.education.major=e),label:e.$t("pim.major_specialization"),rules:n.rules.major},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.education.year,"onUpdate:modelValue":t[3]||(t[3]=e=>n.education.year=e),label:e.$t("general.year"),rules:n.rules.year},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.education.score,"onUpdate:modelValue":t[4]||(t[4]=e=>n.education.score=e),label:e.$t("pim.gpa_score"),rules:n.rules.score},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.education.startDate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.education.startDate=e),label:e.$t("general.start_date"),rules:n.rules.startDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.education.endDate,"onUpdate:modelValue":t[6]||(t[6]=e=>n.education.endDate=e),label:e.$t("general.end_date"),rules:n.rules.endDate},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const Nf={name:"",institute:"",major:"",year:"",score:"",startDate:"",endDate:""};var kf={name:"EditEducation",props:{http:{type:Object,required:!0},data:{type:Object,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,education:{...Nf},rules:{institute:[Wt(100)],major:[Wt(100)],score:[Wt(25)],year:[Wt(4),to],startDate:[Jt(this.userDateFormat)],endDate:[Jt(this.userDateFormat),so(()=>this.education.startDate)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.education.name=t.education.name,this.education.institute=t.institute,this.education.major=t.major,this.education.year=t.year?t.year:"",this.education.score=t.score,this.education.startDate=t.startDate?t.startDate:"",this.education.endDate=t.endDate?t.endDate:""}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{institute:this.education.institute,major:this.education.major,year:parseInt(this.education.year),score:this.education.score,startDate:this.education.startDate,endDate:this.education.endDate}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const _f=(0,i.A)(kf,[["render",xf]]);var Sf=_f;const Df=e=>e.map(e=>({id:e.id,level:e.education.name,year:e.year,score:e.score}));var $f={name:"EmployeeEducation",components:{"profile-action-header":Hh,"save-education":bf,"edit-education":Sf,"delete-confirmation":Xt},props:{employeeId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/educations`),o="/api/v2/admin/educations",{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(t,{normalizer:Df,toastNoRecords:!1});return{http:t,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s,educationEndpoint:o}},data(){return{headers:[{name:"level",slot:"title",title:this.$t("general.level"),style:{flex:1}},{name:"year",title:this.$t("general.year"),style:{flex:1}},{name:"score",title:this.$t("pim.gpa_score"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-basis":"10em"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const Mf=(0,i.A)($f,[["render",gf]]);var Ef=Mf;const Rf={class:"XHRM-horizontal-padding XHRM-vertical-padding"},Tf={class:"XHRM-container"},Bf={key:2,class:"XHRM-bottom-container"};function If(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-language"),s=(0,a.resolveComponent)("edit-language"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,api:l.languagesEndpoint,fluencies:o.fluencies,competencies:o.competencies,onClose:i.onSaveModalClose},null,8,["http","api","fluencies","competencies","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,"employee-id":o.employeeId,competencies:o.competencies,onClose:i.onEditModalClose},null,8,["http","data","employee-id","competencies","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Rf,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.languages")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Tf,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,disabled:i.isDisabled,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","disabled","loading"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",Bf,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const Af={class:"XHRM-horizontal-padding XHRM-top-padding"};function Hf(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Af,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_language")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(d,{key:i.allowedLanguages,modelValue:n.language.languageId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.language.languageId=e),type:"select",label:e.$t("general.language"),options:i.allowedLanguages,rules:n.rules.languageId,clear:!1,required:""},null,8,["modelValue","label","options","rules"]))]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(d,{key:i.allowedFluencies,modelValue:n.language.fluencyId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.language.fluencyId=e),type:"select",label:e.$t("pim.fluency"),options:i.allowedFluencies,rules:n.rules.fluencyId,clear:!1,required:""},null,8,["modelValue","label","options","rules"]))]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.competencyId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.language.competencyId=e),type:"select",label:e.$t("pim.competency"),options:o.competencies,rules:n.rules.competencyId,clear:!1,required:""},null,8,["modelValue","label","options","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.comment,"onUpdate:modelValue":t[3]||(t[3]=e=>n.language.comment=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const Xf={languageId:null,fluencyId:null,competencyId:null,comment:""};var Uf={name:"SaveLanguage",props:{http:{type:Object,required:!0},fluencies:{type:Array,required:!0},competencies:{type:Array,required:!0},api:{type:String,required:!0}},emits:["close"],data(){return{isLoading:!1,language:{...Xf},languages:[],rules:{languageId:[Kt],fluencyId:[Kt],competencyId:[Kt],comment:[Wt(100)]}}},computed:{allowedLanguages(){return this.languages},allowedFluencies(){const e=this.languages.findIndex(e=>e.id===this.language.languageId?.id);if(e>-1){const t=this.languages[e];return this.fluencies.filter(e=>t.allowedFluencyIds.includes(e.id))}return[]}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET",url:this.api,params:{limit:0}}).then(e=>{const{data:t}=e.data;Array.isArray(t)&&(this.languages=t.map(e=>({id:e.id,label:e.name,allowedFluencyIds:e.allowedFluencyIds?e.allowedFluencyIds:[]})))}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({languageId:this.language.languageId?.id,fluencyId:this.language.fluencyId?.id,competencyId:this.language.competencyId?.id,comment:this.language.comment}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Lf=(0,i.A)(Uf,[["render",Hf]]);var Pf=Lf;const qf={class:"XHRM-horizontal-padding XHRM-top-padding"};function Ff(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",qf,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_language")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.language.name=e),label:e.$t("general.language"),required:"",readonly:"",disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.fluency,"onUpdate:modelValue":t[1]||(t[1]=e=>n.language.fluency=e),label:e.$t("pim.fluency"),required:"",readonly:"",disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.competencyId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.language.competencyId=e),type:"select",label:e.$t("pim.competency"),options:o.competencies,rules:n.rules.competencyId,clear:!1,required:""},null,8,["modelValue","label","options","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.language.comment,"onUpdate:modelValue":t[3]||(t[3]=e=>n.language.comment=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const zf={name:"",fluency:"",competencyId:null,comment:""};var jf={name:"EditLanguage",props:{http:{type:Object,required:!0},employeeId:{type:String,required:!0},data:{type:Object,required:!0},competencies:{type:Array,required:!0}},emits:["close"],data(){return{isLoading:!1,language:{...zf},rules:{competencyId:[Kt],comment:[Wt(100)]}}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET",url:`/api/v2/pim/employees/${this.employeeId}/languages/${this.data.languageId}/fluencies/${this.data.fluencyId}`}).then(e=>{const{data:t}=e.data;this.language.name=t.language.name,this.language.fluency=t.fluency.name,this.language.comment=t.comment?t.comment:"",this.language.competencyId=this.competencies.find(e=>e.id===t.competency?.id)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",url:`/api/v2/pim/employees/${this.employeeId}/languages/${this.data.languageId}/fluencies/${this.data.fluencyId}`,data:{competencyId:this.language.competencyId.id,comment:this.language.comment}}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Of=(0,i.A)(jf,[["render",Ff]]);var Gf=Of;const Qf=e=>e.map(e=>({language:e.language.name,languageId:e.language.id,fluency:e.fluency.name,fluencyId:e.fluency.id,competency:e.competency.name,comments:e.comment}));var Kf={name:"EmployeeLanguages",components:{"profile-action-header":Hh,"save-language":Pf,"edit-language":Gf,"delete-confirmation":Xt},props:{employeeId:{type:String,required:!0},fluencies:{type:Array,required:!0},competencies:{type:Array,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/languages`),o=`/api/v2/pim/employees/${e.employeeId}/languages/allowed`,{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(t,{normalizer:Qf,toastNoRecords:!1});return{http:t,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s,languagesEndpoint:o}},data(){return{headers:[{name:"language",slot:"title",title:this.$t("general.language"),style:{flex:1}},{name:"fluency",title:this.$t("pim.fluency"),style:{flex:1}},{name:"competency",title:this.$t("pim.competency"),style:{flex:1}},{name:"comments",title:this.$t("general.comments"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-basis":"10em"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>({languageId:this.items?.data[e].languageId,fluencyId:this.items?.data[e].fluencyId}));this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([{languageId:e.languageId,fluencyId:e.fluencyId}])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const Wf=(0,i.A)(Kf,[["render",If]]);var Jf=Wf;const Yf={class:"XHRM-horizontal-padding XHRM-vertical-padding"},Zf={class:"XHRM-container"},ey={key:2,class:"XHRM-bottom-container"};function ty(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-work-experience"),s=(0,a.resolveComponent)("edit-work-experience"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,onClose:i.onSaveModalClose},null,8,["http","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Yf,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.work_experience")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Zf,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,disabled:i.isDisabled,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading","disabled"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",ey,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const oy={class:"XHRM-horizontal-padding XHRM-top-padding"};function ay(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",oy,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_work_experience")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workExperience.company,"onUpdate:modelValue":t[0]||(t[0]=e=>n.workExperience.company=e),label:e.$t("pim.company"),rules:n.rules.company,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workExperience.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>n.workExperience.jobTitle=e),label:e.$t("general.job_title"),rules:n.rules.jobTitle,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workExperience.fromDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.workExperience.fromDate=e),label:e.$t("general.from"),rules:n.rules.fromDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workExperience.toDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.workExperience.toDate=e),label:e.$t("general.to"),rules:n.rules.toDate},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workExperience.comment,"onUpdate:modelValue":t[4]||(t[4]=e=>n.workExperience.comment=e),type:"textarea",label:e.$t("general.comment"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const ly={company:"",jobTitle:"",fromDate:"",toDate:"",comment:""};var ny={name:"SaveWorkExperience",props:{http:{type:Object,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,workExperience:{...ly},rules:{company:[Kt,Wt(100)],jobTitle:[Kt,Wt(100)],fromDate:[Jt(this.userDateFormat)],toDate:[Jt(this.userDateFormat),so(()=>this.workExperience.fromDate,this.$t("general.to_date_should_be_after_from_date"))],comment:[Wt(200)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.workExperience}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const iy=(0,i.A)(ny,[["render",ay]]);var ry=iy;const sy={class:"XHRM-horizontal-padding XHRM-top-padding"};function dy(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",sy,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[...t[5]||(t[5]=[(0,a.createTextVNode)(" Edit Work Experience ",-1)])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workExperience.company,"onUpdate:modelValue":t[0]||(t[0]=e=>n.workExperience.company=e),label:e.$t("pim.company"),rules:n.rules.company,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workExperience.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>n.workExperience.jobTitle=e),label:e.$t("general.job_title"),rules:n.rules.jobTitle,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workExperience.fromDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.workExperience.fromDate=e),label:e.$t("general.from"),rules:n.rules.fromDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.workExperience.toDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.workExperience.toDate=e),label:e.$t("general.to"),rules:n.rules.toDate},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workExperience.comment,"onUpdate:modelValue":t[4]||(t[4]=e=>n.workExperience.comment=e),type:"textarea",label:e.$t("general.comment"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const cy={company:"",jobTitle:"",fromDate:"",toDate:"",comment:""};var uy={name:"EditWorkExperience",props:{http:{type:Object,required:!0},data:{type:Object,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,workExperience:{...cy},rules:{company:[Kt,Wt(100)],jobTitle:[Kt,Wt(100)],fromDate:[Jt(this.userDateFormat)],toDate:[Jt(this.userDateFormat),so(()=>this.workExperience.fromDate,this.$t("general.to_date_should_be_after_from_date"))],comment:[Wt(200)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.workExperience={...t}}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.workExperience}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const my=(0,i.A)(uy,[["render",dy]]);var py=my,hy={name:"EmployeeWorkExperience",components:{"profile-action-header":Hh,"save-work-experience":ry,"edit-work-experience":py,"delete-confirmation":Xt},props:{employeeId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/work-experiences`),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=e=>e.map(e=>({...e,fromDate:ge(he(e.fromDate),o,{locale:a}),toDate:ge(he(e.toDate),o,{locale:a})})),{showPaginator:n,currentPage:i,total:r,pages:s,pageSize:d,response:c,isLoading:u,execQuery:m}=Et(t,{toastNoRecords:!1,normalizer:l});return{http:t,showPaginator:n,currentPage:i,isLoading:u,total:r,pages:s,pageSize:d,execQuery:m,items:c}},data(){return{headers:[{name:"company",slot:"title",title:this.$t("pim.company"),style:{flex:1}},{name:"jobTitle",title:this.$t("general.job_title"),style:{flex:1}},{name:"fromDate",title:this.$t("general.from"),style:{flex:1}},{name:"toDate",title:this.$t("general.to"),style:{flex:1}},{name:"comment",title:this.$t("general.comment"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-basis":"10em"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const gy=(0,i.A)(hy,[["render",ty]]);var vy=gy;const fy={class:"XHRM-horizontal-padding XHRM-vertical-padding"},yy={class:"XHRM-container"},Cy={key:2,class:"XHRM-bottom-container"};function Vy(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-license"),s=(0,a.resolveComponent)("edit-license"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,api:l.licenceEndpoint,onClose:i.onSaveModalClose},null,8,["http","api","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",fy,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.license")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",yy,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,disabled:i.isDisabled,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading","disabled"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",Cy,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const by={class:"XHRM-horizontal-padding XHRM-top-padding"};function wy(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("qualification-dropdown"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",by,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_license")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.license.licenseId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.license.licenseId=e),label:e.$t("pim.license_type"),rules:n.rules.licenseId,api:o.api,required:""},null,8,["modelValue","label","rules","api"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.license.licenseNo,"onUpdate:modelValue":t[1]||(t[1]=e=>n.license.licenseNo=e),label:e.$t("pim.license_number"),rules:n.rules.licenseNo},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.license.issuedDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.license.issuedDate=e),label:e.$t("pim.issued_date"),rules:n.rules.issuedDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.license.expiryDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.license.expiryDate=e),label:e.$t("general.expiry_date"),rules:n.rules.expiryDate,years:n.yearArray},null,8,["modelValue","label","rules","years"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const xy=function(e=100,t=(new Date).getFullYear()){const o=new Array(e);for(let a=0;a<o.length;a++)o[a]=t-Math.floor(e/2)+a;return o},Ny={licenseId:null,licenseNo:"",issuedDate:"",expiryDate:""};var ky={name:"SaveLicense",components:{"qualification-dropdown":Wv},props:{http:{type:Object,required:!0},api:{type:String,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,license:{...Ny},yearArray:[...xy()],rules:{licenseId:[Kt],licenseNo:[Wt(50)],issuedDate:[Jt(this.userDateFormat)],expiryDate:[Jt(this.userDateFormat),so(()=>this.license.issuedDate,this.$t("pim.expiry_date_should_be_after_issued_date"))]}}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.license,licenseId:this.license.licenseId?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const _y=(0,i.A)(ky,[["render",wy]]);var Sy=_y;const Dy={class:"XHRM-horizontal-padding XHRM-top-padding"};function $y(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Dy,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_license")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.license.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.license.name=e),label:e.$t("pim.license_type"),required:"",readonly:"",disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.license.licenseNo,"onUpdate:modelValue":t[1]||(t[1]=e=>n.license.licenseNo=e),label:e.$t("pim.license_number"),rules:n.rules.licenseNo},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.license.issuedDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.license.issuedDate=e),label:e.$t("pim.issued_date"),rules:n.rules.issuedDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.license.expiryDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.license.expiryDate=e),label:e.$t("general.expiry_date"),rules:n.rules.expiryDate,years:n.yearArray},null,8,["modelValue","label","rules","years"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const My={name:"",licenseNo:"",issuedDate:"",expiryDate:""};var Ey={name:"EditLicense",props:{http:{type:Object,required:!0},data:{type:Object,required:!0}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,license:{...My},yearArray:[...xy()],rules:{licenseNo:[Wt(50)],issuedDate:[Jt(this.userDateFormat)],expiryDate:[Jt(this.userDateFormat),so(()=>this.license.issuedDate,this.$t("pim.expiry_date_should_be_after_issued_date"))]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.license.name=t.license.name,this.license.licenseNo=t.licenseNo?t.licenseNo:"",this.license.issuedDate=t.issuedDate,this.license.expiryDate=t.expiryDate}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{licenseNo:this.license.licenseNo,issuedDate:this.license.issuedDate,expiryDate:this.license.expiryDate}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Ry=(0,i.A)(Ey,[["render",$y]]);var Ty=Ry,By={name:"EmployeeLicense",components:{"profile-action-header":Hh,"save-license":Sy,"edit-license":Ty,"delete-confirmation":Xt},props:{employeeId:{type:String,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.employeeId}/licenses`),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=`/api/v2/pim/employees/${e.employeeId}/licenses/allowed`,n=e=>e.map(e=>({id:e.license.id,type:e.license.name,licenseNo:e.licenseNo,issuedDate:ge(he(e.issuedDate),o,{locale:a}),expiryDate:ge(he(e.expiryDate),o,{locale:a})})),{showPaginator:i,currentPage:r,total:s,pages:d,pageSize:c,response:u,isLoading:m,execQuery:p}=Et(t,{normalizer:n,toastNoRecords:!1});return{http:t,showPaginator:i,currentPage:r,isLoading:m,total:s,pages:d,pageSize:c,execQuery:p,items:u,licenceEndpoint:l}},data(){return{headers:[{name:"type",slot:"title",title:this.$t("pim.license_type"),style:{flex:1}},{name:"issuedDate",title:this.$t("pim.issued_date"),style:{flex:1}},{name:"expiryDate",title:this.$t("general.expiry_date"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-basis":"10em"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const Iy=(0,i.A)(By,[["render",Vy]]);var Ay=Iy,Hy={components:{"edit-employee-layout":Jh,"employee-skills":uf,"employee-education":Ef,"employee-languages":Jf,"employee-work-experience":vy,"employee-license":Ay},props:{empNumber:{type:String,required:!0},fluencies:{type:Array,required:!0},competencies:{type:Array,required:!0}}};const Xy=(0,i.A)(Hy,[["render",Lv]]);var Uy=Xy;const Ly={class:"XHRM-horizontal-padding XHRM-vertical-padding"},Py={class:"XHRM-container"},qy={class:"XHRM-bottom-container"};function Fy(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-immigration"),s=(0,a.resolveComponent)("edit-immigration"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber,screen:"immigration"},{default:(0,a.withCtx)(()=>[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,countries:o.countries,onClose:i.onSaveModalClose},null,8,["http","countries","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,countries:o.countries,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","countries","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",Ly,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_immigration_records")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Py,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","disabled","loading"])]),(0,a.createElementVNode)("div",qy,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)]),_:1},8,["employee-id"])}const zy={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function jy(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-input-group"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",zy,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_immigration")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{label:e.$t("pim.document"),classes:{wrapper:"--gender-grouped-field"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.type,"onUpdate:modelValue":t[0]||(t[0]=e=>n.immigration.type=e),type:"radio","option-label":e.$t("pim.passport"),value:"1"},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.immigration.type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.immigration.type=e),type:"radio","option-label":e.$t("pim.visa"),value:"2"},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.number,"onUpdate:modelValue":t[2]||(t[2]=e=>n.immigration.number=e),label:e.$t("pim.number"),rules:n.rules.number,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.immigration.issuedDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.immigration.issuedDate=e),label:e.$t("pim.issued_date"),rules:n.rules.issuedDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.immigration.expiryDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.immigration.expiryDate=e),label:e.$t("general.expiry_date"),years:n.yearArray,rules:n.rules.expiryDate},null,8,["modelValue","label","years","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.status,"onUpdate:modelValue":t[5]||(t[5]=e=>n.immigration.status=e),label:e.$t("pim.eligible_status"),rules:n.rules.status},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.countryCode,"onUpdate:modelValue":t[6]||(t[6]=e=>n.immigration.countryCode=e),type:"select",label:e.$t("pim.issued_by"),options:o.countries},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.immigration.reviewDate,"onUpdate:modelValue":t[7]||(t[7]=e=>n.immigration.reviewDate=e),label:e.$t("pim.eligible_review_date"),rules:n.rules.reviewDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.comment,"onUpdate:modelValue":t[8]||(t[8]=e=>n.immigration.comment=e),type:"textarea",label:e.$t("general.comments"),placeholder:e.$t("general.type_comments_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const Oy={number:"",issuedDate:"",expiryDate:"",type:1,status:"",reviewDate:"",countryCode:null,comment:""};var Gy={name:"SaveImmigration",props:{http:{type:Object,required:!0},countries:{type:Array,default:()=>[]}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,immigration:{...Oy},yearArray:[...xy()],rules:{number:[Kt,Wt(30)],expiryDate:[Jt(this.userDateFormat),so(()=>this.immigration.issuedDate,this.$t("pim.expiry_date_should_be_after_issued_date"))],status:[Wt(30)],issuedDate:[Jt(this.userDateFormat)],reviewDate:[Jt(this.userDateFormat)],comment:[Wt(250)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.immigration,countryCode:this.immigration.countryCode?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.immigration={...Oy},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const Qy=(0,i.A)(Gy,[["render",jy]]);var Ky=Qy;const Wy={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function Jy(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-input-group"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",Wy,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_immigration")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{label:"Document",classes:n.immigrationTypeClasses},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.type,"onUpdate:modelValue":t[0]||(t[0]=e=>n.immigration.type=e),type:"radio","option-label":e.$t("pim.passport"),value:"1"},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.immigration.type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.immigration.type=e),type:"radio","option-label":e.$t("pim.visa"),value:"2"},null,8,["modelValue","option-label"])]),_:1},8,["classes"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.number,"onUpdate:modelValue":t[2]||(t[2]=e=>n.immigration.number=e),label:e.$t("pim.number"),rules:n.rules.number,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.immigration.issuedDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.immigration.issuedDate=e),label:e.$t("pim.issued_date"),rules:n.rules.issuedDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.immigration.expiryDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.immigration.expiryDate=e),label:e.$t("general.expiry_date"),years:n.yearArray,rules:n.rules.expiryDate},null,8,["modelValue","label","years","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.status,"onUpdate:modelValue":t[5]||(t[5]=e=>n.immigration.status=e),label:e.$t("pim.eligible_status"),rules:n.rules.status},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.countryCode,"onUpdate:modelValue":t[6]||(t[6]=e=>n.immigration.countryCode=e),type:"select",label:e.$t("pim.issued_by"),options:o.countries},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.immigration.reviewDate,"onUpdate:modelValue":t[7]||(t[7]=e=>n.immigration.reviewDate=e),label:e.$t("pim.eligible_review_date"),rules:n.rules.reviewDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.immigration.comment,"onUpdate:modelValue":t[8]||(t[8]=e=>n.immigration.comment=e),type:"textarea",label:e.$t("general.comments"),placeholder:e.$t("general.type_comments_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const Yy={number:"",issuedDate:"",expiryDate:"",type:1,status:"",reviewDate:"",countryCode:null,comment:""};var Zy={name:"EditImmigration",props:{http:{type:Object,required:!0},data:{type:Object,required:!0},countries:{type:Array,default:()=>[]}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,immigration:{...Yy},yearArray:[...xy()],rules:{number:[Kt,Wt(30)],expiryDate:[Jt(this.userDateFormat),so(()=>this.immigration.issuedDate,this.$t("pim.expiry_date_should_be_after_issued_date"))],status:[Wt(30)],issuedDate:[Jt(this.userDateFormat)],reviewDate:[Jt(this.userDateFormat)],comment:[Wt(250)]},immigrationTypeClasses:{wrapper:"--gender-grouped-field",label:{"oxd-input-field-required":!0}}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.immigration={...Yy,...t},this.immigration.countryCode=this.countries.find(e=>e.id===t.country?.code)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{number:this.immigration.number,issuedDate:this.immigration.issuedDate,expiryDate:this.immigration.expiryDate,type:this.immigration.type,status:this.immigration.status,reviewDate:this.immigration.reviewDate,comment:this.immigration.comment,countryCode:this.immigration.countryCode?.id}).then(()=>this.$toast.updateSuccess()).then(()=>{this.immigration={...Yy},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const eC=(0,i.A)(Zy,[["render",Jy]]);var tC=eC,oC={components:{"profile-action-header":Hh,"edit-employee-layout":Jh,"save-immigration":Ky,"edit-immigration":tC,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},countries:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/immigrations`),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=e=>e.map(e=>({id:e.id,type:1==e.type?"Passport":"VISA",number:e.number,countryCode:e.country.code,countryName:e.country.name,issuedDate:ge(he(e.issuedDate),o,{locale:a}),expiryDate:ge(he(e.expiryDate),o,{locale:a})})),{showPaginator:n,currentPage:i,total:r,pages:s,pageSize:d,response:c,isLoading:u,execQuery:m}=Et(t,{normalizer:l,toastNoRecords:!1});return{http:t,showPaginator:n,currentPage:i,isLoading:u,total:r,pages:s,pageSize:d,execQuery:m,items:c}},data(){return{headers:[{name:"type",slot:"title",title:this.$t("pim.document"),style:{flex:1}},{name:"number",title:this.$t("pim.number"),style:{flex:1}},{name:"countryName",title:this.$t("pim.issued_by"),style:{flex:1}},{name:"issuedDate",title:this.$t("pim.issued_date"),style:{flex:1}},{name:"expiryDate",title:this.$t("general.expiry_date"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const aC=(0,i.A)(oC,[["render",Fy],["__scopeId","data-v-4329ef41"]]);var lC=aC;const nC={class:"XHRM-horizontal-padding XHRM-top-padding"};function iC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-supervisors"),c=(0,a.resolveComponent)("employee-subordinates"),u=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(u,{"employee-id":o.empNumber,screen:"report-to"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",nC,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.report_to")),1)]),_:1}),(0,a.createVNode)(s)]),(0,a.createVNode)(d,{"emp-number":o.empNumber,"reporting-methods":o.reportingMethods},null,8,["emp-number","reporting-methods"]),(0,a.createVNode)(c,{"emp-number":o.empNumber,"reporting-methods":o.reportingMethods},null,8,["emp-number","reporting-methods"])]),_:1},8,["employee-id"])}const rC={class:"XHRM-horizontal-padding XHRM-vertical-padding"},sC={class:"XHRM-container"},dC={key:2,class:"XHRM-bottom-container"};function cC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-employee-report-to"),s=(0,a.resolveComponent)("edit-employee-report-to"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,"reporting-methods":o.reportingMethods,type:"Supervisor","emp-number":o.empNumber,onClose:i.onSaveModalClose},null,8,["http","reporting-methods","emp-number","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,"emp-number":o.empNumber,data:n.editModalState,type:"Supervisor",api:l.supervisorEndpoint,"reporting-methods":o.reportingMethods,onClose:i.onEditModalClose},null,8,["http","emp-number","data","api","reporting-methods","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",rC,[(0,a.createVNode)(d,{"action-button-shown":e.$can.create("supervisor"),onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_supervisors")),1)]),_:1},8,["action-button-shown","onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",sC,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:i.tableHeaders,items:l.items?.data,selectable:e.$can.delete("supervisor"),disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","disabled","loading"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",dC,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}const uC={class:"XHRM-horizontal-padding XHRM-top-padding"};function mC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("report-to-employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",uC,["Supervisor"===o.type?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_supervisor")),1)]),_:1})):(0,a.createCommentVNode)("",!0),"Subordinate"===o.type?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_subordinate")),1)]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.reportTo.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.reportTo.employee=e),rules:n.rules.employee,api:l.api,required:""},null,8,["modelValue","rules","api"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.reportTo.reportingMethod,"onUpdate:modelValue":t[1]||(t[1]=e=>n.reportTo.reportingMethod=e),type:"select",label:e.$t("pim.reporting_method"),rules:n.rules.reportingMethod,options:o.reportingMethods,required:""},null,8,["modelValue","label","rules","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:"Cancel",onClick:i.onCancel},null,8,["onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const pC={key:0,class:"past-employee-tag"};function hC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",label:e.$t("general.name"),clear:!1,"create-options":i.loadEmployees},{afterSelected:(0,a.withCtx)(({data:t})=>[t.isPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.past_employee")),1)],64)):(0,a.createCommentVNode)("",!0)]),option:(0,a.withCtx)(({data:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.label),1),t.isPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)("div",pC,(0,a.toDisplayString)(e.$t("general.past_employee")),1)):(0,a.createCommentVNode)("",!0)]),_:1},8,["label","create-options"])}var gC={name:"ReportToEmployeeAutocomplete",props:{api:{type:String,required:!0},params:{type:Object,default:()=>({})}},setup(e){const t=new H(window.appGlobal.baseUrl,e.api);return{http:t}},methods:{async loadEmployees(e){return new Promise(t=>{e.trim()&&e.length<100?this.http.getAll({nameOrId:e.trim(),...this.params}).then(({data:e})=>{t(e.data.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,isPastEmployee:!!e.terminationId})))}):t([])})}}};const vC=(0,i.A)(gC,[["render",hC]]);var fC=vC;const yC={employee:null,reportingMethod:null};var CC={name:"SaveEmployeeReportTo",components:{"report-to-employee-autocomplete":fC},props:{http:{type:Object,required:!0},reportingMethods:{type:Array,required:!0},type:{type:String,required:!0},empNumber:{type:String,required:!0}},emits:["close"],setup(e){const t=`/api/v2/pim/employees/${e.empNumber}/report-to/allowed`;return{api:t}},data(){return{isLoading:!1,reportTo:{...yC},rules:{employee:[Kt,Wt(100),$o],reportingMethod:[Kt]}}},methods:{onSave(){this.isLoading=!0,this.http.create({empNumber:this.reportTo.employee?.id,reportingMethodId:this.reportTo.reportingMethod?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const VC=(0,i.A)(CC,[["render",mC]]);var bC=VC;const wC={class:"XHRM-horizontal-padding XHRM-top-padding"};function xC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("report-to-employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",wC,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit"))+" "+(0,a.toDisplayString)(o.type),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.reportTo.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.reportTo.employee=e),required:"",disabled:"",api:l.allowedEmployeesApi,rules:n.rules.employee,clear:!1},null,8,["modelValue","api","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.reportTo.reportingMethod,"onUpdate:modelValue":t[1]||(t[1]=e=>n.reportTo.reportingMethod=e),type:"select",label:e.$t("pim.reporting_method"),rules:n.rules.reportingMethod,options:o.reportingMethods,required:""},null,8,["modelValue","label","rules","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"]),(0,a.createVNode)(s)])}const NC={employee:null,reportingMethod:null};var kC={name:"EditEmployeeReportTo",components:{"report-to-employee-autocomplete":fC},props:{http:{type:Object,required:!0},data:{type:Object,required:!0},reportingMethods:{type:Array,required:!0},type:{type:String,required:!0},empNumber:{type:String,required:!0},api:{type:String,required:!0}},emits:["close"],setup(e){const t=`/api/v2/pim/employees/${e.empNumber}/report-to/allowed`;return{allowedEmployeesApi:t}},data(){return{isLoading:!1,reportTo:{...NC},rules:{employee:[Kt,Wt(100),$o],reportingMethod:[Kt]}}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET",url:"Supervisor"===this.type?`${this.api}${this.data.supervisorEmpNumber}`:`${this.api}${this.data.subordinateEmpNumber}`}).then(e=>{const{data:t}=e.data;this.reportTo.employee={id:"Supervisor"===this.type?t.supervisor.empNumber:t.subordinate.empNumber,label:"Supervisor"===this.type?`${t.supervisor.firstName} ${t.supervisor.middleName} ${t.supervisor.lastName}`:`${t.subordinate.firstName} ${t.subordinate.middleName} ${t.subordinate.lastName}`,isPastEmployee:"Supervisor"===this.type?t.supervisor.terminationId:t.subordinate.terminationId},this.reportTo.reportingMethod=this.reportingMethods.find(e=>e.id===t.reportingMethod.id)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0;const e="Supervisor"===this.type?this.data.supervisorEmpNumber:this.data.subordinateEmpNumber;this.http.update(e,{reportingMethodId:this.reportTo.reportingMethod?.id}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const _C=(0,i.A)(kC,[["render",xC]]);var SC=_C,DC={name:"EmployeeSupervisors",components:{"edit-employee-report-to":SC,"profile-action-header":Hh,"save-employee-report-to":bC,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},reportingMethods:{type:Array,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/supervisors`),{$t:o}=Ie(),a=["Direct","Indirect"],l=e=>e.map(e=>{let t=e.reportingMethod.name;return{name:`${e.supervisor?.firstName} ${e.supervisor?.lastName} ${e.supervisor.terminationId?o("general.past_employee"):""}`,reportingMethod:a.includes(t)?o("pim."+t.toLowerCase()):t,supervisorEmpNumber:e.supervisor.empNumber}}),n=`/api/v2/pim/employees/${e.empNumber}/supervisors/`,{showPaginator:i,currentPage:r,total:s,pages:d,pageSize:c,response:u,isLoading:m,execQuery:p}=Et(t,{normalizer:l,toastNoRecords:!1});return{http:t,showPaginator:i,currentPage:r,isLoading:m,total:s,pages:d,pageSize:c,execQuery:p,items:u,supervisorEndpoint:n}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:1}},{name:"reportingMethod",title:this.$t("pim.reporting_method"),style:{flex:1}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal},tableHeaders(){const e={name:"actions",slot:"action",title:"Actions",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.$can.delete("supervisor")&&(e.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),this.$can.update("supervisor")&&(e.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),Object.keys(e.cellConfig).length>0?this.headers.concat([e]):this.headers}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].supervisorEmpNumber);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.supervisorEmpNumber])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const $C=(0,i.A)(DC,[["render",cC]]);var MC=$C;const EC={class:"XHRM-horizontal-padding XHRM-vertical-padding"},RC={class:"XHRM-container"},TC={key:2,class:"XHRM-bottom-container"};function BC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-employee-report-to"),s=(0,a.resolveComponent)("edit-employee-report-to"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,type:"Subordinate","emp-number":o.empNumber,"reporting-methods":o.reportingMethods,onClose:i.onSaveModalClose},null,8,["http","emp-number","reporting-methods","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,"emp-number":o.empNumber,data:n.editModalState,type:"Subordinate",api:l.subordinateEndpoint,"reporting-methods":o.reportingMethods,onClose:i.onEditModalClose},null,8,["http","emp-number","data","api","reporting-methods","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",EC,[(0,a.createVNode)(d,{"action-button-shown":e.$can.create("subordinates"),onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_subordinates")),1)]),_:1},8,["action-button-shown","onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",RC,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:i.tableHeaders,items:l.items?.data,selectable:e.$can.delete("subordinates"),disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","disabled","loading"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",TC,[(0,a.createVNode)(m,{current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)])}var IC={name:"EmployeeSubordinates",components:{"edit-employee-report-to":SC,"save-employee-report-to":bC,"profile-action-header":Hh,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},reportingMethods:{type:Array,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/subordinates`),{$t:o}=Ie(),a=["Direct","Indirect"],l=e=>e.map(e=>{let t=e.reportingMethod.name;return{name:`${e.subordinate?.firstName} ${e.subordinate?.lastName} ${e.subordinate.terminationId?o("general.past_employee"):""}`,reportingMethod:a.includes(t)?o("pim."+t.toLowerCase()):t,subordinateEmpNumber:e.subordinate.empNumber}}),n=`/api/v2/pim/employees/${e.empNumber}/subordinates/`,{showPaginator:i,currentPage:r,total:s,pages:d,pageSize:c,response:u,isLoading:m,execQuery:p}=Et(t,{normalizer:l,toastNoRecords:!1});return{http:t,showPaginator:i,currentPage:r,isLoading:m,total:s,pages:d,pageSize:c,execQuery:p,items:u,subordinateEndpoint:n}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:1}},{name:"reportingMethod",title:this.$t("pim.reporting_method"),style:{flex:1}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal},tableHeaders(){const e={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.$can.delete("subordinates")&&(e.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),this.$can.update("subordinates")&&(e.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),Object.keys(e.cellConfig).length>0?this.headers.concat([e]):this.headers}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].subordinateEmpNumber);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.subordinateEmpNumber])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const AC=(0,i.A)(IC,[["render",BC]]);var HC=AC,XC={components:{"edit-employee-layout":Jh,"employee-supervisors":MC,"employee-subordinates":HC},props:{empNumber:{type:String,required:!0},reportingMethods:{type:Array,required:!0}}};const UC=(0,i.A)(XC,[["render",iC]]);var LC=UC;const PC={class:"XHRM-horizontal-padding XHRM-vertical-padding"},qC={class:"XHRM-container"},FC={class:"XHRM-bottom-container"};function zC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-membership"),s=(0,a.resolveComponent)("edit-membership"),d=(0,a.resolveComponent)("profile-action-header"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("oxd-pagination"),p=(0,a.resolveComponent)("delete-confirmation"),h=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(h,{"employee-id":o.empNumber,screen:"membership"},{default:(0,a.withCtx)(()=>[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,currencies:o.currencies,"paid-by":o.paidBy,memberships:o.memberships,onClose:i.onSaveModalClose},null,8,["http","currencies","paid-by","memberships","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,currencies:o.currencies,"paid-by":o.paidBy,memberships:o.memberships,data:n.editModalState,onClose:i.onEditModalClose},null,8,["http","currencies","paid-by","memberships","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",PC,[(0,a.createVNode)(d,{onClick:i.onClickAdd},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.assigned_memberships")),1)]),_:1},8,["onClick"])]),(0,a.createVNode)(c,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",qC,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,disabled:i.isDisabled,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","disabled","loading"])]),(0,a.createElementVNode)("div",FC,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(p,{ref:"deleteDialog"},null,512)]),_:1},8,["employee-id"])}const jC={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function OC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("date-input"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",jC,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_membership")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.membership,"onUpdate:modelValue":t[0]||(t[0]=e=>n.membership.membership=e),type:"select",label:e.$t("pim.membership"),options:o.memberships,rules:n.rules.membership,required:""},null,8,["modelValue","label","options","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.subscriptionPaidBy,"onUpdate:modelValue":t[1]||(t[1]=e=>n.membership.subscriptionPaidBy=e),type:"select",label:e.$t("pim.subscription_paid_by"),options:o.paidBy},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.subscriptionFee,"onUpdate:modelValue":t[2]||(t[2]=e=>n.membership.subscriptionFee=e),label:e.$t("pim.subscription_amount"),rules:n.rules.subscriptionFee},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.currencyType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.membership.currencyType=e),type:"select",label:e.$t("general.currency"),options:o.currencies},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.membership.subscriptionCommenceDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.membership.subscriptionCommenceDate=e),label:e.$t("pim.subscription_commence_date"),rules:n.rules.subscriptionCommenceDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.membership.subscriptionRenewalDate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.membership.subscriptionRenewalDate=e),label:e.$t("pim.subscription_renewal_date"),years:n.yearArray,rules:n.rules.subscriptionRenewalDate},null,8,["modelValue","label","years","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const GC={membershipId:[],subscriptionFee:"",subscriptionPaidBy:null,currencyTypeId:[],subscriptionCommenceDate:"",subscriptionRenewalDate:""};var QC={name:"SaveMembership",props:{http:{type:Object,required:!0},currencies:{type:Array,default:()=>[]},paidBy:{type:Array,default:()=>[]},memberships:{type:Array,default:()=>[]}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,membership:{...GC},yearArray:[...xy()],rules:{membership:[Kt],subscriptionCommenceDate:[Jt(this.userDateFormat)],subscriptionRenewalDate:[Jt(this.userDateFormat),so(()=>this.membership.subscriptionCommenceDate,this.$t("pim.renewal_date_should_be_after_the_commencing_date"))],subscriptionFee:[ao,Co(1e9)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({subscriptionFee:this.membership.subscriptionFee,subscriptionCommenceDate:this.membership.subscriptionCommenceDate,subscriptionRenewalDate:this.membership.subscriptionRenewalDate,membershipId:this.membership.membership.id,subscriptionPaidBy:this.membership.subscriptionPaidBy?.id,currencyTypeId:this.membership.currencyType?.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.membership={...GC},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const KC=(0,i.A)(QC,[["render",OC]]);var WC=KC;const JC={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function YC(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("date-input"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",JC,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_membership")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.membership,"onUpdate:modelValue":t[0]||(t[0]=e=>n.membership.membership=e),type:"select",label:e.$t("pim.membership"),options:o.memberships,rules:n.rules.membership,required:""},null,8,["modelValue","label","options","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.subscriptionPaidBy,"onUpdate:modelValue":t[1]||(t[1]=e=>n.membership.subscriptionPaidBy=e),type:"select",label:e.$t("pim.subscription_paid_by"),options:o.paidBy},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.subscriptionFee,"onUpdate:modelValue":t[2]||(t[2]=e=>n.membership.subscriptionFee=e),label:e.$t("pim.subscription_amount"),rules:n.rules.subscriptionFee},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.membership.currencyType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.membership.currencyType=e),type:"select",label:e.$t("general.currency"),options:o.currencies},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.membership.subscriptionCommenceDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.membership.subscriptionCommenceDate=e),label:e.$t("pim.subscription_commence_date"),rules:n.rules.subscriptionCommenceDate},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.membership.subscriptionRenewalDate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.membership.subscriptionRenewalDate=e),label:e.$t("pim.subscription_renewal_date"),years:n.yearArray,rules:n.rules.subscriptionRenewalDate},null,8,["modelValue","label","years","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(s)],64)}const ZC={membership:[],subscriptionFee:"",subscriptionPaidBy:null,currencyType:[],subscriptionCommenceDate:"",subscriptionRenewalDate:""};var eV={name:"EditMembership",props:{http:{type:Object,required:!0},data:{type:Object,required:!0},currencies:{type:Array,default:()=>[]},paidBy:{type:Array,default:()=>[]},memberships:{type:Array,default:()=>[]}},emits:["close"],setup(){const{userDateFormat:e}=F();return{userDateFormat:e}},data(){return{isLoading:!1,membership:{...ZC},yearArray:[...xy()],rules:{membership:[Kt],subscriptionCommenceDate:[Jt(this.userDateFormat)],subscriptionRenewalDate:[Jt(this.userDateFormat),so(()=>this.membership.subscriptionCommenceDate,this.$t("pim.renewal_date_should_be_after_the_commencing_date"))],subscriptionFee:[ao,Co(1e9)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.membership.subscriptionFee=t.subscriptionFee,this.membership.subscriptionCommenceDate=t.subscriptionCommenceDate,this.membership.subscriptionRenewalDate=t.subscriptionRenewalDate,this.membership.membership=this.memberships.find(e=>e.id===t.membership.id),this.membership.subscriptionPaidBy=this.paidBy.find(e=>e.id===t.subscriptionPaidBy),this.membership.currencyType=this.currencies.find(e=>e.id===t.currencyType?.id)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{subscriptionFee:this.membership.subscriptionFee,subscriptionCommenceDate:this.membership.subscriptionCommenceDate,subscriptionRenewalDate:this.membership.subscriptionRenewalDate,membershipId:this.membership.membership.id,subscriptionPaidBy:this.membership.subscriptionPaidBy?.id,currencyTypeId:this.membership.currencyType?.id}).then(()=>this.$toast.updateSuccess()).then(()=>{this.membership={...ZC},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const tV=(0,i.A)(eV,[["render",YC]]);var oV=tV,aV={components:{"profile-action-header":Hh,"edit-employee-layout":Jh,"save-membership":WC,"edit-membership":oV,"delete-confirmation":Xt},props:{empNumber:{type:String,required:!0},currencies:{type:Array,default:()=>[]},paidBy:{type:Array,default:()=>[]},memberships:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/memberships`),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=e=>e.map(e=>({id:e.id,membershipId:e.membership.id,membershipName:e.membership.name,subscriptionPaidBy:e.subscriptionPaidBy,subscriptionFee:e.subscriptionFee,subscriptionTypeId:e.currencyType.id,subscriptionCurrencyName:e.currencyType.name,subscriptionCommenceDate:ge(he(e.subscriptionCommenceDate),o,{locale:a}),subscriptionRenewalDate:ge(he(e.subscriptionRenewalDate),o,{locale:a})})),{showPaginator:n,currentPage:i,total:r,pages:s,pageSize:d,response:c,isLoading:u,execQuery:m}=Et(t,{normalizer:l,toastNoRecords:!1});return{http:t,showPaginator:n,currentPage:i,isLoading:u,total:r,pages:s,pageSize:d,execQuery:m,items:c}},data(){return{headers:[{name:"membershipName",slot:"title",title:this.$t("pim.membership"),style:{flex:1}},{name:"subscriptionPaidBy",title:this.$t("pim.subscription_paid_by"),style:{flex:1}},{name:"subscriptionFee",title:this.$t("pim.subscription_amount"),style:{flex:1}},{name:"subscriptionCurrencyName",title:this.$t("general.currency"),style:{flex:1}},{name:"subscriptionCommenceDate",title:this.$t("pim.subscription_commence_date"),style:{flex:1}},{name:"subscriptionRenewalDate",title:this.$t("pim.subscription_renewal_date"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},computed:{isDisabled(){return this.showSaveModal||this.showEditModal}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showEditModal=!1,this.editModalState=null,this.showSaveModal=!0},onClickEdit(e){this.showSaveModal=!1,this.editModalState=e,this.showEditModal=!0},onSaveModalClose(){this.showSaveModal=!1,this.resetDataTable()},onEditModalClose(){this.showEditModal=!1,this.editModalState=null,this.resetDataTable()}}};const lV=(0,i.A)(aV,[["render",zC],["__scopeId","data-v-0379419a"]]);var nV=lV;const iV={class:"XHRM-background-container"},rV={class:"XHRM-paper-container"},sV={class:"XHRM-header-container"},dV={class:"XHRM-container"},cV={class:"XHRM-bottom-container"};function uV(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",iV,[(0,a.createElementVNode)("div",rV,[(0,a.createElementVNode)("div",sV,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.termination_reasons")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",dV,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",cV,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var mV={components:{"delete-confirmation":Xt},props:{unselectableIds:{type:Array,default:()=>[]}},setup(e){const t=t=>t.map(t=>{const o=e.unselectableIds.findIndex(e=>e==t.id);return{id:t.id,name:t.name,isSelectable:-1===o}}),o=new H(window.appGlobal.baseUrl,"/api/v2/pim/termination-reasons"),{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(o,{normalizer:t});return{http:o,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/pim/saveTerminationReasons")},onClickEdit(e){I("/pim/saveTerminationReasons/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.error({title:this.$t("general.error"),message:this.$t("pim.termination_reasons_in_use")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const pV=(0,i.A)(mV,[["render",uV]]);var hV=pV;const gV={class:"XHRM-background-container"},vV={class:"XHRM-card-container"};function fV(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",gV,[(0,a.createElementVNode)("div",vV,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_termination_reason")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.termination.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.termination.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var yV={props:{terminationReasonId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/pim/termination-reasons"),{createUniqueValidator:o}=Lo(t),a=o("TerminationReason","name",{entityId:e.terminationReasonId});return{http:t,terminationReasonUniqueValidation:a}},data(){return{isLoading:!1,termination:{id:"",name:""},rules:{name:[Kt,this.terminationReasonUniqueValidation,Wt(100)]}}},created(){this.isLoading=!0,this.http.get(this.terminationReasonId).then(e=>{const{data:t}=e.data;this.termination.id=t.id,this.termination.name=t.name}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.terminationReasonId,{name:this.termination.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/pim/viewTerminationReasons")}}};const CV=(0,i.A)(yV,[["render",fV]]);var VV=CV;const bV={class:"XHRM-background-container"},wV={class:"XHRM-card-container"};function xV(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bV,[(0,a.createElementVNode)("div",wV,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_termination_reason")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.termination.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.termination.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var NV={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/termination-reasons"),{createUniqueValidator:t}=Lo(e),o=t("TerminationReason","name");return{http:e,terminationReasonUniqueValidation:o}},data(){return{isLoading:!1,termination:{id:"",name:""},rules:{name:[Kt,this.terminationReasonUniqueValidation,Wt(100)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.termination.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/pim/viewTerminationReasons")}}};const kV=(0,i.A)(NV,[["render",xV]]);var _V=kV;const SV={class:"XHRM-background-container"},DV={class:"XHRM-paper-container"},$V={class:"XHRM-header-container"},MV={class:"XHRM-container"},EV={class:"XHRM-bottom-container"};function RV(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",SV,[(0,a.createElementVNode)("div",DV,[(0,a.createElementVNode)("div",$V,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.reporting_methods")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",MV,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",EV,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var TV={components:{"delete-confirmation":Xt},props:{unselectableIds:{type:Array,default:()=>[]}},setup(e){const t=t=>t.map(t=>{const o=e.unselectableIds.findIndex(e=>e==t.id);return{id:t.id,name:t.name,isSelectable:-1===o}}),o=new H(window.appGlobal.baseUrl,"/api/v2/pim/reporting-methods"),{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(o,{normalizer:t});return{http:o,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{"flex-basis":"80%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/pim/saveReportingMethod")},onClickEdit(e){I("/pim/saveReportingMethod/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.error({title:this.$t("general.error"),message:this.$t("pim.reporting_methods_in_use")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const BV=(0,i.A)(TV,[["render",RV]]);var IV=BV;const AV={class:"XHRM-background-container"},HV={class:"XHRM-card-container"};function XV(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",AV,[(0,a.createElementVNode)("div",HV,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_reporting_method")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.reportingMethod.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.reportingMethod.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var UV={props:{reportingMethodId:{type:Number,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/reporting-methods");return{http:e}},data(){return{isLoading:!1,reportingMethod:{id:"",name:""},rules:{name:[Kt,Wt(100)]}}},created(){this.isLoading=!0,this.http.get(this.reportingMethodId).then(e=>{const{data:t}=e.data;return this.reportingMethod.id=t.id,this.reportingMethod.name=t.name,this.http.getAll({limit:0})}).then(e=>{const{data:t}=e.data;this.rules.name.push(e=>{const o=t.findIndex(t=>t.name===e);if(o>-1){const{id:e}=t[o];return e===this.reportingMethod.id||this.$t("general.already_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.reportingMethodId,{name:this.reportingMethod.name}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/pim/viewReportingMethods")}}};const LV=(0,i.A)(UV,[["render",XV]]);var PV=LV;const qV={class:"XHRM-background-container"},FV={class:"XHRM-card-container"};function zV(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",qV,[(0,a.createElementVNode)("div",FV,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_reporting_method")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.reportingMethod.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.reportingMethod.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var jV={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/reporting-methods");return{http:e}},data(){return{isLoading:!1,reportingMethod:{id:"",name:""},rules:{name:[Kt,Wt(100)]}}},created(){this.isLoading=!0,this.http.getAll({limit:0}).then(e=>{const{data:t}=e.data;this.rules.name.push(e=>{const o=t.findIndex(t=>t.name===e);return-1===o||this.$t("general.already_exists")})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.reportingMethod.name}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/pim/viewReportingMethods")}}};const OV=(0,i.A)(jV,[["render",zV]]);var GV=OV;const QV={class:"XHRM-background-container"},KV={class:"XHRM-paper-container"},WV={class:"XHRM-header-container"},JV={class:"XHRM-custom-field-title"},YV={class:"XHRM-container"},ZV={class:"XHRM-bottom-container"};function eb(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",QV,[(0,a.createElementVNode)("div",KV,[(0,a.createElementVNode)("div",WV,[(0,a.createElementVNode)("div",JV,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.custom_fields")),1)]),_:1}),l.isLoading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[i.remainingFields>0?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,class:"--infotext",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.remaining_no_of_custom_fields"))+" "+(0,a.toDisplayString)(i.remainingFields),1)]),_:1})):((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,class:"--infotext",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.all_custom_fields_in_use")),1)]),_:1}))],64))]),i.remainingFields>0?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",YV,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",ZV,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var tb={components:{"delete-confirmation":Xt},props:{customFieldLimit:{type:Number,required:!0},screenList:{type:Array,required:!0},fieldTypeList:{type:Array,required:!0},unselectableIds:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/pim/custom-fields"),o=t=>t.map(t=>{const o=e.unselectableIds.findIndex(e=>e==t.id);return{id:t.id,fieldName:t.fieldName,screen:e.screenList.filter(e=>t.screen===e.id)[0].label,fieldType:e.fieldTypeList.filter(e=>t.fieldType===e.id)[0].label,extraData:t.extraData,isSelectable:-1===o}}),{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(t,{normalizer:o});return{http:t,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s}},data(){return{screenWidth:screen.width,headers:[{name:"fieldName",slot:"title",title:this.$t("pim.custom_field_name"),style:{flex:2}},{name:"screen",title:this.$t("pim.screen"),style:{flex:2}},{name:"fieldType",title:this.$t("pim.field_type"),style:{flex:2}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},computed:{isLoaded(){return!this.isLoading},remainingFields(){return this.customFieldLimit-this.items?.data?.length}},methods:{onClickAdd(){I("/pim/saveCustomFields")},onClickEdit(e){I("/pim/saveCustomFields/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.error({title:this.$t("general.error"),message:this.$t("pim.custom_fields_in_use")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const ob=(0,i.A)(tb,[["render",eb],["__scopeId","data-v-4fc09228"]]);var ab=ob;const lb={class:"XHRM-background-container"},nb={class:"XHRM-card-container"};function ib(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",lb,[(0,a.createElementVNode)("div",nb,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_custom_field")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.fieldName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.customField.fieldName=e),label:e.$t("pim.field_name"),rules:n.rules.fieldName,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.screen,"onUpdate:modelValue":t[1]||(t[1]=e=>n.customField.screen=e),type:"select",label:e.$t("pim.screen"),rules:n.rules.screen,options:o.screenList,required:""},null,8,["modelValue","label","rules","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.fieldType,"onUpdate:modelValue":t[2]||(t[2]=e=>n.customField.fieldType=e),type:"select",label:e.$t("general.type"),rules:n.rules.fieldType,options:o.fieldTypeList,required:"",disabled:o.fieldInUse},null,8,["modelValue","label","rules","options","disabled"])]),_:1}),i.isDropDownField?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.extraData,"onUpdate:modelValue":t[3]||(t[3]=e=>n.customField.extraData=e),label:e.$t("pim.select_options"),rules:n.rules.extraData,required:i.isDropDownField},null,8,["modelValue","label","rules","required"]),(0,a.createVNode)(r,{tag:"p",class:"select-options-hint"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.enter_allowed_options_separated_by_commas")),1)]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const rb={id:null,fieldName:"",screen:"",fieldType:"",extraData:""};var sb={props:{customFieldId:{type:Number,required:!0},screenList:{type:Array,required:!0},fieldTypeList:{type:Array,required:!0},fieldInUse:{type:Boolean,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/custom-fields");return{http:e}},data(){return{isLoading:!1,customField:{...rb},rules:{fieldName:[Kt,Wt(250)],screen:[Kt,Wt(100)],fieldType:[Kt,Wt(15)],extraData:[Kt,Wt(250)]}}},computed:{isDropDownField(){return 1===this.customField.fieldType?.id}},created(){this.isLoading=!0,this.http.get(this.customFieldId).then(e=>{const{data:t}=e.data;return this.customField.fieldName=t.fieldName,""!==t.screen&&null!==t.screen&&(this.customField.screen=this.screenList.find(e=>e.id===t.screen)),""!==t.fieldType&&null!==t.fieldType&&(this.customField.fieldType=this.fieldTypeList.find(e=>e.id===t.fieldType)),this.customField.extraData=t.extraData,this.http.getAll()}).then(e=>{const{data:t}=e.data;this.rules.fieldName.push(e=>{const o=t.findIndex(t=>t.fieldName===e);if(o>-1){const e=t[o].id;return e==this.customFieldId||this.$t("general.already_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.customFieldId,{fieldName:this.customField.fieldName,screen:this.customField.screen.id,fieldType:this.customField.fieldType.id,extraData:this.customField.extraData}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/pim/listCustomFields")}}};const db=(0,i.A)(sb,[["render",ib],["__scopeId","data-v-3f994504"]]);var cb=db;const ub={class:"XHRM-background-container"},mb={class:"XHRM-card-container"};function pb(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ub,[(0,a.createElementVNode)("div",mb,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_custom_field")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.fieldName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.customField.fieldName=e),label:e.$t("pim.field_name"),rules:n.rules.fieldName,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.screen,"onUpdate:modelValue":t[1]||(t[1]=e=>n.customField.screen=e),type:"select",label:e.$t("pim.screen"),rules:n.rules.screen,options:o.screenList,required:""},null,8,["modelValue","label","rules","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"organization-name-container"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.fieldType,"onUpdate:modelValue":t[2]||(t[2]=e=>n.customField.fieldType=e),type:"select",label:e.$t("general.type"),rules:n.rules.fieldType,options:o.fieldTypeList,required:""},null,8,["modelValue","label","rules","options"])]),_:1}),i.isDropDownField?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customField.extraData,"onUpdate:modelValue":t[3]||(t[3]=e=>n.customField.extraData=e),label:e.$t("pim.select_options"),rules:n.rules.extraData,required:i.isDropDownField},null,8,["modelValue","label","rules","required"]),(0,a.createVNode)(r,{tag:"p",class:"select-options-hint"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.enter_allowed_options_separated_by_commas")),1)]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const hb={fieldName:"",screen:"",fieldType:"",extraData:""};var gb={props:{screenList:{type:Array,required:!0},fieldTypeList:{type:Array,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/custom-fields");return{http:e}},data(){return{isLoading:!1,customField:{...hb},rules:{fieldName:[Kt,Wt(250)],screen:[Kt,Wt(100)],fieldType:[Kt,Wt(15)],extraData:[Kt,Wt(250)]}}},computed:{isDropDownField(){return 1===this.customField.fieldType?.id}},created(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.rules.fieldName.push(e=>{const o=t.findIndex(t=>t.fieldName==e);return-1===o||this.$t("general.already_exists")})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0;const e=this.customField.fieldType.id;this.http.create({fieldName:this.customField.fieldName,screen:this.customField.screen.id,fieldType:e,extraData:1===e?this.customField.extraData:null}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/pim/listCustomFields")}}};const vb=(0,i.A)(gb,[["render",pb],["__scopeId","data-v-8a449f24"]]);var fb=vb;const yb={class:"XHRM-background-container"},Cb={class:"XHRM-card-container"},Vb={class:"XHRM-optional-field-row"},bb={class:"XHRM-optional-field-row"},wb={class:"XHRM-optional-field-row"},xb={class:"XHRM-optional-field-row"};function Nb(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-switch-input"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("submit-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",yb,[(0,a.createElementVNode)("div",Cb,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.optional_fields")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.show_deprecated_fields")),1)]),_:1}),(0,a.createVNode)(c,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Vb,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-optional-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.show_nick_name_smoker_and_military_service_in_personal_details")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.optionalField.pimShowDeprecatedFields,"onUpdate:modelValue":t[0]||(t[0]=e=>n.optionalField.pimShowDeprecatedFields=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.country_specific_information")),1)]),_:1}),(0,a.createVNode)(c,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",bb,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-optional-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.show_ssn_field_in_personal_details")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.optionalField.showSSN,"onUpdate:modelValue":t[1]||(t[1]=e=>n.optionalField.showSSN=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",wb,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-optional-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.show_sin_field_in_personal_details")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.optionalField.showSIN,"onUpdate:modelValue":t[2]||(t[2]=e=>n.optionalField.showSIN=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",xb,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-optional-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.show_us_tax_exemptions_menu")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.optionalField.showTaxExemptions,"onUpdate:modelValue":t[3]||(t[3]=e=>n.optionalField.showTaxExemptions=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const kb={pimShowDeprecatedFields:!1,showSSN:!1,showSIN:!1,showTaxExemptions:!1};var _b={components:{"oxd-switch-input":X.Ay},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/optional-field");return{http:e}},data(){return{isLoading:!1,optionalField:{...kb}}},created(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.optionalField={...t}}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{...this.optionalField}}).then(e=>{const{data:t}=e.data;this.optionalField={...t},this.$toast.saveSuccess(),this.isLoading=!1})}}};const Sb=(0,i.A)(_b,[["render",Nb],["__scopeId","data-v-50c902c8"]]);var Db=Sb;const $b={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function Mb(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("edit-employee-layout");return(0,a.openBlock)(),(0,a.createBlock)(v,{"employee-id":o.empNumber,screen:"tax"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",$b,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.tax_exemptions")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.federal_income_tax")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.federalStatus,"onUpdate:modelValue":t[0]||(t[0]=e=>n.taxExemption.federalStatus=e),type:"select",label:e.$t("general.status"),options:o.statuses,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.federalExemptions,"onUpdate:modelValue":t[1]||(t[1]=e=>n.taxExemption.federalExemptions=e),label:e.$t("pim.exemptions"),rules:n.rules.federalExemptions,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.state_income_tax")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.taxState,"onUpdate:modelValue":t[2]||(t[2]=e=>n.taxExemption.taxState=e),type:"select",label:e.$t("general.state"),options:o.provinces,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.stateStatus,"onUpdate:modelValue":t[3]||(t[3]=e=>n.taxExemption.stateStatus=e),type:"select",label:e.$t("general.status"),options:o.statuses,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.stateExemptions,"onUpdate:modelValue":t[4]||(t[4]=e=>n.taxExemption.stateExemptions=e),label:e.$t("pim.exemptions"),rules:n.rules.stateExemptions,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.unemploymentState,"onUpdate:modelValue":t[5]||(t[5]=e=>n.taxExemption.unemploymentState=e),type:"select",label:e.$t("pim.unemployment_state"),options:o.provinces,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","options","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.taxExemption.workState,"onUpdate:modelValue":t[6]||(t[6]=e=>n.taxExemption.workState=e),type:"select",label:e.$t("pim.work_state"),options:o.provinces,disabled:!e.$can.update("tax_exemptions")},null,8,["modelValue","label","options","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[e.$can.update("tax_exemptions")?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1},8,["loading","onSubmitValid"])])]),_:1},8,["employee-id"])}const Eb={federalStatus:null,federalExemptions:null,taxStateCode:[],stateStatus:null,stateExemptions:null,unemploymentStateCode:[],workStateCode:[]};var Rb={components:{"edit-employee-layout":Jh},props:{empNumber:{type:String,required:!0},provinces:{type:Array,default:()=>[]},statuses:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/pim/employees/${e.empNumber}/tax-exemption`);return{http:t}},data(){return{isLoading:!1,taxExemption:{...Eb},rules:{federalExemptions:[e=>null!==e.match(/^\d*\.?\d*$/)||this.$t("general.should_be_a_positive_number"),Wt(2)],stateExemptions:[e=>null!==e.match(/^\d*\.?\d*$/)||this.$t("general.should_be_a_positive_number"),Wt(2)]}}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{this.updateModel(e)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{federalStatus:this.taxExemption.federalStatus?.id,federalExemptions:this.taxExemption.federalExemptions,taxStateCode:this.taxExemption.taxState?.id,stateStatus:this.taxExemption.stateStatus?.id,stateExemptions:this.taxExemption.stateExemptions,unemploymentStateCode:this.taxExemption.unemploymentState?.id,workStateCode:this.taxExemption.workState?.id}}).then(e=>(this.updateModel(e),this.$toast.updateSuccess())).then(()=>{this.isLoading=!1})},updateModel(e){const{data:t}=e.data;this.taxExemption.federalExemptions=t.federalExemptions,this.taxExemption.stateExemptions=t.stateExemptions,this.taxExemption.taxState=this.provinces.find(e=>e.id===t.taxState.code),this.taxExemption.unemploymentState=this.provinces.find(e=>e.id===t.unemploymentState.code),this.taxExemption.workState=this.provinces.find(e=>e.id===t.workState.code),this.taxExemption.federalStatus=this.statuses.find(e=>e.id===t.federalStatus),this.taxExemption.stateStatus=this.statuses.find(e=>e.id===t.stateStatus)}}};const Tb=(0,i.A)(Rb,[["render",Mb]]);var Bb=Tb;const Ib={class:"XHRM-background-container"},Ab={class:"XHRM-card-container"},Hb={class:"XHRM-information-card-container"};function Xb(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("employee-data-import-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Ib,[(0,a.createElementVNode)("div",Ab,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.data_import")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",Hb,[(0,a.createVNode)(r,{class:"XHRM-sub-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.note"))+": ",1)]),_:1}),(0,a.createElementVNode)("ul",null,[(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.column_order_should_not_be_changed")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.first_name_and_last_name_are_compulsory")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.all_date_fields_should_be_in_yyyy_mm_dd_format")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.gender_specified_value_should_be_either_m_or_f")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.each_import_file_should_be_configured_for_100_records_or_less")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.multiple_import_files_may_be_required")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(r,{class:"XHRM-information-card-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.sample_csv_file"))+" : ",1),(0,a.createElementVNode)("a",{href:"#",class:"download-link",onClick:t[0]||(t[0]=(0,a.withModifiers)((...e)=>i.onClickDownload&&i.onClickDownload(...e),["prevent"]))},(0,a.toDisplayString)(e.$t("general.download")),1)]),_:1})])])]),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(v,{ref:"formRef",loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.attachment=e),type:"file",rules:n.rules.attachment,label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),placeholder:e.$t("general.no_file_selected"),required:""},null,8,["modelValue","rules","label","button-label","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{label:e.$t("general.upload")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),n.importModalState?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,data:n.importModalState,onClose:i.onImportModalClose},null,8,["data","onClose"])):(0,a.createCommentVNode)("",!0)])}const Ub={class:"XHRM-modal-header"},Lb={class:"XHRM-text-center-align"},Pb={class:"XHRM-modal-footer"};function qb(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(d,{class:"XHRM-dialog-popup","onUpdate:show":i.onClose},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Ub,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.import_details")),1)]),_:1})]),(0,a.createElementVNode)("div",Lb,[(0,a.createVNode)(r,{type:"card-body",class:(0,a.normalizeClass)({"XHRM-success-message":o.data.success>0})},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.n_records_successfully_imported",{count:o.data.success})),1)]),_:1},8,["class"]),o.data.failed>0?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(r,{type:"card-body",class:"XHRM-error-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.n_records_failed_to_import",{count:o.data.failed})),1)]),_:1}),(0,a.createVNode)(r,{type:"card-body",class:"XHRM-error-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.failed_rows")),1)]),_:1}),(0,a.createVNode)(r,{type:"card-body",class:"XHRM-error-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.data.failedRows.toString()),1)]),_:1})],64)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",Pb,[(0,a.createVNode)(s,{"display-type":"secondary",label:e.$t("general.ok"),onClick:i.onClose},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])}var Fb={name:"EmployeeDataImportModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,required:!0}},emits:["close"],methods:{onClose(){this.$emit("close",!0)}}};const zb=(0,i.A)(Fb,[["render",qb],["__scopeId","data-v-420df7cb"]]);var jb=zb;const Ob={attachment:null};var Gb={components:{"employee-data-import-modal":jb},props:{allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/csv-import"),{formRef:t,reset:o}=Bc();return{http:e,reset:o,formRef:t}},data(){return{isLoading:!1,attachment:{...Ob},rules:{attachment:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)]},importModalState:null}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.attachment}).then(e=>{const{meta:t}=e.data;this.importModalState=t}).finally(()=>{this.reset(),this.isLoading=!1})},onClickDownload(){const e=`${window.appGlobal.baseUrl}/pim/sampleCsvDownload`;window.open(e,"_blank")},onImportModalClose(){this.importModalState=null}}};const Qb=(0,i.A)(Gb,[["render",Xb],["__scopeId","data-v-1441840b"]]);var Kb=Qb;const Wb={class:"XHRM-background-container"},Jb={class:"XHRM-paper-container"},Yb={class:"XHRM-header-container"},Zb={class:"XHRM-container"},ew={class:"XHRM-bottom-container"};function tw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("report-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-table-filter"),v=(0,a.resolveComponent)("table-header"),f=(0,a.resolveComponent)("oxd-card-table"),y=(0,a.resolveComponent)("oxd-pagination"),C=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Wb,[(0,a.createVNode)(g,{"filter-title":e.$t("general.employee_reports")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.report,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.report=e),rules:n.rules.report},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(m,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",Jb,[(0,a.createElementVNode)("div",Yb,[(0,a.createVNode)(m,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(v,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Zb,[(0,a.createVNode)(f,{selected:n.checkedItems,"onUpdate:selected":t[1]||(t[1]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[2]||(t[2]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",ew,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,current:l.currentPage,"onUpdate:current":t[3]||(t[3]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(C,{ref:"deleteDialog"},null,512)])}function ow(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",label:e.$t("general.report_name"),clear:!1,"create-options":i.loadReports},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var aw={name:"ReportAutocomplete",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/reports/defined");return{http:e}},methods:{async loadReports(e){return new Promise(t=>{e.trim()?this.http.getAll({name:e}).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:e.name})))}):t([])})}}};const lw=(0,i.A)(aw,[["render",ow]]);var nw=lw;const iw={report:null},rw={"report.name":"ASC"};var sw={components:{"delete-confirmation":Xt,"report-autocomplete":nw},setup(){const{sortDefinition:e,sortField:t,sortOrder:o,onSort:l}=Ut({sortDefinition:rw}),n=(0,a.ref)({...iw}),i=(0,a.computed)(()=>({reportId:n.value.report?.id,sortField:t.value,sortOrder:o.value})),r=new H(window.appGlobal.baseUrl,"/api/v2/pim/reports/defined"),{showPaginator:s,currentPage:d,total:c,pages:u,pageSize:m,response:p,isLoading:h,execQuery:g}=Et(r,{query:i});return l(g),{http:r,showPaginator:s,currentPage:d,isLoading:h,total:c,pages:u,pageSize:m,execQuery:g,items:p,filters:n,sortDefinition:e}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:"85%"},sortField:"report.name"},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:"15%"},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}},view:{onClick:this.onClickView,props:{name:"file-text-fill"}}}}],checkedItems:[],rules:{report:[$o]}}},methods:{onClickAdd(){I("/pim/definePredefinedReport")},onClickEdit(e){I("/pim/definePredefinedReport/{id}",{id:e.id})},onClickView(e){I("/pim/displayPredefinedReport/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...iw},this.filterItems()}}};const dw=(0,i.A)(sw,[["render",tw]]);var cw=dw;const uw={class:"XHRM-background-container"},mw={class:"XHRM-card-container"};function pw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-icon-button"),h=(0,a.resolveComponent)("oxd-input-group"),g=(0,a.resolveComponent)("report-criterion"),v=(0,a.resolveComponent)("report-display-field"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("submit-button"),V=(0,a.resolveComponent)("oxd-form-actions"),b=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",uw,[(0,a.createElementVNode)("div",mw,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.add_report")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(b,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.report.name=e),label:e.$t("general.report_name"),placeholder:e.$t("general.type_here_message"),rules:n.rules.name,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.selection_criteria")),1)]),_:1}),(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-report-criteria --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.criterion,"onUpdate:modelValue":t[1]||(t[1]=e=>l.report.criterion=e),type:"select",label:e.$t("pim.selection_criteria"),options:l.availableCriteria},null,8,["modelValue","label","options"]),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{class:"XHRM-report-icon",name:"plus",onClick:l.addCriterion},null,8,["onClick"])]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.includeEmployees,"onUpdate:modelValue":t[2]||(t[2]=e=>l.report.includeEmployees=e),type:"select",label:e.$t("pim.include"),options:n.includeOpts,"show-empty-selector":!1},null,8,["modelValue","label","options"])]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.report.criteriaSelected,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(g,{key:e,operator:l.report.criteriaFieldValues[e.id].operator,"onUpdate:operator":t=>l.report.criteriaFieldValues[e.id].operator=t,valueX:l.report.criteriaFieldValues[e.id].valueX,"onUpdate:valueX":t=>l.report.criteriaFieldValues[e.id].valueX=t,valueY:l.report.criteriaFieldValues[e.id].valueY,"onUpdate:valueY":t=>l.report.criteriaFieldValues[e.id].valueY=t,criterion:e,onDelete:e=>l.removeCriterion(t)},null,8,["operator","onUpdate:operator","valueX","onUpdate:valueX","valueY","onUpdate:valueY","criterion","onDelete"]))),128))]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.display_fields")),1)]),_:1}),(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.fieldGroup,"onUpdate:modelValue":t[3]||(t[3]=e=>l.report.fieldGroup=e),type:"select",label:e.$t("pim.select_display_field_group"),options:l.availableFieldGroups},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,{class:"XHRM-report-criteria --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.displayField,"onUpdate:modelValue":t[4]||(t[4]=e=>l.report.displayField=e),type:"select",label:e.$t("pim.select_display_field"),options:l.availableDisplyFields},null,8,["modelValue","label","options"]),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{class:"XHRM-report-icon",name:"plus",onClick:l.addDisplayField},null,8,["onClick"])]),_:1})]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.report.fieldGroupSelected,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(v,{key:e,includeHeader:l.report.displayFieldSelected[e.id].includeHeader,"onUpdate:includeHeader":t=>l.report.displayFieldSelected[e.id].includeHeader=t,"field-group":e,"selected-fields":l.report.displayFieldSelected[e.id].fields,onDelete:e=>l.removeDisplayFieldGroup(t),onDeleteChip:e=>l.removeDisplayField(e,t)},null,8,["includeHeader","onUpdate:includeHeader","field-group","selected-fields","onDelete","onDeleteChip"]))),128))]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(C)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}function hw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-grid-item");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(d,{class:"XHRM-report-criteria --offset-column-1"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{name:"trash-fill",onClick:l.onClickDelete},null,8,["onClick"]),(0,a.createVNode)(s,{class:"XHRM-report-criteria-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.criterion.label),1)]),_:1})]),_:1}),((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(l.field.component),(0,a.mergeProps)(e.$attrs,{api:l.field.api,label:l.field.name,options:l.field.options}),null,16,["api","label","options"]))],64)}function gw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item");return(0,a.openBlock)(),(0,a.createBlock)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,(0,a.mergeProps)(e.$attrs,{params:{includeEmployees:"currentAndPast"},rules:l.rules,"model-value":o.valueX,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:valueX",t))}),null,16,["rules","model-value"])]),_:1})}var vw={name:"ReportCriterionAutocomplete",components:{"employee-autocomplete":$a},inheritAttrs:!1,props:{operator:{type:Object,required:!1,default:()=>null},valueX:{type:Object,required:!1,default:()=>null}},emits:["update:valueX","update:operator"],setup(e,t){const o=[Kt,$o];return t.emit("update:operator",{id:"eq",label:"Equal"}),{rules:o}}};const fw=(0,i.A)(vw,[["render",gw],["__scopeId","data-v-88770052"]]);var yw=fw;function Cw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item");return(0,a.openBlock)(),(0,a.createBlock)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,(0,a.mergeProps)(e.$attrs,{type:"select",rules:l.rules,options:l.opts,"model-value":o.valueX,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:valueX",t))}),null,16,["rules","options","model-value"])]),_:1})}var Vw={name:"ReportCriterionSelect",inheritAttrs:!1,props:{api:{type:String,required:!1,default:null},options:{type:Array,default:()=>[]},valueX:{type:Object,required:!1,default:()=>null}},emits:["update:valueX","update:operator"],setup(e,t){const o=(0,a.ref)(e.options),l=[Kt];if(e.api){const t=new H(window.appGlobal.baseUrl,e.api);(0,a.onBeforeMount)(()=>{t.getAll({..."/api/v2/admin/subunits"!==e.api&&{limit:0}}).then(({data:e})=>{o.value=e.data.map(e=>({id:e.id,label:e.name?e.name:e.title,_indent:e.level?e.level+1:1}))})})}return"/api/v2/admin/locations"===e.api||"/api/v2/admin/subunits"===e.api?t.emit("update:operator",{id:"in",label:"Equal"}):t.emit("update:operator",{id:"eq",label:"Equal"}),{opts:o,rules:l}}};const bw=(0,i.A)(Vw,[["render",Cw],["__scopeId","data-v-364ea6ea"]]);var ww=bw;function xw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"select",rules:l.rules.operator,options:l.operators,"model-value":o.operator,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:operator",t))},null,8,["rules","options","model-value"])]),_:1}),o.operator&&"between"===o.operator.id?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"XHRM-report-range"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{rules:l.rules.valueX,"model-value":o.valueX,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:valueX",t))},null,8,["rules","model-value"]),(0,a.createVNode)(d,{class:"XHRM-report-range-text",tag:"p"},{default:(0,a.withCtx)(()=>[...t[4]||(t[4]=[(0,a.createTextVNode)("to",-1)])]),_:1}),(0,a.createVNode)(r,{rules:l.rules.valueY,"model-value":o.valueY,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:valueY",t))},null,8,["rules","model-value"])]),_:1})):o.operator?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{rules:l.rules.valueXOnly,"model-value":o.valueX,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$emit("update:valueX",t))},null,8,["rules","model-value"])]),_:1})):(0,a.createCommentVNode)("",!0)],64)}var Nw={name:"ReportCriterionRange",inheritAttrs:!1,props:{operator:{type:Object,required:!1,default:()=>null},valueX:{type:String,required:!1,default:null},valueY:{type:String,required:!1,default:null}},emits:["update:valueX","update:valueY","update:operator"],setup(e){const{$t:t}=Ie(),o=(0,a.ref)([{id:"lt",label:t("general.less_than")},{id:"gt",label:t("general.greater_than")},{id:"between",label:t("general.range")}]),l={operator:[Kt],valueXOnly:[Kt,to,eo(100)],valueX:[Kt,to,eo(100),o=>!parseInt(e.valueY)||(parseInt(o)<parseInt(e.valueY)||t("general.should_be_less_than_upper_bound"))],valueY:[Kt,to,eo(100),o=>!parseInt(e.valueX)||(parseInt(o)>parseInt(e.valueX)||t("general.should_be_greater_than_lower_bound"))]};return{rules:l,operators:o}}};const kw=(0,i.A)(Nw,[["render",xw],["__scopeId","data-v-4626f63c"]]);var _w=kw;function Sw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"select",rules:l.rules.operator,options:l.operators,"model-value":o.operator,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:operator",t))},null,8,["rules","options","model-value"])]),_:1}),o.operator&&"between"===o.operator.id?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"XHRM-report-daterange --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"date",rules:l.rules.valueX,"model-value":o.valueX,placeholder:l.userDateFormat,"display-format":l.jsDateFormat,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:valueX",t))},null,8,["rules","model-value","placeholder","display-format"]),(0,a.createVNode)(d,{class:"XHRM-report-range-text",tag:"p"},{default:(0,a.withCtx)(()=>[...t[4]||(t[4]=[(0,a.createTextVNode)("to",-1)])]),_:1}),(0,a.createVNode)(r,{type:"date",rules:l.rules.valueY,"model-value":o.valueY,placeholder:l.userDateFormat,"display-format":l.jsDateFormat,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:valueY",t))},null,8,["rules","model-value","placeholder","display-format"])]),_:1})):o.operator?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"date",rules:l.rules.valueXOnly,"model-value":o.valueX,placeholder:l.userDateFormat,"display-format":l.jsDateFormat,"onUpdate:modelValue":t[3]||(t[3]=t=>e.$emit("update:valueX",t))},null,8,["rules","model-value","placeholder","display-format"])]),_:1})):(0,a.createCommentVNode)("",!0)],64)}var Dw={name:"ReportCriterionDateRange",inheritAttrs:!1,props:{operator:{type:Object,required:!1,default:()=>null},valueX:{type:String,required:!1,default:null},valueY:{type:String,required:!1,default:null}},emits:["update:valueX","update:valueY","update:operator"],setup(e){const{$t:t}=Ie(),{jsDateFormat:o,userDateFormat:l}=F(),n=(0,a.ref)([{id:"lt",label:"Joined before"},{id:"gt",label:"Joined after"},{id:"between",label:"Joined in between"}]),i={operator:[Kt],valueXOnly:[Kt,Jt(l)],valueX:[Kt,Jt(l),yo(()=>e.valueY,t("general.from_date_should_be_before_to_date"))],valueY:[Kt,Jt(l),so(()=>e.valueX,t("general.to_date_should_be_after_from_date"))]};return{rules:i,operators:n,jsDateFormat:o,userDateFormat:l}}};const $w=(0,i.A)(Dw,[["render",Sw],["__scopeId","data-v-3d6a219f"]]);var Mw=$w,Ew={name:"ReportCriterion",components:{"report-criterion-autocomplete":yw,"report-criterion-select":ww,"report-criterion-range":_w,"report-criterion-date-range":Mw},inheritAttrs:!1,props:{criterion:{type:Object,required:!0}},emits:["delete"],setup(e,t){const o=(0,a.ref)(null);switch(e.criterion.key){case"employee_name":o.value={name:e.criterion.label,component:"report-criterion-autocomplete",api:null,options:[]};break;case"pay_grade":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/pay-grades",options:[]};break;case"education":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/educations",options:[]};break;case"employment_status":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/employment-statuses",options:[]};break;case"service_period":o.value={name:e.criterion.label,component:"report-criterion-range",api:null,options:[]};break;case"joined_date":o.value={name:e.criterion.label,component:"report-criterion-date-range",api:null,options:[]};break;case"job_title":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/job-titles",options:[]};break;case"language":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/languages",options:[]};break;case"skill":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/skills",options:[]};break;case"age_group":o.value={name:e.criterion.label,component:"report-criterion-range",api:null,options:[]};break;case"sub_unit":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/subunits",options:[]};break;case"location":o.value={name:e.criterion.label,component:"report-criterion-select",api:"/api/v2/admin/locations",options:[]};break;default:o.value={name:e.criterion.label,component:"report-criterion-select",api:null,options:[{id:1,label:"Male"},{id:2,label:"Female"}]}}const l=e=>{t.emit("delete",e)};return{field:o,onClickDelete:l}}};const Rw=(0,i.A)(Ew,[["render",hw],["__scopeId","data-v-9dd6b6f8"]]);var Tw=Rw;function Bw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("oxd-multiselect-chips"),u=(0,a.resolveComponent)("oxd-switch-input");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(d,{class:"XHRM-report-field --offset-column-1"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{name:"trash-fill",onClick:l.onClickDelete},null,8,["onClick"]),(0,a.createVNode)(s,{class:"XHRM-report-field-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.fieldGroup.label),1)]),_:1})]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{selected:o.selectedFields,onChipRemoved:l.onRemoveSelected},null,8,["selected","onChipRemoved"])]),_:1}),(0,a.createVNode)(d,{class:"XHRM-report-field"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-report-field-header",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.include_header")),1)]),_:1}),(0,a.createVNode)(u,{"model-value":o.includeHeader,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:includeHeader",t))},null,8,["model-value"])]),_:1})],64)}var Iw={name:"ReportDisplayField",components:{"oxd-switch-input":X.Ay,"oxd-multiselect-chips":X.OJ},props:{fieldGroup:{type:Object,required:!0},selectedFields:{type:Array,default:()=>[]},includeHeader:{type:Boolean,required:!0}},emits:["delete","deleteChip","update:includeHeader"],setup(e,t){const o=e=>{t.emit("delete",e)},a=e=>{t.emit("deleteChip",e)};return{onClickDelete:o,onRemoveSelected:a}}};const Aw=(0,i.A)(Iw,[["render",Bw],["__scopeId","data-v-1405b2c4"]]);var Hw=Aw;const Xw={name:"",includeEmployees:{id:1,key:"onlyCurrent",label:"Current Employees Only"},criterion:null,criteriaSelected:[],criteriaFieldValues:{},fieldGroup:null,fieldGroupSelected:[],displayField:null,displayFieldSelected:{}};function Uw(e,t,o){const l=(0,a.reactive)({report:{...Xw}}),n=e=>{const o=t.find(t=>t.field_group_id===e);return o?o.fields:[]},i=e=>{const t=l.report.displayFieldSelected[e],o=t?t.fields:[];return n(e).filter(e=>!o.find(t=>t.id===e.id))},r=()=>{const e=l.report.criterion;e&&(l.report.criteriaSelected.push(e),l.report.criteriaFieldValues[e.id]={valueX:null,valueY:null,operator:null},l.report.criterion=null)},s=e=>{const t=l.report.criteriaSelected.splice(e,1);delete l.report.criteriaFieldValues[t[0].id]},d=()=>{const e=l.report.fieldGroup,t=l.report.displayField;if(e){const o=l.report.fieldGroupSelected.findIndex(t=>t.id===e.id);-1===o&&(l.report.fieldGroupSelected.push(e),l.report.displayFieldSelected[e.id]={fields:[],includeHeader:!1}),t?(l.report.displayFieldSelected[e.id].fields.push(t),l.report.displayField=null):i(e.id).forEach(t=>{l.report.displayFieldSelected[e.id].fields.push(t)}),0===i(e.id).length&&(l.report.fieldGroup=null)}},c=e=>{const t=l.report.fieldGroupSelected[e];l.report.fieldGroupSelected.splice(e,1),delete l.report.displayFieldSelected[t.id]},u=(e,t)=>{const o=l.report.fieldGroupSelected[t],a=l.report.displayFieldSelected[o.id].fields;l.report.displayFieldSelected[o.id].fields=a.filter(t=>t.id!==e.id),0===l.report.displayFieldSelected[o.id].fields.length&&c(t)},m=e=>{const t={name:e.name,include:e.includeEmployees.key,criteria:{},fieldGroup:{}};return e.fieldGroupSelected.forEach(o=>{const a=e.displayFieldSelected[o.id].fields,l=e.displayFieldSelected[o.id].includeHeader;t.fieldGroup[o.id]={fields:a.map(e=>e.id),includeHeader:l}}),e.criteriaSelected.forEach(o=>{const a=e.criteriaFieldValues[o.id];t.criteria[o.id]={operator:a.operator?a.operator.id:"",x:"object"===typeof a.valueX?String(a.valueX?.id):a.valueX,y:"object"===typeof a.valueY?String(a.valueY?.id):a.valueY}}),t},p=(0,a.computed)(()=>e.filter(e=>!l.report.criteriaSelected.find(t=>t.id===e.id))),h=(0,a.computed)(()=>o.filter(e=>0!==i(e.id).length)),g=(0,a.computed)(()=>{const e=l.report.fieldGroup?.id;return e?i(e):[]});return{...(0,a.toRefs)(l),addCriterion:r,serializeBody:m,addDisplayField:d,removeCriterion:s,removeDisplayField:u,removeDisplayFieldGroup:c,availableCriteria:p,availableFieldGroups:h,availableDisplyFields:g}}var Lw={components:{"report-criterion":Tw,"report-display-field":Hw},props:{selectionCriteria:{type:Array,required:!0},displayFieldGroups:{type:Array,required:!0},displayFields:{type:Array,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/pim/reports/defined"),{report:o,addCriterion:a,serializeBody:l,addDisplayField:n,removeCriterion:i,removeDisplayField:r,removeDisplayFieldGroup:s,availableCriteria:d,availableFieldGroups:c,availableDisplyFields:u}=Uw(e.selectionCriteria,e.displayFields,e.displayFieldGroups);return{http:t,report:o,addCriterion:a,serializeBody:l,addDisplayField:n,removeCriterion:i,removeDisplayField:r,removeDisplayFieldGroup:s,availableCriteria:d,availableFieldGroups:c,availableDisplyFields:u}},data(){return{isLoading:!1,rules:{name:[Kt,Wt(250)],includeEmployees:[Kt]},includeOpts:[{id:1,key:"onlyCurrent",label:this.$t("general.current_employees_only")},{id:2,key:"currentAndPast",label:this.$t("general.current_and_past_employees")},{id:3,key:"onlyPast",label:this.$t("general.past_employees_only")}]}},beforeMount(){this.isLoading=!0,this.http.getAll({limit:0}).then(e=>{const{data:t}=e.data;this.rules.name.push(e=>{const o=t.findIndex(t=>t.name==e);return-1===o||this.$t("general.already_exists")})}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/pim/viewDefinedPredefinedReports")},onSave(){if(0===Object.keys(this.report.displayFieldSelected).length)return this.$toast.warn({title:this.$t("general.warning"),message:this.$t("pim.at_least_one_display_field_should_be_added")});this.isLoading=!0;let e=null;const t=this.serializeBody(this.report);this.http.create(t).then(t=>{const{data:o}=t.data;return e=o.id,this.$toast.saveSuccess()}).then(()=>{e&&I("/pim/displayPredefinedReport/{id}",{id:e})})}}};const Pw=(0,i.A)(Lw,[["render",pw],["__scopeId","data-v-04cf9379"]]);var qw=Pw;const Fw={class:"XHRM-card-container"};function zw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(s,{module:"pim",name:"pim_defined",prefetch:!0,filters:l.filters,"can-focus":!0,range:!0},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Fw,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.reportName),1)]),_:1})]),t[0]||(t[0]=(0,a.createElementVNode)("br",null,null,-1))]),_:1},8,["filters"])}const jw={class:"XHRM-background-container"},Ow={key:0,class:"XHRM-paper-container"};function Gw(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-pagination"),d=(0,a.resolveComponent)("oxd-report-table");return(0,a.openBlock)(),(0,a.createElementBlock)("div",jw,[(0,a.renderSlot)(e.$slots,"default",{generateReport:l.generateReport},void 0,!0),0!==l.headers.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ow,[(0,a.createVNode)(d,{items:l.items,headers:l.headers,loading:l.isLoading,"column-count":l.colCount,"can-focus":o.canFocus,range:o.range},{pagination:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"oxd-text--count",tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.n_records_found",{count:l.total})),1)]),_:1}),l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),footer:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"oxd-text--footer",tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.renderSlot)(e.$slots,"footer",{data:l.response},void 0,!0)]),_:3})]),_:3},8,["items","headers","loading","column-count","can-focus","range"])])):(0,a.createCommentVNode)("",!0)])}var Qw={name:"ReportsTable",components:{"oxd-report-table":X.Ej},props:{name:{type:String,required:!0},module:{type:String,required:!0},prefetch:{type:Boolean,default:!1},filters:{type:Object,default:()=>({})},columnCount:{type:Number,default:null,required:!1},canFocus:{type:Boolean,default:!1,required:!1},range:{type:Boolean,default:!1,required:!1}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/${e.module}/reports/data`),o=(0,a.ref)([]),l=(0,a.ref)(e.columnCount?e.columnCount:0),n=(0,a.computed)(()=>({...e.filters,name:e.name,_dateFormattingEnabled:!0})),{total:i,pages:r,response:s,isLoading:d,currentPage:c,showPaginator:u,execQuery:m}=Et(t,{query:n,prefetch:!1}),p=(0,a.computed)(()=>{const e=Array.isArray(s.value.data)?s.value.data:[];return e.map(e=>{let t=0;for(const o in e){const a=e[o];Array.isArray(a)&&a.length>t&&(t=a.length)}return{...e,_rows:t}})}),h=e=>{delete e["size"];const{type:t,...o}=e.cellProperties??{},a=function({prop:e,model:t}){const a=t?._url?t?._url[e]:void 0;return{...o,onClick:a?()=>I(a):void 0}};return{...e,cellProperties:a,cellTemplate:"list"===t?(0,X.IN)(X.rB):void 0}},g=async()=>{d.value=!0,t.request({method:"GET",url:`/api/v2/${e.module}/reports`,params:{name:n.value.name,reportId:n.value?.reportId}}).then(e=>{const{data:t,meta:a}=e.data;o.value=t.headers.map(e=>e?.children&&Array.isArray(e.children)?(e.children=e.children.map(e=>h(e)),e):h(e)),a.headers?.columnCount&&(l.value=a.headers.columnCount),d.value=!1})},v=async()=>{0===o.value.length&&await g(),await m()};return(0,a.watch)(()=>e.name,()=>{o.value=[]}),e.prefetch&&(0,a.onBeforeMount)(()=>v()),{total:i,pages:r,items:p,headers:o,colCount:l,response:s,isLoading:d,currentPage:c,showPaginator:u,generateReport:v}}};const Kw=(0,i.A)(Qw,[["render",Gw],["__scopeId","data-v-e5c52074"]]);var Ww=Kw,Jw={components:{"reports-table":Ww},props:{reportId:{type:String,required:!0},reportName:{type:String,required:!0}},setup(e){const t=(0,a.ref)({reportId:e.reportId});return{filters:t}}};const Yw=(0,i.A)(Jw,[["render",zw]]);var Zw=Yw;const ex={class:"XHRM-background-container"},tx={class:"XHRM-card-container"};function ox(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-icon-button"),h=(0,a.resolveComponent)("oxd-input-group"),g=(0,a.resolveComponent)("report-criterion"),v=(0,a.resolveComponent)("report-display-field"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("submit-button"),V=(0,a.resolveComponent)("oxd-form-actions"),b=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ex,[(0,a.createElementVNode)("div",tx,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.edit_report")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(b,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.report.name=e),label:e.$t("general.report_name"),placeholder:e.$t("general.type_here_message"),rules:n.rules.name,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.selection_criteria")),1)]),_:1}),(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-report-criteria --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.criterion,"onUpdate:modelValue":t[1]||(t[1]=e=>l.report.criterion=e),type:"select",label:e.$t("pim.selection_criteria"),options:l.availableCriteria},null,8,["modelValue","label","options"]),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{class:"XHRM-report-icon",name:"plus",onClick:l.addCriterion},null,8,["onClick"])]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.includeEmployees,"onUpdate:modelValue":t[2]||(t[2]=e=>l.report.includeEmployees=e),type:"select",label:e.$t("pim.include"),options:n.includeOpts,"show-empty-selector":!1},null,8,["modelValue","label","options"])]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.report.criteriaSelected,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(g,{key:e,operator:l.report.criteriaFieldValues[e.id].operator,"onUpdate:operator":t=>l.report.criteriaFieldValues[e.id].operator=t,valueX:l.report.criteriaFieldValues[e.id].valueX,"onUpdate:valueX":t=>l.report.criteriaFieldValues[e.id].valueX=t,valueY:l.report.criteriaFieldValues[e.id].valueY,"onUpdate:valueY":t=>l.report.criteriaFieldValues[e.id].valueY=t,criterion:e,onDelete:e=>l.removeCriterion(t)},null,8,["operator","onUpdate:operator","valueX","onUpdate:valueX","valueY","onUpdate:valueY","criterion","onDelete"]))),128))]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.display_fields")),1)]),_:1}),(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.fieldGroup,"onUpdate:modelValue":t[3]||(t[3]=e=>l.report.fieldGroup=e),type:"select",label:e.$t("pim.select_display_field_group"),options:l.availableFieldGroups},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(c,{class:"XHRM-report-criteria --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.report.displayField,"onUpdate:modelValue":t[4]||(t[4]=e=>l.report.displayField=e),type:"select",label:e.$t("pim.select_display_field"),options:l.availableDisplyFields},null,8,["modelValue","label","options"]),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{class:"XHRM-report-icon",name:"plus",onClick:l.addDisplayField},null,8,["onClick"])]),_:1})]),_:1}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.report.fieldGroupSelected,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(v,{key:e,includeHeader:l.report.displayFieldSelected[e.id].includeHeader,"onUpdate:includeHeader":t=>l.report.displayFieldSelected[e.id].includeHeader=t,"field-group":e,"selected-fields":l.report.displayFieldSelected[e.id].fields,onDelete:e=>l.removeDisplayFieldGroup(t),onDeleteChip:e=>l.removeDisplayField(e,t)},null,8,["includeHeader","onUpdate:includeHeader","field-group","selected-fields","onDelete","onDeleteChip"]))),128))]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(C)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var ax={components:{"report-criterion":Tw,"report-display-field":Hw},props:{selectionCriteria:{type:Array,required:!0},displayFieldGroups:{type:Array,required:!0},displayFields:{type:Array,required:!0},reportId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/pim/reports/defined"),{report:o,addCriterion:a,serializeBody:l,addDisplayField:n,removeCriterion:i,removeDisplayField:r,removeDisplayFieldGroup:s,availableCriteria:d,availableFieldGroups:c,availableDisplyFields:u}=Uw(e.selectionCriteria,e.displayFields,e.displayFieldGroups);return{http:t,report:o,addCriterion:a,serializeBody:l,addDisplayField:n,removeCriterion:i,removeDisplayField:r,removeDisplayFieldGroup:s,availableCriteria:d,availableFieldGroups:c,availableDisplyFields:u}},data(){return{isLoading:!1,rules:{name:[Kt,Wt(250)],includeEmployees:[Kt]},includeOpts:[{id:1,key:"onlyCurrent",label:this.$t("general.current_employees_only")},{id:2,key:"currentAndPast",label:this.$t("general.current_and_past_employees")},{id:3,key:"onlyPast",label:this.$t("general.past_employees_only")}]}},beforeMount(){this.isLoading=!0,this.http.get(this.reportId).then(e=>{const{data:t}=e.data;this.report.name=t.name,this.report.includeEmployees=this.includeOpts.find(e=>e.key===t.include);const o=[{id:"eq",label:"Equal"},{id:"lt",label:"Less Than"},{id:"gt",label:"Greater Than"},{id:"between",label:"Range"}];for(const a in t.fieldGroup){const e=this.displayFields.find(e=>e.field_group_id==a);this.report.fieldGroupSelected.push(this.displayFieldGroups.find(e=>e.id==a)),this.report.displayFieldSelected[a]={fields:t.fieldGroup[a].fields.map(t=>e.fields.find(e=>e.id===t)),includeHeader:t.fieldGroup[a].includeHeader}}for(const a in t.criteria){const e=this.selectionCriteria.find(e=>e.id==a);this.report.criteriaSelected.push(e),this.report.criteriaFieldValues[a]={valueX:t.criteria[a].x,valueY:"undefined"===t.criteria[a].y?null:t.criteria[a].y,operator:o.find(e=>e.id===t.criteria[a].operator)}}return this.http.getAll({limit:0})}).then(e=>{const{data:t}=e.data;this.rules.name.push(e=>{const o=t.findIndex(t=>t.name==e);if(o>-1){const{id:e}=t[o];return e==this.reportId||this.$t("general.already_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/pim/viewDefinedPredefinedReports")},onSave(){if(0===Object.keys(this.report.displayFieldSelected).length)return this.$toast.warn({title:this.$t("general.warning"),message:this.$t("pim.at_least_one_display_field_should_be_added")});this.isLoading=!0;const e=this.serializeBody(this.report);this.http.update(this.reportId,e).then(()=>this.$toast.updateSuccess()).then(()=>{I("/pim/displayPredefinedReport/{id}",{id:this.reportId})})}}};const lx=(0,i.A)(ax,[["render",ox],["__scopeId","data-v-60456ff6"]]);var nx=lx;const ix={class:"XHRM-background-container"},rx={class:"XHRM-card-container"};function sx(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("password-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ix,[(0,a.createElementVNode)("div",rx,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.update_password")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{ref:"formRef",loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.username")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-user-name",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.userName),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.user.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.user.currentPassword=e),type:"password",label:e.$t("pim.current_password"),rules:n.rules.currentPassword,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,{password:n.user.password,"onUpdate:password":t[1]||(t[1]=e=>n.user.password=e),passwordConfirm:n.user.passwordConfirm,"onUpdate:passwordConfirm":t[2]||(t[2]=e=>n.user.passwordConfirm=e)},null,8,["password","passwordConfirm"]),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const dx={currentPassword:"",password:"",passwordConfirm:""};var cx={components:{"password-input":Ga},props:{userName:{type:String,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/core/update-password"),{formRef:t,reset:o}=Bc();return{http:e,formRef:t,reset:o}},data(){return{isLoading:!1,user:{...dx},rules:{currentPassword:[Kt,Wt(64)]}}},methods:{onCancel(){window.history.back()},onSave(){this.isLoading=!0;let e=!1;this.http.request({method:"PUT",url:"/api/v2/pim/update-password",data:{newPassword:this.user.password,currentPassword:this.user.currentPassword},validateStatus:e=>e>=200&&e<300||422===e}).then(t=>200===t.status?(this.reset(),e=!0,this.$toast.saveSuccess()):this.$toast.error({title:this.$t("general.error"),message:this.$t("pim.current_password_is_incorrect")})).finally(()=>{this.isLoading=!1,e&&I("/dashboard/index")})}}};const ux=(0,i.A)(cx,[["render",sx],["__scopeId","data-v-847fa85a"]]);var mx=ux,px={"employee-save":Vp,"employee-list":Op,"employee-personal-details":tg,"employee-contact-details":rg,"employee-emergency-contacts":_g,"employee-dependents":jg,"employee-profile-picture":Yg,"employee-salary":Vv,"employee-job":Xv,"employee-qualifications":Uy,"employee-immigration":lC,"employee-membership":nV,"termination-reason-list":hV,"termination-reason-edit":VV,"termination-reason-save":_V,"reporting-method-list":IV,"reporting-method-edit":PV,"reporting-method-save":GV,"employee-report-to":LC,"custom-field-list":ab,"custom-field-edit":cb,"custom-field-save":fb,"optional-field-list":Db,"employee-tax-exemption":Bb,"employee-data-import":Kb,"employee-report-list":cw,"employee-report-save":qw,"employee-report-view":Zw,"employee-report-edit":nx,"update-password":mx};const hx={class:"XHRM-background-container"},gx={class:"XHRM-card-container"},vx={class:"XHRM-support"},fx=["src"];function yx(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("oxd-grid");return(0,a.openBlock)(),(0,a.createElementBlock)("div",hx,[(0,a.createElementVNode)("div",gx,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("help.getting_started_with_XHRM")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(r,{tag:"p",class:"XHRM-support-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("help.getting_started_with_XHRM_message_1")),1)]),_:1}),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(r,{tag:"p",class:"XHRM-support-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("help.getting_started_with_XHRM_message_2")),1)]),_:1}),(0,a.createElementVNode)("div",vx,[(0,a.createVNode)(c,{cols:2,class:"XHRM-support-channel --mail"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("img",{src:n.helpImgSrc,alt:"help image"},null,8,fx)]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-sub-title",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("help.customer_support")),1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-support-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("help.contact_us_on_message"))+" ",1),t[0]||(t[0]=(0,a.createElementVNode)("a",{class:"XHRM-support-link",href:"mailto:ossupport@XHRM.com"}," ossupport@XHRM.com ",-1)),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("help.we_will_be_delighted_to_help")),1)]),_:1})]),_:1})]),_:1})])])])}var Cx={data(){return{helpImgSrc:`${window.appGlobal.publicPath}/images/help.png`}}};const Vx=(0,i.A)(Cx,[["render",yx],["__scopeId","data-v-5ca99a16"]]);var bx=Vx,wx={"view-support":bx};const xx={class:"XHRM-background-container"},Nx={class:"XHRM-card-container"};function kx(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",xx,[(0,a.createElementVNode)("div",Nx,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.timesheet_period_config")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.timeSheetPeriod.startDay,"onUpdate:modelValue":t[0]||(t[0]=e=>n.timeSheetPeriod.startDay=e),type:"select",label:e.$t("time.add_timesheet_period_config"),options:i.days,rules:n.rules.startDay,required:""},null,8,["modelValue","label","options","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const _x={startDay:null};var Sx={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/time-sheet-period"),{locale:t}=Ae();return{http:e,locale:t}},data(){return{isLoading:!1,timeSheetPeriod:{..._x},rules:{startDay:[Kt]}}},computed:{days(){return Array(7).fill("").map((...[,e])=>({id:0===e?7:e,label:this.locale.localize.day(e,{width:"wide"})}))}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET"}).then(e=>{const{data:t}=e.data;this.updateTimeSheetPeriodModel(parseInt(t.startDay))}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{startDay:this.timeSheetPeriod.startDay?.id}}).then(()=>this.$toast.saveSuccess()).then(()=>{I("/time/viewEmployeeTimesheet")})},updateTimeSheetPeriodModel(e){this.timeSheetPeriod.startDay=this.days.find(t=>t.id===e)}}};const Dx=(0,i.A)(Sx,[["render",kx]]);var $x=Dx;const Mx={class:"XHRM-background-container"},Ex={class:"XHRM-paper-container"},Rx={class:"XHRM-header-container"},Tx={class:"XHRM-container"},Bx={class:"XHRM-bottom-container"};function Ix(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Mx,[(0,a.createElementVNode)("div",Ex,[(0,a.createElementVNode)("div",Rx,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.customers")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Tx,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[1]||(t[1]=e=>l.sortDefinition=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","loading","headers","items"])]),(0,a.createElementVNode)("div",Bx,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[2]||(t[2]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}const Ax={"customer.name":"ASC"};var Hx={components:{"delete-confirmation":Xt},props:{unselectableIds:{type:Array,default:()=>[]}},setup(e){const t=t=>t.map(t=>{const o=e.unselectableIds.findIndex(e=>e==t.id);return{id:t.id,name:t.name,description:t.description,isSelectable:-1===o}}),{sortDefinition:o,sortField:l,sortOrder:n,onSort:i}=Ut({sortDefinition:Ax}),r=(0,a.computed)(()=>({sortField:l.value,sortOrder:n.value})),s=new H(window.appGlobal.baseUrl,"/api/v2/time/customers"),{showPaginator:d,currentPage:c,total:u,pages:m,pageSize:p,response:h,isLoading:g,execQuery:v}=Et(s,{query:r,normalizer:t});return i(v),{http:s,showPaginator:d,currentPage:c,isLoading:g,total:u,pages:m,pageSize:p,execQuery:v,items:h,sortDefinition:o}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),sortField:"customer.name",style:{flex:2}},{name:"description",title:this.$t("general.description"),style:{flex:4}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/time/addCustomer")},onClickEdit(e){I("/time/addCustomer/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.error({title:this.$t("general.error"),message:this.$t("time.not_allowed_to_delete_customer_who_have_time_logged_against")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const Xx=(0,i.A)(Hx,[["render",Ix]]);var Ux=Xx;const Lx={class:"XHRM-background-container"},Px={class:"XHRM-card-container"};function qx(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Lx,[(0,a.createElementVNode)("div",Px,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.add_customer")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customer.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.customer.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customer.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.customer.description=e),type:"textarea",label:e.$t("general.description"),placeholder:"Type description here",rules:n.rules.description},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Fx={id:"",name:"",description:""};var zx={setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/customers");return e.setIgnorePath("/api/v2/time/validation/customer-name"),{http:e}},data(){return{isLoading:!1,customer:{...Fx},rules:{name:[Kt,Wt(50),(0,X.Ld)(this.validateCustomerName,500)],description:[Wt(255)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.customer.name,description:this.customer.description}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/time/viewCustomers")},validateCustomerName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/time/validation/customer-name",params:{customerName:this.customer.name.trim()}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const jx=(0,i.A)(zx,[["render",qx]]);var Ox=jx;const Gx={class:"XHRM-background-container"},Qx={class:"XHRM-card-container"};function Kx(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Gx,[(0,a.createElementVNode)("div",Qx,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.edit_customer")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customer.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.customer.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customer.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.customer.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Wx={id:"",name:"",description:""};var Jx={props:{customerId:{type:String,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/customers");return e.setIgnorePath("/api/v2/time/validation/customer-name"),{http:e}},data(){return{isLoading:!1,customer:{...Wx},rules:{name:[Kt,Wt(50),(0,X.Ld)(this.validateCustomerName,500)],description:[Wt(255)]}}},created(){this.isLoading=!0,this.http.get(this.customerId).then(e=>{const{data:t}=e.data;this.customer.id=t.id,this.customer.name=t.name,this.customer.description=t.description}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.customerId,{name:this.customer.name,description:this.customer.description}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/time/viewCustomers")},validateCustomerName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/time/validation/customer-name",params:{customerName:this.customer.name.trim(),customerId:this.customerId}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const Yx=(0,i.A)(Jx,[["render",Kx]]);var Zx=Yx;const eN={class:"XHRM-background-container"};function tN(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("timesheet-period"),d=(0,a.resolveComponent)("oxd-button"),c=(0,a.resolveComponent)("timesheet"),u=(0,a.resolveComponent)("timesheet-actions");return(0,a.openBlock)(),(0,a.createElementBlock)("div",eN,[(0,a.createVNode)(c,{loading:e.isLoading,columns:e.timesheetColumns,records:e.timesheetRecords,"timesheet-id":e.timesheetId,subtotal:e.timesheetSubtotal},{"header-title":(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.my_timesheet")),1)]),_:1})]),"header-options":(0,a.withCtx)(()=>[(0,a.createVNode)(s,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t),value:l.timesheetPeriod,onPrevious:l.onClickPrevious,onNext:l.onClickNext},null,8,["modelValue","value","onPrevious","onNext"])]),"footer-title":(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.status"))+": "+(0,a.toDisplayString)(i.myTimesheetStatus),1)]),_:1},512),[[a.vShow,e.timesheetStatus]])]),"footer-options":(0,a.withCtx)(()=>[l.showCreateTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"display-type":"secondary",disabled:l.canCreateTimesheet,label:e.$t("time.create_timesheet"),onClick:l.onClickCreateTimesheet},null,8,["disabled","label","onClick"])):(0,a.createCommentVNode)("",!0),l.canEditTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,"display-type":"ghost",label:e.$t("general.edit"),onClick:l.onClickEdit},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),l.canSubmitTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,"display-type":"secondary",label:e.$t("general.submit"),onClick:l.onClickSubmit},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","columns","records","timesheet-id","subtotal"]),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1)),e.timesheetId?((0,a.openBlock)(),(0,a.createBlock)(u,{key:e.timesheetId,"timesheet-id":e.timesheetId},null,8,["timesheet-id"])):(0,a.createCommentVNode)("",!0)])}const oN={class:"XHRM-timesheet-header"},aN={class:"XHRM-timesheet-header--title"},lN={class:"XHRM-timesheet-header--options"},nN={key:0,class:"XHRM-timesheet-loader"},iN={key:1,class:"XHRM-timesheet-body-message"},rN={key:2,class:"XHRM-timesheet-body"},sN={class:"XHRM-timesheet-table-header"},dN={class:"XHRM-timesheet-table-header-row"},cN={class:"XHRM-timesheet-table-header-cell"},uN={class:"--day"},mN={key:0,class:"XHRM-timesheet-table-header-cell --center --freeze-right"},pN={class:"XHRM-timesheet-table-body"},hN={key:1},gN={class:"XHRM-timesheet-table-body-cell"},vN={key:1},fN={key:1},yN={key:0,class:"XHRM-timesheet-table-body-cell --center --freeze-right --highlight"},CN={key:1,class:"XHRM-timesheet-table-body-cell --flex"},VN={key:0,class:"XHRM-timesheet-table-body-row --total"},bN={class:"XHRM-timesheet-table-body-cell --freeze-left --highlight"},wN={class:"XHRM-timesheet-table-body-cell --center --freeze-right --highlight-2"},xN={key:1,class:"XHRM-timesheet-table-body-row"},NN={class:"XHRM-timesheet-table-body-cell --flex"},kN={key:2,class:"XHRM-timesheet-table-body-row"},_N={colspan:"9",class:"XHRM-timesheet-table-body-cell"},SN={class:"XHRM-timesheet-footer"},DN={class:"XHRM-timesheet-footer--title"},$N={class:"XHRM-timesheet-footer--options"};function MN(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-loading-spinner"),s=(0,a.resolveComponent)("oxd-alert"),d=(0,a.resolveComponent)("project-autocomplete"),c=(0,a.resolveComponent)("activity-dropdown"),u=(0,a.resolveComponent)("oxd-icon-button"),m=(0,a.resolveComponent)("oxd-input-field"),p=(0,a.resolveComponent)("oxd-text"),h=(0,a.resolveComponent)("timesheet-comment-modal"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createBlock)(g,{class:"XHRM-paper-container"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",oN,[(0,a.createElementVNode)("div",aN,[(0,a.renderSlot)(e.$slots,"header-title",{},void 0,!0)]),(0,a.createElementVNode)("div",lN,[(0,a.renderSlot)(e.$slots,"header-options",{},void 0,!0)])]),o.loading?((0,a.openBlock)(),(0,a.createElementBlock)("div",nN,[(0,a.createVNode)(r)])):o.loading||o.columns?((0,a.openBlock)(),(0,a.createElementBlock)("div",rN,[(0,a.createElementVNode)("table",{class:(0,a.normalizeClass)(i.tableClasses)},[(0,a.createElementVNode)("thead",sN,[(0,a.createElementVNode)("tr",dN,[(0,a.createElementVNode)("th",{class:(0,a.normalizeClass)(i.fixedColumnClasses)},(0,a.toDisplayString)(e.$t("time.project")),3),(0,a.createElementVNode)("th",cN,(0,a.toDisplayString)(e.$t("time.activity")),1),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.daysOfWeek,e=>((0,a.openBlock)(),(0,a.createElementBlock)("th",{key:e.id,class:"XHRM-timesheet-table-header-cell --center"},[(0,a.createElementVNode)("span",uN,(0,a.toDisplayString)(e.day),1),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.title),1)]))),128)),o.editable?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("th",mN,(0,a.toDisplayString)(e.$t("general.total")),1))])]),(0,a.createElementVNode)("tbody",pN,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.records,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:e,class:"XHRM-timesheet-table-body-row"},[(0,a.createElementVNode)("td",{class:(0,a.normalizeClass)(i.fixedCellClasses)},[o.editable?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"only-allowed":!1,rules:n.rules.project,"model-value":i.getProject(e),"onUpdate:modelValue":e=>i.updateProject(e,t)},null,8,["rules","model-value","onUpdate:modelValue"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",hN,(0,a.toDisplayString)(e.project?`${e.customer.name} - ${e.project.name}`:""),1))],2),(0,a.createElementVNode)("td",gN,[o.editable?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,rules:n.rules.activity,"project-id":e.project&&e.project.id,"model-value":i.getActivity(e.activity),"onUpdate:modelValue":e=>i.updateActivity(e,t)},null,8,["rules","project-id","model-value","onUpdate:modelValue"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",vN,(0,a.toDisplayString)(e.activity&&e.activity.name),1))]),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.columns,(l,n)=>((0,a.openBlock)(),(0,a.createElementBlock)("td",{key:`${e.project}_${e.activity}_${n}`,class:(0,a.normalizeClass)({"XHRM-timesheet-table-body-cell":!0,"--center":!0,"--duration-input":o.editable,"--highlight-3":!o.editable&&l.workday})},[(0,a.withDirectives)((0,a.createVNode)(u,{"display-type":"secondary",class:"XHRM-timesheet-icon-comment",name:i.getCommentIcon(e.dates[n]),onMousedown:o=>i.viewComment(e,e.dates[n],t,n)},null,8,["name","onMousedown"]),[[a.vShow,i.isCommentVisible(e.dates[n],t,n)]]),o.editable?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,autocomplete:"off",rules:i.validateDuration(n),"model-value":i.getDuration(e.dates[n]),onBlur:i.onDurationBlur,onFocus:e=>i.onDurationFocus(t,n),"onUpdate:modelValue":e=>i.updateTime(e,t,n)},null,8,["rules","model-value","onBlur","onFocus","onUpdate:modelValue"])):((0,a.openBlock)(),(0,a.createElementBlock)("span",fN,(0,a.toDisplayString)(i.getDuration(e.dates[n])??"00:00"),1))],2))),128)),o.editable?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("td",yN,(0,a.toDisplayString)(e.total.label),1)),o.editable?((0,a.openBlock)(),(0,a.createElementBlock)("td",CN,[(0,a.createVNode)(u,{name:"trash",class:"XHRM-timesheet-icon",onClick:e=>i.deleteRow(t)},null,8,["onClick"])])):(0,a.createCommentVNode)("",!0)]))),128)),!o.editable&&o.records.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("tr",VN,[(0,a.createElementVNode)("td",bN,(0,a.toDisplayString)(e.$t("general.total")),1),t[0]||(t[0]=(0,a.createElementVNode)("td",null,null,-1)),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.columns,e=>((0,a.openBlock)(),(0,a.createElementBlock)("td",{key:`total-${e}`,class:"XHRM-timesheet-table-body-cell --center"},(0,a.toDisplayString)(e.total.label),1))),128)),(0,a.createElementVNode)("td",wN,(0,a.toDisplayString)(o.subtotal),1)])):(0,a.createCommentVNode)("",!0),o.editable?((0,a.openBlock)(),(0,a.createElementBlock)("tr",xN,[(0,a.createElementVNode)("td",NN,[(0,a.createVNode)(u,{name:"plus",class:"XHRM-timesheet-icon",onClick:i.addRow},null,8,["onClick"]),(0,a.createVNode)(p,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.add_row")),1)]),_:1})])])):(0,a.createCommentVNode)("",!0),0===o.records.length?((0,a.openBlock)(),(0,a.createElementBlock)("tr",kN,[(0,a.createElementVNode)("td",_N,(0,a.toDisplayString)(e.$t("general.no_records_found")),1)])):(0,a.createCommentVNode)("",!0)])],2)])):((0,a.openBlock)(),(0,a.createElementBlock)("div",iN,[(0,a.createVNode)(s,{type:"warn",show:!0,message:e.$t("time.no_timesheets_found")},null,8,["message"])])),(0,a.createElementVNode)("div",SN,[(0,a.createElementVNode)("div",DN,[(0,a.renderSlot)(e.$slots,"footer-title",{},void 0,!0)]),(0,a.createElementVNode)("div",$N,[(0,a.renderSlot)(e.$slots,"footer-options",{},void 0,!0)])]),n.showCommentModal?((0,a.openBlock)(),(0,a.createBlock)(h,{key:3,editable:o.editable,data:n.commentModalState,"timesheet-id":o.timesheetId,onClose:i.onCommentModalClose},null,8,["editable","data","timesheet-id","onClose"])):(0,a.createCommentVNode)("",!0)]),_:3})}function EN(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",options:l.options},null,8,["options"])}var RN={name:"ActivityDropdown",props:{projectId:{type:Number,required:!1,default:null}},setup(e){const t=(0,a.ref)([]),o=new H(window.appGlobal.baseUrl,"");return(0,a.watchEffect)(async()=>{e.projectId?o.request({method:"GET",url:`/api/v2/time/project/${e.projectId}/activities`,params:{limit:0}}).then(({data:e})=>{t.value=e.data.map(e=>({id:e.id,label:e.name,isDeleted:e.deleted}))}):t.value=[]}),{options:t}}};const TN=(0,i.A)(RN,[["render",EN],["__scopeId","data-v-4e60b894"]]);var BN=TN;function IN(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",clear:!1,label:e.$t("time.project"),"create-options":i.loadProjects},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var AN={name:"ProjectAutocomplete",props:{onlyAllowed:{type:Boolean,required:!1,default:!0},excludeProjectIds:{type:Array,required:!1,default:()=>[]},excludeCustomerName:{type:Boolean,default:!1}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/projects");return{http:e}},methods:{async loadProjects(e){return new Promise(t=>{if(e.trim()){const o={name:this.excludeCustomerName?e.trim():void 0,onlyAllowed:this.onlyAllowed,model:"detailed",excludeProjectIds:this.excludeProjectIds.length>0?this.excludeProjectIds:void 0,customerOrProjectName:this.excludeCustomerName?void 0:e.trim()};this.http.getAll(o).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:this.excludeCustomerName?e.name:`${e.customer?.name} - ${e.name}`,_customer:e.customer})))})}else t([])})}}};const HN=(0,i.A)(AN,[["render",IN],["__scopeId","data-v-5345ba21"]]);var XN=HN;const UN={class:"XHRM-modal-header"};function LN(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{style:{width:"90%",maxWidth:"450px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",UN,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.comment")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:2,class:"XHRM-timesheet-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-timesheet-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.project"))+": ",1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-timesheet-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.projectName),1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-timesheet-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.activity"))+": ",1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-timesheet-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.data.activity.name),1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-timesheet-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.date"))+": ",1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-timesheet-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.commentDate),1)]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.comment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.comment=e),type:"textarea",placeholder:e.$t("general.comment_here"),rules:n.rules.comment,disabled:!o.editable},null,8,["modelValue","placeholder","rules","disabled"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.withDirectives)((0,a.createVNode)(p,null,null,512),[[a.vShow,o.editable]])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}var PN={name:"TimesheetCommentModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,required:!0},editable:{type:Boolean,required:!0},timesheetId:{type:Number,required:!0}},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/timesheets"),{locale:t}=Ae(),{jsDateFormat:o}=F();return{http:e,locale:t,jsDateFormat:o}},data(){return{isLoading:!1,comment:null,rules:{comment:[Wt(2e3)]}}},computed:{projectName(){const{project:e,customer:t}=this.data;return e?.label?e.label:`${t?.name} - ${e?.name}`},commentDate(){const{date:e}=this.data;return e?ge(he(e),this.jsDateFormat,{locale:this.locale}):null}},beforeMount(){this.data?.id&&(this.isLoading=!0,this.http.request({method:"GET",url:`/api/v2/time/timesheets/${this.timesheetId}/entries/${this.data.id}/comment`}).then(e=>{const{data:t}=e.data;this.comment=t?.comment}).finally(()=>{this.isLoading=!1}))},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",url:`/api/v2/time/timesheets/${this.timesheetId}/entries/comment`,data:{date:this.data.date,comment:this.comment,projectId:this.data.project.id,activityId:this.data.activity.id}}).then(e=>{const{data:t}=e.data;this.$toast.saveSuccess(),this.$emit("close",t)})},onCancel(){this.comment=null,this.$emit("close")}}};const qN=(0,i.A)(PN,[["render",LN],["__scopeId","data-v-2a101e80"]]);var FN=qN,zN={name:"Timesheet",components:{"oxd-alert":X.qO,"oxd-loading-spinner":X.VJ,"activity-dropdown":BN,"project-autocomplete":XN,"timesheet-comment-modal":FN},props:{records:{type:Array,default:()=>[]},columns:{type:Object,required:!1,default:()=>null},subtotal:{type:String,required:!1,default:null},editable:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},timesheetId:{type:Number,default:null}},emits:["update:records"],data(){return{focusedField:null,showCommentModal:!1,commentModalState:null,rules:{project:[$o,e=>null!==e||this.$t("time.select_a_project")],activity:[e=>null!==e||this.$t("time.select_an_activity"),e=>this.records.filter(t=>t.activity?.id===e?.id).length<2||this.$t("time.duplicate_record")]}}},computed:{days(){return this.columns?Object.keys(this.columns):[]},dailyTotals(){const e={};for(const t in this.columns)e[t]=this.records.reduce((e,o)=>{const a=ke(o.dates[t]?.duration);return a>0?e+a:e},0);return e},daysOfWeek(){const e=[this.$t("general.sun"),this.$t("general.mon"),this.$t("general.tue"),this.$t("general.wed"),this.$t("general.thu"),this.$t("general.fri"),this.$t("general.sat")];return this.days.map(t=>{const o=he(t,"yyyy-MM-dd");return{id:o.valueOf(),day:o.getDate(),title:e[o.getDay()]}})},tableClasses(){return{"XHRM-timesheet-table":!0,"--editable":this.editable}},fixedColumnClasses(){return{"XHRM-timesheet-table-header-cell":!0,"--freeze-left":!this.editable}},fixedCellClasses(){return{"XHRM-timesheet-table-body-cell":!0,"--freeze-left":!this.editable}}},methods:{deleteRow(e){const t=this.records.filter((t,o)=>o!==e);this.syncRecords(t),this.$nextTick().then(()=>{0===t.length&&this.addRow()})},addRow(){const e=[...this.records,{project:null,activity:null,dates:{}}];this.syncRecords(e)},updateTime(e,t,o){const a=this.records.map((a,l)=>{if(l===t){const t={[o]:{date:o,duration:e,id:a.dates[o]?.id,comment:a.dates[o]?.comment}};a.dates={...a.dates,...t}}return a});this.syncRecords(a)},updateComment(e,t,o,a){const l=this.records.map((l,n)=>{if(n===o){const o={[a]:{id:e,date:a,comment:t,duration:l.dates[a]?.duration}};l.dates={...l.dates,...o}}return l});this.syncRecords(l)},updateProject(e,t){const o=this.records.map((o,a)=>(a===t&&(o.project=e||null,o.customer=e?._customer?e._customer:null),o));this.updateActivity(null,t),this.syncRecords(o)},updateActivity(e,t){const o=this.records.map((o,a)=>(a===t&&(o.activity=e?{id:e.id,name:e.label}:null),o));this.syncRecords(o)},syncRecords(e){this.editable&&this.$emit("update:records",e)},viewComment(e,t,o,a){e.project?.id&&e.activity?.id?(this.commentModalState={date:a,index:o,id:t?.id,project:e.project,activity:e.activity,customer:e.customer},this.showCommentModal=!0):this.$toast.warn({title:this.$t("general.warning"),message:this.$t("time.select_a_project_and_an_activity")})},onCommentModalClose(e){if(e){const{id:t,comment:o}=e,{index:a,date:l}=this.commentModalState;this.updateComment(t,o,a,l)}this.showCommentModal=!1,this.commentModalState=null},getProject(e){const{project:t,customer:o}=e;return t&&t.label?t:t&&o?{id:t.id,label:`${o.name} - ${t.name}`}:null},getActivity(e){return e?{id:e.id,label:e.name}:null},getDuration(e){return e?.duration?e.duration:null},getCommentIcon(e){return e?.comment?"chat-dots-fill":"chat-dots"},isCommentVisible(e,t,o){return!!e?.comment||!!this.editable&&(this.focusedField&&this.focusedField.index===t&&this.focusedField.date===o)},onDurationFocus(e,t){this.focusedField={index:e,date:t}},onDurationBlur(){this.focusedField=null},validateDuration(e){const t=e=>""===e||null===e||ke(e)>=0||this.$t("time.should_be_less_than_24_and_in_hh_mm_or_decimal_format"),o=()=>!(this.dailyTotals[e]>86400)||this.$t("time.total_should_be_less_than_24_hours");return[t,o]}}};const jN=(0,i.A)(zN,[["render",MN],["__scopeId","data-v-055af80e"]]);var ON=jN;function GN(e){const t=(0,a.reactive)({isLoading:!1,employee:null,timesheet:null,timesheetId:null,timesheetRecords:[],timesheetStatus:null,timesheetColumns:null,timesheetSubtotal:null,timesheetAllowedActions:[],date:null}),o=(t,o)=>e.request({method:"GET",url:"/api/v2/time/timesheets/default",params:{date:t,empNumber:o}}),l=(t,o,a,l)=>e.request({method:"PUT",url:l?`/api/v2/time/employees/${l}/timesheets/${t}`:`/api/v2/time/timesheets/${t}`,data:{action:o,comment:a||void 0}}),n=(t,o)=>new Promise(a=>{e.request({method:"GET",url:o?`/api/v2/time/employees/timesheets/${t}/entries`:`/api/v2/time/timesheets/${t}/entries`}).then(e=>{const{data:t,meta:o}=e.data,{timesheet:l,allowedActions:n}=o;a({data:t,meta:o,timesheet:l,allowedActions:n})})}),i=(t,o,a)=>e.request({method:"PUT",url:a?`/api/v2/time/employees/timesheets/${t}/entries`:`/api/v2/time/timesheets/${t}/entries`,data:{...o}});return{state:t,fetchTimesheet:o,updateTimesheet:l,fetchTimesheetEntries:n,updateTimesheetEntries:i}}function QN(e,t,o){const{state:l,fetchTimesheet:n,updateTimesheet:i,fetchTimesheetEntries:r}=GN(e),{noRecordsFound:s,success:d}=_t(),{$t:c}=Ie(),{jsDateFormat:u}=F(),{locale:m}=Ae();l.date=t||ge(pe(),"yyyy-MM-dd");const p=e=>{e&&null===he(e)||(l.isLoading=!0,n(e,o).then(e=>{const{data:t}=e.data;return l.timesheet=t,l.timesheetId=t.id,t.id?r(t.id,void 0!==o):null}).then(e=>{if(null!==e){const{data:t,meta:o,timesheet:a,allowedActions:n}=e;l.timesheetRecords=t,l.employee=o.employee,l.timesheetColumns=o.columns,l.timesheetSubtotal=o.sum.label,l.timesheetStatus=a.status.name,l.timesheetAllowedActions=n,0===t.length&&s()}else l.employee=null,l.timesheetRecords=[],l.timesheetColumns=null,l.timesheetStatus=null,l.timesheetSubtotal=null,l.timesheetAllowedActions=[]}).finally(()=>{l.isLoading=!1}))};(0,a.watchEffect)(async()=>l.date&&p(l.date));const h=()=>{const e=he(String(l.date),"yyyy-MM-dd")??pe();e.setDate(e.getDate()-7),l.date=ge(e,"yyyy-MM-dd")},g=()=>{const e=he(String(l.date),"yyyy-MM-dd")??pe();e.setDate(e.getDate()+7),l.date=ge(e,"yyyy-MM-dd")},v=()=>{l.timesheetId&&I("/time/editTimesheet/{id}",{id:l.timesheetId})},f=()=>{l.timesheetId&&(l.isLoading=!0,i(l.timesheetId,"SUBMIT",null,o).then(()=>{d({title:c("general.success"),message:c("time.timesheet_submitted")}),l.timesheetId=null,p(l.date)}))},y=()=>{l.timesheetId&&(l.isLoading=!0,i(l.timesheetId,"RESET",null,o).then(()=>{d({title:c("general.success"),message:c("time.timesheet_reset")}),l.timesheetId=null,p(l.date)}))},C=e=>{l.timesheetId&&(l.isLoading=!0,i(l.timesheetId,"APPROVE",e,o).then(()=>{d({title:c("general.success"),message:c("time.timesheet_approved")}),l.timesheetId=null,p(l.date)}))},V=e=>{l.timesheetId&&(l.isLoading=!0,i(l.timesheetId,"REJECT",e,o).then(()=>{d({title:c("general.success"),message:c("time.timesheet_rejected")}),l.timesheetId=null,p(l.date)}))},b=()=>{l.isLoading=!0,e.request({method:"POST",url:o?`/api/v2/time/employees/${o}/timesheets`:"/api/v2/time/timesheets",data:{date:l.date}}).then(()=>{d({title:c("general.success"),message:c("time.timesheet_successfully_created")}),p(l.date)})},w=(0,a.computed)(()=>!l.isLoading&&!l.timesheetId),x=(0,a.computed)(()=>l.timesheetAllowedActions.find(e=>"SUBMIT"===e.action)),N=(0,a.computed)(()=>l.timesheetAllowedActions.find(e=>"APPROVE"===e.action)),k=(0,a.computed)(()=>l.timesheetAllowedActions.find(e=>"REJECT"===e.action)),_=(0,a.computed)(()=>l.timesheetAllowedActions.find(e=>"RESET"===e.action)),S=(0,a.computed)(()=>l.timesheetAllowedActions.find(e=>"MODIFY"===e.action)),D=(0,a.computed)(()=>{const e=he(String(l.date),"yyyy-MM-dd")??pe();return e>pe()}),$=(0,a.computed)(()=>{const e=he(l.timesheet?.startDate||""),t=he(l.timesheet?.endDate||"");return e&&t?`${ge(e,u,{locale:m})} ${c("general.to").toLowerCase()} ${ge(t,u,{locale:m})}`:null});return{state:l,onClickEdit:v,onClickNext:g,onClickReset:y,onClickSubmit:f,onClickReject:V,onClickApprove:C,onClickPrevious:h,timesheetPeriod:$,canEditTimesheet:S,canResetTimesheet:_,canSubmitTimesheet:x,canRejectTimesheet:k,canCreateTimesheet:D,canApproveTimesheet:N,showCreateTimesheet:w,onClickCreateTimesheet:b}}const KN={class:"XHRM-timeperiod-picker"};function WN(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-icon-button"),d=(0,a.resolveComponent)("date-input");return(0,a.openBlock)(),(0,a.createElementBlock)("div",KN,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-timeperiod-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.timesheet_period")),1)]),_:1}),(0,a.createVNode)(s,{class:"XHRM-timeperiod-icon --prev",name:"chevron-left",onClick:t[0]||(t[0]=t=>e.$emit("previous",t))}),(0,a.createVNode)(d,(0,a.normalizeProps)((0,a.guardReactiveProps)(e.$attrs)),null,16),(0,a.createVNode)(s,{class:"XHRM-timeperiod-icon --next",name:"chevron-right",onClick:t[1]||(t[1]=t=>e.$emit("next",t))})])}var JN={name:"TimesheetPeriod",inheritAttrs:!1,emits:["previous","next"]};const YN=(0,i.A)(JN,[["render",WN],["__scopeId","data-v-63531e24"]]);var ZN=YN;const ek={key:0,class:"XHRM-paper-container"},tk={class:"XHRM-header-container"},ok={class:"XHRM-container"},ak={class:"XHRM-bottom-container"},lk={key:1};function nk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-card-table"),d=(0,a.resolveComponent)("oxd-pagination");return l.total>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",ek,[(0,a.createElementVNode)("div",tk,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.actions_performed_on_the_timesheet")),1)]),_:1})]),(0,a.createElementVNode)("div",ok,[(0,a.createVNode)(s,{headers:n.headers,items:l.items?.data,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","items","loading"])]),(0,a.createElementVNode)("div",ak,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",lk))}var ik={name:"TimesheetActions",props:{timesheetId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/time/timesheets/${e.timesheetId}/action-logs`),{$t:o}=Ie(),{jsDateFormat:a}=F(),{locale:l}=Ae(),n=e=>e.map(e=>{let t,n=e.action?.label;const i=e.performedEmployee?.firstName,r=e.performedEmployee?.lastName;switch(n){case"Submitted":n=o("time.submitted");break;case"Rejected":n=o("leave.rejected");break;case"Not Submitted":n=o("time.not_submitted");break;case"Approved":n=o("time.approved");break}return t=i&&r?`${i} ${r}`:o("general.purged_employee"),e.performedEmployee?.terminationId&&(t+=` (${o("general.past_employee")})`),{id:e.id,action:n,date:ge(he(e.date),a,{locale:l}),comment:e.comment,performedBy:t}}),{showPaginator:i,currentPage:r,total:s,pages:d,pageSize:c,response:u,isLoading:m,execQuery:p}=Et(t,{toastNoRecords:!1,normalizer:n});return{http:t,showPaginator:i,currentPage:r,isLoading:m,total:s,pages:d,pageSize:c,execQuery:p,items:u}},data(){return{headers:[{name:"action",slot:"title",title:this.$t("general.actions"),style:{flex:1}},{name:"performedBy",title:this.$t("general.performed_by"),style:{flex:1}},{name:"date",title:this.$t("general.date"),style:{flex:1}},{name:"comment",cellType:"oxd-table-cell-truncate",title:this.$t("general.comment"),style:{flex:1}}]}}};const rk=(0,i.A)(ik,[["render",nk]]);var sk=rk,dk={components:{timesheet:ON,"timesheet-period":ZN,"timesheet-actions":sk},props:{startDate:{type:String,required:!1,default:null}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/time/timesheets"),{state:o,onClickEdit:l,onClickNext:n,onClickSubmit:i,onClickPrevious:r,timesheetPeriod:s,canEditTimesheet:d,canSubmitTimesheet:c,canCreateTimesheet:u,showCreateTimesheet:m,onClickCreateTimesheet:p}=QN(t,e.startDate);return{onClickEdit:l,onClickNext:n,onClickSubmit:i,onClickPrevious:r,...(0,a.toRefs)(o),timesheetPeriod:s,canEditTimesheet:d,canSubmitTimesheet:c,canCreateTimesheet:u,showCreateTimesheet:m,onClickCreateTimesheet:p}},data(){return{statuses:[{id:1,label:this.$t("time.submitted"),name:"Submitted"},{id:2,label:this.$t("leave.rejected"),name:"Rejected"},{id:3,label:this.$t("time.not_submitted"),name:"Not Submitted"},{id:4,label:this.$t("time.approved"),name:"Approved"}]}},computed:{myTimesheetStatus(){return this.statuses.find(e=>e.name===this.timesheetStatus)?.label||null}}};const ck=(0,i.A)(dk,[["render",tN]]);var uk=ck;const mk={class:"XHRM-background-container"};function pk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("timesheet");return(0,a.openBlock)(),(0,a.createElementBlock)("div",mk,[(0,a.createVNode)(d,{records:e.timesheetRecords,"onUpdate:records":t[0]||(t[0]=t=>e.timesheetRecords=t),editable:!0,loading:e.isLoading,"timesheet-id":o.timesheetId,columns:e.timesheetColumns,onSubmitValid:l.onSave},{"header-title":(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.title),1)]),_:1})]),"header-options":(0,a.withCtx)(()=>[i.timesheetDateRange?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,tag:"p",class:"XHRM-timeperiod-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.timesheet_period")),1)]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.timesheetDateRange),1)]),_:1})]),"footer-options":(0,a.withCtx)(()=>[(0,a.createVNode)(s,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:l.onClickCancel},null,8,["label","onClick"]),(0,a.createVNode)(s,{"display-type":"ghost",label:e.$t("general.reset"),onClick:l.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(s,{type:"submit","display-type":"secondary",label:e.$t("general.save")},null,8,["label"])]),_:1},8,["records","loading","timesheet-id","columns","onSubmitValid"])])}var hk={components:{timesheet:ON},props:{myTimesheet:{type:Boolean,default:!1},timesheetId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/time/timesheets");t.setIgnorePath("/api/v2/time/timesheets/[0-9]+/entries");let o=[];const{saveSuccess:l}=_t(),{state:n,fetchTimesheetEntries:i,updateTimesheetEntries:r}=GN(t),{jsDateFormat:s}=F(),{locale:d}=Ae(),{$tEmpName:c}=Ma(),u=()=>{n.isLoading=!0,o=[],n.timesheetRecords=[],i(e.timesheetId,!e.myTimesheet).then(e=>{const{data:t,meta:a,timesheet:l,allowedActions:i}=e;n.timesheet=l,n.employee=a.employee,n.timesheetColumns=a.columns,n.timesheetSubtotal=a.sum.label,n.timesheetStatus=l.status.name,n.timesheetAllowedActions=i,t.length>0?(n.timesheetRecords=t,o=JSON.parse(JSON.stringify(t))):(n.timesheetRecords.push({project:null,activity:null,dates:{}}),o.push({project:null,activity:null,dates:{}})),n.isLoading=!1})},m=()=>u(),p=()=>{e.myTimesheet?I("/time/viewMyTimesheet",{},{startDate:n.timesheet.startDate}):I("/time/viewTimesheet/employeeId/{id}",{id:n.employee?.empNumber},{startDate:n.timesheet.startDate})},h=()=>{n.isLoading=!0;const t={entries:n.timesheetRecords.map(e=>{const t={};for(const o in e.dates){const a=ke(e.dates[o].duration);t[o]={duration:a>0?Ne(a):"00:00"}}return{projectId:e.project.id,activityId:e.activity.id,dates:t}}),deletedEntries:o.filter(e=>!!e.project&&n.timesheetRecords.findIndex(t=>t.project.id===e.project.id&&t.activity.id===e.activity.id)<0).map(e=>({projectId:e.project.id,activityId:e.activity.id}))};r(e.timesheetId,t,!e.myTimesheet).then(()=>l()).catch(()=>l()).then(()=>{p()})};return(0,a.onBeforeMount)(()=>u()),{onSave:h,onClickReset:m,onClickCancel:p,...(0,a.toRefs)(n),jsDateFormat:s,locale:d,translateEmpName:c}},computed:{title(){if(this.myTimesheet)return this.$t("time.edit_timesheet");if(this.employee){const e=this.translateEmpName(this.employee,{includeMiddle:!1,excludePastEmpTag:!1});return`${this.$t("time.edit_timesheet_for")} ${e}`}return""},timesheetDateRange(){if(!this.timesheet)return"";const e=ge(he(this.timesheet.startDate),this.jsDateFormat,{locale:this.locale}),t=ge(he(this.timesheet.endDate),this.jsDateFormat,{locale:this.locale});return`${e} - ${t}`}}};const gk=(0,i.A)(hk,[["render",pk],["__scopeId","data-v-1cc27bbc"]]);var vk=gk;const fk={class:"XHRM-background-container"},yk={class:"XHRM-paper-container"},Ck={key:0,class:"XHRM-header-container"},Vk={class:"XHRM-container"},bk={class:"XHRM-bottom-container"};function wk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("customer-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("project-autocomplete"),c=(0,a.resolveComponent)("project-admin-autocomplete"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-divider"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-table-filter"),C=(0,a.resolveComponent)("table-header"),V=(0,a.resolveComponent)("oxd-card-table"),b=(0,a.resolveComponent)("oxd-pagination"),w=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",fk,[(0,a.createVNode)(y,{"filter-title":e.$t("general.projects")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{onSubmitValid:i.filterItems,onReset:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.customer,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.customer=e),rules:n.rules.customer},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.project,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.project=e),"exclude-customer-name":!0,rules:n.rules.project},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.projectAdmin,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.projectAdmin=e),"show-delete":!1,rules:n.rules.projectAdmin},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{type:"reset","display-type":"ghost",label:e.$t("general.reset")},null,8,["label"]),(0,a.createVNode)(g,{label:e.$t("general.search")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[6]||(t[6]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",yk,[e.$can.create("time_projects")?((0,a.openBlock)(),(0,a.createElementBlock)("div",Ck,[(0,a.createVNode)(h,{"icon-name":"plus","display-type":"secondary",label:e.$t("general.add"),onClick:i.onClickAdd},null,8,["label","onClick"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(C,{selected:n.checkedItems.length,loading:l.isLoading,total:l.total,"show-divider":e.$can.create("time_projects"),onDelete:i.onClickDeleteSelected},null,8,["selected","loading","total","show-divider","onDelete"]),(0,a.createElementVNode)("div",Vk,[(0,a.createVNode)(V,{selected:n.checkedItems,"onUpdate:selected":t[3]||(t[3]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[4]||(t[4]=e=>l.sortDefinition=e),headers:i.headers,items:l.items?.data,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card",selectable:e.$can.delete("time_projects")},null,8,["selected","order","headers","items","loading","selectable"])]),(0,a.createElementVNode)("div",bk,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,current:l.currentPage,"onUpdate:current":t[5]||(t[5]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(w,{ref:"deleteDialog"},null,512)])}function xk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",clear:!1,label:e.$t("time.customer_name"),"create-options":i.loadCustomers},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var Nk={name:"CustomerAutocomplete",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/customers");return{http:e}},methods:{async loadCustomers(e){return new Promise(t=>{e.trim()?this.http.getAll({name:e.trim()}).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:e.name})))}):t([])})}}};const kk=(0,i.A)(Nk,[["render",xk]]);var _k=kk;const Sk={class:"XHRM-project-admin-input"};function Dk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-icon-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Sk,[(0,a.createVNode)(r,(0,a.mergeProps)({label:o.showDelete?null:e.$t("time.project_admin"),"api-path":"/api/v2/time/project-admins",params:{includeEmployees:o.includeEmployees}},e.$attrs),null,16,["label","params"]),o.showDelete?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,name:"trash-fill",class:"XHRM-project-delete-icon","with-container":!1,onClick:i.remove},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])}var $k={name:"ProjectAdminAutocomplete",components:{"employee-autocomplete":$a},inheritAttrs:!1,props:{showDelete:{type:Boolean,required:!0},includeEmployees:{type:String,default:"currentAndPast"}},emits:["remove"],methods:{remove(){this.$emit("remove")}}};const Mk=(0,i.A)($k,[["render",Dk],["__scopeId","data-v-fb7664f8"]]);var Ek=Mk;const Rk={customer:null,project:null,projectAdmin:null},Tk={"project.name":"ASC","customer.name":"DEFAULT","employee.lastName":"DEFAULT"};var Bk={components:{"project-autocomplete":XN,"customer-autocomplete":_k,"delete-confirmation":Xt,"project-admin-autocomplete":Ek},props:{unselectableIds:{type:Array,default:()=>[]}},setup(e){const{$t:t}=Ie(),{$tEmpName:o}=Ma(),l=a=>a.map(a=>{const l=e.unselectableIds.findIndex(e=>e==a.id);return{id:a.id,project:a.name,customer:a.customer?.deleted?a.customer?.name+t("general.deleted"):a.customer?.name,projectAdmins:a.projectAdmins?.map(e=>o(e)).join(", "),isSelectable:-1===l}}),n=(0,a.ref)({...Rk}),{sortDefinition:i,sortField:r,sortOrder:s,onSort:d}=Ut({sortDefinition:Tk}),c=(0,a.computed)(()=>({customerId:n.value.customer?.id,projectId:n.value.project?.id,empNumber:n.value.projectAdmin?.id,sortField:r.value,sortOrder:s.value,model:"detailed"})),u=new H(window.appGlobal.baseUrl,"/api/v2/time/projects"),{showPaginator:m,currentPage:p,total:h,pages:g,pageSize:v,response:f,isLoading:y,execQuery:C}=Et(u,{query:c,normalizer:l});return d(C),{http:u,showPaginator:m,currentPage:p,isLoading:y,total:h,pages:g,pageSize:v,execQuery:C,items:f,filters:n,sortDefinition:i}},data(){return{checkedItems:[],rules:{project:[$o],customer:[$o],projectAdmin:[$o]}}},computed:{headers(){const e=[{name:"customer",title:this.$t("time.customer_name"),sortField:"customer.name",style:{flex:"15%"}},{name:"project",slot:"title",title:this.$t("time.project"),sortField:"project.name",style:{flex:"15%"}},{name:"projectAdmins",title:this.$t("time.project_admins"),style:{flex:"20%"}}],t={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.$can.delete("time_projects")&&(t.cellConfig.delete={onClick:this.onClickDelete,props:{name:"trash"}}),this.$can.update("time_project_activities")&&(t.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),Object.keys(t.cellConfig).length>0&&e.push(t),e}},methods:{onClickAdd(){I("/time/saveProject")},onClickEdit(e){I("/time/saveProject/{id}",{id:e.id})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.error({title:this.$t("general.error"),message:this.$t("time.not_allowed_to_delete_projects_which_have_time_logged")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteData([e.id])})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteData(e)})},async deleteData(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()}}};const Ik=(0,i.A)(Bk,[["render",wk]]);var Ak=Ik;const Hk={class:"XHRM-background-container"},Xk={class:"XHRM-card-container"};function Uk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("customer-autocomplete"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("project-admin-autocomplete"),g=(0,a.resolveComponent)("oxd-form-row"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("add-customer-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Hk,[(0,a.createElementVNode)("div",Xk,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.add_project")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.project.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.project.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(u,{key:n.project.customer,modelValue:n.project.customer,"onUpdate:modelValue":t[1]||(t[1]=e=>n.project.customer=e),rules:n.rules.customer,label:e.$t("time.customer_name"),required:""},null,8,["modelValue","rules","label"])),(0,a.createVNode)(m,{"icon-name":"plus","display-type":"text",class:"XHRM-input-field-bottom-space",label:e.$t("time.add_customer"),onClick:i.onClickAddCustomer},null,8,["label","onClick"])]),_:1})]),_:1}),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.project.description,"onUpdate:modelValue":t[2]||(t[2]=e=>n.project.description=e),type:"textarea",label:e.$t("general.description"),rules:n.rules.description,placeholder:e.$t("general.type_description_here")},null,8,["modelValue","label","rules","placeholder"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.projectAdmins,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(h,{key:t,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,"show-delete":t>0,rules:n.rules.projectAdmin,"include-employees":"onlyCurrent",onRemove:e=>i.onRemoveAdmin(t)},null,8,["modelValue","onUpdate:modelValue","show-delete","rules","onRemove"]))),128)),n.projectAdmins.length<5?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"icon-name":"plus","display-type":"text",label:e.$t("general.add_another"),onClick:i.onAddAnother},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1})]),_:1}),t[3]||(t[3]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),n.showCustomerModal?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,onClose:i.onCustomerModalClose},null,8,["onClose"])):(0,a.createCommentVNode)("",!0)])}const Lk={class:"XHRM-modal-header"};function Pk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(g,{style:{width:"90%",maxWidth:"450px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Lk,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.add_customer")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(h,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customer.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.customer.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.customer.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.customer.description=e),type:"textarea",label:e.$t("general.description"),placeholder:"Type description here",rules:n.rules.description},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,{class:"XHRM-form-action"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(m,{"display-type":"secondary",label:e.$t("general.save"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const qk={id:"",name:"",description:""};var Fk={name:"AddCustomerModal",components:{"oxd-dialog":X.KB},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/customers");return e.setIgnorePath("/api/v2/time/validation/customer-name"),{http:e}},data(){return{isLoading:!1,customer:{...qk},rules:{name:[Kt,Wt(50),(0,X.Ld)(this.validateCustomerName,500)],description:[Wt(255)]}}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.customer.name,description:this.customer.description}).then(e=>{const{data:t}=e.data;this.$toast.saveSuccess(),this.$emit("close",t)})},onCancel(){this.$emit("close")},validateCustomerName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/time/validation/customer-name",params:{customerName:this.customer.name.trim()}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const zk=(0,i.A)(Fk,[["render",Pk]]);var jk=zk;const Ok={name:null,customer:null,description:null,projectAdminEmpNumbers:[]};var Gk={name:"ProjectSave",components:{"add-customer-modal":jk,"customer-autocomplete":_k,"project-admin-autocomplete":Ek},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/projects");return e.setIgnorePath("/api/v2/time/validation/project-name"),{http:e}},data(){return{isLoading:!1,showCustomerModal:!1,projectAdmins:[{value:null}],project:{...Ok},projectId:null,rules:{name:[Kt,Wt(50),(0,X.Ld)(this.validateProjectName,500)],description:[Wt(255)],customer:[Kt,$o],projectAdmin:[$o,e=>this.projectAdmins.filter(({value:t})=>t&&t.id===e?.id).length<2||this.$t("general.already_exists")]}}},methods:{onClickAddCustomer(){this.showCustomerModal=!0},onCustomerModalClose(e){if(void 0!==e){const{id:t,name:o}=e;this.project.customer={id:t,label:o}}this.showCustomerModal=!1},onAddAnother(){this.projectAdmins.length<5&&this.projectAdmins.push({value:null})},onRemoveAdmin(e){this.projectAdmins.splice(e,1)},onCancel(){I("/time/viewProjects")},onSave(){this.isLoading=!0,this.http.create({name:this.project.name,description:this.project.description,customerId:this.project.customer.id,projectAdminsEmpNumbers:this.projectAdmins.map(({value:e})=>e&&e.id).filter(Number)}).then(e=>(this.projectId=e.data?.data.id,this.$toast.saveSuccess())).then(()=>{I("/time/saveProject/{id}",{id:this.projectId})})},validateProjectName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/time/validation/project-name",params:{projectName:this.project.name.trim(),customerId:this.project.customer?.id}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const Qk=(0,i.A)(Gk,[["render",Uk]]);var Kk=Qk;const Wk={class:"XHRM-background-container"},Jk={class:"XHRM-card-container"};function Yk(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("customer-autocomplete"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("project-admin-autocomplete"),g=(0,a.resolveComponent)("oxd-form-row"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("activities"),b=(0,a.resolveComponent)("add-customer-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Wk,[(0,a.createElementVNode)("div",Jk,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.edit_project")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.project.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.project.name=e),label:e.$t("general.name"),rules:n.rules.name,disabled:!e.$can.update("time_projects"),required:""},null,8,["modelValue","label","rules","disabled"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(u,{key:n.project.customer,modelValue:n.project.customer,"onUpdate:modelValue":t[1]||(t[1]=e=>n.project.customer=e),label:e.$t("time.customer_name"),rules:n.rules.customer,disabled:!e.$can.update("time_projects"),required:""},null,8,["modelValue","label","rules","disabled"])),e.$can.update("time_projects")?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"icon-name":"plus","display-type":"text",class:"XHRM-input-field-bottom-space",label:e.$t("time.add_customer"),onClick:i.onClickAddCustomer},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.project.description,"onUpdate:modelValue":t[2]||(t[2]=e=>n.project.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),disabled:!e.$can.update("time_projects"),rules:n.rules.description},null,8,["modelValue","label","placeholder","disabled","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.projectAdmins,(t,o)=>((0,a.openBlock)(),(0,a.createBlock)(h,{key:o,modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,rules:n.rules.projectAdmin,"show-delete":o>0&&e.$can.update("time_projects"),disabled:!e.$can.update("time_projects"),"include-employees":"onlyCurrent",onRemove:e=>i.onRemoveAdmin(o)},null,8,["modelValue","onUpdate:modelValue","rules","show-delete","disabled","onRemove"]))),128)),n.projectAdmins.length<5&&e.$can.update("time_projects")?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"icon-name":"plus","display-type":"text",label:e.$t("general.add_another"),onClick:i.onAddAnother},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1})]),_:1}),t[3]||(t[3]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),e.$can.update("time_projects")?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(V,{"project-id":o.projectId,"unselectable-ids":o.unselectableIds},null,8,["project-id","unselectable-ids"]),n.showCustomerModal?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,onClose:i.onCustomerModalClose},null,8,["onClose"])):(0,a.createCommentVNode)("",!0)])}const Zk={class:"XHRM-paper-container"},e_={class:"XHRM-header-container"},t_={class:"XHRM-main-actions"},o_={class:"XHRM-container"},a_={class:"XHRM-bottom-container"};function l_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation"),p=(0,a.resolveComponent)("copy-activity-modal"),h=(0,a.resolveComponent)("save-activity-modal"),g=(0,a.resolveComponent)("edit-activity-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Zk,[(0,a.createElementVNode)("div",e_,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.activities")),1)]),_:1}),(0,a.createElementVNode)("div",t_,[(0,a.createVNode)(s,{label:e.$t("time.copy_from"),"display-type":"ghost",onClick:i.onClickCopyFrom},null,8,["label","onClick"]),(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{total:l.total,loading:l.isLoading,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","selected","onDelete"]),(0,a.createElementVNode)("div",o_,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",a_,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512),n.showCopyFromModal?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,"project-id":o.projectId,onClose:i.onCloseModal},null,8,["project-id","onClose"])):(0,a.createCommentVNode)("",!0),n.showSaveActivityModal?((0,a.openBlock)(),(0,a.createBlock)(h,{key:1,"project-id":o.projectId,onClose:i.onCloseModal},null,8,["project-id","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditActivityModal?((0,a.openBlock)(),(0,a.createBlock)(g,{key:2,"project-id":o.projectId,"activity-id":n.editActivityModalState,onClose:i.onCloseModal},null,8,["project-id","activity-id","onClose"])):(0,a.createCommentVNode)("",!0)])}const n_={class:"XHRM-modal-header"};function i_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("project-autocomplete"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid-item"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(C,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",n_,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.copy_activity")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.project,"onUpdate:modelValue":t[0]||(t[0]=e=>n.project=e),rules:n.rules.project,"only-allowed":!1,label:e.$t("time.project_name"),"exclude-project-ids":[o.projectId],required:""},null,8,["modelValue","rules","label","exclude-project-ids"])]),_:1}),n.activities&&n.activities.length>0?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(s),(0,a.createVNode)(p,{cols:2,class:"XHRM-activites-container"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.activities,e=>((0,a.openBlock)(),(0,a.createBlock)(m,{key:e.id},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.selectedActivities,"onUpdate:modelValue":t[1]||(t[1]=e=>n.selectedActivities=e),type:"checkbox",value:e.id,disabled:!e.unique,"option-label":e.name},null,8,["modelValue","value","disabled","option-label"])]),_:2},1024))),128))]),_:1})],64)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}var r_={name:"CopyActivityModal",components:{"oxd-dialog":X.KB,"project-autocomplete":XN},props:{projectId:{type:Number,required:!0}},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"");return{http:e}},data(){return{isLoading:!1,project:null,activities:null,selectedActivities:[],rules:{project:[Kt,$o,()=>{if(null!==this.activities&&0===this.activities.length)return this.$t("time.no_assigned_activities");if(Array.isArray(this.activities)&&0===this.selectedActivities.length){const e=this.activities.find(e=>!0===e.unique);return e?this.$t("time.no_activities_selected"):this.$t("general.already_exists")}return!0}]}}},watch:{project(e){this.activities=null,this.selectedActivities=[],e&&(this.isLoading=!0,this.http.request({method:"GET",url:`/api/v2/time/projects/${this.projectId}/activities/copy/${e.id}`,params:{limit:0}}).then(e=>{const{data:t}=e.data;this.activities=t,this.selectedActivities=Array.isArray(t)?t.filter(e=>!0===e.unique).map(e=>e.id):[],this.isLoading=!1}))}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"POST",url:`/api/v2/time/projects/${this.projectId}/activities/copy/${this.project.id}`,data:{activityIds:this.selectedActivities}}).then(()=>{this.$toast.updateSuccess(),this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const s_=(0,i.A)(r_,[["render",i_],["__scopeId","data-v-40e259aa"]]);var d_=s_;const c_={class:"XHRM-modal-header"};function u_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",c_,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.add_project_activity")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}var m_={name:"SaveActivityModal",components:{"oxd-dialog":X.KB},props:{projectId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/time/project/${e.projectId}/activities`);return{http:t}},data(){return{isLoading:!1,name:"",rules:{name:[Kt,Wt(100)]}}},beforeMount(){this.isLoading=!0,this.http.getAll({limit:0}).then(e=>{const{data:t}=e.data;t&&this.rules.name.push(e=>{const o=t.findIndex(t=>String(t.name).toLowerCase()==String(e).toLowerCase());return!(o>-1)||this.$t("general.already_exists")})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.name}).then(()=>{this.$toast.saveSuccess(),this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const p_=(0,i.A)(m_,[["render",u_]]);var h_=p_;const g_={class:"XHRM-modal-header"};function v_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("required-text"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",g_,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.edit_project_activity")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}var f_={name:"SaveActivityModal",components:{"oxd-dialog":X.KB},props:{projectId:{type:Number,required:!0},activityId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/time/project/${e.projectId}/activities`);return{http:t}},data(){return{isLoading:!1,name:"",rules:{name:[Kt,Wt(100)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.activityId).then(e=>{const{data:t}=e.data;return this.name=t.name,this.http.getAll({limit:0})}).then(e=>{const{data:t}=e.data;this.rules.name.push(e=>{const o=t.findIndex(t=>String(t.name).toLowerCase()==String(e).toLowerCase());if(o>-1){const{id:e}=t[o];return e==this.activityId||this.$t("general.already_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.activityId,{name:this.name}).then(()=>{this.$toast.updateSuccess(),this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const y_=(0,i.A)(f_,[["render",v_]]);var C_=y_,V_={name:"Activities",components:{"copy-activity-modal":d_,"save-activity-modal":h_,"edit-activity-modal":C_,"delete-confirmation":Xt},props:{projectId:{type:Number,required:!0},unselectableIds:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/time/project/${e.projectId}/activities`),o=t=>t.map(t=>{const o=e.unselectableIds.findIndex(e=>e==t.id);return{...t,isSelectable:-1===o}}),{showPaginator:a,currentPage:l,total:n,pages:i,pageSize:r,response:s,isLoading:d,execQuery:c}=Et(t,{normalizer:o});return{http:t,showPaginator:a,currentPage:l,isLoading:d,total:n,pages:i,pageSize:r,execQuery:c,items:s}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("time.activity_name"),style:{"flex-basis":"80%"}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{"flex-shrink":1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],showCopyFromModal:!1,showSaveActivityModal:!1,showEditActivityModal:!1,editActivityModalState:null}},methods:{onClickAdd(){this.showSaveActivityModal=!0},onClickEdit(e){this.editActivityModalState=e.id,this.showEditActivityModal=!0},onClickCopyFrom(){this.showCopyFromModal=!0},onCloseModal(){this.showCopyFromModal=!1,this.showSaveActivityModal=!1,this.showEditActivityModal=!1,this.resetDataTable()},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.error({title:this.$t("general.error"),message:this.$t("time.not_allowed_to_delete_project_activities_which_have_time_logged_against")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>{this.$toast.deleteSuccess(),this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const b_=(0,i.A)(V_,[["render",l_],["__scopeId","data-v-4482c44a"]]);var w_=b_;const x_={name:null,customer:{id:null,label:null},description:null,projectAdminEmpNumbers:[]};var N_={name:"ProjectEdit",components:{activities:w_,"add-customer-modal":jk,"customer-autocomplete":_k,"project-admin-autocomplete":Ek},props:{projectId:{type:Number,required:!0},unselectableIds:{type:Array,default:()=>[]}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/projects");return e.setIgnorePath("/api/v2/time/validation/project-name"),{http:e}},data(){return{isLoading:!1,projectAdmins:[{value:null}],project:{...x_},showCustomerModal:!1,rules:{name:[Kt,Wt(50)],description:[Wt(255)],customer:[Kt,$o],projectAdmin:[$o,e=>this.projectAdmins.filter(({value:t})=>t&&t.id===e?.id).length<2||this.$t("general.already_exists")]}}},beforeMount(){this.isLoading=!0;const{$tEmpName:e}=Ma();this.http.get(this.projectId,{model:"detailed"}).then(t=>{const{data:o}=t.data;this.project.name=o.name,this.project.description=o.description,this.project.customer={id:o.customer.id,label:o.customer.name},Array.isArray(o.projectAdmins)&&o.projectAdmins.length>0&&(this.projectAdmins=o.projectAdmins.map(t=>({value:{id:t.empNumber,label:e(t,{includeMiddle:!0,excludePastEmpTag:!0}),isPastEmployee:!!t.terminationId}})))}).finally(()=>{this.rules.name.push((0,X.Ld)(this.validateProjectName,500)),this.isLoading=!1})},methods:{onClickAddCustomer(){this.showCustomerModal=!0},onCustomerModalClose(e){if(void 0!==e){const{id:t,name:o}=e;this.project.customer={id:t,label:o}}this.showCustomerModal=!1},onAddAnother(){this.projectAdmins.length<5&&this.projectAdmins.push({value:null})},onRemoveAdmin(e){this.projectAdmins.splice(e,1)},onCancel(){I("/time/viewProjects")},onSave(){this.isLoading=!0,this.http.update(this.projectId,{name:this.project.name,description:this.project.description,customerId:this.project.customer.id,projectAdminsEmpNumbers:this.projectAdmins.map(({value:e})=>e&&e.id).filter(Number)}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},validateProjectName(e){return new Promise(t=>{e?this.http.request({method:"GET",url:"/api/v2/time/validation/project-name",params:{projectId:this.projectId,projectName:this.project.name.trim(),customerId:this.project.customer?.id}}).then(e=>{const{data:o}=e.data;return!0===o.valid?t(!0):t(this.$t("general.already_exists"))}):t(!0)})}}};const k_=(0,i.A)(N_,[["render",Yk]]);var __=k_;const S_={class:"XHRM-background-container"},D_={class:"XHRM-card-container"};function $_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("timesheet-pending-actions");return(0,a.openBlock)(),(0,a.createElementBlock)("div",S_,[(0,a.createElementVNode)("div",D_,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.select_employee")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{onSubmitValid:i.viewTimesheet},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employee=e),rules:n.rules.employee,params:{includeEmployees:"currentAndPast"},required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{label:e.$t("general.view")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(f)])}const M_={class:"XHRM-paper-container"},E_={class:"XHRM-header-container"},R_={class:"XHRM-container"},T_={class:"XHRM-bottom-container"};function B_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("table-header"),d=(0,a.resolveComponent)("oxd-card-table"),c=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",M_,[(0,a.createElementVNode)("div",E_,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.timesheets_pending_action")),1)]),_:1})]),(0,a.createVNode)(s,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",R_,[(0,a.createVNode)(d,{headers:n.headers,items:l.items?.data,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","items","loading"])]),(0,a.createElementVNode)("div",T_,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])}var I_={name:"TimesheetPendingActions",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/time/employees/timesheets/list"),{$t:t}=Ie(),{jsDateFormat:o}=F(),{locale:a}=Ae(),l=e=>e.map(e=>{const l=ge(he(e.startDate),o,{locale:a}),n=ge(he(e.endDate),o,{locale:a}),i=`${e.employee?.firstName} ${e.employee?.middleName} ${e.employee?.lastName}`;return e.employee?.terminationId&&t("general.past_employee"),{id:e.id,startDate:e.startDate,empNumber:e.employee.empNumber,period:`${l} - ${n}`,employee:i}}),{showPaginator:n,currentPage:i,total:r,pages:s,pageSize:d,response:c,isLoading:u,execQuery:m}=Et(e,{normalizer:l});return{http:e,showPaginator:n,currentPage:i,isLoading:u,total:r,pages:s,pageSize:d,execQuery:m,items:c}},data(){return{headers:[{name:"employee",slot:"title",title:this.$t("general.employee_name"),style:{flex:"40%"}},{name:"period",title:this.$t("time.timesheet_period"),style:{flex:"40%"}},{name:"actions",slot:"footer",title:this.$t("general.actions"),style:{flex:"20%"},cellType:"oxd-table-cell-actions",cellConfig:{view:{onClick:this.onClickView,component:"oxd-button",props:{label:this.$t("general.view"),displayType:"text",size:"medium"}}}}]}},methods:{onClickView(e){I("/time/viewTimesheet/employeeId/{empNumber}",{empNumber:e.empNumber},{startDate:e.startDate})}}};const A_=(0,i.A)(I_,[["render",B_],["__scopeId","data-v-7b3b7b4c"]]);var H_=A_,X_={components:{"employee-autocomplete":$a,"timesheet-pending-actions":H_},data(){return{employee:null,rules:{employee:[Kt,Wt(100),$o]}}},methods:{viewTimesheet(){I("/time/viewTimesheet/employeeId/{id}",{id:this.employee?.id})}}};const U_=(0,i.A)(X_,[["render",$_]]);var L_=U_;const P_={class:"XHRM-background-container"};function q_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("timesheet-period"),d=(0,a.resolveComponent)("oxd-button"),c=(0,a.resolveComponent)("timesheet"),u=(0,a.resolveComponent)("save-timesheet-action"),m=(0,a.resolveComponent)("timesheet-actions");return(0,a.openBlock)(),(0,a.createElementBlock)("div",P_,[(0,a.createVNode)(c,{loading:e.isLoading,columns:e.timesheetColumns,records:e.timesheetRecords,"timesheet-id":e.timesheetId,subtotal:e.timesheetSubtotal},{"header-title":(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.title),1)]),_:1})]),"header-options":(0,a.withCtx)(()=>[(0,a.createVNode)(s,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=t=>e.date=t),value:l.timesheetPeriod,onNext:l.onClickNext,onPrevious:l.onClickPrevious},null,8,["modelValue","value","onNext","onPrevious"])]),"footer-title":(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.status"))+": "+(0,a.toDisplayString)(i.employeeTimesheetStatus),1)]),_:1},512),[[a.vShow,e.timesheetStatus]])]),"footer-options":(0,a.withCtx)(()=>[l.showCreateTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"display-type":"secondary",disabled:l.canCreateTimesheet,label:e.$t("time.create_timesheet"),onClick:l.onClickCreateTimesheet},null,8,["disabled","label","onClick"])):(0,a.createCommentVNode)("",!0),l.canEditTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,"display-type":"ghost",label:e.$t("general.edit"),onClick:l.onClickEdit},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),l.canResetTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,"display-type":"ghost",label:e.$t("general.reset"),onClick:l.onClickReset},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),l.canSubmitTimesheet?((0,a.openBlock)(),(0,a.createBlock)(d,{key:3,"display-type":"secondary",label:e.$t("general.submit"),onClick:l.onClickSubmit},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","columns","records","timesheet-id","subtotal"]),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1)),e.timesheetId&&(l.canRejectTimesheet||l.canApproveTimesheet)?((0,a.openBlock)(),(0,a.createBlock)(u,{key:e.timesheetId,"is-loading":e.isLoading,"reject-timesheet":l.onClickReject,"approve-timesheet":l.onClickApprove,"can-reject-timesheet":!!l.canRejectTimesheet,"can-approve-timesheet":!!l.canApproveTimesheet},null,8,["is-loading","reject-timesheet","approve-timesheet","can-reject-timesheet","can-approve-timesheet"])):(0,a.createCommentVNode)("",!0),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),e.timesheetId?((0,a.openBlock)(),(0,a.createBlock)(m,{key:e.timesheetId,"timesheet-id":e.timesheetId},null,8,["timesheet-id"])):(0,a.createCommentVNode)("",!0)])}const F_={class:"XHRM-card-container"};function z_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",F_,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.timesheet_action")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,{ref:"formRef",loading:o.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.comment,"onUpdate:modelValue":t[0]||(t[0]=e=>l.comment=e),type:"textarea",placeholder:e.$t("general.type_here_message"),rules:l.rules.comment,label:e.$t("general.comment")},null,8,["modelValue","placeholder","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[o.canRejectTimesheet?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,label:e.$t("general.reject"),"display-type":"danger",onClick:l.onClickReject},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),o.canApproveTimesheet?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,label:e.$t("general.approve"),"display-type":"success",class:"XHRM-left-space",onClick:l.onClickApprove},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1},8,["loading"])])}var j_={name:"SaveTimesheetAction",props:{isLoading:{type:Boolean,required:!0},rejectTimesheet:{type:Function,required:!0},approveTimesheet:{type:Function,required:!0},canRejectTimesheet:{type:Boolean,required:!0},canApproveTimesheet:{type:Boolean,required:!0}},setup(e){const{formRef:t,invalid:o,validate:l}=Bc(),n=(0,a.ref)(""),i={comment:[Wt(250)]},r=()=>{l().then(()=>!1===o.value&&e.approveTimesheet(n.value))},s=()=>{l().then(()=>!1===o.value&&e.rejectTimesheet(n.value))};return{rules:i,comment:n,formRef:t,onClickReject:s,onClickApprove:r}}};const O_=(0,i.A)(j_,[["render",z_]]);var G_=O_,Q_={components:{timesheet:ON,"timesheet-period":ZN,"timesheet-actions":sk,"save-timesheet-action":G_},props:{employee:{type:Object,required:!0},startDate:{type:String,required:!1,default:null}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/time/timesheets"),{state:o,onClickEdit:l,onClickNext:n,onClickReset:i,onClickSubmit:r,onClickReject:s,onClickApprove:d,onClickPrevious:c,timesheetPeriod:u,canEditTimesheet:m,canResetTimesheet:p,canSubmitTimesheet:h,canRejectTimesheet:g,canCreateTimesheet:v,canApproveTimesheet:f,showCreateTimesheet:y,onClickCreateTimesheet:C}=QN(t,e.startDate,e.employee.empNumber),{employee:V,...b}=(0,a.toRefs)(o),{$tEmpName:w}=Ma();return{...b,onClickEdit:l,onClickNext:n,onClickReset:i,onClickSubmit:r,onClickReject:s,onClickApprove:d,onClickPrevious:c,timesheetPeriod:u,canEditTimesheet:m,canResetTimesheet:p,canSubmitTimesheet:h,canRejectTimesheet:g,canCreateTimesheet:v,canApproveTimesheet:f,showCreateTimesheet:y,onClickCreateTimesheet:C,translateEmpName:w}},data(){return{statuses:[{id:1,label:this.$t("time.submitted"),name:"Submitted"},{id:2,label:this.$t("leave.rejected"),name:"Rejected"},{id:3,label:this.$t("time.not_submitted"),name:"Not Submitted"},{id:4,label:this.$t("time.approved"),name:"Approved"}]}},computed:{title(){const e=this.translateEmpName(this.employee,{includeMiddle:!1,excludePastEmpTag:!1});return`${this.$t("time.timesheet_for")} ${e}`},employeeTimesheetStatus(){return this.statuses.find(e=>e.name===this.timesheetStatus)?.label||null}}};const K_=(0,i.A)(Q_,[["render",q_]]);var W_=K_;function J_(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("project-autocomplete"),m=(0,a.resolveComponent)("activity-dropdown"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("oxd-text"),g=(0,a.resolveComponent)("oxd-switch-input"),v=(0,a.resolveComponent)("oxd-divider"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form"),b=(0,a.resolveComponent)("oxd-table-filter"),w=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(w,{module:"time",name:"employee",filters:l.serializedFilters,"column-count":3},{default:(0,a.withCtx)(({generateReport:o})=>[(0,a.createVNode)(b,{"filter-title":e.$t("time.employee_report")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(V,{onSubmitValid:o},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:l.rules.employee,params:{includeEmployees:"currentAndPast"},required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.project,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.project=e),rules:l.rules.project,label:e.$t("time.project_name"),"only-allowed":!1},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.activity,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.activity=e),label:e.$t("time.activity_name"),"project-id":l.filters.project&&l.filters.project.id},null,8,["modelValue","label","project-id"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.fromDate=e),placeholder:e.$t("general.from"),rules:l.rules.fromDate,label:e.$t("time.project_date_range")},null,8,["modelValue","placeholder","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.toDate=e),label:"",placeholder:e.$t("general.to"),rules:l.rules.toDate},null,8,["modelValue","placeholder","rules"])]),_:1}),(0,a.createVNode)(s,{class:"XHRM-switch-filter --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{class:"XHRM-switch-filter-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.only_include_approved_timesheets")),1)]),_:1}),(0,a.createVNode)(g,{modelValue:l.filters.timesheetState,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.timesheetState=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{type:"submit","display-type":"secondary",label:e.$t("general.view")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:2},1032,["filter-title"]),t[6]||(t[6]=(0,a.createElementVNode)("br",null,null,-1))]),footer:(0,a.withCtx)(({data:t})=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(t.meta?t.meta.sum.label:"0.00"),1)]),_:1},8,["filters"])}const Y_={employee:null,project:null,activity:null,fromDate:null,toDate:null,timesheetState:!1};var Z_={components:{"reports-table":Ww,"oxd-switch-input":X.Ay,"activity-dropdown":BN,"project-autocomplete":XN,"employee-autocomplete":$a},setup(){const e=(0,a.ref)({...Y_}),{$t:t}=Ie(),{userDateFormat:o}=F(),l={project:[$o],employee:[Kt,Wt(100),$o],fromDate:[Jt(o),yo(()=>e.value.toDate,t("general.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(o),so(()=>e.value.fromDate,t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]},n=(0,a.computed)(()=>({empNumber:e.value.employee?.id,projectId:e.value.project?.id,activityId:e.value.activity?.id,fromDate:e.value.fromDate,toDate:e.value.toDate,timesheetState:e.value.timesheetState?"onlyApproved":"all"}));return{rules:l,filters:e,serializedFilters:n}}};const eS=(0,i.A)(Z_,[["render",J_],["__scopeId","data-v-0f597c03"]]);var tS=eS;function oS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("project-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("date-input"),m=(0,a.resolveComponent)("oxd-text"),p=(0,a.resolveComponent)("oxd-switch-input"),h=(0,a.resolveComponent)("oxd-divider"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("oxd-table-filter"),V=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(V,{module:"time",name:"project",prefetch:null!==o.project,filters:l.serializedFilters,"column-count":2},{default:(0,a.withCtx)(({generateReport:o})=>[(0,a.createVNode)(C,{"filter-title":e.$t("time.project_report")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{onSubmitValid:o},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.project,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.project=e),rules:l.rules.project,label:e.$t("time.project_name"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.fromDate=e),placeholder:e.$t("general.from"),rules:l.rules.fromDate,label:e.$t("time.project_date_range")},null,8,["modelValue","placeholder","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.toDate=e),label:"",placeholder:e.$t("general.to"),rules:l.rules.toDate},null,8,["modelValue","placeholder","rules"])]),_:1}),(0,a.createVNode)(s,{class:"XHRM-switch-filter --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{class:"XHRM-switch-filter-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.only_include_approved_timesheets")),1)]),_:1}),(0,a.createVNode)(p,{modelValue:l.filters.includeTimesheet,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.includeTimesheet=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"submit","display-type":"secondary",label:e.$t("general.view")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:2},1032,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1))]),footer:(0,a.withCtx)(({data:t})=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(t.meta?t.meta.sum.label:"0.00"),1)]),_:1},8,["prefetch","filters"])}const aS={project:null,fromDate:null,toDate:null,includeTimesheet:!1};var lS={components:{"reports-table":Ww,"oxd-switch-input":X.Ay,"project-autocomplete":XN},props:{project:{type:Object,required:!1,default:null},fromDate:{type:String,required:!1,default:null},toDate:{type:String,required:!1,default:null},includeTimesheet:{type:Boolean,default:!1}},setup(e){const t=(0,a.ref)({...aS,fromDate:e.fromDate,toDate:e.toDate,includeTimesheet:e.includeTimesheet,...e.project&&{project:e.project}}),{$t:o}=Ie(),{userDateFormat:l}=F(),n={project:[Kt,$o],fromDate:[Jt(l),yo(()=>t.value.toDate,o("general.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(l),so(()=>t.value.fromDate,o("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]},i=(0,a.computed)(()=>({projectId:t.value.project?.id,fromDate:t.value.fromDate,toDate:t.value.toDate,includeTimesheet:t.value.includeTimesheet?"onlyApproved":"all"}));return{rules:n,filters:t,serializedFilters:i}}};const nS=(0,i.A)(lS,[["render",oS],["__scopeId","data-v-2cc2cfc4"]]);var iS=nS;function rS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("project-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("activity-dropdown"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("date-input"),p=(0,a.resolveComponent)("oxd-text"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form"),b=(0,a.resolveComponent)("oxd-table-filter"),w=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(w,{module:"time",name:"activity_detailed",prefetch:!0,filters:l.serializedFilters,"column-count":2},{default:(0,a.withCtx)(({generateReport:o})=>[(0,a.createVNode)(b,{"filter-title":e.$t("time.project_report")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(V,{onSubmitValid:o},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.project,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.project=e),rules:l.rules.project,label:e.$t("time.project_name"),required:"",disabled:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.activity,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.activity=e),rules:l.rules.activity,label:e.$t("time.activity_name"),"project-id":l.filters.project&&l.filters.project.id,required:""},null,8,["modelValue","rules","label","project-id"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.fromDate=e),placeholder:e.$t("general.from"),rules:l.rules.fromDate,label:e.$t("time.project_date_range"),disabled:""},null,8,["modelValue","placeholder","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.toDate=e),label:"",placeholder:e.$t("general.to"),rules:l.rules.toDate,disabled:""},null,8,["modelValue","placeholder","rules"])]),_:1}),(0,a.createVNode)(s,{class:"XHRM-switch-filter --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{class:"XHRM-switch-filter-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.only_include_approved_timesheets")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:l.filters.includeTimesheet,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.includeTimesheet=e),disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(g),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.back"),onClick:l.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(y,{label:e.$t("general.view")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:2},1032,["filter-title"]),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1))]),footer:(0,a.withCtx)(({data:t})=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(t.meta?t.meta.sum.label:"0.00"),1)]),_:1},8,["filters"])}const sS={project:null,activity:null,fromDate:null,toDate:null,includeTimesheet:!1};var dS={components:{"reports-table":Ww,"oxd-switch-input":X.Ay,"activity-dropdown":BN,"project-autocomplete":XN},props:{project:{type:Object,required:!0},activity:{type:Object,required:!0},fromDate:{type:String,required:!1,default:null},toDate:{type:String,required:!1,default:null},includeTimesheet:{type:Boolean,default:!1}},setup(e){const{$t:t}=Ie(),o=(0,a.ref)({...sS,fromDate:e.fromDate,toDate:e.toDate,includeTimesheet:e.includeTimesheet,...e.project&&{project:e.project},...e.activity&&{activity:e.activity}}),{userDateFormat:l}=F(),n={project:[Kt],activity:[Kt,$o],fromDate:[Jt(l),yo(()=>o.value.toDate,t("attendance.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(l),so(()=>o.value.fromDate,t("attendance.to_date_should_be_after_from_date"),{allowSameDate:!0})]},i=(0,a.computed)(()=>({projectId:o.value.project?.id,activityId:o.value.activity?.id,fromDate:o.value.fromDate,toDate:o.value.toDate,includeTimesheet:o.value.includeTimesheet?"onlyApproved":"all"})),r=()=>{I("/time/displayProjectReportCriteria",void 0,{projectId:e.project.id,fromDate:e.fromDate,toDate:e.fromDate,includeTimesheet:e.includeTimesheet?"onlyApproved":"all"})};return{rules:n,filters:o,onClickBack:r,serializedFilters:i}}};const cS=(0,i.A)(dS,[["render",rS],["__scopeId","data-v-3203ef4e"]]);var uS=cS,mS={"time-sheet-period":$x,"customer-list":Ux,"customer-save":Ox,"customer-edit":Zx,"my-timesheet":uk,"edit-timesheet":vk,"project-list":Ak,"project-save":Kk,"project-edit":__,"employee-timesheet":L_,"view-employee-timesheet":W_,"employee-time-report":tS,"project-activity-report":iS,"activity-details-report":uS};const pS={class:"XHRM-background-container"},hS={class:"XHRM-card-container"};function gS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-input-group"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",pS,[(0,a.createElementVNode)("div",hS,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.leave_period")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leavePeriod.startMonth,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leavePeriod.startMonth=e),type:"select",options:i.months,rules:n.rules.startMonth,label:e.$t("leave.start_month"),required:""},null,8,["modelValue","options","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leavePeriod.startDay,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leavePeriod.startDay=e),type:"select",options:i.dates,rules:n.rules.startDay,label:e.$t("general.start_date"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{label:e.$t("general.end_date")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2",class:"XHRM-leave-period"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.endDay),1)]),_:1})]),_:1},8,["label"])]),_:1}),n.leavePeriod.currentPeriod?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{label:e.$t("leave.current_leave_period")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2",class:"XHRM-leave-period"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.leavePeriod.currentPeriod),1)]),_:1})]),_:1},8,["label"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const vS={startMonth:null,startDay:null,currentPeriod:null};var fS={props:{monthDates:{type:Object,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-period"),{jsDateFormat:t}=F(),{locale:o}=Ae();return{http:e,jsDateFormat:t,locale:o}},data(){return{isLoading:!1,leavePeriod:{...vS},leavePeriodDefined:!0,rules:{startMonth:[Kt],startDay:[Kt]}}},computed:{months(){return Array(12).fill("").map((...[,e])=>({id:e+1,label:this.locale.localize.month(e,{width:"wide"})}))},dates(){return(this.monthDates[this.leavePeriod.startMonth?.id]??[]).map(e=>({id:e,label:String(e).padStart(2,"0")}))},endDay(){const e=this.leavePeriod.startMonth?.id,t=this.leavePeriod.startDay?.id,o=(new Date).getFullYear();if(e&&t){const a=(0,ce.A)(new Date(o,e-1,t),364),l=a.getFullYear()>o;return ge(a,"LLLL dd",{locale:this.locale})+(l?` (${this.$t("leave.following_year")})`:"")}return"-"}},watch:{"leavePeriod.startMonth":function(){this.leavePeriod.startDay=this.dates.length>0?this.dates[0]:null}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET"}).then(e=>{const{data:t,meta:o}=e.data;this.updateLeavePeriodModel(t),this.defineLeavePeriod(o),this.resetLeavePeriod()}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{startMonth:this.leavePeriod.startMonth?.id,startDay:this.leavePeriod.startDay?.id}}).then(e=>{const{data:t,meta:o}=e.data;return this.updateLeavePeriodModel(t),this.defineLeavePeriod(o),this.resetLeavePeriod(),this.$toast.saveSuccess()}).then(()=>{this.isLoading=!1,this.leavePeriodDefined||A()})},onClickReset(){this.resetLeavePeriod()},resetLeavePeriod(){this.leavePeriod.startMonth=vS.startMonth,this.$nextTick(()=>{this.leavePeriod.startDay=vS.startDay})},updateLeavePeriodModel(e){vS.startMonth=this.months.find(t=>t.id===e.startMonth),this.$nextTick(()=>{vS.startDay=this.dates.find(t=>t.id===e.startDay)})},defineLeavePeriod(e){if(!0===e.leavePeriodDefined){this.leavePeriodDefined=e.leavePeriodDefined;const t=ge(he(e.currentLeavePeriod.startDate),this.jsDateFormat,{locale:this.locale}),o=ge(he(e.currentLeavePeriod.endDate),this.jsDateFormat,{locale:this.locale});this.leavePeriod.currentPeriod=`${t} ${this.$t("general.to").toLowerCase()} ${o}`}else this.leavePeriodDefined=!1}}};const yS=(0,i.A)(fS,[["render",gS],["__scopeId","data-v-0b9f1aee"]]);var CS=yS;const VS={class:"XHRM-background-container"},bS={class:"XHRM-card-container"};function wS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("leave-conflict"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("leave-balance"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("date-input"),v=(0,a.resolveComponent)("leave-duration-input"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",VS,[n.showLeaveConflict?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,"workshift-exceeded":n.isWorkShiftExceeded,data:n.leaveConflictData},null,8,["workshift-exceeded","data"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",bS,[(0,a.createVNode)(s,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.apply_leave")),1)]),_:1}),(0,a.createVNode)(d),n.isLoading||0!==n.leaveTypes.length?((0,a.openBlock)(),(0,a.createBlock)(V,{key:1,ref:"formRef",loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.leave.type,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leave.type=e),type:"select",rules:n.rules.type,options:n.leaveTypes,label:e.$t("leave.leave_type"),required:""},null,8,["modelValue","rules","options","label"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"leave-data":n.leave},null,8,["leave-data"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.leave.fromDate,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leave.fromDate=e),label:e.$t("general.from_date"),rules:n.rules.fromDate,years:n.yearsArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.leave.toDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.leave.toDate=e),label:e.$t("general.to_date"),rules:n.rules.toDate,years:n.yearsArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1})]),_:1})]),_:1}),1==i.appliedLeaveDuration?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{duration:n.leave.duration.type,"onUpdate:duration":t[3]||(t[3]=e=>n.leave.duration.type=e),fromTime:n.leave.duration.fromTime,"onUpdate:fromTime":t[4]||(t[4]=e=>n.leave.duration.fromTime=e),toTime:n.leave.duration.toTime,"onUpdate:toTime":t[5]||(t[5]=e=>n.leave.duration.toTime=e),label:e.$t("general.duration"),"work-shift":o.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),i.appliedLeaveDuration>1?((0,a.openBlock)(),(0,a.createBlock)(h,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.leave.partialOptions,"onUpdate:modelValue":t[6]||(t[6]=e=>n.leave.partialOptions=e),type:"select",label:e.$t("leave.partial_days"),options:n.partialOptions},null,8,["modelValue","label","options"])]),_:1}),i.showDuration?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,duration:n.leave.duration.type,"onUpdate:duration":t[7]||(t[7]=e=>n.leave.duration.type=e),fromTime:n.leave.duration.fromTime,"onUpdate:fromTime":t[8]||(t[8]=e=>n.leave.duration.fromTime=e),toTime:n.leave.duration.toTime,"onUpdate:toTime":t[9]||(t[9]=e=>n.leave.duration.toTime=e),partial:!0,label:e.$t("general.duration"),"work-shift":o.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])):(0,a.createCommentVNode)("",!0),i.showStartDay?((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,duration:n.leave.duration.type,"onUpdate:duration":t[10]||(t[10]=e=>n.leave.duration.type=e),fromTime:n.leave.duration.fromTime,"onUpdate:fromTime":t[11]||(t[11]=e=>n.leave.duration.fromTime=e),toTime:n.leave.duration.toTime,"onUpdate:toTime":t[12]||(t[12]=e=>n.leave.duration.toTime=e),partial:!0,label:e.$t("leave.start_day"),"work-shift":o.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])):(0,a.createCommentVNode)("",!0),i.showEndDay?((0,a.openBlock)(),(0,a.createBlock)(v,{key:2,duration:n.leave.endDuration.type,"onUpdate:duration":t[13]||(t[13]=e=>n.leave.endDuration.type=e),fromTime:n.leave.endDuration.fromTime,"onUpdate:fromTime":t[14]||(t[14]=e=>n.leave.endDuration.fromTime=e),toTime:n.leave.endDuration.toTime,"onUpdate:toTime":t[15]||(t[15]=e=>n.leave.endDuration.toTime=e),partial:!0,label:e.$t("leave.end_day"),"work-shift":o.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.leave.comment,"onUpdate:modelValue":t[16]||(t[16]=e=>n.leave.comment=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{label:e.$t("general.apply")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])):((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.no_leave_types_with_leave_balance")),1)]),_:1}))])])}function xS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("time-range"),c=(0,a.resolveComponent)("oxd-text"),u=(0,a.resolveComponent)("oxd-input-group");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(s,{style:{"grid-column-start":"1"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,(0,a.mergeProps)({type:"select"},e.$attrs,{options:i.options,"model-value":o.duration,rules:n.rules.duration,"show-empty-selector":o.partial,required:o.partial,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:duration",t))}),null,16,["options","model-value","rules","show-empty-selector","required"])]),_:1}),o.duration&&4===o.duration.id?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(d,{rules:n.rules,"from-time":o.fromTime,"to-time":o.toTime,"work-shift":o.workShift,"onUpdate:fromTime":t[1]||(t[1]=t=>e.$emit("update:fromTime",t)),"onUpdate:toTime":t[2]||(t[2]=t=>e.$emit("update:toTime",t))},null,8,["rules","from-time","to-time","work-shift"]),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{label:e.$t("general.duration")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-leave-duration",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.selectedTimeDuration),1)]),_:1})]),_:1},8,["label"])]),_:1})],64)):(0,a.createCommentVNode)("",!0)],64)}function NS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("time-input"),s=(0,a.resolveComponent)("oxd-grid-item");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{label:e.$t("general.from"),"model-value":o.fromTime,rules:o.rules.fromTime,required:"","onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:fromTime",t))},null,8,["label","model-value","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{label:e.$t("general.to"),"model-value":o.toTime,rules:o.rules.toTime,required:"","onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:toTime",t))},null,8,["label","model-value","rules"])]),_:1})],64)}var kS={name:"TimeRange",inheritAttrs:!1,props:{fromTime:{type:String,required:!1,default:null},toTime:{type:String,required:!1,default:null},rules:{type:Object,required:!0,default:()=>({})},workShift:{type:Object,required:!0,default:()=>({})}},emits:["update:fromTime","update:toTime"],mounted(){this.workShift?.startTime&&this.$emit("update:fromTime",this.workShift.startTime),this.workShift?.endTime&&this.$emit("update:toTime",this.workShift.endTime)}};const _S=(0,i.A)(kS,[["render",NS]]);var SS=_S,DS={name:"LeaveDurationInput",components:{"time-range":SS},inheritAttrs:!1,props:{duration:{type:Object,required:!1,default:()=>null},fromTime:{type:String,required:!1,default:null},toTime:{type:String,required:!1,default:null},partial:{type:Boolean,default:!1},workShift:{type:Object,required:!0,default:()=>({})}},emits:["update:fromTime","update:toTime","update:duration"],data(){return{rules:{duration:[Kt],fromTime:[Kt,Zt,Vo(()=>this.toTime,this.$t("general.from_time_should_be_before_to_time"))],toTime:[Kt,Zt,po(()=>this.fromTime,this.$t("general.to_time_should_be_after_from_time")),e=>{if(e){const t=xe(this.workShift.startTime,this.workShift.endTime),o=xe(this.fromTime,e);if(o>t)return this.$t("leave.duration_should_be_less_than_work_shift_length")}return!0}]}}},computed:{selectedTimeDuration(){const e=xe(this.fromTime,this.toTime);return(e/3600).toFixed(2)},options(){const e=[{id:1,label:this.$t("leave.full_day"),key:"full_day"},{id:2,label:this.$t("leave.half_day_morning"),key:"half_day_morning"},{id:3,label:this.$t("leave.half_day_evening"),key:"half_day_afternoon"},{id:4,label:this.$t("leave.specify_time"),key:"specify_time"}];return this.partial?e.filter(e=>1!=e.id):e}}};const $S=(0,i.A)(DS,[["render",xS],["__scopeId","data-v-1ebf17f4"]]);var MS=$S;const ES={class:"XHRM-leave-balance"};function RS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-label"),s=(0,a.resolveComponent)("oxd-icon-button"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-input-group");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(c,null,{label:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",ES,[(0,a.createVNode)(r,{label:e.$t("leave.leave_balance")},null,8,["label"]),o.leaveData.type?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"--help",name:"question-circle","with-container":!1,onClick:l.onModalOpen},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])]),default:(0,a.withCtx)(()=>[e.balance>=0?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.leaveBalance),1)]),_:1})):((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,class:"XHRM-leave-balance-text --error",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.balance_not_sufficient")),1)]),_:1}))]),_:1}),e.showModal?((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(l.leaveBalanceModal),{key:0,data:e.data,meta:e.meta,onClose:l.onModalClose},null,40,["data","meta","onClose"])):(0,a.createCommentVNode)("",!0)],64)}const TS={class:"XHRM-dialog-header-container"},BS={class:"XHRM-horizontal-padding XHRM-vertical-padding"},IS={class:"XHRM-container"},AS={class:"XHRM-horizontal-padding XHRM-vertical-padding"};function HS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-card-table"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(g,{gutters:!1,class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",TS,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.leave_balance_details")),1)]),_:1}),(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.as_of_date"))+" - "+(0,a.toDisplayString)(i.asAtDate),1)]),_:1})]),(0,a.createVNode)(s,{class:"XHRM-dialog-horizontal-margin XHRM-clear-margins"}),(0,a.createElementVNode)("div",BS,[(0,a.createVNode)(u,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.employee_name")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.employeeName),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{class:"--offset-column-1",label:e.$t("leave.leave_type")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.leaveType),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("leave.total_entitlement")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.totalEntitlement),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("leave.balance")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.leaveBalance),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),(0,a.createElementVNode)("div",IS,[(0,a.createVNode)(m,{headers:n.headers,items:i.items,clickable:!1,class:"XHRM-horizontal-padding","row-decorator":"oxd-table-decorator-card"},null,8,["headers","items"])]),(0,a.createElementVNode)("div",AS,[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{type:"submit","display-type":"secondary",label:e.$t("general.ok"),onClick:i.onCancel},null,8,["label","onClick"])]),_:1})])]),_:1},8,["onUpdate:show"])}var XS={name:"LeaveBalanceModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,default:()=>null},meta:{type:Object,default:()=>null}},emits:["close"],setup(){const{jsDateFormat:e}=F(),{locale:t}=Ae();return{locale:t,jsDateFormat:e}},data(){return{headers:[{title:this.$t("leave.leave_status"),name:"status",slot:"left",style:{flex:1}},{title:this.$t("leave.days"),name:"days",slot:"right",style:{flex:1,textAlign:"right",justifyContent:"flex-end"}}]}},computed:{items(){if(this.data){const{taken:e,scheduled:t,pending:o}=this.data;return[{status:this.$t("leave.taken"),days:e.toFixed(2)},{status:this.$t("leave.scheduled"),days:t.toFixed(2)},{status:this.$t("leave.pending_approval"),days:o.toFixed(2)}]}return[]},asAtDate(){return ge(he(this.data?.asAtDate),this.jsDateFormat,{locale:this.locale})},leaveType(){return this.meta?.leaveType?.name},employeeName(){const e=this.meta?.employee;return e?`${e.firstName} ${e.lastName}\n          ${e.terminationId?this.$t("general.past_employee"):""}`:""},totalEntitlement(){return this.data?.entitled?`${parseFloat(this.data.entitled).toFixed(2)} Day(s)`:"0.00 Day(s)"},leaveBalance(){return this.data?.balance?`${parseFloat(this.data.balance).toFixed(2)} Day(s)`:"0.00 Day(s)"}},methods:{onCancel(){this.$emit("close",!0)}}};const US=(0,i.A)(XS,[["render",HS],["__scopeId","data-v-00d89ec0"]]);var LS=US;const PS={class:"XHRM-dialog-header-container"},qS={class:"XHRM-dialog-horizontal-padding XHRM-dialog-vertical-padding"},FS={class:"XHRM-container"},zS={class:"XHRM-dialog-horizontal-padding XHRM-dialog-vertical-padding"};function jS(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-card-table"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(g,{gutters:!1,class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",PS,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.insufficient_leave_balance")),1)]),_:1})]),(0,a.createVNode)(s,{class:"XHRM-dialog-horizontal-margin XHRM-clear-margins"}),(0,a.createElementVNode)("div",qS,[(0,a.createVNode)(u,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.employee_name")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.employeeName),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("leave.leave_type")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.leaveType),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("leave.balance")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-balance-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.leaveBalance),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),(0,a.createElementVNode)("div",FS,[(0,a.createVNode)(m,{headers:n.headers,items:i.items,clickable:!1,class:"XHRM-horizontal-padding","row-decorator":"oxd-table-decorator-card"},null,8,["headers","items"])]),(0,a.createElementVNode)("div",zS,[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{type:"submit","display-type":"secondary",label:e.$t("general.ok"),onClick:i.onCancel},null,8,["label","onClick"])]),_:1})])]),_:1},8,["onUpdate:show"])}o(531);var OS={name:"LeaveBalanceInsufficientModal",components:{"oxd-dialog":X.KB},props:{data:{type:Array,required:!0},meta:{type:Object,default:()=>null}},emits:["close"],setup(){const{jsDateFormat:e}=F(),{locale:t}=Ae();return{locale:t,jsDateFormat:e}},data(){return{headers:[{title:this.$t("leave.leave_period"),name:"period",style:{flex:1}},{title:this.$t("general.date"),name:"date",style:{flex:1}},{title:this.$t("leave.available_balance"),name:"balance",style:{flex:1}}]}},computed:{items(){if(this.data.length>0){const e=this.data.map(e=>e.period);return e.flatMap((e,t)=>this.data[t].leaves.map(t=>{const o=ge(he(e.startDate),this.jsDateFormat,{locale:this.locale}),a=ge(he(e.endDate),this.jsDateFormat,{locale:this.locale}),l=ge(he(t.date),this.jsDateFormat,{locale:this.locale});return{period:`${o} - ${a}`,date:l,balance:t.status?.name||t.balance.toFixed(2)}}))}return[]},leaveType(){return this.meta?.leaveType?.name},employeeName(){const e=this.meta?.employee;return e?`${e.firstName} ${e.lastName}\n          ${e.terminationId?this.$t("general.past_employee"):""}`:""},leaveBalance(){return this.data[0]?.balance?`${parseFloat(this.data[0].balance.balance).toFixed(2)} Day(s)`:"0.00 Day(s)"}},methods:{onCancel(){this.$emit("close",!0)}}};const GS=(0,i.A)(OS,[["render",jS],["__scopeId","data-v-7dbb1898"]]);var QS=GS;function KS(e){const t=e=>{const t={leaveTypeId:e.type?e.type.id:1,fromDate:e.fromDate?e.fromDate:"",toDate:e.toDate?e.toDate:"",comment:""===e.comment?null:e.comment,empNumber:e.employee?e.employee.id:void 0};if(e.duration.type){const o={type:e.duration.type?.key};"specify_time"===o.type&&(e.duration.fromTime&&(o.fromTime=e.duration.fromTime),e.duration.toTime&&(o.toTime=e.duration.toTime)),t.duration=o}const o=we(t.fromDate,t.toDate);if(o>1&&e.partialOptions&&(t.partialOption=e.partialOptions.key,e.endDuration.type)){const o={type:e.endDuration.type.key};e.endDuration.fromTime&&(o.fromTime=e.endDuration.fromTime),e.endDuration.toTime&&(o.toTime=e.endDuration.toTime),"start_end"===t.partialOption?t.endDuration=o:"end"===t.partialOption&&(t.duration=o)}return"specify_time"!==t.duration?.type&&(t.duration?.fromTime||t.duration?.toTime)&&(t.duration.fromTime=void 0,t.duration.toTime=void 0),"specify_time"!==t.endDuration?.type&&(t.endDuration?.fromTime||t.endDuration?.toTime)&&(t.endDuration.fromTime=void 0,t.endDuration.toTime=void 0),t},o=e=>{const t={fromDate:void 0,toDate:void 0,partialOption:void 0,empNumber:e.employee?.id};if(e.duration.type&&(t["duration[type]"]=e.duration.type.key,"specify_time"===t["duration[type]"]&&(e.duration.fromTime&&(t["duration[fromTime]"]=e.duration.fromTime),e.duration.toTime&&(t["duration[toTime]"]=e.duration.toTime))),e.fromDate&&e.toDate){t.fromDate=e.fromDate,t.toDate=e.toDate;const o=we(e.fromDate,e.toDate);o>1&&e.partialOptions&&(t.partialOption=e.partialOptions.key,e.endDuration.type&&("start_end"===t.partialOption?(t["endDuration[type]"]=e.endDuration.type.key,e.endDuration.fromTime&&(t["endDuration[fromTime]"]=e.endDuration.fromTime),e.endDuration.toTime&&(t["endDuration[toTime]"]=e.endDuration.toTime)):"end"===t.partialOption&&(t["duration[type]"]=e.endDuration.type.key,e.endDuration.fromTime&&(t["duration[fromTime]"]=e.endDuration.fromTime),e.endDuration.toTime&&(t["duration[toTime]"]=e.endDuration.toTime))))}return"specify_time"!==t["duration[type]"]&&(t["duration[fromTime]"]||t["duration[toTime]"])&&(t["duration[fromTime]"]=void 0,t["duration[toTime]"]=void 0),"specify_time"!==t["endDuration[type]"]&&(t["endDuration[fromTime]"]||t["endDuration[toTime]"])&&(t["endDuration[fromTime]"]=void 0,t["endDuration[toTime]"]=void 0),t},a=t=>new Promise((a,l)=>{e.request({method:"GET",url:"/api/v2/leave/overlap-leaves",params:o(t)}).then(e=>{const{data:t,meta:o}=e.data;Array.isArray(t)&&t.length>0?a({isConflict:!0,isOverWorkshift:!0===o.isWorkShiftLengthExceeded,data:t}):a({isConflict:!1,isOverWorkshift:!1,data:[]})}).catch(e=>{l(e)})}),l=t=>new Promise((a,l)=>{e.request({method:"GET",url:`/api/v2/leave/leave-balance/leave-type/${t.type?.id}`,params:o(t)}).then(e=>{let t=0,o=null,l=null;if(200===e.status){const{data:a,meta:n}=e.data;l=n,a.balance?(o=a.balance,t=a.balance?.balance):a.breakdown&&!1===a.negative?(o=a.breakdown[0].balance,t=a.breakdown[0].balance?.balance):a.breakdown&&!0===a.negative?(o=a.breakdown,t=-1):(o=null,t=0)}a({balance:t,breakdown:o,metaData:l})}).catch(e=>{l(e)})});return{serializeBody:t,serializeParams:o,validateLeaveBalance:l,validateOverlapLeaves:a}}var WS={name:"LeaveBalance",components:{"oxd-label":X.YP,"leave-balance-modal":LS,"leave-balance-insufficient-modal":QS},inheritAttrs:!1,props:{leaveData:{type:Object,default:()=>({})}},setup(e){const t=(0,a.reactive)({data:null,meta:null,balance:0,showModal:!1}),o=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-balance/leave-type");o.setIgnorePath("/api/v2/leave/leave-balance/leave-type");const{validateLeaveBalance:l}=KS(o),n=(0,a.computed)(()=>e.leaveData.type?.id?`${t.balance.toFixed(2)} Day(s)`:"0.00 Day(s)"),i=()=>{t.showModal=!0},r=()=>{t.showModal=!1},s=(0,a.computed)(()=>Array.isArray(t.data)?"leave-balance-insufficient-modal":"leave-balance-modal");return(0,a.watchPostEffect)(async()=>{e.leaveData.type?.id&&l(e.leaveData).then(({balance:e,breakdown:o,metaData:a})=>{t.balance=e,o&&(t.data=o),a&&(t.meta=a)}).catch(()=>{t.data=null,t.meta=null,t.balance=0})}),{...(0,a.toRefs)(t),leaveBalance:n,onModalOpen:i,onModalClose:r,leaveBalanceModal:s}}};const JS=(0,i.A)(WS,[["render",RS],["__scopeId","data-v-08c8c796"]]);var YS=JS;const ZS={class:"XHRM-paper-container"},eD={class:"XHRM-header-container"},tD={class:"XHRM-container"};function oD(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("table-header"),d=(0,a.resolveComponent)("oxd-card-table");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",ZS,[(0,a.createElementVNode)("div",eD,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.header),1)]),_:1})]),(0,a.createVNode)(s,{loading:!1,selected:0,total:o.data.length},null,8,["total"]),(0,a.createElementVNode)("div",tD,[(0,a.createVNode)(d,{headers:n.headers,items:i.items,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","items"])]),t[0]||(t[0]=(0,a.createElementVNode)("div",{class:"XHRM-bottom-container"},null,-1))]),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1))],64)}var aD={name:"LeaveConflict",props:{workshiftExceeded:{type:Boolean,default:!1},data:{type:Array,required:!0}},setup(){const{jsDateFormat:e}=F(),{locale:t}=Ae();return{locale:t,jsDateFormat:e}},data(){return{headers:[{name:"date",title:this.$t("general.date"),style:{flex:1}},{name:"hours",title:this.$t("leave.no_of_hours"),style:{flex:1}},{name:"type",title:this.$t("leave.leave_type"),style:{flex:1}},{name:"status",title:this.$t("general.status"),style:{flex:1}},{name:"comments",title:this.$t("general.comments"),style:{flex:1}}]}},computed:{header(){return this.workshiftExceeded?this.$t("leave.workshift_length_exceeded_due_to_the_following_leave_request"):this.$t("leave.overlapping_leave_request_found")},items(){return this.data.map(e=>({date:ge(he(e.date),this.jsDateFormat,{locale:this.locale}),hours:parseFloat(e.lengthHours).toFixed(2),type:e.leaveType?.name,status:e.status?.name,comments:e.lastComment?.comment}))}}};const lD=(0,i.A)(aD,[["render",oD]]);var nD=lD;const iD={type:null,fromDate:null,toDate:null,comment:"",partialOptions:null,duration:{type:null,fromTime:null,toTime:null},endDuration:{type:null,fromTime:null,toTime:null}};var rD={name:"LeaveApply",components:{"leave-duration-input":MS,"leave-balance":YS,"leave-conflict":nD},props:{workShift:{type:Object,default:()=>({})}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-requests"),{serializeBody:t,validateOverlapLeaves:o}=KS(e),{formRef:a,reset:l}=Bc(),{userDateFormat:n}=F();return{http:e,reset:l,formRef:a,serializeBody:t,userDateFormat:n,validateOverlapLeaves:o}},data(){return{isLoading:!1,leave:{...iD},rules:{type:[Kt],fromDate:[Kt,Jt(this.userDateFormat)],toDate:[Kt,Jt(this.userDateFormat),so(()=>this.leave.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})],comment:[Wt(250)]},partialOptions:[{id:1,label:this.$t("leave.all_days"),key:"all"},{id:2,label:this.$t("leave.start_day_only"),key:"start"},{id:3,label:this.$t("leave.end_day_only"),key:"end"},{id:4,label:this.$t("leave.start_and_end_day"),key:"start_end"}],showLeaveConflict:!1,isWorkShiftExceeded:!1,leaveConflictData:null,yearsArray:[...xy()],leaveTypes:[]}},computed:{appliedLeaveDuration(){return we(this.leave.fromDate,this.leave.toDate)},showDuration(){const e=this.leave.partialOptions?.id;return e&&1===e},showStartDay(){const e=this.leave.partialOptions?.id;return e&&(2===e||4===e)},showEndDay(){const e=this.leave.partialOptions?.id;return e&&(3===e||4===e)}},watch:{appliedLeaveDuration:function(e){this.leave.duration.type=1===e?{id:1,label:"Full Day",key:"full_day"}:null},"leave.fromDate":function(e){e&&!this.leave.toDate&&(this.leave.toDate=e)}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET",url:"/api/v2/leave/leave-types/eligible"}).then(e=>{const{data:t}=e.data;this.leaveTypes=t.map(e=>({id:e.id,label:e.name}))}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.showLeaveConflict=!1,this.leaveConflictData=null,this.validateOverlapLeaves(this.leave).then(({isConflict:e,isOverWorkshift:t,data:o})=>e?(this.leaveConflictData=o,this.showLeaveConflict=!0,this.isWorkShiftExceeded=t,Promise.reject()):this.http.create(this.serializeBody(this.leave))).then(()=>{this.$toast.saveSuccess(),this.reset()}).catch(()=>{this.showLeaveConflict&&this.$toast.warn({title:this.$t("general.warning"),message:this.$t("leave.failed_to_submit")})}).finally(()=>{this.isLoading=!1})}}};const sD=(0,i.A)(rD,[["render",wS]]);var dD=sD;const cD={class:"XHRM-background-container"},uD={class:"XHRM-card-container"};function mD(e,t,o,l,n,i){const r=(0,a.resolveComponent)("leave-conflict"),s=(0,a.resolveComponent)("leave-assign-confirm-modal"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-divider"),u=(0,a.resolveComponent)("employee-autocomplete"),m=(0,a.resolveComponent)("oxd-grid-item"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("leave-type-dropdown"),v=(0,a.resolveComponent)("leave-balance"),f=(0,a.resolveComponent)("date-input"),y=(0,a.resolveComponent)("leave-duration-input"),C=(0,a.resolveComponent)("oxd-input-field"),V=(0,a.resolveComponent)("required-text"),b=(0,a.resolveComponent)("submit-button"),w=(0,a.resolveComponent)("oxd-form-actions"),x=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",cD,[n.showLeaveConflict?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,"workshift-exceeded":n.isWorkShiftExceeded,data:n.leaveConflictData},null,8,["workshift-exceeded","data"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s,{ref:"confirmDialog"},null,512),(0,a.createElementVNode)("div",uD,[(0,a.createVNode)(d,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.assign_leave")),1)]),_:1}),(0,a.createVNode)(c),(0,a.createVNode)(x,{ref:"formRef",loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.leave.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leave.employee=e),rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.leave.type,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leave.type=e),rules:n.rules.type,"eligible-only":!1,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{"leave-data":n.leave},null,8,["leave-data"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{modelValue:n.leave.fromDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.leave.fromDate=e),label:e.$t("general.from_date"),rules:n.rules.fromDate,years:n.yearsArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{modelValue:n.leave.toDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.leave.toDate=e),label:e.$t("general.to_date"),rules:n.rules.toDate,years:n.yearsArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1})]),_:1})]),_:1}),1==i.appliedLeaveDuration?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{duration:n.leave.duration.type,"onUpdate:duration":t[4]||(t[4]=e=>n.leave.duration.type=e),fromTime:n.leave.duration.fromTime,"onUpdate:fromTime":t[5]||(t[5]=e=>n.leave.duration.fromTime=e),toTime:n.leave.duration.toTime,"onUpdate:toTime":t[6]||(t[6]=e=>n.leave.duration.toTime=e),label:e.$t("general.duration"),"work-shift":n.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),i.appliedLeaveDuration>1?((0,a.openBlock)(),(0,a.createBlock)(h,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{modelValue:n.leave.partialOptions,"onUpdate:modelValue":t[7]||(t[7]=e=>n.leave.partialOptions=e),type:"select",label:e.$t("leave.partial_days"),options:n.partialOptions},null,8,["modelValue","label","options"])]),_:1}),i.showDuration?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,duration:n.leave.duration.type,"onUpdate:duration":t[8]||(t[8]=e=>n.leave.duration.type=e),fromTime:n.leave.duration.fromTime,"onUpdate:fromTime":t[9]||(t[9]=e=>n.leave.duration.fromTime=e),toTime:n.leave.duration.toTime,"onUpdate:toTime":t[10]||(t[10]=e=>n.leave.duration.toTime=e),partial:!0,label:e.$t("general.duration"),"work-shift":n.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])):(0,a.createCommentVNode)("",!0),i.showStartDay?((0,a.openBlock)(),(0,a.createBlock)(y,{key:1,duration:n.leave.duration.type,"onUpdate:duration":t[11]||(t[11]=e=>n.leave.duration.type=e),fromTime:n.leave.duration.fromTime,"onUpdate:fromTime":t[12]||(t[12]=e=>n.leave.duration.fromTime=e),toTime:n.leave.duration.toTime,"onUpdate:toTime":t[13]||(t[13]=e=>n.leave.duration.toTime=e),partial:!0,label:e.$t("leave.start_day"),"work-shift":n.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])):(0,a.createCommentVNode)("",!0),i.showEndDay?((0,a.openBlock)(),(0,a.createBlock)(y,{key:2,duration:n.leave.endDuration.type,"onUpdate:duration":t[14]||(t[14]=e=>n.leave.endDuration.type=e),fromTime:n.leave.endDuration.fromTime,"onUpdate:fromTime":t[15]||(t[15]=e=>n.leave.endDuration.fromTime=e),toTime:n.leave.endDuration.toTime,"onUpdate:toTime":t[16]||(t[16]=e=>n.leave.endDuration.toTime=e),partial:!0,label:e.$t("leave.end_day"),"work-shift":n.workShift},null,8,["duration","fromTime","toTime","label","work-shift"])):(0,a.createCommentVNode)("",!0)]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{modelValue:n.leave.comment,"onUpdate:modelValue":t[17]||(t[17]=e=>n.leave.comment=e),type:"textarea",label:e.$t("general.comments"),rules:n.rules.comment},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(c),(0,a.createVNode)(w,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(V),(0,a.createVNode)(b,{label:e.$t("leave.assign")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const pD={key:0,class:"deleted-tag"};function hD(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("leave.leave_type"),options:l.options,"show-empty-selector":o.showEmptySelector},{option:(0,a.withCtx)(({data:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.label),1),t.isDeleted?((0,a.openBlock)(),(0,a.createElementBlock)("div",pD,(0,a.toDisplayString)(e.$t("general.deleted")),1)):(0,a.createCommentVNode)("",!0)]),_:1},8,["label","options","show-empty-selector"])}var gD={name:"LeaveTypeDropdown",props:{eligibleOnly:{type:Boolean,default:!0},employeeId:{type:Number,required:!1,default:null},showEmptySelector:{type:Boolean,default:!0},includeAllocated:{type:Boolean,default:!1}},setup(e,t){const o=(0,a.ref)([]),l=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-types"+(e.eligibleOnly?"/eligible":""));return(0,a.watchEffect)(async()=>{!e.eligibleOnly&&e.includeAllocated&&console.error("`includeAllocated` prop can true only if `eligibleOnly` prop true"),l.getAll({empNumber:e.employeeId,includeAllocated:!(!e.eligibleOnly||!e.includeAllocated)||void 0,...!1===e.eligibleOnly&&{limit:0}}).then(({data:a})=>{o.value=a.data.map(e=>({id:e.id,label:e.name,isDeleted:e.deleted})),!e.showEmptySelector&&o.value.length>0&&t.emit("update:modelValue",o.value[0])})}),{options:o}}};const vD=(0,i.A)(gD,[["render",hD],["__scopeId","data-v-1ed39652"]]);var fD=vD;const yD={class:"XHRM-modal-header"},CD={class:"XHRM-text-center-align"},VD={class:"XHRM-modal-footer"};function bD(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,style:{maxWidth:"450px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",yD,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.confirm_leave_assignment")),1)]),_:1})]),(0,a.createElementVNode)("div",CD,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.employee_does_not_have_enough_balance_for_leave_request"))+" "+(0,a.toDisplayString)(e.$t("leave.click_ok_to_confirm_leave_assignment")),1)]),_:1})]),(0,a.createElementVNode)("div",VD,[(0,a.createVNode)(s,{"display-type":"ghost",class:"XHRM-button-margin",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(s,{"display-type":"secondary",class:"XHRM-button-margin",label:e.$t("general.ok"),onClick:i.onConfirm},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var wD={name:"LeaveAssignConfirmModal",components:{"oxd-dialog":X.KB},data(){return{show:!1,reject:null,resolve:null}},methods:{showDialog(){return new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})},onConfirm(){this.show=!1,this.resolve&&this.resolve("ok")},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")}}};const xD=(0,i.A)(wD,[["render",bD],["__scopeId","data-v-29b96c8a"]]);var ND=xD;const kD={employee:null,type:null,fromDate:null,toDate:null,comment:"",partialOptions:null,duration:{type:null,fromTime:null,toTime:null},endDuration:{type:null,fromTime:null,toTime:null}},_D={startTime:"9:00",endTime:"17:00"};var SD={name:"LeaveAssign",components:{"leave-type-dropdown":fD,"leave-duration-input":MS,"leave-balance":YS,"employee-autocomplete":$a,"leave-conflict":nD,"leave-assign-confirm-modal":ND},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/employees/leave-requests"),{serializeBody:t,validateLeaveBalance:o,validateOverlapLeaves:a}=KS(e),{formRef:l,reset:n}=Bc(),{userDateFormat:i}=F();return{http:e,reset:n,formRef:l,serializeBody:t,userDateFormat:i,validateLeaveBalance:o,validateOverlapLeaves:a}},data(){return{isLoading:!1,leave:{...kD},rules:{type:[Kt],fromDate:[Kt,Jt(this.userDateFormat)],toDate:[Kt,Jt(this.userDateFormat),so(()=>this.leave.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})],comment:[Wt(250)],employee:[Kt,$o]},partialOptions:[{id:1,label:this.$t("leave.all_days"),key:"all"},{id:2,label:this.$t("leave.start_day_only"),key:"start"},{id:3,label:this.$t("leave.end_day_only"),key:"end"},{id:4,label:this.$t("leave.start_and_end_day"),key:"start_end"}],showLeaveConflict:!1,isWorkShiftExceeded:!1,leaveConflictData:null,yearsArray:[...xy()],workShift:{..._D}}},computed:{appliedLeaveDuration(){return we(this.leave.fromDate,this.leave.toDate)},showDuration(){const e=this.leave.partialOptions?.id;return e&&1===e},showStartDay(){const e=this.leave.partialOptions?.id;return e&&(2===e||4===e)},showEndDay(){const e=this.leave.partialOptions?.id;return e&&(3===e||4===e)}},watch:{"leave.employee":function(e){e?.id?this.http.request({method:"GET",url:`/api/v2/pim/employees/${e.id}/work-shift`}).then(e=>{const{data:t}=e.data;this.workShift=t}):this.workShift={..._D}},appliedLeaveDuration:function(e){this.leave.duration.type=1===e?{id:1,label:"Full Day",key:"full_day"}:null},"leave.fromDate":function(e){e&&!this.leave.toDate&&(this.leave.toDate=e)}},methods:{onSave(){this.isLoading=!0,this.leaveConflictData=null,this.showLeaveConflict=!1,this.validateLeaveBalance(this.leave).then(async({balance:e})=>{if(e<=0){const e=await this.$refs.confirmDialog.showDialog();if("ok"!==e)return Promise.reject()}return this.validateOverlapLeaves(this.leave)}).then(({isConflict:e,isOverWorkshift:t,data:o})=>e?(this.leaveConflictData=o,this.showLeaveConflict=!0,this.isWorkShiftExceeded=t,Promise.reject()):this.http.create(this.serializeBody(this.leave))).then(()=>{this.$toast.saveSuccess(),this.reset()}).catch(()=>{this.showLeaveConflict&&this.$toast.warn({title:this.$t("general.warning"),message:this.$t("leave.failed_to_submit")})}).finally(()=>{this.isLoading=!1})}}};const DD=(0,i.A)(SD,[["render",mD]]);var $D=DD;const MD={class:"XHRM-background-container"},ED={class:"XHRM-paper-container"},RD={class:"XHRM-header-container"},TD={class:"XHRM-container"},BD={class:"XHRM-bottom-container"};function ID(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",MD,[(0,a.createElementVNode)("div",ED,[(0,a.createElementVNode)("div",RD,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.leave_types")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",TD,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),loading:l.isLoading,headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","loading","headers","items"])]),(0,a.createElementVNode)("div",BD,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var AD={components:{"delete-confirmation":Xt},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-types"),{showPaginator:t,currentPage:o,total:a,pages:l,pageSize:n,response:i,isLoading:r,execQuery:s}=Et(e);return{http:e,showPaginator:t,currentPage:o,isLoading:r,total:a,pages:l,pageSize:n,execQuery:s,items:i}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:6}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/leave/defineLeaveType")},onClickEdit(e){I("/leave/defineLeaveType/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const HD=(0,i.A)(AD,[["render",ID]]);var XD=HD;const UD={class:"XHRM-background-container"},LD={class:"XHRM-card-container"},PD={class:"label-is-entitlement-situational"};function qD(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-label"),m=(0,a.resolveComponent)("oxd-icon-button"),p=(0,a.resolveComponent)("oxd-input-group"),h=(0,a.resolveComponent)("oxd-grid-item"),g=(0,a.resolveComponent)("oxd-grid"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form"),b=(0,a.resolveComponent)("entitlement-situational-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",UD,[(0,a.createElementVNode)("div",LD,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.edit_leave_type")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveType.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leaveType.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{classes:{wrapper:"--status-grouped-field"}},{label:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",PD,[(0,a.createVNode)(u,{label:e.$t("leave.is_entitlement_situational")},null,8,["label"]),(0,a.createVNode)(m,{class:"--help",name:"exclamation-circle","with-container":!1,onClick:i.onModalOpen},null,8,["onClick"])])]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveType.situational,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leaveType.situational=e),type:"radio","option-label":e.$t("general.yes"),value:!0},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.leaveType.situational,"onUpdate:modelValue":t[2]||(t[2]=e=>n.leaveType.situational=e),type:"radio","option-label":e.$t("general.no"),value:!1},null,8,["modelValue","option-label"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(y)]),_:1})]),_:1},8,["loading","onSubmitValid"]),n.showModal?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,onClose:i.onModalClose},null,8,["onClose"])):(0,a.createCommentVNode)("",!0)])])}const FD={class:"XHRM-modal-header"},zD={class:"XHRM-text-center-align"},jD={class:"XHRM-modal-footer"};function OD(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-form-actions"),c=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(c,{class:"XHRM-dialog-popup","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",FD,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.situational_leave")),1)]),_:1})]),(0,a.createElementVNode)("div",zD,[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.entitlement_situational_description")),1)]),_:1})]),(0,a.createElementVNode)("div",jD,[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"submit","display-type":"secondary",label:e.$t("general.ok"),onClick:i.onCancel},null,8,["label","onClick"])]),_:1})])]),_:1},8,["onUpdate:show"])}var GD={name:"EntitlementSituationalModal",components:{"oxd-dialog":X.KB},emits:["close"],methods:{onCancel(){this.$emit("close",!0)}}};const QD=(0,i.A)(GD,[["render",OD],["__scopeId","data-v-d6876e1c"]]);var KD=QD;const WD={id:"",name:"",situational:""};var JD={components:{"oxd-label":X.YP,"entitlement-situational-modal":KD},props:{leaveTypeId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-types"),{createUniqueValidator:o}=Lo(t),a=o("LeaveType","name",{entityId:e.leaveTypeId});return{http:t,leaveTypeUniqueValidation:a}},data(){return{showModal:!1,isLoading:!1,leaveType:{...WD},rules:{name:[Kt,this.leaveTypeUniqueValidation,Wt(50)]}}},created(){this.isLoading=!0,this.http.get(this.leaveTypeId).then(e=>{const{data:t}=e.data;this.leaveType.id=t.id,this.leaveType.name=t.name,this.leaveType.situational=t.situational}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.leaveTypeId,{name:this.leaveType.name,situational:this.leaveType.situational}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/leave/leaveTypeList")},onModalOpen(){this.showModal=!0},onModalClose(){this.showModal=!1}}};const YD=(0,i.A)(JD,[["render",qD],["__scopeId","data-v-719711d7"]]);var ZD=YD;const e$={class:"XHRM-background-container"},t$={class:"XHRM-card-container"},o$={class:"label-is-entitlement-situational"};function a$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-label"),m=(0,a.resolveComponent)("oxd-icon-button"),p=(0,a.resolveComponent)("oxd-input-group"),h=(0,a.resolveComponent)("oxd-grid-item"),g=(0,a.resolveComponent)("oxd-grid"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form"),b=(0,a.resolveComponent)("entitlement-situational-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",e$,[(0,a.createElementVNode)("div",t$,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.add_leave_type")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveType.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leaveType.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{classes:{wrapper:"--status-grouped-field"}},{label:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",o$,[(0,a.createVNode)(u,{label:e.$t("leave.is_entitlement_situational")},null,8,["label"]),(0,a.createVNode)(m,{class:"--help",name:"exclamation-circle","with-container":!1,onClick:i.onModalOpen},null,8,["onClick"])])]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveType.situational,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leaveType.situational=e),type:"radio","option-label":e.$t("general.yes"),value:!0},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.leaveType.situational,"onUpdate:modelValue":t[2]||(t[2]=e=>n.leaveType.situational=e),type:"radio","option-label":e.$t("general.no"),value:!1},null,8,["modelValue","option-label"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(y)]),_:1})]),_:1},8,["loading","onSubmitValid"]),n.showModal?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,onClose:i.onModalClose},null,8,["onClose"])):(0,a.createCommentVNode)("",!0)])])}const l$={id:"",name:"",situational:!1};var n$={components:{"oxd-label":X.YP,"entitlement-situational-modal":KD},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-types"),{createUniqueValidator:t}=Lo(e),o=t("LeaveType","name");return{http:e,leaveTypeUniqueValidation:o}},data(){return{showModal:!1,isLoading:!1,leaveType:{...l$},rules:{name:[Kt,this.leaveTypeUniqueValidation,Wt(50)]},errors:[]}},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.leaveType.name,situational:this.leaveType.situational}).then(()=>this.$toast.saveSuccess()).then(()=>{this.leaveType={...l$},this.onCancel()})},onCancel(){I("/leave/leaveTypeList")},onModalOpen(){this.showModal=!0},onModalClose(){this.showModal=!1}}};const i$=(0,i.A)(n$,[["render",a$],["__scopeId","data-v-3b898734"]]);var r$=i$;const s$={class:"XHRM-background-container"},d$={class:"XHRM-card-container"};function c$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-input-group"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("employee-autocomplete"),g=(0,a.resolveComponent)("leave-type-dropdown"),v=(0,a.resolveComponent)("leave-period-dropdown"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("submit-button"),V=(0,a.resolveComponent)("oxd-form-actions"),b=(0,a.resolveComponent)("oxd-form"),w=(0,a.resolveComponent)("entitlement-update-modal"),x=(0,a.resolveComponent)("entitlement-bulk-update-modal"),N=(0,a.resolveComponent)("entitlement-no-match-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",s$,[(0,a.createElementVNode)("div",d$,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.add_leave_entitlement")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(b,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{label:e.$t("leave.add_to"),classes:{wrapper:"--grouped-field"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveEntitlement.bulkAssign,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leaveEntitlement.bulkAssign=e),type:"radio","option-label":e.$t("leave.individual_employee"),value:"0"},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.leaveEntitlement.bulkAssign,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leaveEntitlement.bulkAssign=e),type:"radio","option-label":e.$t("leave.multiple_employees"),value:"1"},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),0==n.leaveEntitlement.bulkAssign?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.leaveEntitlement.employee,"onUpdate:modelValue":t[2]||(t[2]=e=>n.leaveEntitlement.employee=e),params:{includeEmployees:"currentAndPast"},rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})):((0,a.openBlock)(),(0,a.createBlock)(p,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveEntitlement.location,"onUpdate:modelValue":t[3]||(t[3]=e=>n.leaveEntitlement.location=e),type:"select",label:e.$t("general.location"),options:o.locations},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveEntitlement.subunit,"onUpdate:modelValue":t[4]||(t[4]=e=>n.leaveEntitlement.subunit=e),type:"select",label:e.$t("general.sub_unit"),options:o.subunits},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(u,{class:"XHRM-leave-entitled"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-entitled-text",type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.matches_emp_count_employees",{empMatchCount:n.empMatchCount})),1)]),_:1})]),_:1})]),_:1})]),_:1})),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.leaveEntitlement.leaveType,"onUpdate:modelValue":t[5]||(t[5]=e=>n.leaveEntitlement.leaveType=e),"empty-text":e.$t("leave.no_leave_types_defined"),rules:n.rules.leaveType,"eligible-only":!1,required:""},null,8,["modelValue","empty-text","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{modelValue:n.leaveEntitlement.leavePeriod,"onUpdate:modelValue":t[6]||(t[6]=e=>n.leaveEntitlement.leavePeriod=e),rules:n.rules.leavePeriod,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveEntitlement.entitlement,"onUpdate:modelValue":t[7]||(t[7]=e=>n.leaveEntitlement.entitlement=e),rules:n.rules.entitlement,label:e.$t("leave.entitlement"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(C)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(w,{ref:"updateModal",data:n.leaveEntitlement},null,8,["data"]),(0,a.createVNode)(x,{ref:"bulkUpdateModal",data:n.leaveEntitlement},null,8,["data"]),(0,a.createVNode)(N,{ref:"noMatchModal"},null,512)])}function u$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("leave.leave_period"),options:l.options,"model-value":l.selectedPeriod,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:modelValue",t))},null,8,["label","options","model-value"])}var m$={name:"LeavePeriodDropdown",props:{modelValue:{type:Object,default:null}},emits:["update:modelValue"],setup(e){const t=(0,a.ref)([]),o=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-periods"),{jsDateFormat:l}=F(),{locale:n}=Ae();(0,a.onBeforeMount)(()=>{o.getAll().then(({data:e})=>{t.value=e.data.map(e=>{const t=ge(he(e.startDate),l,{locale:n}),o=ge(he(e.endDate),l,{locale:n});return{id:`${e.startDate}_${e.endDate}`,label:`${t} - ${o}`,startDate:e.startDate,endDate:e.endDate}})})});const i=(0,a.computed)(()=>t.value.find(t=>t.id===e.modelValue?.id));return{options:t,selectedPeriod:i}}};const p$=(0,i.A)(m$,[["render",u$]]);var h$=p$;const g$={class:"XHRM-modal-header"},v$={class:"XHRM-text-center-align"},f$={class:"XHRM-modal-footer"};function y$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,style:{maxWidth:"450px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",g$,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.updating_entitlement")),1)]),_:1})]),(0,a.createElementVNode)("div",v$,[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.entitlement_value_confirmation_message",{oldvalue:n.current,newvalue:n.updateAs})),1)]),_:1})]),(0,a.createElementVNode)("div",f$,[(0,a.createVNode)(s,{"display-type":"ghost",class:"XHRM-button-margin",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(s,{"display-type":"secondary",class:"XHRM-button-margin",label:e.$t("general.confirm"),onClick:i.onConfirm},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var C$={name:"EntitlementUpdateModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"");return{http:e}},data(){return{show:!1,reject:null,resolve:null,current:"0.00",updateAs:"0.00"}},methods:{showDialog(){return this.http.request({method:"GET",url:`/api/v2/leave/employees/${this.data.employee?.id}/leave-entitlements`,params:{leaveTypeId:this.data.leaveType?.id,fromDate:this.data.leavePeriod?.startDate,toDate:this.data.leavePeriod?.endDate,entitlement:this.data.entitlement}}).then(e=>{const{data:t}=e.data;return this.current=t.entitlement?.current?parseFloat(t.entitlement.current).toFixed(2):"0.00",this.updateAs=t.entitlement?.updateAs?parseFloat(t.entitlement.updateAs).toFixed(2):"0.00",new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})})},onConfirm(){this.show=!1,this.resolve&&this.resolve("ok")},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")}}};const V$=(0,i.A)(C$,[["render",y$],["__scopeId","data-v-64754fc0"]]);var b$=V$;const w$={class:"XHRM-dialog-header-container"},x$={class:"XHRM-dialog-horizontal-padding XHRM-dialog-vertical-padding"},N$={class:"XHRM-container"},k$={class:"XHRM-dialog-horizontal-padding XHRM-dialog-vertical-padding"};function _$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-card-table"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("submit-button"),m=(0,a.resolveComponent)("oxd-form-actions"),p=(0,a.resolveComponent)("oxd-dialog");return n.show?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,gutters:!1,class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",w$,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.updating_entitlement"))+" - "+(0,a.toDisplayString)(e.$t("leave.matching_employees")),1)]),_:1})]),(0,a.createVNode)(s,{class:"XHRM-dialog-horizontal-margin XHRM-clear-margins"}),(0,a.createElementVNode)("div",x$,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.selected_leave_entitlement_applied_to_following_employees")),1)]),_:1})]),(0,a.createElementVNode)("div",N$,[(0,a.createVNode)(d,{headers:n.headers,items:n.items,clickable:!1,class:"XHRM-horizontal-padding","row-decorator":"oxd-table-decorator-card"},null,8,["headers","items"])]),(0,a.createElementVNode)("div",k$,[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(u,{label:e.$t("general.confirm"),onClick:i.onConfirm},null,8,["label","onClick"])]),_:1})])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)}var S$={name:"EntitlementBulkUpdateModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/employees/leave-entitlements");return{http:e}},data(){return{show:!1,reject:null,resolve:null,headers:[{title:this.$t("general.employee"),name:"employee",slot:"title",style:{flex:1}},{title:this.$t("leave.old_entitlement"),name:"current",style:{flex:1}},{title:this.$t("leave.new_entitlement"),name:"updateAs",style:{flex:1}}],items:[]}},methods:{showDialog(){return this.http.getAll({leaveTypeId:this.data.leaveType?.id,fromDate:this.data.leavePeriod?.startDate,toDate:this.data.leavePeriod?.endDate,entitlement:this.data.entitlement,locationId:this.data.location?.id,subunitId:this.data.subunit?.id}).then(e=>{const{data:t}=e.data;return this.items=Array.isArray(t)?t.map(e=>({employee:`${e.firstName} ${e.lastName}`,current:e.entitlement?.current?parseFloat(e.entitlement.current).toFixed(2):"0.00",updateAs:e.entitlement?.updateAs?parseFloat(e.entitlement.updateAs).toFixed(2):"0.00"})):[],new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})})},onConfirm(){this.show=!1,this.resolve&&this.resolve("ok")},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")}}};const D$=(0,i.A)(S$,[["render",_$],["__scopeId","data-v-3d64a7db"]]);var $$=D$;const M$={class:"XHRM-modal-header"},E$={class:"XHRM-text-center-align"},R$={class:"XHRM-modal-footer"};function T$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,style:{maxWidth:"450px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",M$,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.no_matching_employees")),1)]),_:1})]),(0,a.createElementVNode)("div",E$,[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.no_employees_match_filters")),1)]),_:1})]),(0,a.createElementVNode)("div",R$,[(0,a.createVNode)(s,{"display-type":"secondary",label:e.$t("general.ok"),onClick:i.onCancel},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var B$={name:"EntitlementNoMatchModal",components:{"oxd-dialog":X.KB},data(){return{show:!1}},methods:{showDialog(){this.show=!0},onCancel(){this.show=!1}}};const I$=(0,i.A)(B$,[["render",T$],["__scopeId","data-v-6934a753"]]);var A$=I$;const H$={bulkAssign:0,employee:null,leaveType:null,leavePeriod:null,entitlement:"",subunit:null,location:null};var X$={components:{"leave-type-dropdown":fD,"leave-period-dropdown":h$,"employee-autocomplete":$a,"entitlement-update-modal":b$,"entitlement-bulk-update-modal":$$,"entitlement-no-match-modal":A$},props:{locations:{type:Array,default:()=>[]},subunits:{type:Array,default:()=>[]},leavePeriod:{type:Object,required:!1,default:()=>null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-entitlements");return{http:e}},data(){return{isLoading:!1,leaveEntitlement:{...H$},leavePeriodDefined:!1,rules:{employee:[Kt,$o],leaveType:[Kt],leavePeriod:[Kt],entitlement:[Kt,e=>/^\d+(\.\d{1,2})?$/.test(e)||this.$t("leave.should_be_a_number_with_2_decimal_places"),eo(1e4)]},empMatchCount:0}},watch:{"leaveEntitlement.location":"fetchEmployeeCount","leaveEntitlement.subunit":"fetchEmployeeCount"},beforeMount(){this.fetchEmployeeCount(),this.leavePeriod&&(this.leaveEntitlement.leavePeriod=this.leavePeriod)},methods:{onCancel(){I("/leave/viewLeaveEntitlements")},async onSave(){let e=null;this.isLoading=!0;const t=1==this.leaveEntitlement.bulkAssign;if(t){if(0===this.empMatchCount)return this.isLoading=!1,this.$refs.noMatchModal.showDialog();e=await this.$refs.bulkUpdateModal.showDialog()}else e=await this.$refs.updateModal.showDialog();if("ok"!==e)return void(this.isLoading=!1);const o={empNumber:void 0,bulkAssign:void 0,locationId:void 0,subunitId:void 0,leaveTypeId:this.leaveEntitlement.leaveType?.id,fromDate:this.leaveEntitlement.leavePeriod?.startDate,toDate:this.leaveEntitlement.leavePeriod?.endDate,entitlement:this.leaveEntitlement.entitlement};t?(o.bulkAssign=!0,o.locationId=this.leaveEntitlement.location?.id,o.subunitId=this.leaveEntitlement.subunit?.id):o.empNumber=this.leaveEntitlement.employee?.id,this.http.create(o).then(e=>{let t=null,o=null;const{data:a}=e.data;return Array.isArray(a)?t=this.$toast.success({title:this.$t("general.success"),message:this.$t("leave.entitlement_added_to_n_employees",{count:a.length})}):(o={empNumber:a.employee.empNumber,leaveTypeId:a.leaveType.id,startDate:a.fromDate,endDate:a.toDate},t=this.$toast.saveSuccess()),new Promise(e=>{t.then(()=>{e(o)})})}).then(e=>{e?I("/leave/viewLeaveEntitlements",void 0,e):I("/leave/viewLeaveEntitlements")})},async fetchEmployeeCount(){this.http.request({method:"GET",url:"/api/v2/pim/employees/count",params:{locationId:this.leaveEntitlement.location?.id,subunitId:this.leaveEntitlement.subunit?.id}}).then(e=>{const{data:t}=e.data;this.empMatchCount=parseInt(t.count)})}}};const U$=(0,i.A)(X$,[["render",c$],["__scopeId","data-v-5a244420"]]);var L$=U$;const P$={class:"XHRM-background-container"},q$={class:"XHRM-card-container"};function F$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("leave-type-dropdown"),h=(0,a.resolveComponent)("oxd-input-field"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",P$,[(0,a.createElementVNode)("div",q$,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.edit_leave_entitlement")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.leaveEntitlement.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.leaveEntitlement.employee=e),disabled:"",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.leaveEntitlement.leaveType,"onUpdate:modelValue":t[1]||(t[1]=e=>n.leaveEntitlement.leaveType=e),"eligible-only":!1,required:"",disabled:""},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.leaveEntitlement.leavePeriod,"onUpdate:modelValue":t[2]||(t[2]=e=>n.leaveEntitlement.leavePeriod=e),type:"select",label:e.$t("leave.leave_period"),options:n.leavePeriods,rules:n.rules.leavePeriod,required:""},null,8,["modelValue","label","options","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.leaveEntitlement.entitlement,"onUpdate:modelValue":t[3]||(t[3]=e=>n.leaveEntitlement.entitlement=e),rules:n.rules.entitlement,label:e.$t("leave.entitlement"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const z$={employee:null,leaveType:null,leavePeriod:null,entitlement:""};var j$={components:{"leave-type-dropdown":fD,"employee-autocomplete":$a},props:{entitlementId:{type:String,required:!0},employee:{type:Object,default:()=>({})}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-entitlements");e.setIgnorePath("/api/v2/leave/leave-entitlements/[0-9]+/validation/entitlements");const{jsDateFormat:t}=F(),{locale:o}=Ae();return{http:e,jsDateFormat:t,locale:o}},data(){return{isLoading:!1,leaveEntitlement:{...z$},rules:{employee:[Kt,$o],leaveType:[Kt],leavePeriod:[Kt],entitlement:[Kt,e=>/^\d+(\.\d{1,2})?$/.test(e)||this.$t("leave.should_be_a_number_with_2_decimal_places"),eo(1e4),(0,X.Ld)(this.validateEntitlement,500)]},leavePeriods:[]}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET",url:"/api/v2/leave/leave-periods"}).then(({data:e})=>(this.leavePeriods=e.data.map(e=>{const t=ge(he(e.startDate),this.jsDateFormat,{locale:this.locale}),o=ge(he(e.endDate),this.jsDateFormat,{locale:this.locale});return{id:`${e.startDate}_${e.endDate}`,label:`${t} - ${o}`,startDate:e.startDate,endDate:e.endDate}}),this.http.get(this.entitlementId))).then(e=>{const{data:t}=e.data;this.leaveEntitlement.employee={id:t.employee.empNumber,label:`${t.employee.firstName} ${t.employee.lastName}`,isPastEmployee:t.employee.terminationId},this.leaveEntitlement.leaveType={id:t.leaveType.id,label:t.leaveType.name},this.leaveEntitlement.leavePeriod=this.leavePeriods.find(e=>e.id===`${t.fromDate}_${t.toDate}`),this.leaveEntitlement.entitlement=t.entitlement}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/leave/viewLeaveEntitlements",void 0,{empNumber:this.leaveEntitlement.employee?.id,leaveTypeId:this.leaveEntitlement.leaveType?.id,startDate:this.leaveEntitlement.leavePeriod?.startDate,endDate:this.leaveEntitlement.leavePeriod?.endDate})},onSave(){this.isLoading=!0;const e={fromDate:this.leaveEntitlement.leavePeriod?.startDate,toDate:this.leaveEntitlement.leavePeriod?.endDate,entitlement:this.leaveEntitlement.entitlement};this.http.update(this.entitlementId,e).then(()=>{this.$toast.updateSuccess(),this.onCancel()})},validateEntitlement(e){const t=parseFloat(e);return new Promise(e=>{isNaN(t)?e(!0):this.http.request({method:"GET",url:`/api/v2/leave/leave-entitlements/${this.entitlementId}/validation/entitlements`,params:{entitlement:t}}).then(t=>{const{data:o}=t.data;return!0===o.valid?e(!0):e(this.$t("leave.used_amount_exceeds_the_current_amount"))})})}}};const O$=(0,i.A)(j$,[["render",F$]]);var G$=O$;function Q$(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("leave-type-dropdown"),c=(0,a.resolveComponent)("leave-period-dropdown"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-divider"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-table-filter"),C=(0,a.resolveComponent)("leave-entitlement-table");return(0,a.openBlock)(),(0,a.createBlock)(C,{prefetch:!1},{default:(0,a.withCtx)(({filters:t,filterItems:o})=>[(0,a.createVNode)(y,{"filter-title":e.$t("leave.leave_entitlements")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{onSubmitValid:o},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:t.employee,"onUpdate:modelValue":e=>t.employee=e,rules:n.rules.employee,params:{includeEmployees:"currentAndPast"},required:""},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:t.leaveType,"onUpdate:modelValue":e=>t.leaveType=e,"eligible-only":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:t.leavePeriod,"onUpdate:modelValue":e=>t.leavePeriod=e,"show-empty-selector":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),(0,a.createVNode)(p),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:2},1032,["onSubmitValid"])]),_:2},1032,["filter-title"])]),_:1})}const K$={class:"XHRM-background-container"},W$={key:0,class:"XHRM-paper-container"},J$={class:"XHRM-header-container"},Y$={class:"XHRM-container"},Z$={class:"XHRM-bottom-container"};function eM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-button"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",K$,[(0,a.renderSlot)(e.$slots,"default",{filters:l.filters,filterItems:i.filterItems}),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),l.showDatatable?((0,a.openBlock)(),(0,a.createElementBlock)("div",W$,[(0,a.createElementVNode)("div",J$,[(0,a.createElementVNode)("div",null,[e.$can.create("leave_entitlements")?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(s,{tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.totalEntitlements),1)]),_:1})]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",Y$,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:i.headers,items:l.items?.data,selectable:e.$can.delete("leave_entitlements"),clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","loading"])]),(0,a.createElementVNode)("div",Z$,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var tM={name:"LeaveEntitlementTable",components:{"delete-confirmation":Xt},props:{prefetch:{type:Boolean,default:!0},employee:{type:Object,required:!1,default:()=>null},leaveType:{type:Object,required:!1,default:()=>null},leavePeriod:{type:Object,required:!1,default:()=>null}},setup(e){const t=(0,a.ref)({leaveType:e.leaveType?e.leaveType:null,leavePeriod:e.leavePeriod?e.leavePeriod:null,employee:e.employee?{id:e.employee.empNumber,label:`${e.employee.firstName} ${e.employee.middleName} ${e.employee.lastName}`,isPastEmployee:e.employee.terminationId}:null}),o=(0,a.computed)(()=>({empNumber:t.value.employee?.id,leaveTypeId:t.value.leaveType?.id,fromDate:t.value.leavePeriod?.startDate,toDate:t.value.leavePeriod?.endDate})),l=new H(window.appGlobal.baseUrl,"/api/v2/leave/leave-entitlements"),{$t:n}=Ie(),{jsDateFormat:i}=F(),{locale:r}=Ae(),s=e=>e.map(e=>({id:e.id,leaveType:e.leaveType.name+`${e.leaveType.deleted?n("general.deleted"):""}`,entitlementType:e.entitlementType.name,fromDate:ge(he(e.fromDate),i,{locale:r}),toDate:ge(he(e.toDate),i,{locale:r}),days:e.entitlement,isSelectable:e.deletable})),{showPaginator:d,currentPage:c,total:u,pages:m,pageSize:p,response:h,isLoading:g,execQuery:v}=Et(l,{query:o,normalizer:s,prefetch:e.employee||e.prefetch}),f=(0,a.computed)(()=>{const e=h.value.meta?.sum?h.value.meta.sum:0;return`Total ${parseFloat(e).toFixed(2)} Day(s)`}),y=(0,a.computed)(()=>void 0!==h.value.data);return{http:l,showPaginator:d,currentPage:c,isLoading:g,total:u,pages:m,pageSize:p,execQuery:v,items:h,filters:t,totalEntitlements:f,showDatatable:y}},data(){return{checkedItems:[]}},computed:{headers(){const e=[{name:"leaveType",slot:"title",title:this.$t("leave.leave_type"),style:{flex:1}},{name:"entitlementType",title:this.$t("leave.entitlement_type"),style:{flex:1}},{name:"fromDate",title:this.$t("leave.valid_from"),style:{flex:1}},{name:"toDate",title:this.$t("leave.valid_to"),style:{flex:1}},{name:"days",title:this.$t("leave.days"),style:{flex:1}}],t={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.$can.delete("leave_entitlements")&&(t.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),this.$can.update("leave_entitlements")&&(t.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),Object.keys(t.cellConfig).length>0?e.concat([t]):e}},methods:{onClickAdd(){I("/leave/addLeaveEntitlement")},onClickEdit(e){I("/leave/editLeaveEntitlement/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){if(!e.isSelectable)return this.$toast.error({title:this.$t("general.error"),message:this.$t("leave.entitlements_will_not_be_deleted_since_already_in_use")});this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()}}};const oM=(0,i.A)(tM,[["render",eM]]);var aM=oM,lM={components:{"leave-entitlement-table":aM,"employee-autocomplete":$a,"leave-type-dropdown":fD,"leave-period-dropdown":h$},data(){return{rules:{employee:[Kt,Wt(100),$o]}}}};const nM=(0,i.A)(lM,[["render",Q$]]);var iM=nM;function rM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("leave-type-dropdown"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("leave-period-dropdown"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("leave-entitlement-table");return(0,a.openBlock)(),(0,a.createBlock)(f,null,{default:(0,a.withCtx)(({filters:t,filterItems:o})=>[(0,a.createVNode)(v,{"filter-title":e.$t("leave.my_leave_entitlements")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:o},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:t.leaveType,"onUpdate:modelValue":e=>t.leaveType=e},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:t.leavePeriod,"onUpdate:modelValue":e=>t.leavePeriod=e,"show-empty-selector":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),(0,a.createVNode)(m),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:2},1032,["onSubmitValid"])]),_:2},1032,["filter-title"])]),_:1})}var sM={components:{"leave-entitlement-table":aM,"leave-type-dropdown":fD,"leave-period-dropdown":h$}};const dM=(0,i.A)(sM,[["render",rM]]);var cM=dM;const uM={class:"XHRM-background-container"},mM={class:"XHRM-card-container"};function pM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",uM,[(0,a.createElementVNode)("div",mM,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.work_week")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.monday,"onUpdate:modelValue":t[0]||(t[0]=e=>n.workWeek.monday=e),type:"select",options:o.dayTypes,rules:n.rules.monday,label:e.$t("general.monday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.tuesday,"onUpdate:modelValue":t[1]||(t[1]=e=>n.workWeek.tuesday=e),type:"select",options:o.dayTypes,rules:n.rules.tuesday,label:e.$t("general.tuesday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.wednesday,"onUpdate:modelValue":t[2]||(t[2]=e=>n.workWeek.wednesday=e),type:"select",options:o.dayTypes,rules:n.rules.wednesday,label:e.$t("general.wednesday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.thursday,"onUpdate:modelValue":t[3]||(t[3]=e=>n.workWeek.thursday=e),type:"select",options:o.dayTypes,rules:n.rules.thursday,label:e.$t("general.thursday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.friday,"onUpdate:modelValue":t[4]||(t[4]=e=>n.workWeek.friday=e),type:"select",options:o.dayTypes,rules:n.rules.friday,label:e.$t("general.friday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.saturday,"onUpdate:modelValue":t[5]||(t[5]=e=>n.workWeek.saturday=e),type:"select",options:o.dayTypes,rules:n.rules.saturday,label:e.$t("general.saturday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.workWeek.sunday,"onUpdate:modelValue":t[6]||(t[6]=e=>n.workWeek.sunday=e),type:"select",options:o.dayTypes,rules:n.rules.sunday,label:e.$t("general.sunday"),required:""},null,8,["modelValue","options","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const hM={monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null};var gM={props:{dayTypes:{type:Array,default:()=>[]}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/workweek");return{http:e}},data(){return{isLoading:!1,workWeek:{...hM},rules:{monday:[Kt],tuesday:[Kt],wednesday:[Kt],thursday:[Kt],friday:[Kt],saturday:[Kt],sunday:[Kt]}}},beforeMount(){this.isLoading=!0,this.http.request({method:"GET"}).then(e=>{const{data:t}=e.data;this.workWeek.monday=this.dayTypes.find(e=>e.id===t.monday),this.workWeek.tuesday=this.dayTypes.find(e=>e.id===t.tuesday),this.workWeek.wednesday=this.dayTypes.find(e=>e.id===t.wednesday),this.workWeek.thursday=this.dayTypes.find(e=>e.id===t.thursday),this.workWeek.friday=this.dayTypes.find(e=>e.id===t.friday),this.workWeek.saturday=this.dayTypes.find(e=>e.id===t.saturday),this.workWeek.sunday=this.dayTypes.find(e=>e.id===t.sunday)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){const e=Object.values(this.workWeek).find(e=>8!==e.id);if(void 0===e)return this.$toast.warn({title:this.$t("general.warning"),message:this.$t("leave.at_least_one_day_should_be_a_working_day")});this.isLoading=!0,this.http.request({method:"PUT",data:{monday:this.workWeek.monday.id,tuesday:this.workWeek.tuesday.id,wednesday:this.workWeek.wednesday.id,thursday:this.workWeek.thursday.id,friday:this.workWeek.friday.id,saturday:this.workWeek.saturday.id,sunday:this.workWeek.sunday.id}}).then(()=>{this.$toast.saveSuccess(),this.isLoading=!1})}}};const vM=(0,i.A)(gM,[["render",pM]]);var fM=vM;const yM={class:"XHRM-background-container"},CM={class:"XHRM-paper-container"},VM={class:"XHRM-header-container"},bM={class:"XHRM-container"},wM={class:"XHRM-bottom-container"};function xM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("date-input"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-table-filter"),v=(0,a.resolveComponent)("table-header"),f=(0,a.resolveComponent)("oxd-card-table"),y=(0,a.resolveComponent)("oxd-pagination"),C=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",yM,[(0,a.createVNode)(g,{"filter-title":e.$t("leave.holidays")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{onSubmitValid:i.filterItems,onReset:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.fromDate=e),label:e.$t("general.from"),rules:n.rules.fromDate,years:n.yearArray},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.toDate=e),label:e.$t("general.to"),rules:n.rules.toDate,years:n.yearArray},null,8,["modelValue","label","rules","years"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(m,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",CM,[(0,a.createElementVNode)("div",VM,[(0,a.createVNode)(m,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(v,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",bM,[(0,a.createVNode)(f,{selected:n.checkedItems,"onUpdate:selected":t[2]||(t[2]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",wM,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,current:l.currentPage,"onUpdate:current":t[3]||(t[3]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(C,{ref:"deleteDialog"},null,512)])}var NM={components:{"delete-confirmation":Xt},props:{leavePeriod:{type:Object,required:!0}},setup(e){const t=(0,a.ref)({fromDate:e.leavePeriod.startDate,toDate:e.leavePeriod.endDate}),o=(0,a.computed)(()=>({fromDate:t.value.fromDate,toDate:t.value.toDate})),{jsDateFormat:l,userDateFormat:n}=F(),{locale:i}=Ae(),r=e=>e.map(e=>({id:e.id,name:e.name,date:ge(he(e.date),l,{locale:i}),recurring:e.recurring?"Yes":"No",length:e.lengthName})),s=new H(window.appGlobal.baseUrl,"/api/v2/leave/holidays"),{showPaginator:d,currentPage:c,total:u,pages:m,pageSize:p,response:h,isLoading:g,execQuery:v}=Et(s,{query:o,normalizer:r});return{http:s,showPaginator:d,currentPage:c,isLoading:g,total:u,pages:m,pageSize:p,execQuery:v,items:h,filters:t,userDateFormat:n}},data(){return{yearArray:[...xy(201)],rules:{fromDate:[Kt,Jt(this.userDateFormat)],toDate:[Kt,Jt(this.userDateFormat),so(()=>this.filters.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]},headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:2}},{name:"date",title:this.$t("general.date"),style:{flex:2}},{name:"length",title:this.$t("leave.full_day_half_day"),style:{flex:2}},{name:"recurring",title:this.$t("leave.repeats_annually"),style:{flex:2}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/leave/saveHolidays")},onClickEdit(e){I("/leave/saveHolidays/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()}}};const kM=(0,i.A)(NM,[["render",xM]]);var _M=kM;const SM={class:"XHRM-background-container"},DM={class:"XHRM-card-container"};function $M(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("date-input"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-input-group"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",SM,[(0,a.createElementVNode)("div",DM,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.add_holiday")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.holiday.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.holiday.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.holiday.date,"onUpdate:modelValue":t[1]||(t[1]=e=>n.holiday.date=e),label:e.$t("general.date"),rules:n.rules.date,years:n.yearArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.holiday.length,"onUpdate:modelValue":t[2]||(t[2]=e=>n.holiday.length=e),type:"select",label:e.$t("leave.full_day_half_day"),options:o.holidayLengthList,rules:n.rules.length,required:""},null,8,["modelValue","label","options","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{classes:{wrapper:"--status-grouped-field"},label:e.$t("leave.repeats_annually")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.holiday.recurring,"onUpdate:modelValue":t[3]||(t[3]=e=>n.holiday.recurring=e),type:"radio","option-label":e.$t("general.yes"),value:!0},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.holiday.recurring,"onUpdate:modelValue":t[4]||(t[4]=e=>n.holiday.recurring=e),type:"radio","option-label":e.$t("general.no"),value:!1},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const MM={name:"",date:"",recurring:!1,length:{id:0,label:"Full Day"}};var EM={props:{holidayLengthList:{type:Array,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/holidays"),{userDateFormat:t}=F();return{http:e,userDateFormat:t}},data(){return{yearArray:[...xy(201)],isLoading:!1,holiday:{...MM},rules:{name:[Kt,Wt(200)],date:[Kt,Jt(this.userDateFormat)],length:[Kt]},errors:[]}},created(){this.isLoading=!0;const e=new Date,t=e.getFullYear()-100+"-"+(e.getMonth()+1)+"-"+e.getDate(),o=e.getFullYear()+100+"-"+(e.getMonth()+1)+"-"+e.getDate();this.http.getAll({fromDate:t,toDate:o,limit:0}).then(e=>{const{data:t}=e.data;this.rules.date.push(e=>{const o=t.findIndex(t=>t.date==e);return-1===o||this.$t("general.already_exists")})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({name:this.holiday.name,date:this.holiday.date,recurring:this.holiday.recurring,length:this.holiday.length.id}).then(()=>this.$toast.saveSuccess()).then(()=>{this.holiday={...MM},this.onCancel()})},onCancel(){I("/leave/viewHolidayList")}}};const RM=(0,i.A)(EM,[["render",$M],["__scopeId","data-v-49476257"]]);var TM=RM;const BM={class:"XHRM-background-container"},IM={class:"XHRM-card-container"};function AM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("date-input"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-input-group"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",BM,[(0,a.createElementVNode)("div",IM,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.edit_holiday")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.holiday.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.holiday.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.holiday.date,"onUpdate:modelValue":t[1]||(t[1]=e=>n.holiday.date=e),label:e.$t("general.date"),rules:n.rules.date,years:n.yearArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.holiday.length,"onUpdate:modelValue":t[2]||(t[2]=e=>n.holiday.length=e),type:"select",label:e.$t("leave.full_day_half_day"),options:o.holidayLengthList,rules:n.rules.length,required:""},null,8,["modelValue","label","options","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{classes:{wrapper:"--status-grouped-field"},label:e.$t("leave.repeats_annually")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.holiday.recurring,"onUpdate:modelValue":t[3]||(t[3]=e=>n.holiday.recurring=e),type:"radio","option-label":e.$t("general.yes"),value:!0},null,8,["modelValue","option-label"]),(0,a.createVNode)(d,{modelValue:n.holiday.recurring,"onUpdate:modelValue":t[4]||(t[4]=e=>n.holiday.recurring=e),type:"radio","option-label":e.$t("general.no"),value:!1},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const HM={id:"",name:"",date:"",recurring:!1,length:0};var XM={props:{holidayId:{type:Number,required:!0},holidayLengthList:{type:Array,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/leave/holidays"),{userDateFormat:t}=F();return{http:e,userDateFormat:t}},data(){return{yearArray:[...xy(201)],isLoading:!1,holiday:{...HM},rules:{name:[Kt,Wt(200)],date:[Kt,Jt(this.userDateFormat)],length:[Kt]}}},created(){this.isLoading=!0,this.http.get(this.holidayId).then(e=>{const{data:t}=e.data;this.holiday.id=t.id,this.holiday.name=t.name,this.holiday.date=t.date,this.holiday.recurring=t.recurring,""!==t.length&&null!==t.length&&(this.holiday.length=this.holidayLengthList.find(e=>e.id===t.length));const o=new Date,a=o.getFullYear()-100+"-"+(o.getMonth()+1)+"-"+o.getDate(),l=o.getFullYear()+100+"-"+(o.getMonth()+1)+"-"+o.getDate();return this.http.getAll({fromDate:a,toDate:l,limit:0})}).then(e=>{const{data:t}=e.data;this.rules.date.push(e=>{const o=t.findIndex(t=>t.date===e);if(o>-1){const e=t[o].id;return e==this.holidayId||this.$t("general.already_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.holidayId,{name:this.holiday.name,date:this.holiday.date,recurring:this.holiday.recurring,length:this.holiday.length.id}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},onCancel(){I("/leave/viewHolidayList")}}};const UM=(0,i.A)(XM,[["render",AM],["__scopeId","data-v-7856e93c"]]);var LM=UM;function PM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("date-input"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("leave-type-dropdown"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("employee-autocomplete"),h=(0,a.resolveComponent)("oxd-text"),g=(0,a.resolveComponent)("oxd-switch-input"),v=(0,a.resolveComponent)("oxd-divider"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form"),b=(0,a.resolveComponent)("oxd-table-filter"),w=(0,a.resolveComponent)("leave-list-table");return(0,a.openBlock)(),(0,a.createBlock)(w,{"leave-statuses":o.leaveStatuses},{default:(0,a.withCtx)(({filters:t,filterItems:l,rules:n,onReset:i})=>[(0,a.createVNode)(b,{"filter-title":e.$t("leave.leave_list")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(V,{onSubmitValid:l,onReset:i},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:t.fromDate,"onUpdate:modelValue":e=>t.fromDate=e,label:e.$t("general.from_date"),rules:n.fromDate},null,8,["modelValue","onUpdate:modelValue","label","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:t.toDate,"onUpdate:modelValue":e=>t.toDate=e,label:e.$t("general.to_date"),rules:n.toDate},null,8,["modelValue","onUpdate:modelValue","label","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:t.statuses,"onUpdate:modelValue":e=>t.statuses=e,value:e.$t("general.select"),type:"multiselect",label:e.$t("leave.show_leave_with_status"),options:o.leaveStatuses,rules:n.statuses,required:""},null,8,["modelValue","onUpdate:modelValue","value","label","options","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:t.leaveType,"onUpdate:modelValue":e=>t.leaveType=e,"eligible-only":!1},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:t.employee,"onUpdate:modelValue":e=>t.employee=e,rules:n.employee,params:{includeEmployees:t.includePastEmps?"currentAndPast":"onlyCurrent"}},null,8,["modelValue","onUpdate:modelValue","rules","params"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:t.subunit,"onUpdate:modelValue":e=>t.subunit=e,type:"select",label:e.$t("general.sub_unit"),options:o.subunits},null,8,["modelValue","onUpdate:modelValue","label","options"])]),_:2},1024),(0,a.createVNode)(s,{class:"XHRM-leave-filter --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{class:"XHRM-leave-filter-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.include_past_employees")),1)]),_:1}),(0,a.createVNode)(g,{modelValue:t.includePastEmps,"onUpdate:modelValue":e=>t.includePastEmps=e},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),(0,a.createVNode)(v),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(y,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:2},1032,["onSubmitValid","onReset"])]),_:2},1032,["filter-title"])]),_:1},8,["leave-statuses"])}const qM={class:"XHRM-background-container"},FM={class:"XHRM-paper-container"},zM={class:"XHRM-container"},jM={class:"XHRM-bottom-container"};function OM(e,t,o,l,n,i){const r=(0,a.resolveComponent)("leave-list-table-header"),s=(0,a.resolveComponent)("oxd-card-table"),d=(0,a.resolveComponent)("oxd-pagination"),c=(0,a.resolveComponent)("leave-comment-modal"),u=(0,a.resolveComponent)("leave-bulk-action-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",qM,[(0,a.renderSlot)(e.$slots,"default",{filters:l.filters,rules:l.rules,filterItems:i.filterItems,onReset:i.onReset},void 0,!0),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",FM,[(0,a.createVNode)(r,{selected:l.checkedItems.length,total:l.total,loading:l.isLoading,"bulk-actions":l.leaveBulkActions,onOnActionClick:i.onLeaveActionBulk},null,8,["selected","total","loading","bulk-actions","onOnActionClick"]),(0,a.createElementVNode)("div",zM,[(0,a.createVNode)(s,{selected:l.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>l.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",jM,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])]),n.showCommentModal?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,id:n.commentModalState,onClose:i.onCommentModalClose},null,8,["id","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(u,{ref:"bulkActionModal",data:n.bulkActionModalState},null,8,["data"])],64)}const GM=(e,{length:t=50,ellipsis:o="..."}={})=>"string"===typeof e?e.length>t?e.substr(0,t)+o:e:"",QM={component:"oxd-button",props:{label:"Approve",displayType:"label-success",size:"medium",onClick:null}},KM={component:"oxd-button",props:{label:"Reject",displayType:"label-danger",size:"medium",onClick:null}},WM={component:"oxd-button",props:{label:"Cancel",displayType:"label-warn",size:"medium",onClick:null}},JM={component:"oxd-table-dropdown",props:{options:[],style:{"margin-left":"auto"},onClick:null}};function YM(e,{primaryActions:t={approve:QM,reject:KM,cancel:WM,more:JM}}={}){const o=(t,o)=>e.request({method:"PUT",url:`/api/v2/leave/leaves/${t}`,data:{action:o}}),a=(t,o)=>e.request({method:"PUT",url:`/api/v2/leave/employees/leave-requests/${t}`,data:{action:o}}),l=(t,o)=>e.request({method:"PUT",url:"/api/v2/leave/employees/leave-requests/bulk",data:{data:t.map(e=>({leaveRequestId:e,action:o}))}});return{leaveActions:t,processLeaveAction:o,processLeaveRequestAction:a,processLeaveRequestBulkAction:l}}const ZM={class:"XHRM-modal-header"},eE={key:0,class:"XHRM-modal-content"};function tE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("leave-comment"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",ZM,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.leave_request_comments")),1)]),_:1})]),(0,a.createVNode)(s),n.isLoading?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",eE,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.comments,e=>((0,a.openBlock)(),(0,a.createBlock)(d,{key:e.id,data:e},null,8,["data"]))),128))])),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.comment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.comment=e),type:"textarea",placeholder:e.$t("general.comment_here"),rules:n.rules.comment},null,8,["modelValue","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const oE={class:"XHRM-comment"},aE={class:"XHRM-comment-profile"},lE={class:"XHRM-comment-profile-image-wrapper"},nE=["src"],iE={class:"XHRM-comment-body"},rE={class:"XHRM-comment-profile-name"},sE={class:"XHRM-comment-message"},dE={class:"XHRM-comment-timestamp"};function cE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)("div",oE,[(0,a.createElementVNode)("div",aE,[(0,a.createElementVNode)("div",lE,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"XHRM-comment-profile-image",src:l.imgSrc},null,8,nE)])]),(0,a.createElementVNode)("div",iE,[(0,a.createElementVNode)("div",rE,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.fullName),1)]),_:1})]),(0,a.createElementVNode)("div",sE,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.data.comment),1)]),_:1})]),(0,a.createElementVNode)("div",dE,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.commentDate)+" - "+(0,a.toDisplayString)(o.data.time),1)]),_:1})])])])}const uE=`${window.appGlobal.publicPath}/images/default-photo.png`;var mE={name:"LeaveComment",props:{data:{type:Object,required:!0}},setup(e){const t=(0,a.computed)(()=>{const t=e.data.createdByEmployee;return t?`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${t.empNumber}`:uE}),o=(0,a.computed)(()=>{const t=e.data.createdByEmployee;return t&&`${t.firstName} ${t.lastName}`}),{jsDateFormat:l}=F(),{locale:n}=Ae(),i=(0,a.computed)(()=>ge(he(e.data?.date),l,{locale:n}));return{imgSrc:t,fullName:o,commentDate:i}}};const pE=(0,i.A)(mE,[["render",cE],["__scopeId","data-v-3e996605"]]);var hE=pE,gE={name:"LeaveCommentModal",components:{"oxd-dialog":X.KB,"leave-comment":hE},props:{id:{type:Number,required:!1,default:null},leaveRequest:{type:Boolean,default:!0}},emits:["close"],setup(e){const t=e.leaveRequest?"leave-requests":"leaves",o=new H(window.appGlobal.baseUrl,`/api/v2/leave/${t}/${e.id}/leave-comments`);return{http:o}},data(){return{isLoading:!1,comment:null,rules:{comment:[Kt,Wt(255)]},comments:[]}},beforeMount(){this.isLoading=!0,this.http.getAll({limit:0}).then(e=>{const{data:t}=e.data;this.comments=t}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.create({comment:this.comment}).then(()=>{this.$toast.saveSuccess(),this.onCancel()})},onCancel(){this.comment=null,this.$emit("close",!0)}}};const vE=(0,i.A)(gE,[["render",tE],["__scopeId","data-v-6bef647a"]]);var fE=vE;const yE={class:"XHRM-modal-header"},CE={class:"XHRM-text-center-align"},VE={class:"XHRM-modal-footer"};function bE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-dialog-popup","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",yE,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.leave_action",{action:i.action})),1)]),_:1})]),(0,a.createElementVNode)("div",CE,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.bulk_leave_action_confirm_message_one",{action:i.action,count:i.count}))+" "+(0,a.toDisplayString)(e.$t("leave.bulk_leave_action_confirm_message_two")),1)]),_:1})]),(0,a.createElementVNode)("div",VE,[(0,a.createVNode)(s,{label:e.$t("general.no_cancel"),"display-type":"text",class:"XHRM-button-margin",onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(s,{label:e.$t("leave.yes_confirm"),"display-type":"secondary",onClick:i.onConfirm},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var wE={name:"LeaveBulkActionModal",components:{"oxd-dialog":X.KB},props:{data:{type:Object,default:()=>null}},data(){return{show:!1,reject:null,resolve:null}},computed:{count(){return this.data?.count?this.data.count:0},action(){return this.data?.action}},methods:{showDialog(){return new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")},onConfirm(){this.show=!1,this.resolve&&this.resolve("ok")}}};const xE=(0,i.A)(wE,[["render",bE],["__scopeId","data-v-1b910fe4"]]);var NE=xE;const kE={class:"XHRM-header-container"},_E={key:0,class:"actions"};function SE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",kE,[o.bulkActions&&o.selected>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",_E,[(0,a.createVNode)(r,{tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.n_records_selected",{count:o.selected})),1)]),_:1}),o.bulkActions.APPROVE?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,label:e.$t("general.approve"),"display-type":"label-success",onClick:t[0]||(t[0]=t=>e.$emit("onActionClick","APPROVE"))},null,8,["label"])):(0,a.createCommentVNode)("",!0),o.bulkActions.REJECT?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,label:e.$t("general.reject"),"display-type":"label-danger",onClick:t[1]||(t[1]=t=>e.$emit("onActionClick","REJECT"))},null,8,["label"])):(0,a.createCommentVNode)("",!0),o.bulkActions.CANCEL?((0,a.openBlock)(),(0,a.createBlock)(s,{key:2,label:e.$t("general.cancel"),"display-type":"label-warn",onClick:t[2]||(t[2]=t=>e.$emit("onActionClick","CANCEL"))},null,8,["label"])):(0,a.createCommentVNode)("",!0)])):((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.n_records_found",{count:o.total})),1)]),_:1}))])}var DE={name:"LeaveListTableHeader",props:{loading:{type:Boolean,required:!0},selected:{type:Number,required:!0},total:{type:Number,required:!0},bulkActions:{type:Object,required:!1,default:()=>({})}},emits:["onActionClick"]};const $E=(0,i.A)(DE,[["render",SE],["__scopeId","data-v-20571750"]]);var ME=$E;const EE={employee:null,fromDate:null,toDate:null,statuses:[],subunit:null,includePastEmps:!1,leaveType:null};var RE={name:"LeaveListTable",components:{"leave-list-table-header":ME,"leave-comment-modal":fE,"leave-bulk-action-modal":NE},props:{myLeaveList:{type:Boolean,default:!1},leaveStatuses:{type:Array,default:()=>[]},employee:{type:Object,required:!1,default:()=>null},leaveType:{type:Object,required:!1,default:()=>null},fromDate:{type:String,required:!1,default:null},toDate:{type:String,required:!1,default:null},leaveStatus:{type:Object,required:!1,default:()=>null}},setup(e){const t=(0,a.ref)({...EE,...e.leaveType&&{leaveType:e.leaveType},...e.fromDate&&{fromDate:e.fromDate},...e.toDate&&{toDate:e.toDate},...e.leaveStatus&&{statuses:[e.leaveStatus]},...e.employee&&{employee:{id:e.employee.empNumber,label:`${e.employee.firstName} ${e.employee.middleName} ${e.employee.lastName}`,isPastEmployee:e.employee.terminationId}}}),o=(0,a.ref)([]),{$t:l}=Ie(),{locale:n}=Ae(),{jsDateFormat:i,userDateFormat:r}=F(),s={fromDate:[Kt,Jt(r)],toDate:[Kt,Jt(r),so(()=>t.value.fromDate,l("general.to_date_should_be_after_from_date"),{allowSameDate:!0})],statuses:[Kt],employee:[Wt(100),$o]},d=(0,a.computed)(()=>{const e=Array.isArray(t.value.statuses)?t.value.statuses:[];return{empNumber:t.value.employee?.id,fromDate:t.value.fromDate,toDate:t.value.toDate,subunitId:t.value.subunit?.id,includeEmployees:t.value.includePastEmps?"currentAndPast":"onlyCurrent",statuses:e.map(e=>e.id),leaveTypeId:t.value.leaveType?.id}}),c=new H(window.appGlobal.baseUrl,"/api/v2/leave/"+(e.myLeaveList?"leave-requests":"employees/leave-requests")),u=e=>e.map(e=>{let t,o,a="";const r=e.dates.durationType?.type;if(e.dates.fromDate&&(t=ge(he(e.dates.fromDate),i,{locale:n})),e.dates.toDate&&(t+=` to ${ge(he(e.dates.toDate),i,{locale:n})}`),e.dates.startTime&&e.dates.endTime&&(t+=` (${e.dates.startTime} - ${e.dates.endTime})`),"half_day_morning"!==r&&"half_day_afternoon"!==r||(t+=` ${l("leave.half_day")}`),Array.isArray(e.leaveBreakdown)&&(o=e.leaveBreakdown.map(e=>`${e.name} (${parseFloat(e.lengthDays).toFixed(2)})`).join(", ")),Array.isArray(e.leaveBalances))if(e.leaveBalances.length>1)a=e.leaveBalances.map(({period:e,balance:t})=>{const o=parseFloat(t.balance).toFixed(2),a=ge(he(e.startDate),i,{locale:n}),l=ge(he(e.endDate),i,{locale:n});return`${o} (${a} - ${l})`}).join(", ");else{const t=e.leaveBalances[0]?.balance.balance;a=t?parseFloat(t).toFixed(2):"0.00"}const s=`${e.employee?.firstName} ${e.employee?.middleName} ${e.employee?.lastName}`,d=e.leaveType?.name;return e.employee?.terminationId&&l("general.past_employee"),e.leaveType?.deleted&&l("general.deleted"),{id:e.id,empNumber:e.employee?.empNumber,date:t,employeeName:s,leaveType:d,leaveBalance:a,days:parseFloat(e.noOfDays).toFixed(2),status:o,comment:GM(e.lastComment?.comment),actions:e.allowedActions}}),{leaveActions:m,processLeaveRequestAction:p,processLeaveRequestBulkAction:h}=YM(c),{showPaginator:g,currentPage:v,total:f,pages:y,pageSize:C,response:V,isLoading:b,execQuery:w}=Et(c,{query:d,normalizer:u}),x=(0,a.computed)(()=>{if(o.value.length>0&&V.value.data){const e=o.value.map(e=>V.value.data[e].actions);return{APPROVE:e.reduce((e,t)=>e&&t.find(e=>"APPROVE"===e.action),!0),REJECT:e.reduce((e,t)=>e&&t.find(e=>"REJECT"===e.action),!0),CANCEL:e.reduce((e,t)=>e&&t.find(e=>"CANCEL"===e.action),!0)}}return null});return{http:c,showPaginator:g,currentPage:v,isLoading:b,total:f,pages:y,pageSize:C,execQuery:w,items:V,rules:s,filters:t,checkedItems:o,leaveActions:m,leaveBulkActions:x,processLeaveRequestAction:p,processLeaveRequestBulkAction:h}},data(){return{headers:[{name:"date",title:this.$t("general.date"),style:{flex:1}},{name:"employeeName",title:this.$t("general.employee_name"),style:{flex:1}},{name:"leaveType",title:this.$t("leave.leave_type"),style:{flex:1}},{name:"leaveBalance",title:this.$t("leave.leave_balance_days"),style:{flex:1}},{name:"days",title:this.$t("leave.number_of_days"),style:{flex:1}},{name:"status",title:this.$t("general.status"),style:{flex:1}},{name:"comment",title:this.$t("general.comments"),style:{flex:"5%"}},{name:"action",slot:"footer",title:this.$t("general.actions"),cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer,style:{flex:this.myLeaveList?"10%":"20%"}}],showCommentModal:!1,commentModalState:null,bulkActionModalState:null}},beforeMount(){this.isLoading=!0,0===this.filters.statuses.length&&(this.filters.statuses=this.myLeaveList?this.leaveStatuses:this.leaveStatuses.filter(e=>1===e.id)),this.http.request({method:"GET",url:"/api/v2/leave/leave-periods"}).then(e=>{const{data:t,meta:o}=e.data;o.leavePeriodDefined?(this.filters.fromDate=this.filters.fromDate??o?.currentLeavePeriod.startDate,this.filters.toDate=this.filters.toDate??o?.currentLeavePeriod.endDate):(this.filters.fromDate=this.filters.fromDate??t[0]?.startDate,this.filters.toDate=this.filters.toDate??t[0]?.endDate)}).finally(()=>{this.isLoading=!1,Object.assign(EE,this.filters)})},methods:{cellRenderer(...[,,,e]){const t={},{approve:o,reject:a,cancel:l,more:n}=this.leaveActions,i=[{label:this.$t("general.add_comment"),context:"add_comment"},{label:this.$t("leave.view_leave_details"),context:"leave_details"},{label:this.$t("leave.view_pim_info"),context:"pim_details"}];return e.actions.map(n=>{"APPROVE"===n.action&&(o.props.label=this.$t("general.approve"),o.props.onClick=()=>this.onLeaveAction(e.id,"APPROVE"),t.approve=o),"REJECT"===n.action&&(a.props.label=this.$t("general.reject"),a.props.onClick=()=>this.onLeaveAction(e.id,"REJECT"),t.reject=a),"CANCEL"===n.action&&(this.myLeaveList?(l.props.label=this.$t("general.cancel"),l.props.onClick=()=>this.onLeaveAction(e.id,"CANCEL"),t.reject=l):i.push({label:this.$t("leave.cancel_leave"),context:"cancel_leave"}))}),n.props.options=i,n.props.onClick=t=>this.onLeaveDropdownAction(t,e),t.more=n,{props:{header:{cellConfig:t}}}},onLeaveDropdownAction(e,t){switch(e.context){case"add_comment":this.commentModalState=t.id,this.showCommentModal=!0;break;case"cancel_leave":this.onLeaveAction(t.id,"CANCEL");break;case"pim_details":I("/pim/viewPersonalDetails/empNumber/{id}",{id:t.empNumber});break;default:I("/leave/viewLeaveRequest/{id}",{id:t.id},this.myLeaveList&&{mode:"my-leave"})}},onLeaveAction(e,t){this.isLoading=!0,this.processLeaveRequestAction(e,t).then(()=>{this.$toast.updateSuccess()}).finally(this.resetDataTable)},async onLeaveActionBulk(e){this.isLoading=!0,this.bulkActionModalState={count:this.checkedItems.length,action:e};const t=this.checkedItems.map(e=>this.items.data[e].id),o=await this.$refs.bulkActionModal.showDialog();"ok"===o?this.processLeaveRequestBulkAction(t,e).then(t=>{const{data:o}=t.data;Array.isArray(o)&&this.$toast.success({title:this.$t("general.success"),message:this.$t("leave.leave_requests_action",{action:e,count:o.length})})}).finally(()=>{this.bulkActionModalState=null,this.resetDataTable()}):this.isLoading=!1},onCommentModalClose(){this.commentModalState=null,this.showCommentModal=!1,this.resetDataTable()},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onReset(){this.filters={...EE},this.resetDataTable()}}};const TE=(0,i.A)(RE,[["render",OM],["__scopeId","data-v-6ea6113c"]]);var BE=TE,IE={components:{"leave-list-table":BE,"employee-autocomplete":$a,"oxd-switch-input":X.Ay,"leave-type-dropdown":fD},props:{subunits:{type:Array,default:()=>[]},leaveStatuses:{type:Array,default:()=>[]}}};const AE=(0,i.A)(IE,[["render",PM],["__scopeId","data-v-c9cad198"]]);var HE=AE;const XE={class:"XHRM-background-container"},UE={class:"XHRM-paper-container"},LE={class:"XHRM-header-container"},PE={class:"XHRM-horizontal-padding"},qE={class:"XHRM-container"},FE={class:"XHRM-bottom-container"};function zE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("table-header"),p=(0,a.resolveComponent)("oxd-card-table"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("oxd-pagination"),v=(0,a.resolveComponent)("leave-comment-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",XE,[(0,a.createElementVNode)("div",UE,[(0,a.createElementVNode)("div",LE,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.myLeaveRequest?e.$t("leave.my_leave_request_details"):e.$t("leave.leave_request_details")),1)]),_:1})]),(0,a.createVNode)(s,{class:"XHRM-horizontal-margin XHRM-clear-margins"}),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",PE,[(0,a.createVNode)(u,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.employee_name")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-request-details-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.employeeName),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("leave.requested_for")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-request-details-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.leavePeriod),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",qE,[(0,a.createVNode)(p,{headers:n.headers,items:l.response&&l.response.data,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","items","loading"])]),(0,a.createElementVNode)("div",FE,[(0,a.createElementVNode)("span",null,[(0,a.createVNode)(h,{"display-type":"ghost",label:e.$t("general.back"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(h,{class:"XHRM-left-space","display-type":"secondary","icon-name":"chat-right-text-fill",label:e.$t("general.comments"),onClick:i.onClickComments},null,8,["label","onClick"])]),l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(g,{key:0,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])]),n.showCommentModal?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,id:n.commentModalState,"leave-request":n.isLeaveRequest,onClose:i.onCommentModalClose},null,8,["id","leave-request","onClose"])):(0,a.createCommentVNode)("",!0)],64)}var jE={name:"LeaveViewRequest",components:{"leave-comment-modal":fE},props:{leaveRequestId:{type:String,required:!0},myLeaveRequest:{type:Boolean,default:!1}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/leave/leave-requests/${e.leaveRequestId}/leaves`),{leaveActions:o,processLeaveAction:a}=YM(t),{$t:l}=Ie(),{jsDateFormat:n}=F(),{locale:i}=Ae(),{$tEmpName:r}=Ma(),s=e=>e.map(e=>{let t="";const o=e.dates.durationType?.type;e.dates.fromDate&&(t=ge(he(e.dates.fromDate),n,{locale:i})),e.dates.startTime&&e.dates.endTime&&(t+=` (${e.dates.startTime} - ${e.dates.endTime})`),"half_day_morning"!==o&&"half_day_afternoon"!==o||(t+=` ${l("leave.half_day")}`);const a=e.leaveType?.name;return e.leaveType?.deleted&&l("general.deleted"),{id:e.id,date:t,leaveType:a,leaveBalance:e.leaveBalance?.balance.balance?parseFloat(e.leaveBalance.balance.balance).toFixed(2):void 0,duration:parseFloat(e.lengthHours).toFixed(2),status:e.leaveStatus?.name,comment:GM(e.lastComment?.comment),actions:e.allowedActions,canComment:!(5===e.leaveStatus?.id||4===e.leaveStatus?.id)}}),{showPaginator:d,currentPage:c,total:u,pages:m,pageSize:p,response:h,isLoading:g,execQuery:v}=Et(t,{normalizer:s});return{http:t,showPaginator:d,currentPage:c,isLoading:g,total:u,pages:m,pageSize:p,execQuery:v,response:h,leaveActions:o,processLeaveAction:a,jsDateFormat:n,locale:i,translateEmpName:r}},data(){return{headers:[{name:"date",title:this.$t("general.date"),style:{flex:1}},{name:"leaveType",title:this.$t("leave.leave_type"),style:{flex:1}},{name:"leaveBalance",title:this.$t("leave.leave_balance_days"),style:{flex:1}},{name:"duration",title:this.$t("attendance.duration_hours"),style:{flex:1}},{name:"status",title:this.$t("general.status"),style:{flex:1}},{name:"comment",title:this.$t("general.comments"),style:{flex:"10%"}},{name:"action",slot:"footer",title:this.$t("general.actions"),cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer,style:{flex:"20%"}}],showCommentModal:!1,commentModalState:null,isLeaveRequest:!1}},computed:{employeeName(){const e=this.response?.meta?.employee;return e?this.translateEmpName(e,{includeMiddle:!0,excludePastEmpTag:!1}):""},leavePeriod(){const e=ge(he(this.response?.meta?.startDate),this.jsDateFormat,{locale:this.locale}),t=ge(he(this.response?.meta?.endDate),this.jsDateFormat,{locale:this.locale});return e===t?e:`${e} - ${t}`}},methods:{cellRenderer(...[,,,e]){const t={},o=[],{approve:a,reject:l,cancel:n,more:i}=this.leaveActions;return e.canComment&&o.push({label:"Add Comment",context:"add_comment"}),e.actions.map(i=>{"APPROVE"===i.action&&(a.props.label=this.$t("general.approve"),a.props.onClick=()=>this.onLeaveAction(e.id,"APPROVE"),t.approve=a),"REJECT"===i.action&&(l.props.label=this.$t("general.reject"),l.props.onClick=()=>this.onLeaveAction(e.id,"REJECT"),t.reject=l),"CANCEL"===i.action&&(this.myLeaveRequest?(n.props.label=this.$t("general.cancel"),n.props.onClick=()=>this.onLeaveAction(e.id,"CANCEL"),t.cancel=n):o.push({label:"Cancel Leave",context:"cancel_leave"}))}),o.length>0&&(i.props.options=o,i.props.onClick=t=>this.onLeaveDropdownAction(t,e),t.more=i),{props:{header:{cellConfig:t}}}},onClickComments(){this.commentModalState=this.leaveRequestId,this.isLeaveRequest=!0,this.showCommentModal=!0},onCommentModalClose(){this.commentModalState=null,this.showCommentModal=!1,this.resetDataTable()},onLeaveDropdownAction(e,t){"cancel_leave"===e.context?this.onLeaveAction(t.id,"CANCEL"):(this.commentModalState=t.id,this.isLeaveRequest=!1,this.showCommentModal=!0)},onLeaveAction(e,t){this.isLoading=!0,this.processLeaveAction(e,t).then(()=>{this.$toast.updateSuccess()}).finally(this.resetDataTable)},onClickBack(){this.myLeaveRequest?I("/leave/viewMyLeaveList"):I("/leave/viewLeaveList")},async resetDataTable(){await this.execQuery()}}};const OE=(0,i.A)(jE,[["render",zE],["__scopeId","data-v-17a2f8e2"]]);var GE=OE;function QE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("date-input"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("leave-type-dropdown"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-divider"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-table-filter"),C=(0,a.resolveComponent)("leave-list-table");return(0,a.openBlock)(),(0,a.createBlock)(C,{"leave-statuses":o.leaveStatuses,"my-leave-list":!0},{default:(0,a.withCtx)(({filters:t,filterItems:l,rules:n,onReset:i})=>[(0,a.createVNode)(y,{"filter-title":e.$t("leave.my_leave_list")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{onSubmitValid:l,onReset:i},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:t.fromDate,"onUpdate:modelValue":e=>t.fromDate=e,label:e.$t("general.from_date"),rules:n.fromDate},null,8,["modelValue","onUpdate:modelValue","label","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:t.toDate,"onUpdate:modelValue":e=>t.toDate=e,label:e.$t("general.to_date"),rules:n.toDate},null,8,["modelValue","onUpdate:modelValue","label","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:t.statuses,"onUpdate:modelValue":e=>t.statuses=e,value:"Select",type:"multiselect",label:e.$t("leave.show_leave_with_status"),options:o.leaveStatuses,rules:n.statuses,required:""},null,8,["modelValue","onUpdate:modelValue","label","options","rules"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:t.leaveType,"onUpdate:modelValue":e=>t.leaveType=e,"eligible-only":!0,"include-allocated":!0},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),(0,a.createVNode)(p),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(g,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:2},1032,["onSubmitValid","onReset"])]),_:2},1032,["filter-title"])]),_:1},8,["leave-statuses"])}var KE={components:{"leave-list-table":BE,"leave-type-dropdown":fD},props:{leaveStatuses:{type:Array,default:()=>[]}}};const WE=(0,i.A)(KE,[["render",QE]]);var JE=WE;function YE(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-input-group"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("leave-type-dropdown"),p=(0,a.resolveComponent)("leave-period-dropdown"),h=(0,a.resolveComponent)("jobtitle-dropdown"),g=(0,a.resolveComponent)("oxd-text"),v=(0,a.resolveComponent)("oxd-switch-input"),f=(0,a.resolveComponent)("employee-autocomplete"),y=(0,a.resolveComponent)("oxd-divider"),C=(0,a.resolveComponent)("required-text"),V=(0,a.resolveComponent)("oxd-button"),b=(0,a.resolveComponent)("oxd-form-actions"),w=(0,a.resolveComponent)("oxd-form"),x=(0,a.resolveComponent)("oxd-table-filter"),N=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(N,{module:"leave",name:l.filters.type,filters:l.serializedFilters,"column-count":6},{default:(0,a.withCtx)(({generateReport:n})=>[(0,a.createVNode)(x,{"filter-title":e.$t("leave.leave_entitlement_and_usage_report")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(w,{onSubmitValid:n},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{label:e.$t("leave.generate_for"),classes:{wrapper:"--grouped-field"}},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.type,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.type=e),type:"radio","option-label":e.$t("leave.leave_type"),value:"leave_type_leave_entitlements_and_usage"},null,8,["modelValue","option-label"]),(0,a.createVNode)(r,{modelValue:l.filters.type,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.type=e),type:"radio","option-label":e.$t("general.employee"),value:"employee_leave_entitlements_and_usage"},null,8,["modelValue","option-label"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),"leave_type_leave_entitlements_and_usage"===l.filters.type?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.leaveType,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.leaveType=e),"empty-text":e.$t("leave.no_leave_types_defined"),"eligible-only":!1,"show-empty-selector":!1,rules:l.rules.leaveType},null,8,["modelValue","empty-text","rules"])]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.leavePeriod,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.leavePeriod=e),rules:l.rules.leavePeriod,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.location,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.location=e),type:"select",label:e.$t("general.location"),options:o.locations},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.subunit,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.subunit=e),type:"select",label:e.$t("general.sub_unit"),options:o.subunits},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:l.filters.jobTitle,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filters.jobTitle=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(d,{class:"XHRM-leave-filter --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{class:"XHRM-leave-filter-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("leave.include_past_employees")),1)]),_:1}),(0,a.createVNode)(v,{modelValue:l.filters.includePastEmps,"onUpdate:modelValue":t[7]||(t[7]=e=>l.filters.includePastEmps=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):((0,a.openBlock)(),(0,a.createBlock)(u,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{modelValue:l.filters.employee,"onUpdate:modelValue":t[8]||(t[8]=e=>l.filters.employee=e),rules:l.rules.employee,params:{includeEmployees:"currentAndPast"},required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.leavePeriod,"onUpdate:modelValue":t[9]||(t[9]=e=>l.filters.leavePeriod=e),rules:l.rules.leavePeriod,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})),(0,a.createVNode)(y),(0,a.createVNode)(b,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C),(0,a.createVNode)(V,{type:"submit","display-type":"secondary",class:"XHRM-left-space",label:e.$t("general.generate")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:2},1032,["filter-title"]),t[10]||(t[10]=(0,a.createElementVNode)("br",null,null,-1))]),_:1},8,["name","filters"])}const ZE={type:"leave_type_leave_entitlements_and_usage",employee:null,leavePeriod:null,leaveType:null,subunit:null,location:null,jobTitle:null,includePastEmps:!1};var eR={components:{"reports-table":Ww,"oxd-switch-input":X.Ay,"jobtitle-dropdown":Mp,"leave-type-dropdown":fD,"leave-period-dropdown":h$,"employee-autocomplete":$a},props:{locations:{type:Array,default:()=>[]},subunits:{type:Array,default:()=>[]},leavePeriod:{type:Object,required:!1,default:()=>null}},setup(e){const t=(0,a.ref)({...ZE,...e.leavePeriod&&{leavePeriod:e.leavePeriod}}),o=(0,a.ref)({employee:[Kt,Wt(100),$o],leavePeriod:[Kt],leaveType:[Kt]}),l=(0,a.computed)(()=>"leave_type_leave_entitlements_and_usage"===t.value.type?{name:t.value.type,fromDate:t.value.leavePeriod?.startDate,toDate:t.value.leavePeriod?.endDate,subunitId:t.value.subunit?.id,leaveTypeId:t.value.leaveType?.id,locationId:t.value.location?.id,jobTitleId:t.value.jobTitle?.id,includeEmployees:t.value.includePastEmps?"currentAndPast":"onlyCurrent"}:{name:t.value.type,empNumber:t.value.employee?.id,fromDate:t.value.leavePeriod?.startDate,toDate:t.value.leavePeriod?.endDate});return{rules:o,filters:t,serializedFilters:l}}};const tR=(0,i.A)(eR,[["render",YE],["__scopeId","data-v-0dedd41a"]]);var oR=tR;function aR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("leave-period-dropdown"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("required-text"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(f,{module:"leave",name:"my_leave_entitlements_and_usage",prefetch:!0,filters:l.serializedFilters,"column-count":6},{default:(0,a.withCtx)(({generateReport:o})=>[(0,a.createVNode)(v,{"filter-title":e.$t("leave.my_leave_entitlement_and_usage_report")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:o},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.leavePeriod,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.leavePeriod=e),rules:l.rules.leavePeriod,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{type:"submit","display-type":"secondary",class:"XHRM-left-space",label:e.$t("general.generate")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:2},1032,["filter-title"]),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1))]),_:1},8,["filters"])}var lR={components:{"reports-table":Ww,"leave-period-dropdown":h$},props:{leavePeriod:{type:Object,required:!1,default:()=>({})}},setup(e){const t=(0,a.ref)({leavePeriod:e.leavePeriod?e.leavePeriod:null}),o=(0,a.ref)({leavePeriod:[Kt]}),l=(0,a.computed)(()=>({fromDate:t.value.leavePeriod?.startDate,toDate:t.value.leavePeriod?.endDate}));return{rules:o,filters:t,serializedFilters:l}}};const nR=(0,i.A)(lR,[["render",aR]]);var iR=nR,rR={"leave-period":CS,"leave-apply":dD,"leave-assign":$D,"leave-type-edit":ZD,"leave-type-list":XD,"leave-type-save":r$,"leave-add-entitlement":L$,"leave-edit-entitlement":G$,"leave-view-entitlement":iM,"leave-view-my-entitlement":cM,"work-week":fM,"holiday-list":_M,"holiday-save":TM,"holiday-edit":LM,"leave-list":HE,"leave-view-request":GE,"my-leave-list":JE,"leave-entitlement-report":oR,"my-leave-entitlement-report":iR};const sR={class:"XHRM-background-container"},dR={class:"XHRM-paper-container"},cR={class:"XHRM-header-container"},uR={class:"XHRM-container"},mR={class:"XHRM-bottom-container"};function pR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination"),m=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",sR,[(0,a.createElementVNode)("div",dR,[(0,a.createElementVNode)("div",cR,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.oauth_client_list")),1)]),_:1}),(0,a.createElementVNode)("div",null,[(0,a.createVNode)(s,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])]),(0,a.createVNode)(d,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",uR,[(0,a.createVNode)(c,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",mR,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(m,{ref:"deleteDialog"},null,512)])}var hR={components:{"delete-confirmation":Xt},props:{unselectableClientIds:{type:Array,default:()=>[]}},setup(e){const{$t:t}=Ie(),o=o=>o.map(o=>{const a=e.unselectableClientIds.findIndex(e=>e===o.clientId);return{id:o.id,name:o.name,redirectUri:o.redirectUri,enabled:o.enabled?t("general.enabled"):t("general.disabled"),isSelectable:-1===a,isDisabled:-1!==a}}),a=new H(window.appGlobal.baseUrl,"/api/v2/admin/oauth-clients"),{showPaginator:l,currentPage:n,total:i,pages:r,pageSize:s,response:d,isLoading:c,execQuery:u}=Et(a,{normalizer:o});return{http:a,showPaginator:l,currentPage:n,isLoading:c,total:i,pages:r,pageSize:s,execQuery:u,items:d}},data(){return{headers:[{name:"name",slot:"title",title:this.$t("general.name"),style:{flex:2}},{name:"redirectUri",title:this.$t("admin.redirect_uri"),style:{flex:3}},{name:"enabled",title:this.$t("general.status"),style:{flex:2}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[]}},methods:{onClickAdd(){I("/admin/saveOAuthClient")},onClickEdit(e){I("/admin/editOAuthClient",{},{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const gR=(0,i.A)(hR,[["render",pR]]);var vR=gR;const fR={class:"XHRM-background-container"},yR={class:"XHRM-card-container"};function CR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-alert"),m=(0,a.resolveComponent)("oxd-switch-input"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",fR,[(0,a.createElementVNode)("div",yR,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.editMode?e.$t("admin.edit_oauth_client"):e.$t("admin.add_oauth_client")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.oAuthClient.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.oAuthClient.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.oAuthClient.redirectUri,"onUpdate:modelValue":t[1]||(t[1]=e=>n.oAuthClient.redirectUri=e),label:e.$t("admin.redirect_uri"),rules:n.rules.redirectUri,required:""},null,8,["modelValue","label","rules"])]),_:1}),i.editMode?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(c,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.oAuthClient.clientId,"onUpdate:modelValue":t[2]||(t[2]=e=>n.oAuthClient.clientId=e),label:e.$t("admin.client_id"),disabled:""},null,8,["modelValue","label"])]),_:1}),i.showClientSecret?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,class:"--offset-row-4"},{default:(0,a.withCtx)(()=>[n.isSecretPlain?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,type:"warn",show:!0,message:e.$t("admin.client_secret_warning_message")},null,8,["message"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{modelValue:n.oAuthClient.clientSecret,"onUpdate:modelValue":t[3]||(t[3]=e=>n.oAuthClient.clientSecret=e),label:e.$t("admin.client_secret"),disabled:""},null,8,["modelValue","label"])]),_:1})):(0,a.createCommentVNode)("",!0)],64)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,{class:"--offset-row-5"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-field-row"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.enable_client")),1)]),_:1}),(0,a.createVNode)(m,{modelValue:n.oAuthClient.enabled,"onUpdate:modelValue":t[4]||(t[4]=e=>n.oAuthClient.enabled=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),i.editMode?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(c,{key:1,class:"--offset-row-6"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-field-row"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("admin.confidential_client")),1)]),_:1}),(0,a.createVNode)(m,{modelValue:n.oAuthClient.confidential,"onUpdate:modelValue":t[5]||(t[5]=e=>n.oAuthClient.confidential=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const VR={id:null,name:"",redirectUri:"",enabled:!0,clientId:null,clientSecret:"********",confidential:!1};var bR={components:{"oxd-switch-input":X.Ay,"oxd-alert":X.qO},props:{id:{type:Number,default:null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/admin/oauth-clients");return{http:e}},data(){return{isLoading:!1,isSecretPlain:!1,oAuthClient:{...VR},rules:{name:[Kt,Wt(80)],redirectUri:[Kt,Wt(2e3)]}}},computed:{editMode(){return null!==this.oAuthClient.clientId},showClientSecret(){return!0===this.oAuthClient.confidential}},created(){this.isLoading=!0,this.getClient().then(e=>{const{data:t}=e.data;this.rules.name.push(e=>{const o=t.findIndex(t=>t.name===e);if(o>-1){const{id:e}=t[o];return e===this.id||this.$t("general.already_exists")}return!0})}).finally(()=>{this.isLoading=!1})},methods:{getClient(){return null!==this.id?this.http.get(this.id).then(e=>{const{data:t}=e.data;return this.setDataFromResponse(t),this.http.getAll({limit:0})}):this.http.getAll({limit:0})},onCancel(){I("/admin/registerOAuthClient")},onSave(){this.isLoading=!0,(this.editMode?this.update():this.create()).finally(()=>{this.isLoading=!1})},create(){return this.http.create({name:this.oAuthClient.name,redirectUri:this.oAuthClient.redirectUri,enabled:this.oAuthClient.enabled,confidential:this.oAuthClient.confidential}).then(e=>{const{data:t,meta:o}=e.data;return this.setDataFromResponse(t),this.oAuthClient.clientSecret=o.clientSecret,this.isSecretPlain=!0,this.$toast.saveSuccess()})},update(){return this.http.update(this.oAuthClient.id,{name:this.oAuthClient.name,redirectUri:this.oAuthClient.redirectUri,enabled:this.oAuthClient.enabled,confidential:this.oAuthClient.confidential}).then(e=>{const{data:t,meta:o}=e.data;return this.setDataFromResponse(t),!0===t.confidential&&null!==o.clientSecret&&(this.oAuthClient.clientSecret=o.clientSecret,this.isSecretPlain=!0),this.$toast.updateSuccess()})},setDataFromResponse(e){this.oAuthClient.id=e.id,this.oAuthClient.name=e.name,this.oAuthClient.redirectUri=e.redirectUri,this.oAuthClient.enabled=e.enabled,this.oAuthClient.clientId=e.clientId,this.oAuthClient.confidential=e.confidential}}};const wR=(0,i.A)(bR,[["render",CR],["__scopeId","data-v-09b913b8"]]);var xR=wR;const NR={class:"XHRM-oauth-container"},kR={class:"XHRM-card-container"},_R={class:"XHRM-oauth-list"},SR=["value"],DR=["name","value"],$R={class:"XHRM-oauth-button-container"};function MR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("login-branding"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("oxd-form"),m=(0,a.resolveComponent)("oxd-alert");return(0,a.openBlock)(),(0,a.createElementBlock)("div",NR,[(0,a.createElementVNode)("div",kR,[(0,a.createVNode)(r,{"img-src":o.loginBannerSrc,class:"XHRM-oauth-branding"},null,8,["img-src"]),(0,a.createVNode)(s),null===o.errorType?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.client_name_would_like_to",{clientName:o.clientName}))+": ",1)]),_:1}),(0,a.createElementVNode)("ul",_R,[(0,a.createElementVNode)("li",null,[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.access_and_manage_your_data")),1)]),_:1})]),(0,a.createElementVNode)("li",null,[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.perform_actions_on_your_behalf")),1)]),_:1})])]),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.do_you_want_to_allow_access")),1)]),_:1}),t[0]||(t[0]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(u,{ref:"authorizeForm",method:"GET",action:i.submitUrl,onSubmitValid:i.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("input",{name:"authorized",value:n.authorized,type:"hidden"},null,8,SR),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.params,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t},[(0,a.createElementVNode)("input",{name:t,value:e,type:"hidden"},null,8,DR)]))),128)),(0,a.createElementVNode)("div",$R,[(0,a.createVNode)(c,{"display-type":"ghost",size:"large",class:"XHRM-oauth-button",label:e.$t("auth.deny"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(c,{"display-type":"secondary",class:"XHRM-oauth-button",size:"large",label:e.$t("auth.allow_access"),type:"submit"},null,8,["label"])])]),_:1},8,["action","onSubmitValid"])],64)):"XHRM_mobile_app"===o.params["client_id"]?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,show:!0,type:"error",message:e.$t("auth.mobile_client_disabled_error")},null,8,["message"])):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:2},[(0,a.createVNode)(m,{show:!0,type:"error",message:e.$t("auth.this_request_is_invalid")},null,8,["message"]),(0,a.createVNode)(d,{class:"XHRM-oauth-error"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.error"))+": "+(0,a.toDisplayString)(o.errorType),1)]),_:1})],64))]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}const ER={class:"XHRM-login-branding"},RR=["src"];function TR(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",ER,[(0,a.createElementVNode)("img",{src:o.imgSrc,alt:"company-branding"},null,8,RR)])}var BR={name:"LoginBranding",props:{imgSrc:{type:String,required:!0}}};const IR=(0,i.A)(BR,[["render",TR],["__scopeId","data-v-44d257ce"]]);var AR=IR,HR={name:"OAuthAuthorize",components:{"login-branding":AR,"oxd-alert":X.qO},props:{params:{type:Object,required:!0},clientName:{type:String,default:null},errorType:{type:String,default:null},loginBannerSrc:{type:String,required:!0}},data(){return{authorized:!0}},computed:{submitUrl(){return B("/oauth2/authorize/consent")}},methods:{onCancel(){this.authorized=!1,this.onSubmit()},onSubmit(){this.$nextTick(()=>{this.$refs.authorizeForm.$el.submit()})}}};const XR=(0,i.A)(HR,[["render",MR],["__scopeId","data-v-4d9552bc"]]);var UR=XR,LR={"oauth-client-list":vR,"oauth-client-save":xR,"oauth-authorize":UR};const PR={class:"XHRM-background-container"},qR={class:"XHRM-card-container"},FR={class:"XHRM-paper-container"};function zR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("record-attendance");return(0,a.openBlock)(),(0,a.createElementBlock)("div",PR,[(0,a.createElementVNode)("div",qR,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.punch_in")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",FR,[(0,a.createVNode)(d,(0,a.normalizeProps)((0,a.guardReactiveProps)(e.$attrs)),null,16)])])])}function jR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-input-group"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("date-input"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("timezone-dropdown"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createBlock)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[n.attendanceRecord.previousRecord?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(d,{class:(0,a.normalizeClass)(n.attendanceRecord.previousRecord.note?"":"--span-column-2")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{label:e.$t("attendance.punched_in_time")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.previousAttendanceRecordDate)+" - "+(0,a.toDisplayString)(i.previousAttendanceRecordTime)+" ",1),(0,a.createVNode)(r,{tag:"span",class:"XHRM-attendance-punchedIn-timezone"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(`(GMT ${n.previousRecordTimezone})`),1)]),_:1})]),_:1})]),_:1},8,["label"])]),_:1},8,["class"]),n.attendanceRecord.previousRecord.note?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{label:e.$t("attendance.punched_in_note")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.attendanceRecord.previousRecord.note),1)]),_:1})]),_:1},8,["label"])]),_:1})):(0,a.createCommentVNode)("",!0)],64)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(),(0,a.createBlock)(c,{key:n.attendanceRecord.time,modelValue:n.attendanceRecord.date,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attendanceRecord.date=e),label:e.$t("general.date"),rules:n.rules.date,disabled:!o.isEditable,required:""},null,8,["modelValue","label","rules","disabled"]))]),_:1}),(0,a.createVNode)(d,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.attendanceRecord.time,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attendanceRecord.time=e),label:e.$t("general.time"),disabled:!o.isEditable,rules:n.rules.time,type:"time",placeholder:e.$t("attendance.hh_mm"),required:""},null,8,["modelValue","label","disabled","rules","placeholder"])]),_:1})]),_:1})]),_:1}),o.isTimezoneEditable?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,cols:2},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.attendanceRecord.timezone,"onUpdate:modelValue":t[2]||(t[2]=e=>n.attendanceRecord.timezone=e),required:""},null,8,["modelValue"])]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.attendanceRecord.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.attendanceRecord.note=e),rules:n.rules.note,label:e.$t("general.note"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(g),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{label:o.attendanceRecordId?e.$t("attendance.out"):e.$t("attendance.in")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])}function OR(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",options:l.options,label:e.$t("attendance.timezone"),"show-empty-selector":!1},null,8,["options","label"])}var GR={name:"TimezoneDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/attendance/timezones");return(0,a.onBeforeMount)(()=>{t.getAll().then(({data:t})=>{e.value=t.data.map(e=>({id:e.name,label:`(GMT${e.label}) ${e.name}`,_offset:parseFloat(e.offset)}))})}),{options:e}}};const QR=(0,i.A)(GR,[["render",OR]]);var KR=QR;const WR={date:null,time:null,note:null,timezone:null,previousRecord:null};var JR={name:"RecordAttendance",components:{"timezone-dropdown":KR},props:{isEditable:{type:Boolean,default:!1},isTimezoneEditable:{type:Boolean,default:!1},attendanceRecordId:{type:Number,default:null},employeeId:{type:Number,default:null},date:{type:String,default:null}},setup(e){const t=e.employeeId?`/api/v2/attendance/employees/${e.employeeId}/records`:"/api/v2/attendance/records",o=new H(window.appGlobal.baseUrl,t),{jsDateFormat:a,userDateFormat:l,timeFormat:n,jsTimeFormat:i}=F(),{locale:r}=Ae();return{http:o,locale:r,timeFormat:n,jsTimeFormat:i,jsDateFormat:a,userDateFormat:l}},data(){return{isLoading:!1,attendanceRecord:{...WR},rules:{date:[Kt,Jt(this.userDateFormat),(0,X.Ld)(this.validateDate,500)],time:[Kt,(0,X.Ld)(this.validateDate,500)],note:[Wt(250)]},previousRecordTimezone:null}},computed:{previousAttendanceRecordDate(){return this.attendanceRecord?.previousRecord?ge(he(this.attendanceRecord.previousRecord.userDate),this.jsDateFormat,{locale:this.locale}):null},previousAttendanceRecordTime(){return this.attendanceRecord?.previousRecord?Ve(Ce(this.attendanceRecord.previousRecord.userTime,this.timeFormat),this.jsTimeFormat):null}},beforeMount(){if(this.isLoading=!0,this.isTimezoneEditable){const e=De();this.attendanceRecord.timezone={id:e.name,label:e.label,_name:e.name,_offset:e.offset}}this.setCurrentDateTime().then(()=>{!this.date&&!this.isEditable&&_e(this.setCurrentDateTime,6e4);let e="/api/v2/attendance/records/latest";return this.employeeId&&(e=`/api/v2/attendance/records/latest?empNumber=${this.employeeId}`),this.attendanceRecordId?this.http.request({method:"GET",url:e}):null}).then(e=>{if(e){const{data:t}=e.data;this.attendanceRecord.previousRecord=t.punchIn}}).then(()=>{this.previousRecordTimezone=Se(this.attendanceRecord.previousRecord?.offset)}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0;const e=De();this.http.request({method:this.attendanceRecordId?"PUT":"POST",data:{date:this.attendanceRecord.date,time:this.attendanceRecord.time,note:this.attendanceRecord.note,timezoneOffset:this.attendanceRecord.timezone?._offset??e.offset,timezoneName:this.attendanceRecord.timezone?.id??e.name}}).then(()=>this.$toast.saveSuccess()).then(()=>{this.employeeId?I("/attendance/viewAttendanceRecord",void 0,{employeeId:this.employeeId,date:this.date}):A()})},setCurrentDateTime(){return new Promise((e,t)=>{this.http.request({method:"GET",url:"/api/v2/attendance/current-datetime"}).then(t=>{const{utcDate:o,utcTime:a}=t.data.data,l=he(`${o} ${a} +00:00`,"yyyy-MM-dd HH:mm xxx");this.attendanceRecord.date=this.date??ge(l,"yyyy-MM-dd"),this.attendanceRecord.time=ge(l,"HH:mm"),e()}).catch(e=>t(e))})},validateDate(){if(!this.attendanceRecord.date||!this.attendanceRecord.time)return!0;if(null===he(this.attendanceRecord.date))return!0;const e=(new Date).getTimezoneOffset()/60*-1;return new Promise(t=>{this.http.request({method:"GET",url:`/api/v2/attendance/${this.attendanceRecordId?"punch-out":"punch-in"}/overlaps`,params:{date:this.attendanceRecord.date,time:this.attendanceRecord.time,timezoneOffset:this.attendanceRecord.timezone?._offset??e,empNumber:this.employeeId},validateStatus:e=>e>=200&&e<300||400==e}).then(e=>{const{data:o,error:a}=e.data;return a?t(a.message):!0===o.valid?t(!0):t(this.$t("attendance.overlapping_records_found"))})})}}};const YR=(0,i.A)(JR,[["render",jR],["__scopeId","data-v-778c3ffe"]]);var ZR=YR,eT={components:{"record-attendance":ZR},inheritAttrs:!1};const tT=(0,i.A)(eT,[["render",zR]]);var oT=tT;const aT={class:"XHRM-background-container"},lT={class:"XHRM-card-container"},nT={class:"XHRM-paper-container"};function iT(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("record-attendance");return(0,a.openBlock)(),(0,a.createElementBlock)("div",aT,[(0,a.createElementVNode)("div",lT,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.punch_out")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",nT,[(0,a.createVNode)(d,(0,a.normalizeProps)((0,a.guardReactiveProps)(e.$attrs)),null,16)])])])}var rT={components:{"record-attendance":ZR},inheritAttrs:!1};const sT=(0,i.A)(rT,[["render",iT]]);var dT=sT;const cT={class:"XHRM-background-container"},uT={class:"XHRM-card-container"},mT={class:"XHRM-header"},pT={class:"XHRM-paper-container"};function hT(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("date-input"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("timezone-dropdown"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",cT,[(0,a.createElementVNode)("div",uT,[(0,a.createElementVNode)("div",mT,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.edit_attendance_records")),1)]),_:1}),i.totalDuration?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,tag:"span",class:"XHRM-header-total"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(i.totalDuration),1)]),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(s),(0,a.createElementVNode)("div",pT,[(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid no-gap"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.punch_in")),1)]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.attendance.punchIn.userDate,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attendance.punchIn.userDate=e),label:e.$t("general.date"),rules:n.rules.punchIn.userDate,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(d,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.attendance.punchIn.userTime,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attendance.punchIn.userTime=e),label:e.$t("general.time"),rules:n.rules.punchIn.userTime,type:"time",placeholder:e.$t("attendance.hh_mm"),required:""},null,8,["modelValue","label","rules","placeholder"])]),_:1}),o.isTimezoneEditable?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"--offset-row-3 --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.attendance.punchIn.timezone,"onUpdate:modelValue":t[2]||(t[2]=e=>n.attendance.punchIn.timezone=e),required:""},null,8,["modelValue"])]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.attendance.punchIn.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.attendance.punchIn.note=e),rules:n.rules.punchIn.note,label:e.$t("general.note"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),n.attendance.punchOut?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-punch-out-record"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.punch_out")),1)]),_:1})]),_:1}),(0,a.createVNode)(d,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.attendance.punchOut.userDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.attendance.punchOut.userDate=e),label:e.$t("general.date"),rules:n.rules.punchOut.userDate,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(d,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.attendance.punchOut.userTime,"onUpdate:modelValue":t[5]||(t[5]=e=>n.attendance.punchOut.userTime=e),label:e.$t("general.time"),rules:n.rules.punchOut.userTime,type:"time",placeholder:e.$t("attendance.hh_mm"),required:""},null,8,["modelValue","label","rules","placeholder"])]),_:1}),o.isTimezoneEditable?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"--offset-row-3 --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.attendance.punchOut.timezone,"onUpdate:modelValue":t[6]||(t[6]=e=>n.attendance.punchOut.timezone=e),required:""},null,8,["modelValue"])]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.attendance.punchOut.note,"onUpdate:modelValue":t[7]||(t[7]=e=>n.attendance.punchOut.note=e),rules:n.rules.punchOut.note,label:e.$t("general.note"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])])}const gT={userDate:null,userTime:null,utcDate:null,utcTime:null,note:null,timezone:null,timezoneOffset:null};var vT={components:{"timezone-dropdown":KR},props:{attendanceId:{type:Number,required:!0},isEmployeeEdit:{type:Boolean,default:!1},isTimezoneEditable:{type:Boolean,default:!1}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/attendance/records"),{userDateFormat:t}=F();return{http:e,userDateFormat:t}},data(){return{isLoading:!1,attendance:{employee:null,punchIn:{...gT},punchOut:{...gT}},rules:{punchIn:{userDate:[Kt,Jt(this.userDateFormat),(0,X.Ld)(()=>this.validateRecord("punch-in-overlaps"),500)],userTime:[Kt,(0,X.Ld)(()=>this.validateRecord("punch-in-overlaps"),500)],note:[Wt(250)]},punchOut:{userDate:[Kt,Jt(this.userDateFormat),(0,X.Ld)(()=>this.validateRecord("punch-out-overlaps"),500)],userTime:[Kt,(0,X.Ld)(()=>this.validateRecord("punch-out-overlaps"),500)],note:[Wt(250)]}}}},computed:{totalDuration(){if(!this.attendance.punchOut?.userDate)return null;if(null===he(this.attendance.punchIn.userDate)||null===he(this.attendance.punchOut.userDate))return null;const e=`${this.attendance.punchIn.userDate} ${this.attendance.punchIn.userTime}`,t=this.attendance.punchIn.timezone?._offset??parseFloat(this.attendance.punchIn.timezoneOffset),o=(t>0?" +":" -")+Ne(3600*Math.abs(t)),a=`${this.attendance.punchOut.userDate} ${this.attendance.punchOut.userTime}`,l=this.attendance.punchOut.timezone?._offset??parseFloat(this.attendance.punchOut.timezoneOffset),n=(l>0?" +":" -")+Ne(3600*Math.abs(l));return parseFloat(xe(e+o,a+n,"yyyy-MM-dd HH:mm xxx")/3600).toFixed(2)}},beforeMount(){this.isLoading=!0,this.http.get(this.attendanceId).then(e=>{const{data:t}=e.data;this.attendance.employee=t.employee,this.attendance.punchIn={...t.punchIn,timezone:{id:t.punchIn.timezone.name,label:t.punchIn.timezone.label,_offset:t.punchIn.timezoneOffset}},this.attendance.punchOut=t.punchOut?.userDate?{...t.punchOut,timezone:{id:t.punchOut.timezone.name,label:t.punchOut.timezone.label,_offset:t.punchOut.timezoneOffset}}:null}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){this.isEmployeeEdit?I("/attendance/viewAttendanceRecord",void 0,{employeeId:this.attendance.employee?.empNumber,date:this.attendance.punchIn?.userDate}):I("/attendance/viewMyAttendanceRecord",void 0,{date:this.attendance.punchIn?.userDate})},onSave(){this.isLoading=!0;const e={punchInDate:this.attendance.punchIn.userDate,punchInTime:this.attendance.punchIn.userTime,punchInNote:this.attendance.punchIn.note,...this.isTimezoneEditable&&{punchInOffset:this.attendance.punchIn.timezone?this.attendance.punchIn.timezone._offset:this.attendance.punchIn.timezoneOffset,punchInTimezoneName:this.attendance.punchIn.timezone?this.attendance.punchIn.timezone.id:this.attendance.punchIn.timezone.name}};this.attendance.punchOut&&(e.punchOutDate=this.attendance.punchOut.userDate,e.punchOutTime=this.attendance.punchOut.userTime,e.punchOutNote=this.attendance.punchOut.note,this.isTimezoneEditable&&(e.punchOutOffset=this.attendance.punchOut.timezone?this.attendance.punchOut.timezone._offset:this.attendance.punchOut.timezoneOffset,e.punchOutTimezoneName=this.attendance.punchOut.timezone?this.attendance.punchOut.timezone.id:this.attendance.punchOut.timezone.name)),this.http.update(this.attendanceId,e).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})},validateRecord(e){return null===he(this.attendance.punchIn.userDate)||(!(!this.attendance.punchOut||null!==he(this.attendance.punchOut.userDate))||new Promise(t=>{this.http.request({method:"GET",url:`/api/v2/attendance/records/${e}`,params:{recordId:this.attendanceId,punchInTimezoneOffset:this.attendance.punchIn.timezone?this.attendance.punchIn.timezone._offset:this.attendance.punchIn.timezoneOffset,punchInDate:this.attendance.punchIn.userDate,punchInTime:this.attendance.punchIn.userTime,punchOutTimezoneOffset:this.attendance.punchOut?.timezone?this.attendance.punchOut.timezone._offset:this.attendance.punchOut?.timezoneOffset,punchOutDate:this.attendance.punchOut?.userDate,punchOutTime:this.attendance.punchOut?.userTime},validateStatus:e=>e>=200&&e<300||400==e}).then(e=>{const{data:o,error:a}=e.data;return a?t(a.message):!0===o.valid?t(!0):t(this.$t("attendance.overlapping_records_found"))})}))}}};const fT=(0,i.A)(vT,[["render",hT],["__scopeId","data-v-4b3ddec6"]]);var yT=fT;const CT={class:"XHRM-paper-container"},VT={class:"XHRM-header-container"},bT={class:"XHRM-container"},wT={class:"XHRM-bottom-container"};function xT(e,t,o,l,n,i){const r=(0,a.resolveComponent)("date-input"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("required-text"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("oxd-text"),y=(0,a.resolveComponent)("table-header"),C=(0,a.resolveComponent)("oxd-card-table"),V=(0,a.resolveComponent)("oxd-pagination"),b=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(v,{"filter-title":e.$t("attendance.my_attendance_records")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.date,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.date=e),rules:l.rules.date,label:e.$t("general.date"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{"display-type":"secondary",label:e.$t("general.view"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[3]||(t[3]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",CT,[(0,a.createElementVNode)("div",VT,[(0,a.createVNode)(f,{class:"XHRM-header-total",tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(l.totalDuration),1)]),_:1})]),(0,a.createVNode)(y,{total:l.total,loading:l.isLoading,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","selected","onDelete"]),(0,a.createElementVNode)("div",bT,[(0,a.createVNode)(C,{selected:n.checkedItems,"onUpdate:selected":t[1]||(t[1]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:o.isEditable,clickable:!1,loading:l.isLoading,class:"XHRM-my-attendance","row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","loading"])]),(0,a.createElementVNode)("div",wT,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,current:l.currentPage,"onUpdate:current":t[2]||(t[2]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(b,{ref:"deleteDialog"},null,512)])],64)}const NT={class:"oxd-table-card-cell"},kT={class:"data"};function _T(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",NT,[(0,a.withDirectives)((0,a.createElementVNode)("div",{class:"header"},(0,a.toDisplayString)(o.header.title),513),[[a.vShow,i.showHeader]]),(0,a.createElementVNode)("div",kT,[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.date)+" "+(0,a.toDisplayString)(o.time)+" ",1),(0,a.createVNode)(r,{tag:"span",class:"timezone"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)(" GMT "+(0,a.toDisplayString)(o.offset?o.offset:"00:00"),1)]),_:1})]),_:1})])],512)),[[a.vShow,o.date]])}var ST={name:"RecordCell",props:{header:{type:Object,required:!0},date:{type:String,default:null},time:{type:String,default:null},offset:{type:String,default:null}},setup(){const{screenState:e}=(0,X.zW)();return{screenState:e}},computed:{showHeader(){return!("lg"===this.screenState.screenType||"xl"===this.screenState.screenType)}}};const DT=(0,i.A)(ST,[["render",_T],["__scopeId","data-v-43dcfa4e"]]);var $T=DT,MT={components:{"delete-confirmation":Xt},props:{date:{type:String,default:null},isEditable:{type:Boolean,default:!1}},setup(e){const{locale:t}=Ae(),{jsDateFormat:o,userDateFormat:l,timeFormat:n,jsTimeFormat:i}=F(),r={date:[Kt,Jt(l)]},s=(0,a.ref)({date:e.date?e.date:ge(pe(),"yyyy-MM-dd")}),d=(0,a.computed)(()=>({date:s.value.date})),c=new H(window.appGlobal.baseUrl,"/api/v2/attendance/records"),u=e=>e.map(e=>{const{punchIn:a,punchOut:l}=e,r=ge(he(a?.userDate),o,{locale:t}),s=Ve(Ce(a?.userTime,n),i),d=ge(he(l?.userDate),o,{locale:t}),c=Ve(Ce(l?.userTime,n),i);return{id:e.id,punchIn:{...a,userTime:s,userDate:r},punchOut:{...l,userTime:c,userDate:d},punchInNote:a.note,punchOutNote:l.note,duration:e.duration}}),{total:m,pages:p,pageSize:h,response:g,isLoading:v,execQuery:f,currentPage:y,showPaginator:C}=Et(c,{query:d,normalizer:u}),V=(0,a.computed)(()=>{const e=g.value?.meta;return e?e.sum.label:"0.00"});return{http:c,rules:r,total:m,pages:p,filters:s,pageSize:h,isLoading:v,execQuery:f,currentPage:y,showPaginator:C,items:g,totalDuration:V}},data(){return{headers:[{name:"punchIn",slot:"title",title:this.$t("attendance.punch_in"),style:{flex:1},cellRenderer:this.cellRenderer},{name:"punchInNote",slot:"title",cellType:"oxd-table-cell-truncate",title:this.$t("attendance.punch_in_note"),style:{flex:1}},{name:"punchOut",slot:"title",title:this.$t("attendance.punch_out"),style:{flex:1},cellRenderer:this.cellRenderer},{name:"punchOutNote",slot:"title",cellType:"oxd-table-cell-truncate",title:this.$t("attendance.punch_out_note"),style:{flex:1}},{name:"duration",slot:"title",title:this.$t("attendance.duration_hours"),style:{flex:1}},{...this.isEditable&&{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}}],checkedItems:[]}},methods:{cellRenderer(...e){const t=e[1];return{component:$T,props:{date:t.userDate,time:t.userTime,offset:Se(t.offset)}}},onClickEdit(e){I("/attendance/editAttendanceRecord/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()}}};const ET=(0,i.A)(MT,[["render",xT],["__scopeId","data-v-66504572"]]);var RT=ET;const TT={class:"XHRM-background-container"},BT={class:"XHRM-card-container"},IT={class:"XHRM-attendance-field-row"},AT={class:"XHRM-attendance-field-row"},HT={class:"XHRM-attendance-field-row"};function XT(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-switch-input"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("submit-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",TT,[(0,a.createElementVNode)("div",BT,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.attendance_configuration")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",IT,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-attendance-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.employee_can_change_current_time_when_punching_in_out")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.config.canUserChangeCurrentTime,"onUpdate:modelValue":t[0]||(t[0]=e=>n.config.canUserChangeCurrentTime=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",AT,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-attendance-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.employee_can_edit_delete_own_attendance_records")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.config.canUserModifyAttendance,"onUpdate:modelValue":t[1]||(t[1]=e=>n.config.canUserModifyAttendance=e)},null,8,["modelValue"])]),(0,a.createElementVNode)("div",HT,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-attendance-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("attendance.supervisor_can_add_edit_delete_attendance_records_of_subordinates")),1)]),_:1}),(0,a.createVNode)(d,{modelValue:n.config.canSupervisorModifyAttendance,"onUpdate:modelValue":t[2]||(t[2]=e=>n.config.canSupervisorModifyAttendance=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const UT={canUserChangeCurrentTime:!1,canUserModifyAttendance:!1,canSupervisorModifyAttendance:!1};var LT={components:{"oxd-switch-input":X.Ay},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/attendance/configs");return{http:e}},data(){return{config:{...UT},isLoading:!1}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.config={...t}}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{...this.config}}).then(e=>{const{data:t}=e.data;return this.config={...t},this.$toast.saveSuccess()}).finally(()=>{this.isLoading=!1})}}};const PT=(0,i.A)(LT,[["render",XT],["__scopeId","data-v-60503d44"]]);var qT=PT;function FT(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("jobtitle-dropdown"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("employment-status-dropdown"),m=(0,a.resolveComponent)("date-input"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("oxd-table-filter"),V=(0,a.resolveComponent)("reports-table");return(0,a.openBlock)(),(0,a.createBlock)(V,{module:"time",name:"attendance",prefetch:!1,filters:l.serializedFilters,"column-count":2},{default:(0,a.withCtx)(({generateReport:n})=>[(0,a.createVNode)(C,{"filter-title":e.$t("attendance.attendance_total_summary_report")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{onSubmitValid:n},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:l.rules.employee,params:{includeEmployees:"currentAndPast"}},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.jobTitle=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.subunit,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.subunit=e),type:"select",label:e.$t("general.sub_unit"),options:o.subunits},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.empStatus,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.empStatus=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.fromDate=e),placeholder:e.$t("general.from"),rules:l.rules.fromDate,label:e.$t("general.date_range")},null,8,["modelValue","placeholder","rules","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.toDate=e),label:"",placeholder:e.$t("general.to"),rules:l.rules.toDate},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(g),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{type:"submit","display-type":"secondary",label:e.$t("general.view")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:2},1032,["filter-title"]),t[6]||(t[6]=(0,a.createElementVNode)("br",null,null,-1))]),footer:(0,a.withCtx)(({data:t})=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(t.meta?t.meta.sum.label:"0.00"),1)]),_:1},8,["filters"])}const zT={employee:null,fromDate:null,toDate:null,jobTitle:null,subunit:null,empStatus:null};var jT={components:{"reports-table":Ww,"jobtitle-dropdown":Mp,"employee-autocomplete":$a,"employment-status-dropdown":Xp},props:{subunits:{type:Array,default:()=>[]}},setup(){const e=(0,a.ref)({...zT}),{$t:t}=Ie(),{userDateFormat:o}=F(),l={fromDate:[Jt(o),yo(()=>e.value.toDate,t("general.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(o),so(()=>e.value.fromDate,t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})],employee:[Wt(100),$o]},n=(0,a.computed)(()=>({empNumber:e.value.employee?.id,fromDate:e.value.fromDate,toDate:e.value.toDate,jobTitleId:e.value.jobTitle?.id,subunitId:e.value.subunit?.id,employmentStatusId:e.value.empStatus?.id}));return{rules:l,filters:e,serializedFilters:n}}};const OT=(0,i.A)(jT,[["render",FT]]);var GT=OT;const QT={class:"XHRM-paper-container"},KT={class:"XHRM-container"},WT={class:"XHRM-bottom-container"};function JT(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("date-input"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("oxd-table-filter"),y=(0,a.resolveComponent)("table-header"),C=(0,a.resolveComponent)("oxd-card-table"),V=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(f,{"filter-title":e.$t("attendance.employee_attendance_records")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:l.rules.employee,params:{includeEmployees:"currentAndPast"}},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.date,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.date=e),rules:l.rules.date,years:n.yearArray,label:e.$t("general.date"),required:""},null,8,["modelValue","rules","years","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"secondary",label:e.$t("general.view"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[3]||(t[3]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",QT,[(0,a.createVNode)(y,{total:l.total,selected:0,loading:l.isLoading,"show-divider":!1},null,8,["total","loading"]),(0,a.createElementVNode)("div",KT,[(0,a.createVNode)(C,{headers:n.headers,items:l.items?.data,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","items","loading"])]),(0,a.createElementVNode)("div",WT,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,current:l.currentPage,"onUpdate:current":t[2]||(t[2]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])],64)}var YT={components:{"employee-autocomplete":$a},props:{date:{type:String,default:null}},setup(e){const{$tEmpName:t}=Ma(),{userDateFormat:o}=F(),l={date:[Kt,Jt(o)],employee:[Wt(100)]},n=(0,a.ref)({date:e.date?e.date:ge(pe(),"yyyy-MM-dd"),employee:null}),i=(0,a.computed)(()=>({date:n.value.date,empNumber:n.value.employee?.id})),r=e=>e.map(e=>({id:e.empNumber,empName:t(e,{includeMiddle:!1,excludePastEmpTag:!1}),duration:e.sum?.label})),s=new H(window.appGlobal.baseUrl,"/api/v2/attendance/employees/summary"),{total:d,pages:c,response:u,isLoading:m,execQuery:p,currentPage:h,showPaginator:g}=Et(s,{query:i,normalizer:r});return{http:s,rules:l,total:d,pages:c,filters:n,isLoading:m,execQuery:p,currentPage:h,showPaginator:g,items:u}},data(){return{yearArray:[...xy()],headers:[{name:"empName",slot:"title",title:this.$t("general.employee_name"),style:{flex:"40%"}},{name:"duration",title:this.$t("time.total_duration"),style:{flex:"40%"}},{name:"actions",slot:"footer",title:this.$t("general.actions"),style:{flex:"20%"},cellType:"oxd-table-cell-actions",cellConfig:{view:{onClick:this.onClickView,component:"oxd-button",props:{label:this.$t("general.view"),displayType:"text",size:"medium"}}}}]}},methods:{async resetDataTable(){await this.execQuery()},async filterItems(){if(this.filters.employee&&this.filters.date)return I("/attendance/viewAttendanceRecord",void 0,{employeeId:this.filters.employee.id,date:this.filters.date});await this.execQuery()},onClickView(e){I("/attendance/viewAttendanceRecord",void 0,{employeeId:e.id,date:this.filters.date})}}};const ZT=(0,i.A)(YT,[["render",JT],["__scopeId","data-v-092ef17a"]]);var eB=ZT;const tB={class:"XHRM-paper-container"},oB={key:0,class:"XHRM-header-container"},aB={class:"XHRM-container"},lB={class:"XHRM-bottom-container"};function nB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("date-input"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("oxd-table-filter"),y=(0,a.resolveComponent)("oxd-text"),C=(0,a.resolveComponent)("table-header"),V=(0,a.resolveComponent)("oxd-card-table"),b=(0,a.resolveComponent)("oxd-pagination"),w=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(f,{"filter-title":e.$t("attendance.employee_attendance_records")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{onSubmitValid:i.onClickView},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:l.rules.employee,params:{includeEmployees:"currentAndPast"}},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.date,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.date=e),rules:l.rules.date,years:n.yearArray,label:e.$t("general.date"),required:""},null,8,["modelValue","rules","years","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"secondary",label:e.$t("general.view"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",tB,[o.isEditable&&l.filters.employee?((0,a.openBlock)(),(0,a.createElementBlock)("div",oB,[(0,a.createVNode)(h,{"icon-name":"plus","display-type":"secondary",label:e.$t("general.add"),onClick:i.onClickAdd},null,8,["label","onClick"]),(0,a.createVNode)(y,{class:"XHRM-header-total",tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("time.total_duration"))+": "+(0,a.toDisplayString)(l.totalDuration),1)]),_:1})])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(C,{total:l.total,loading:l.isLoading,"show-divider":o.isEditable,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","show-divider","selected","onDelete"]),(0,a.createElementVNode)("div",aB,[(0,a.createVNode)(V,{selected:n.checkedItems,"onUpdate:selected":t[2]||(t[2]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,selectable:o.isEditable,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","selectable","loading"])]),(0,a.createElementVNode)("div",lB,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,current:l.currentPage,"onUpdate:current":t[3]||(t[3]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(w,{ref:"deleteDialog"},null,512)])],64)}var iB={components:{"employee-autocomplete":$a,"delete-confirmation":Xt},props:{date:{type:String,default:null},employee:{type:Object,required:!0},isEditable:{type:Boolean,default:!1}},setup(e){const t=(0,a.ref)({date:e.date?e.date:ge(pe(),"yyyy-MM-dd"),employee:e.employee?{id:e.employee.empNumber,label:`${e.employee.firstName} ${e.employee.middleName} ${e.employee.lastName}`,isPastEmployee:e.employee.terminationId}:null}),o=(0,a.computed)(()=>({date:t.value.date,empNumber:t.value.employee?.id})),l=new H(window.appGlobal.baseUrl,`/api/v2/attendance/employees/${e.employee.empNumber}/records`),{locale:n}=Ae(),{jsDateFormat:i,userDateFormat:r,timeFormat:s,jsTimeFormat:d}=F(),c={date:[Kt,Jt(r)],employee:[Wt(100),$o]},u=e=>e.map(e=>{const{punchIn:t,punchOut:o}=e,a=ge(he(t?.userDate),i,{locale:n}),l=Ve(Ce(t?.userTime,s),d),r=ge(he(o?.userDate),i,{locale:n}),c=Ve(Ce(o?.userTime,s),d);return{id:e.id,punchIn:{...t,userTime:l,userDate:a},punchOut:{...o,userTime:c,userDate:r},duration:e.duration,punchInNote:t.note,punchOutNote:o.note}}),{total:m,pages:p,pageSize:h,response:g,isLoading:v,execQuery:f,currentPage:y,showPaginator:C}=Et(l,{query:o,normalizer:u,prefetch:!0}),V=(0,a.computed)(()=>{const e=g.value?.meta;return e?e.sum.label:"0.00"});return{http:l,rules:c,total:m,pages:p,filters:t,pageSize:h,isLoading:v,execQuery:f,currentPage:y,showPaginator:C,items:g,totalDuration:V}},data(){return{yearArray:[...xy()],headers:[{name:"punchIn",slot:"title",title:this.$t("attendance.punch_in"),style:{flex:1},cellRenderer:this.cellRenderer},{name:"punchInNote",slot:"title",cellType:"oxd-table-cell-truncate",title:this.$t("attendance.punch_in_note"),style:{flex:1}},{name:"punchOut",slot:"title",title:this.$t("attendance.punch_out"),style:{flex:1},cellRenderer:this.cellRenderer},{name:"punchOutNote",slot:"title",cellType:"oxd-table-cell-truncate",title:this.$t("attendance.punch_out_note"),style:{flex:1}},{name:"duration",slot:"title",title:this.$t("attendance.duration_hours"),style:{flex:1}},{...this.isEditable&&{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}}],checkedItems:[]}},methods:{cellRenderer(...e){const t=e[1];return{component:$T,props:{date:t.userDate,time:t.userTime,offset:Se(t.offset)}}},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickView(){return I("/attendance/viewAttendanceRecord",void 0,{employeeId:this.filters.employee?.id,date:this.filters?.date})},onClickAdd(){return I("/attendance/proxyPunchInPunchOut",void 0,{employeeId:this.filters.employee?.id,date:this.filters?.date})},onClickEdit(e){return I("/attendance/editEmployeeAttendanceRecord/{id}",{id:e.id})}}};const rB=(0,i.A)(iB,[["render",nB]]);var sB=rB,dB={"attendance-punch-in":oT,"attendance-punch-out":dT,"edit-attendance":yT,"view-my-attendance":RT,"attendance-configuration":qT,"attendance-summary-report":GT,"view-employee-attendance-summary":eB,"view-employee-attendance-detailed":sB};const cB={class:"XHRM-background-container"},uB={key:1};function mB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("purge-employee-records"),s=(0,a.resolveComponent)("selected-employee"),d=(0,a.resolveComponent)("maintenance-note"),c=(0,a.resolveComponent)("purge-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",cB,[(0,a.createVNode)(r,{"include-employees-param":"onlyPast","title-label":e.$t("maintenance.purge_employee_records"),"autocomplete-label":e.$t("maintenance.past_employee"),onSearch:i.onClickSearch},null,8,["title-label","autocomplete-label","onSearch"]),t[0]||(t[0]=(0,a.createElementVNode)("br",null,null,-1)),n.showPurgeableEmployee?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,loading:n.isLoading,"selected-employee":n.selectedEmployee,"button-label":e.$t("maintenance.purge"),onSubmit:i.onClickPurge},null,8,["loading","selected-employee","button-label","onSubmit"])):(0,a.createCommentVNode)("",!0),n.showPurgeableEmployee?((0,a.openBlock)(),(0,a.createElementBlock)("br",uB)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(d,{"instance-identifier":o.instanceIdentifier},null,8,["instance-identifier"]),(0,a.createVNode)(c,{ref:"purgeDialog",title:e.$t("maintenance.purge_employee"),subtitle:e.$t("maintenance.purge_employee_warning"),"cancel-label":e.$t("general.no_cancel"),"confirm-label":e.$t("maintenance.yes_purge")},null,8,["title","subtitle","cancel-label","confirm-label"])])}const pB={class:"XHRM-card-container"},hB={class:"XHRM-selected-employee"},gB={class:"XHRM-selected-employee-imagesection"},vB={class:"XHRM-selected-employee-image-wrapper"},fB={class:"XHRM-selected-employee-image"},yB=["src"],CB={class:"XHRM-selected-employee-content"};function VB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("full-name-input"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-input-field"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",pB,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("maintenance.selected_employee")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{loading:o.loading,onSubmit:i.emitEmpNumber},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",hB,[(0,a.createElementVNode)("div",gB,[(0,a.createElementVNode)("div",vB,[(0,a.createElementVNode)("div",fB,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:l.imgSrc},null,8,yB)])])]),(0,a.createElementVNode)("div",CB,[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{"first-name":o.selectedEmployee.firstName,"middle-name":o.selectedEmployee.middleName,"last-name":o.selectedEmployee.lastName,rules:n.rules,"show-middle-name-placeholder":!1,disabled:""},null,8,["first-name","middle-name","last-name","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{"model-value":o.selectedEmployee.employeeId,label:e.$t("general.employee_id"),rules:n.rules.employeeId,disabled:""},null,8,["model-value","label","rules"])]),_:1})]),_:1})]),_:1})])]),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{"display-type":"secondary",label:o.buttonLabel,type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmit"])])}var bB={name:"SelectedEmployee",components:{"full-name-input":hp},props:{selectedEmployee:{type:Object,required:!0},buttonLabel:{type:String,required:!0},loading:{type:Boolean,default:!1}},emits:["submit"],setup(e){const t=(0,a.computed)(()=>`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.selectedEmployee.empNumber}`);return{imgSrc:t}},data(){return{rules:{firstName:[Wt(30)],middleName:[Wt(30)],lastName:[Wt(30)],employeeId:[Wt(10)]}}},methods:{emitEmpNumber(){this.$emit("submit",this.selectedEmployee.empNumber)}}};const wB=(0,i.A)(bB,[["render",VB],["__scopeId","data-v-be12c5a2"]]);var xB=wB;const NB={class:"XHRM-card-container"};function kB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",NB,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.titleLabel),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{onSubmit:i.emitEmployee},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employee=e),rules:n.rules.employee,params:{includeEmployees:o.includeEmployeesParam},label:o.autocompleteLabel,required:""},null,8,["modelValue","rules","params","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmit"])])}var _B={name:"EmployeeRecords",components:{"required-text":C,"employee-autocomplete":$a},props:{includeEmployeesParam:{type:String,required:!0},titleLabel:{type:String,required:!0},autocompleteLabel:{type:String,required:!0}},emits:["search"],data(){return{employee:null,rules:{employee:[Kt,Wt(100),$o]}}},methods:{emitEmployee(){this.$emit("search",this.employee?._employee)}}};const SB=(0,i.A)(_B,[["render",kB]]);var DB=SB;const $B={class:"XHRM-modal-header"},MB={class:"XHRM-text-center-align"},EB={class:"XHRM-modal-footer"};function RB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-confirmation-dialog XHRM-dialog-popup","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",$B,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.title),1)]),_:1})]),(0,a.createElementVNode)("div",MB,[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.subtitle),1)]),_:1})]),(0,a.createElementVNode)("div",EB,[(0,a.createVNode)(s,{label:o.cancelLabel,"display-type":o.cancelButtonType,class:"XHRM-button-margin",onClick:i.onCancel},null,8,["label","display-type","onClick"]),(0,a.createVNode)(s,{"icon-name":o.icon,label:o.confirmLabel,"display-type":o.confirmButtonType,class:"XHRM-button-margin",onClick:i.onConfirm},null,8,["icon-name","label","display-type","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var TB={components:{"oxd-dialog":X.KB},props:{title:{type:String,required:!0},subtitle:{type:String,required:!0},cancelLabel:{type:String,required:!0},confirmLabel:{type:String,required:!0},icon:{type:String,required:!1,default:""},confirmButtonType:{type:String,required:!1,default:"label-danger"},cancelButtonType:{type:String,required:!1,default:"text"}},data(){return{show:!1,reject:null,resolve:null}},methods:{showDialog(){return new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})},onConfirm(){this.show=!1,this.resolve&&this.resolve("ok")},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")}}};const BB=(0,i.A)(TB,[["render",RB],["__scopeId","data-v-01927f3b"]]);var IB=BB;const AB={key:0,class:"XHRM-maintenance-note"},HB={class:"XHRM-maintenance-note-header"};function XB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return null!==o.instanceIdentifier?((0,a.openBlock)(),(0,a.createElementBlock)("div",AB,[(0,a.createElementVNode)("div",HB,[(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.note")),1)]),_:1})]),(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("maintenance.gdpr_note",{instanceIdentifier:o.instanceIdentifier})),1)]),_:1})])):(0,a.createCommentVNode)("",!0)}var UB={name:"MaintenanceNote",props:{instanceIdentifier:{type:String,required:!0}}};const LB=(0,i.A)(UB,[["render",XB],["__scopeId","data-v-34c905b7"]]);var PB=LB;const qB={firstName:"",middleName:"",lastName:"",employeeId:"",empNumber:""};var FB={name:"PurgeEmployee",components:{"purge-confirmation":IB,"purge-employee-records":DB,"selected-employee":xB,"maintenance-note":PB},props:{instanceIdentifier:{type:String,default:null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/maintenance/purge");return{http:e}},data(){return{isLoading:!1,showPurgeableEmployee:!1,selectedEmployee:{...qB}}},methods:{onClickSearch(e){this.selectedEmployee={...qB},e?(this.selectedEmployee={...e},this.showPurgeableEmployee=!0):this.showPurgeableEmployee=!1},onClickPurge(e){this.$refs.purgeDialog.showDialog().then(t=>{"ok"===t&&this.purgeEmployee(e)})},purgeEmployee(e){this.isLoading=!0,this.http.deleteAll({empNumber:e}).then(()=>this.$toast.success({title:this.$t("general.success"),message:this.$t("maintenance.purge_success")})).then(()=>{this.showPurgeableEmployee=!1,this.selectedEmployee={...qB},this.isLoading=!1,I("/maintenance/purgeEmployee")})}}};const zB=(0,i.A)(FB,[["render",mB]]);var jB=zB;const OB={class:"XHRM-background-container"};function GB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("selected-candidates"),s=(0,a.resolveComponent)("maintenance-note"),d=(0,a.resolveComponent)("purge-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",OB,[(0,a.createVNode)(r,{loading:n.isLoading,onPurge:i.onClickPurge},null,8,["loading","onPurge"]),t[0]||(t[0]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s,{"instance-identifier":o.instanceIdentifier},null,8,["instance-identifier"]),(0,a.createVNode)(d,{ref:"purgeDialog",title:e.$t("maintenance.purge_candidates"),subtitle:e.$t("maintenance.purge_candidates_warning"),"cancel-label":e.$t("general.no_cancel"),"confirm-label":e.$t("maintenance.yes_purge")},null,8,["title","subtitle","cancel-label","confirm-label"])])}const QB={key:0,class:"XHRM-paper-container"},KB={class:"XHRM-header-container"},WB={class:"XHRM-container"},JB={class:"XHRM-bottom-container"};function YB(e,t,o,l,n,i){const r=(0,a.resolveComponent)("purge-candidate-records"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("table-header"),c=(0,a.resolveComponent)("oxd-card-table"),u=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(r,{onSearch:i.onClickSearch},null,8,["onSearch"]),l.vacancy?((0,a.openBlock)(),(0,a.createElementBlock)("div",QB,[(0,a.withDirectives)((0,a.createElementVNode)("div",KB,[(0,a.createVNode)(s,{label:e.$t("maintenance.purge_all"),"display-type":"secondary",onClick:i.onClickPurge},null,8,["label","onClick"])],512),[[a.vShow,l.total>0]]),(0,a.createVNode)(d,{total:l.total,selected:0,"show-divider":l.total>0,loading:l.isLoading||o.loading},null,8,["total","show-divider","loading"]),(0,a.createElementVNode)("div",WB,[(0,a.createVNode)(c,{headers:n.headers,clickable:!1,selectable:!1,loading:l.isLoading||o.loading,items:l.items.data,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","loading","items"])]),(0,a.createElementVNode)("div",JB,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])):(0,a.createCommentVNode)("",!0)],64)}const ZB={class:"XHRM-card-container"};function eI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("vacancy-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",ZB,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("maintenance.purge_candidate_records")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,{onSubmitValid:t[1]||(t[1]=t=>e.$emit("search",n.vacancy.id))},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy,"onUpdate:modelValue":t[0]||(t[0]=e=>n.vacancy=e),rules:n.rules.vacancy,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1})])}function tI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",label:e.$t("recruitment.vacancy"),clear:!1,"create-options":i.loadVacancies},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var oI={name:"VacancyAutocomplete",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/vacancies");return{http:e}},methods:{async loadVacancies(e){return new Promise(t=>{e.trim()?this.http.getAll({name:e.trim()}).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:e.name})))}):t([])})}}};const aI=(0,i.A)(oI,[["render",tI]]);var lI=aI,nI={name:"CandidateRecords",components:{"required-text":C,"vacancy-autocomplete":lI},emits:["search"],data(){return{vacancy:null,rules:{vacancy:[Kt,$o]}}}};const iI=(0,i.A)(nI,[["render",eI]]);var rI=iI,sI={name:"SelectedCandidates",components:{"purge-candidate-records":rI},props:{loading:{type:Boolean,default:!1}},emits:["purge"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/maintenance/candidates"),t=(0,a.ref)(null),{locale:o}=Ae(),{jsDateFormat:l}=F(),{$tEmpName:n}=Ma(),i=(0,a.computed)(()=>({vacancyId:t.value})),r=e=>e.map(e=>({name:n({firstName:e.firstName,middleName:e.middleName,lastName:e.lastName,terminationId:null},{includeMiddle:!0}),date:ge(he(e.dateOfApplication),l,{locale:o}),status:e.status.label})),{total:s,pages:d,response:c,isLoading:u,currentPage:m,showPaginator:p,execQuery:h}=Et(e,{prefetch:!1,query:i,normalizer:r});return{http:e,total:s,pages:d,vacancy:t,isLoading:u,currentPage:m,showPaginator:p,items:c,execQuery:h}},data(){return{headers:[{name:"name",title:this.$t("recruitment.candidate_name"),style:{flex:"45%"}},{name:"date",title:this.$t("recruitment.date_of_application"),style:{flex:"45%"}},{name:"status",title:this.$t("general.status"),style:{flex:"10%"}}]}},methods:{onClickSearch(e){this.vacancy=e,this.execQuery()},onClickPurge(){this.vacancy&&this.$emit("purge",this.vacancy)}}};const dI=(0,i.A)(sI,[["render",YB],["__scopeId","data-v-3a9fc38f"]]);var cI=dI,uI={name:"PurgeCandidate",components:{"maintenance-note":PB,"purge-confirmation":IB,"selected-candidates":cI},props:{instanceIdentifier:{type:String,default:null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/maintenance/candidates/purge");return{http:e}},data(){return{isLoading:!1}},methods:{onClickPurge(e){const t=e;this.$refs.purgeDialog.showDialog().then(e=>{"ok"===e&&this.purgeCandidates(t)})},purgeCandidates(e){this.isLoading=!0,this.http.deleteAll({vacancyId:e}).then(()=>this.$toast.success({title:this.$t("general.success"),message:this.$t("maintenance.purge_success")})).then(()=>{A()})}}};const mI=(0,i.A)(uI,[["render",GB]]);var pI=mI;const hI={key:0,class:"XHRM-background-container"},gI={key:1};function vI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-records"),s=(0,a.resolveComponent)("selected-employee"),d=(0,a.resolveComponent)("maintenance-note");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(r,{"title-label":e.$t("maintenance.download_personal_data"),"include-employees-param":"currentAndPast","autocomplete-label":e.$t("general.employee_name"),onSearch:i.search},null,8,["title-label","autocomplete-label","onSearch"]),n.employee?((0,a.openBlock)(),(0,a.createElementBlock)("div",hI,[(0,a.createVNode)(s,{"button-label":e.$t("general.download"),"selected-employee":n.employee,onSubmit:i.downloadEmployeeData},null,8,["button-label","selected-employee","onSubmit"])])):(0,a.createCommentVNode)("",!0),n.employee?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("br",gI)),(0,a.createVNode)(d,{"instance-identifier":o.instanceIdentifier},null,8,["instance-identifier"])],64)}var fI={components:{"employee-records":DB,"selected-employee":xB,"maintenance-note":PB},props:{instanceIdentifier:{type:String,default:null}},data(){return{employee:null}},methods:{search(e){this.employee=e},downloadEmployeeData(e){const t=`${window.appGlobal.baseUrl}/maintenance/accessEmployeeData/${e}`;window.open(t,"_blank")}}};const yI=(0,i.A)(fI,[["render",vI]]);var CI=yI,VI={"purge-employee":jB,"purge-candidate":pI,"access-employee-search":CI};const bI={class:"XHRM-background-container"},wI={class:"XHRM-paper-container"},xI={class:"XHRM-header-container"},NI={class:"XHRM-container"},kI={class:"XHRM-bottom-container"};function _I(e,t,o,l,n,i){const r=(0,a.resolveComponent)("jobtitle-dropdown"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("vacancy-dropdown"),c=(0,a.resolveComponent)("hiring-manager-dropdown"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-divider"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-table-filter"),C=(0,a.resolveComponent)("table-header"),V=(0,a.resolveComponent)("oxd-card-table"),b=(0,a.resolveComponent)("oxd-pagination"),w=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bI,[(0,a.createVNode)(y,{"filter-title":e.$t("general.vacancies")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.jobTitleId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.jobTitleId=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.vacancyId,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.vacancyId=e),label:e.$t("recruitment.vacancy")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.hiringManagerId,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.hiringManagerId=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.status,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.status=e),type:"select",label:e.$t("general.status"),clear:!1,options:n.statusOptions},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(g,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",wI,[(0,a.createElementVNode)("div",xI,[(0,a.createVNode)(g,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(C,{selected:n.checkedItems.length,loading:l.isLoading,total:l.total,onDelete:i.onClickDeleteSelected},null,8,["selected","loading","total","onDelete"]),(0,a.createElementVNode)("div",NI,[(0,a.createVNode)(V,{selected:n.checkedItems,"onUpdate:selected":t[4]||(t[4]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[5]||(t[5]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card",class:"XHRM-vacancy-list"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",kI,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,current:l.currentPage,"onUpdate:current":t[6]||(t[6]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(w,{ref:"deleteDialog"},null,512)])}function SI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("recruitment.vacancy"),options:l.options},null,8,["label","options"])}var DI={name:"VacancyDropdown",props:{status:{type:Boolean,required:!1,default:null},excludeInterviewers:{type:Boolean,required:!1,default:!1}},setup(e){const t=(0,a.ref)([]),{$t:o}=Ie(),l=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/vacancies");return(0,a.onBeforeMount)(()=>{const a={model:"summary",limit:0};null!==e.status&&(a.status=e.status),a.excludeInterviewers=e.excludeInterviewers,l.getAll(a).then(({data:e})=>{t.value=e.data.map(e=>({id:e.id,label:!1===e.status?`${e.name} (${o("general.closed")})`:e.name}))})}),{options:t}}};const $I=(0,i.A)(DI,[["render",SI]]);var MI=$I;function EI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("recruitment.hiring_manager"),options:l.options},null,8,["label","options"])}var RI={name:"HiringManagerDropdown",setup(){const e=(0,a.ref)([]),{$tEmpName:t}=Ma(),o=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/hiring-managers");return(0,a.onBeforeMount)(()=>{o.getAll({limit:0}).then(({data:o})=>{e.value=o.data.map(e=>({id:e.empNumber,label:t(e,{includeMiddle:!1,excludePastEmpTag:!1})}))})}),{options:e}}};const TI=(0,i.A)(RI,[["render",EI]]);var BI=TI;const II={jobTitleId:null,hiringManagerId:null,vacancyId:null,status:null},AI={"vacancy.name":"ASC","vacancy.status":"DEFAULT","jobTitle.jobTitleName":"DEFAULT","hiringManager.lastName":"DEFAULT"};var HI={name:"ViewJobVacancy",components:{"delete-confirmation":Xt,"jobtitle-dropdown":Mp,"vacancy-dropdown":MI,"hiring-manager-dropdown":BI},setup(){const{$t:e}=Ie(),{$tEmpName:t}=Ma(),o=(0,a.ref)({...II}),{sortDefinition:l,sortField:n,sortOrder:i,onSort:r}=Ut({sortDefinition:AI}),s=(0,a.computed)(()=>({vacancyId:o.value.vacancyId?.id,jobTitleId:o.value.jobTitleId?.id,hiringManagerId:o.value.hiringManagerId?.id,status:o.value.status?.id,sortField:n.value,sortOrder:i.value,model:"detailed"})),d=o=>o.map(o=>({id:o.id,vacancy:o.name,jobTitle:o.jobTitle?.isDeleted?o.jobTitle.title+e("general.deleted"):o.jobTitle?.title,hiringManager:o.hiringManager?.id?t(o.hiringManager):e("general.deleted"),status:o.status?e("general.active"):e("general.closed")})),c=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/vacancies"),{showPaginator:u,currentPage:m,total:p,pages:h,pageSize:g,response:v,isLoading:f,execQuery:y}=Et(c,{query:s,normalizer:d});return r(y),{http:c,showPaginator:u,currentPage:m,isLoading:f,total:p,pages:h,pageSize:g,execQuery:y,items:v,filters:o,sortDefinition:l}},data(){return{headers:[{name:"vacancy",slot:"title",title:this.$t("recruitment.vacancy"),sortField:"vacancy.name",style:{flex:3}},{name:"jobTitle",title:this.$t("general.job_title"),sortField:"jobTitle.jobTitleName",style:{flex:3}},{name:"hiringManager",title:this.$t("recruitment.hiring_manager"),sortField:"hiringManager.lastName",style:{flex:3}},{name:"status",title:this.$t("general.status"),sortField:"vacancy.status",style:{flex:2}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:2},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],statusOptions:[{id:!0,param:"active",label:this.$t("general.active")},{id:!1,param:"closed",label:this.$t("general.closed")}],vacancies:[],checkedItems:[]}},methods:{onClickAdd(){I("/recruitment/addJobVacancy")},onClickEdit(e){I("/recruitment/addJobVacancy/{id}",{id:e.id})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteData([e.id])})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteData(e)})},async deleteData(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...II},this.filterItems()}}};const XI=(0,i.A)(HI,[["render",_I],["__scopeId","data-v-55a8589f"]]);var UI=XI;const LI={class:"XHRM-background-container"},PI={class:"XHRM-card-container"},qI={class:"XHRM-vacancy-links"};function FI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("jobtitle-dropdown"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("employee-autocomplete"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("vacancy-link-card"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",LI,[(0,a.createElementVNode)("div",PI,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.add_vacancy")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.vacancy.name=e),label:e.$t("recruitment.vacancy_name"),required:"",rules:n.rules.name},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.vacancy.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>n.vacancy.jobTitle=e),rules:n.rules.jobTitle,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-grid-item-span-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy.description,"onUpdate:modelValue":t[2]||(t[2]=e=>n.vacancy.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.vacancy.hiringManager,"onUpdate:modelValue":t[3]||(t[3]=e=>n.vacancy.hiringManager=e),params:{includeEmployees:"onlyCurrent"},required:"",rules:n.rules.hiringManager,label:e.$t("recruitment.hiring_manager")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy.numOfPositions,"onUpdate:modelValue":t[4]||(t[4]=e=>n.vacancy.numOfPositions=e),label:e.$t("recruitment.num_of_positions"),rules:n.rules.numOfPositions},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"orangerhrm-switch-wrapper"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.vacancy.status,"onUpdate:modelValue":t[5]||(t[5]=e=>n.vacancy.status=e)},null,8,["modelValue"])]),_:1})]),_:1}),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"orangerhrm-switch-wrapper"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.publish_in_rss_feed_and_web_page")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.vacancy.isPublished,"onUpdate:modelValue":t[6]||(t[6]=e=>n.vacancy.isPublished=e)},null,8,["modelValue"])]),_:1})]),_:1}),t[8]||(t[8]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-grid-item-span-2"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",qI,[(0,a.createVNode)(g,{label:e.$t("recruitment.rss_feed_url"),url:n.rssFeedUrl},null,8,["label","url"]),(0,a.createVNode)(g,{label:e.$t("recruitment.web_page_url"),url:n.webUrl},null,8,["label","url"])])]),_:1})]),_:1}),t[9]||(t[9]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(y)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const zI={class:"XHRM-label-link-wrapper"},jI=["href"];function OI(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zI,[(0,a.createVNode)(r,{class:"XHRM-text-label",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.label)+" : ",1)]),_:1}),(0,a.createElementVNode)("a",{href:o.url,target:"_blank",class:"XHRM-vacancy-link"},(0,a.toDisplayString)(o.url),9,jI)])}var GI={name:"VacancyLinkCard",props:{label:{type:String,required:!0},url:{type:String,required:!0}}};const QI=(0,i.A)(GI,[["render",OI],["__scopeId","data-v-33b66a12"]]);var KI=QI;const WI={jobTitle:null,name:"",hiringManager:null,numOfPositions:"",description:"",status:!0,isPublished:!0},JI=`${window.location.protocol}//${window.location.host}${window.appGlobal.baseUrl}`;var YI={components:{"oxd-switch-input":X.Ay,"employee-autocomplete":$a,"jobtitle-dropdown":Mp,"vacancy-link-card":KI},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/vacancies"),{createUniqueValidator:t}=Lo(e),o=t("Vacancy","name");return{http:e,vacancyNameUniqueValidation:o}},data(){return{isLoading:!1,vacancy:{...WI},rules:{jobTitle:[Kt],name:[Kt,this.vacancyNameUniqueValidation,Wt(50)],hiringManager:[Kt,$o],numOfPositions:[e=>null===e||""===e||("string"===typeof oo(e)?oo(e):No(1,99)(e))],description:[],status:[Kt],isPublished:[Kt]},rssFeedUrl:`${JI}/recruitmentApply/jobs.rss`,webUrl:`${JI}/recruitmentApply/jobs.html`}},methods:{onCancel(){I("/recruitment/viewJobVacancy")},onSave(){this.isLoading=!0,this.vacancy={name:this.vacancy.name,jobTitleId:this.vacancy.jobTitle.id,employeeId:this.vacancy.hiringManager.id,numOfPositions:this.vacancy.numOfPositions?parseInt(this.vacancy.numOfPositions):null,description:this.vacancy.description,status:this.vacancy.status,isPublished:this.vacancy.isPublished},this.http.create({...this.vacancy}).then(e=>{const{data:t}=e.data;this.$toast.saveSuccess(),I("/recruitment/addJobVacancy/{id}",{id:t.id})})}}};const ZI=(0,i.A)(YI,[["render",FI],["__scopeId","data-v-1eb8acc8"]]);var eA=ZI;const tA={class:"XHRM-background-container"},oA={class:"XHRM-card-container"},aA={class:"XHRM-vacancy-links"},lA={key:0,class:"XHRM-card-container"},nA={key:1,class:"XHRM-card-container"},iA={class:"XHRM-paper-container"},rA={class:"XHRM-header-container XHRM-attachment-header"},sA={class:"XHRM-container"};function dA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("jobtitle-dropdown"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("employee-autocomplete"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("vacancy-link-card"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("submit-button"),C=(0,a.resolveComponent)("oxd-form-actions"),V=(0,a.resolveComponent)("oxd-form"),b=(0,a.resolveComponent)("file-upload-input"),w=(0,a.resolveComponent)("table-header"),x=(0,a.resolveComponent)("oxd-card-table"),N=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",tA,[(0,a.createElementVNode)("div",oA,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.edit_vacancy")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.vacancy.name=e),label:e.$t("recruitment.vacancy_name"),required:"",rules:n.rules.name},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.vacancy.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>n.vacancy.jobTitle=e),rules:n.rules.jobTitle,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-grid-item-span-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy.description,"onUpdate:modelValue":t[2]||(t[2]=e=>n.vacancy.description=e),type:"textarea",label:e.$t("general.description"),placeholder:e.$t("general.type_description_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.vacancy.hiringManager,"onUpdate:modelValue":t[3]||(t[3]=e=>n.vacancy.hiringManager=e),params:{includeEmployees:"onlyCurrent"},required:"",rules:n.rules.hiringManager,label:e.$t("recruitment.hiring_manager")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancy.numOfPositions,"onUpdate:modelValue":t[4]||(t[4]=e=>n.vacancy.numOfPositions=e),label:e.$t("recruitment.num_of_positions"),rules:n.rules.numOfPositions},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"orangerhrm-switch-wrapper"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.vacancy.status,"onUpdate:modelValue":t[5]||(t[5]=e=>n.vacancy.status=e)},null,8,["modelValue"])]),_:1})]),_:1}),t[14]||(t[14]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"orangerhrm-switch-wrapper"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-text",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.publish_in_rss_feed_and_web_page")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.vacancy.isPublished,"onUpdate:modelValue":t[6]||(t[6]=e=>n.vacancy.isPublished=e)},null,8,["modelValue"])]),_:1})]),_:1}),t[15]||(t[15]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-grid-item-span-2"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",aA,[(0,a.createVNode)(g,{label:e.$t("recruitment.rss_feed_url"),url:n.rssFeedUrl},null,8,["label","url"]),(0,a.createVNode)(g,{label:e.$t("recruitment.web_page_url"),url:n.webUrl},null,8,["label","url"])])]),_:1})]),_:1}),t[16]||(t[16]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(y)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),t[21]||(t[21]=(0,a.createElementVNode)("br",null,null,-1)),n.isAddClicked&&!n.isEditClicked?((0,a.openBlock)(),(0,a.createElementBlock)("div",lA,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title XHRM-attachment-header__title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_attachment")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoadingAttachment,onSubmitValid:i.onSaveAttachment},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(b,{newFile:n.vacancyAttachment.newAttachment,"onUpdate:newFile":t[7]||(t[7]=e=>n.vacancyAttachment.newAttachment=e),method:n.vacancyAttachment.method,"onUpdate:method":t[8]||(t[8]=e=>n.vacancyAttachment.method=e),label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),file:n.vacancyAttachment.oldAttachment,rules:n.rules.addAttachment,url:"recruitment/vacancyAttachment/attachId",hint:e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize}),required:""},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancyAttachment.comment,"onUpdate:modelValue":t[9]||(t[9]=e=>n.vacancyAttachment.comment=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1}),t[17]||(t[17]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.updateVisibility},null,8,["label","onClick"]),(0,a.createVNode)(y,{label:e.$t("general.save")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])])):(0,a.createCommentVNode)("",!0),n.isEditClicked&&!n.isAddClicked?((0,a.openBlock)(),(0,a.createElementBlock)("div",nA,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title XHRM-attachment-header__title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_attachment")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,{loading:n.isLoadingAttachment,onSubmitValid:i.onUpdateAttachment},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(b,{newFile:n.vacancyAttachment.newAttachment,"onUpdate:newFile":t[10]||(t[10]=e=>n.vacancyAttachment.newAttachment=e),method:n.vacancyAttachment.method,"onUpdate:method":t[11]||(t[11]=e=>n.vacancyAttachment.method=e),label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),file:n.vacancyAttachment.oldAttachment,rules:n.rules.updateAttachment,url:"recruitment/viewVacancyAttachment/attachId",hint:e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize}),deletable:!1,required:""},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1})]),_:1}),(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.vacancyAttachment.comment,"onUpdate:modelValue":t[12]||(t[12]=e=>n.vacancyAttachment.comment=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1}),t[18]||(t[18]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(s),(0,a.createVNode)(C,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v),(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.updateVisibility},null,8,["label","onClick"]),(0,a.createVNode)(y,{label:e.$t("general.save")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])])):(0,a.createCommentVNode)("",!0),t[22]||(t[22]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",iA,[(0,a.createElementVNode)("div",rA,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title XHRM-attachment-header__title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.attachments")),1)]),_:1}),n.isAddClicked||n.isEditClicked?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"text",onClick:i.onClickAdd},null,8,["label","onClick"]))]),(0,a.createVNode)(w,{selected:n.checkedItems.length,loading:n.isLoadingTable,total:n.attachments.length,onDelete:i.onClickDeleteSelected},null,8,["selected","loading","total","onDelete"]),(0,a.createElementVNode)("div",sA,[(0,a.createVNode)(x,{selected:n.checkedItems,"onUpdate:selected":t[13]||(t[13]=e=>n.checkedItems=e),headers:n.headers,items:n.attachments,selectable:!0,clickable:!1,loading:n.isLoadingTable,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createVNode)(N,{ref:"deleteDialog"},null,512),t[19]||(t[19]=(0,a.createElementVNode)("br",null,null,-1)),t[20]||(t[20]=(0,a.createElementVNode)("br",null,null,-1))])])}const cA={jobTitle:null,name:"",hiringManager:null,numOfPositions:"",description:"",status:!1,isPublished:!1},uA={id:null,comment:"",oldAttachment:{},newAttachment:null,method:"keepCurrent"},mA=`${window.location.protocol}//${window.location.host}${window.appGlobal.baseUrl}`,pA=e=>e.map(e=>({id:e.id,vacancyId:e.vacancyId,fileName:e.attachment.fileName,fileSize:+(e.attachment.fileSize/1024).toFixed(2)+" kb",fileType:e.attachment.fileType,comment:e.comment,attachmentType:e.attachmentType}));var hA={components:{"oxd-switch-input":X.Ay,"employee-autocomplete":$a,"jobtitle-dropdown":Mp,"vacancy-link-card":KI,"delete-confirmation":Xt,"file-upload-input":Uo},props:{vacancyId:{type:String,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/vacancies"),o=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/vacancy/attachments"),{createUniqueValidator:a}=Lo(t),l=a("Vacancy","name",{entityId:e.vacancyId});return{http:t,httpAttachments:o,vacancyNameUniqueValidation:l}},data(){return{isLoading:!1,isLoadingAttachment:!1,isLoadingTable:!1,isAddClicked:!1,isEditClicked:!1,currentName:"",vacancy:{...cA},vacancyAttachment:{...uA},rules:{jobTitle:[Kt],name:[Kt,this.vacancyNameUniqueValidation,Wt(50)],hiringManager:[Kt,$o,e=>!e?.isPastEmployee||this.$t("general.invalid")],numOfPositions:[e=>null===e||""===e||("string"===typeof oo(e)?oo(e):No(1,99)(e))],description:[],status:[Kt],isPublished:[Kt],addAttachment:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)],updateAttachment:[e=>"replaceCurrent"!=this.vacancyAttachment.method||Kt(e),go(this.allowedFileTypes),ho(this.maxFileSize)],comment:[Wt(200)]},headers:[{name:"fileName",slot:"title",title:this.$t("general.file_name"),style:{flex:3}},{name:"fileSize",title:this.$t("general.file_size"),style:{flex:2}},{name:"fileType",title:this.$t("general.file_type"),style:{flex:2}},{name:"comment",title:this.$t("general.comment"),style:{flex:4}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:2},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},download:{onClick:this.downloadFile,props:{name:"download"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],attachments:[],checkedItems:[],rssFeedUrl:`${mA}/recruitmentApply/jobs.rss`,webUrl:`${mA}/recruitmentApply/jobs.html`}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},created(){this.isLoading=!0,this.isLoadingTable=!0,this.http.get(this.vacancyId).then(e=>{const{data:t}=e.data;this.currentName=t.name,this.vacancy.name=t.name,this.vacancy.description=t.description,this.vacancy.numOfPositions=t.numOfPositions||"",this.vacancy.status=t.status,this.vacancy.isPublished=t.isPublished,this.vacancy.hiringManager=t.hiringManager.id?{id:t.hiringManager.id,label:`${t.hiringManager.firstName} ${t.hiringManager.middleName} ${t.hiringManager.lastName}`,isPastEmployee:!!t.hiringManager.terminationId}:this.$t("general.deleted"),this.vacancy.jobTitle=t.jobTitle.isDeleted?null:{id:t.jobTitle.id,label:t.jobTitle.title}}).then(()=>{this.httpAttachments.request({method:"GET",url:`/api/v2/recruitment/vacancies/${this.vacancyId}/attachments`}).then(e=>{const{data:t}=e.data;this.attachments=pA(t)})}).finally(()=>{this.isLoadingTable=!1,this.isLoading=!1})},methods:{onCancel(){I("/recruitment/viewJobVacancy")},onSave(){this.isLoading=!0,this.vacancy={name:this.vacancy.name,jobTitleId:this.vacancy.jobTitle.id,employeeId:this.vacancy.hiringManager.id,numOfPositions:this.vacancy.numOfPositions?parseInt(this.vacancy.numOfPositions):null,description:this.vacancy.description,status:this.vacancy.status,isPublished:this.vacancy.isPublished},this.http.update(this.vacancyId,{...this.vacancy}).then(()=>this.$toast.saveSuccess()).then(()=>{I("/recruitment/addJobVacancy/{id}",{id:this.vacancyId})})},onSaveAttachment(){this.isLoadingAttachment=!0,this.isLoadingTable=!0,this.httpAttachments.create({vacancyId:parseInt(this.vacancyId),attachment:this.vacancyAttachment.newAttachment?this.vacancyAttachment.newAttachment:void 0,comment:this.vacancyAttachment.comment,attachmentType:1}).then(()=>this.$toast.saveSuccess()).then(()=>{this.updateVisibility(),this.resetDataTable(),this.isLoadingAttachment=!1,this.isLoadingTable=!1})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteData([e.id])})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.attachments[e]?.id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteData(e)})},async deleteData(e){e instanceof Array&&(this.isLoadingTable=!0,this.httpAttachments.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.resetDataTable(),this.isLoadingTable=!1}))},resetDataTable(){this.checkedItems=[],this.httpAttachments.request({method:"GET",url:`/api/v2/recruitment/vacancies/${this.vacancyId}/attachments`}).then(e=>{const{data:t}=e.data;this.attachments=pA(t)})},onClickAdd(){this.isEditClicked=!1,this.isAddClicked=!0},onClickEdit(e){this.vacancyAttachment.id=e.id,this.vacancyAttachment.comment=e.comment,this.vacancyAttachment.oldAttachment={id:e.id,filename:e.fileName,fileType:e.fileType,fileSize:e.filefileSize},this.vacancyAttachment.newAttachment=null,this.vacancyAttachment.method="keepCurrent",this.isAddClicked=!1,this.isEditClicked=!0},onUpdateAttachment(){this.isLoadingAttachment=!0,this.isLoadingTable=!0,this.httpAttachments.request({method:"PUT",url:`/api/v2/recruitment/vacancies/${this.vacancyId}/attachments/${this.vacancyAttachment.id}`,data:{vacancyId:parseInt(this.vacancyId),currentAttachment:this.vacancyAttachment.oldAttachment?this.vacancyAttachment.method:void 0,attachment:this.vacancyAttachment.newAttachment?this.vacancyAttachment.newAttachment:void 0,comment:this.vacancyAttachment.comment,attachmentType:1}}).then(()=>this.$toast.saveSuccess()).then(()=>{this.updateVisibility(),this.resetDataTable(),this.isLoadingAttachment=!1,this.isLoadingTable=!1})},updateVisibility(){this.isAddClicked=!1,this.isEditClicked=!1,this.vacancyAttachment={...uA}},downloadFile(e){if(!e?.id)return;const t="recruitment/viewVacancyAttachment/attachId",o=`${window.appGlobal.baseUrl}/${t}/${e.id}`;window.open(o,"_blank")}}};const gA=(0,i.A)(hA,[["render",dA],["__scopeId","data-v-9023aa1c"]]);var vA=gA;const fA={class:"XHRM-background-container"};function yA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",fA,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.hire_candidate"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}const CA={class:"XHRM-card-container"};function VA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",CA,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.title),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,(0,a.mergeProps)({loading:o.loading},e.$attrs),{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.candidate.candidateName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.candidate.candidateName=e),label:e.$t("recruitment.candidate"),readonly:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.candidate.vacancyName,"onUpdate:modelValue":t[1]||(t[1]=e=>n.candidate.vacancyName=e),label:e.$t("recruitment.vacancy"),readonly:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.candidate.hiringManagerName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.candidate.hiringManagerName=e),label:e.$t("recruitment.hiring_manager"),readonly:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:i.recruitmentStatus,"onUpdate:modelValue":t[3]||(t[3]=e=>i.recruitmentStatus=e),label:e.$t("recruitment.current_status"),readonly:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.renderSlot)(e.$slots,"default")]),_:3},16,["loading"])])}const bA={candidateName:"",vacancyName:"",hiringManagerName:"",status:null};var wA={name:"CandidateActionLayout",inheritAttrs:!1,props:{candidateId:{type:Number,required:!0},title:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["update:loading"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates"),{$tEmpName:t}=Ma();return{http:e,translateEmpName:t}},data(){return{candidate:{...bA},statuses:[{id:1,label:this.$t("recruitment.application_initiated")},{id:2,label:this.$t("recruitment.shortlisted")},{id:3,label:this.$t("leave.rejected")},{id:4,label:this.$t("recruitment.interview_scheduled")},{id:5,label:this.$t("recruitment.interview_passed")},{id:6,label:this.$t("recruitment.interview_failed")},{id:7,label:this.$t("recruitment.job_offered")},{id:8,label:this.$t("recruitment.offer_declined")},{id:9,label:this.$t("recruitment.hired")}]}},computed:{recruitmentStatus(){return this.statuses.find(e=>e.id===this.candidate.status?.id)?.label||null}},beforeMount(){this.$emit("update:loading",!0),this.http.get(this.candidateId).then(e=>{const{data:t}=e.data;this.candidate.status=t.status,this.candidate.candidateName=`${t?.firstName} ${t?.middleName||""} ${t?.lastName}`,t?.vacancy&&(this.candidate.vacancyName=t?.vacancy.name),t?.vacancy?.hiringManager&&(this.candidate.hiringManagerName=this.translateEmpName(t.vacancy.hiringManager,{includeMiddle:!0,excludePastEmpTag:!1}))}).finally(()=>{this.$emit("update:loading",!1)})}};const xA=(0,i.A)(wA,[["render",VA]]);var NA=xA,kA={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/hire`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const _A=(0,i.A)(kA,[["render",yA]]);var SA=_A;const DA={class:"XHRM-background-container"};function $A(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",DA,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.mark_interview_failed"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}var MA={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0},interviewId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/interviews/${e.interviewId}/fail`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const EA=(0,i.A)(MA,[["render",$A]]);var RA=EA;const TA={class:"XHRM-background-container"};function BA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",TA,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.mark_interview_passed"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}var IA={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0},interviewId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/interviews/${e.interviewId}/pass`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const AA=(0,i.A)(IA,[["render",BA]]);var HA=AA;const XA={class:"XHRM-background-container"};function UA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("interviewer-autocomplete"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("date-input"),m=(0,a.resolveComponent)("time-input"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-form-row"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("required-text"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",XA,[(0,a.createVNode)(C,{loading:n.isLoading,"onUpdate:loading":t[4]||(t[4]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.schedule_interview"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.interview.interviewName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.interview.interviewName=e),rules:n.rules.interviewName,label:e.$t("recruitment.interview_title"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.interviewers,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(d,{key:t,modelValue:n.interviewers[t],"onUpdate:modelValue":e=>n.interviewers[t]=e,"show-delete":t>0,rules:n.rules.interviewerName.filter((e,o)=>0===t||o>0),"include-employees":"onlyCurrent",required:"",onRemove:e=>i.onRemoveInterviewer(t)},null,8,["modelValue","onUpdate:modelValue","show-delete","rules","onRemove"]))),128)),n.interviewers.length<5?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,"icon-name":"plus","display-type":"text",class:"XHRM-input-field-bottom-space",label:e.$t("general.add_another"),onClick:i.onAddAnother},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.interview.interviewDate,"onUpdate:modelValue":t[1]||(t[1]=e=>n.interview.interviewDate=e),rules:n.rules.interviewDate,label:e.$t("general.date"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:n.interview.interviewTime,"onUpdate:modelValue":t[2]||(t[2]=e=>n.interview.interviewTime=e),rules:n.rules.interviewTime,label:e.$t("general.time")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-3 --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.interview.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.interview.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(g),(0,a.createVNode)(v),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}const LA={class:"XHRM-recruitment-interviewer-input"};function PA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-icon-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",LA,[(0,a.createVNode)(r,(0,a.mergeProps)({label:o.showDelete?null:e.$t("recruitment.interviewer"),disabled:o.disabled},e.$attrs,{"api-path":"/api/v2/recruitment/interviewers"}),null,16,["label","disabled"]),o.showDelete&&!o.disabled?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,name:"trash-fill",class:"XHRM-recruitment-delete-icon","with-container":!1,onClick:i.remove},null,8,["onClick"])):(0,a.createCommentVNode)("",!0)])}var qA={name:"InterviewerAutocomplete",components:{"employee-autocomplete":$a},inheritAttrs:!1,props:{showDelete:{type:Boolean,required:!0},includeEmployee:{type:String,default:"currentAndPast"},disabled:{type:Boolean,required:!1,default:!1}},emits:["remove"],methods:{remove(){this.$emit("remove")}}};const FA=(0,i.A)(qA,[["render",PA],["__scopeId","data-v-2439ce39"]]);var zA=FA;const jA={interviewName:null,interviewDate:null,interviewTime:null,note:null};var OA={components:{"candidate-action-layout":NA,"interviewer-autocomplete":zA},props:{candidateId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/shedule-interview`),{userDateFormat:o}=F();return{http:t,userDateFormat:o}},data(){return{isLoading:!1,interview:{...jA},interviewers:[null],rules:{interviewName:[Kt,Wt(100)],interviewDate:[Kt,Jt(this.userDateFormat)],interviewTime:[Zt],interviewerName:[Kt,$o,e=>this.interviewers.filter(t=>t&&t.id===e?.id).length<2||this.$t("general.already_exists")],note:[Wt(2e3)]}}},methods:{onAddAnother(){this.interviewers.length<5&&this.interviewers.push(null)},onRemoveInterviewer(e){this.interviewers.splice(e,1)},onSave(){this.isLoading=!0,this.http.create({...this.interview,interviewerEmpNumbers:this.interviewers.map(e=>e?.id).filter(Number)}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const GA=(0,i.A)(OA,[["render",UA]]);var QA=GA;const KA={class:"XHRM-background-container"};function WA(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",KA,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.offer_job"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}var JA={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/job/offer`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const YA=(0,i.A)(JA,[["render",WA]]);var ZA=YA;const eH={class:"XHRM-background-container"};function tH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",eH,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.decline_offer"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}var oH={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/job/decline`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const aH=(0,i.A)(oH,[["render",tH]]);var lH=aH;const nH={class:"XHRM-background-container"};function iH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",nH,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.reject_candidate"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}var rH={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/reject`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const sH=(0,i.A)(rH,[["render",iH]]);var dH=sH;const cH={class:"XHRM-background-container"};function uH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",cH,[(0,a.createVNode)(g,{loading:n.isLoading,"onUpdate:loading":t[1]||(t[1]=e=>n.isLoading=e),"candidate-id":o.candidateId,title:e.$t("recruitment.shortlist_candidate"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.note,"onUpdate:modelValue":t[0]||(t[0]=e=>n.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea"},null,8,["modelValue","rules","label","placeholder"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickBack},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}var mH={components:{"candidate-action-layout":NA},props:{candidateId:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/shortlist`);return{http:t}},data(){return{isLoading:!1,note:null,rules:{note:[Wt(2e3)]}}},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{note:this.note}}).then(()=>this.$toast.updateSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:this.candidateId})})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const pH=(0,i.A)(mH,[["render",uH]]);var hH=pH;const gH={class:"XHRM-background-container XHRM-save-candidate-page"},vH={class:"XHRM-card-container"};function fH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("full-name-input"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("vacancy-dropdown"),h=(0,a.resolveComponent)("oxd-input-field"),g=(0,a.resolveComponent)("file-upload-input"),v=(0,a.resolveComponent)("date-input"),f=(0,a.resolveComponent)("required-text"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("submit-button"),V=(0,a.resolveComponent)("oxd-form-actions"),b=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",gH,[(0,a.createElementVNode)("div",vH,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.add_candidate")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(b,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{"first-name":n.candidate.firstName,"onUpdate:firstName":t[0]||(t[0]=e=>n.candidate.firstName=e),"middle-name":n.candidate.middleName,"onUpdate:middleName":t[1]||(t[1]=e=>n.candidate.middleName=e),"last-name":n.candidate.lastName,"onUpdate:lastName":t[2]||(t[2]=e=>n.candidate.lastName=e),label:e.$t("general.full_name"),rules:n.rules,required:""},null,8,["first-name","middle-name","last-name","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.candidate.vacancyId,"onUpdate:modelValue":t[3]||(t[3]=e=>n.candidate.vacancyId=e),"exclude-interviewers":!0,status:!0},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.candidate.email,"onUpdate:modelValue":t[4]||(t[4]=e=>n.candidate.email=e),label:e.$t("general.email"),placeholder:e.$t("general.type_here"),rules:n.rules.email,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.candidate.contactNumber,"onUpdate:modelValue":t[5]||(t[5]=e=>n.candidate.contactNumber=e),label:e.$t("recruitment.contact_number"),placeholder:e.$t("general.type_here"),rules:n.rules.contactNumber},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{newFile:n.resume.newAttachment,"onUpdate:newFile":t[6]||(t[6]=e=>n.resume.newAttachment=e),method:n.resume.method,"onUpdate:method":t[7]||(t[7]=e=>n.resume.method=e),label:e.$t("recruitment.resume"),"button-label":e.$t("general.browse"),file:n.resume.oldAttachment,rules:n.rules.resume,hint:e.$t("general.accept_custom_format_file_up_to_n_mb",{count:i.formattedFileSize}),url:"recruitment/candidateAttachment/attachId"},null,8,["newFile","method","label","button-label","file","rules","hint"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-save-candidate-page-full-width"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.candidate.keywords,"onUpdate:modelValue":t[8]||(t[8]=e=>n.candidate.keywords=e),label:e.$t("recruitment.keywords"),placeholder:`${e.$t("recruitment.enter_comma_seperated_words")}...`,rules:n.rules.keywords},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{modelValue:n.candidate.dateOfApplication,"onUpdate:modelValue":t[9]||(t[9]=e=>n.candidate.dateOfApplication=e),label:e.$t("recruitment.date_of_application"),rules:n.rules.applyDate},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-save-candidate-page-full-width"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.candidate.comment,"onUpdate:modelValue":t[10]||(t[10]=e=>n.candidate.comment=e),label:e.$t("general.notes"),type:"textarea",placeholder:e.$t("general.type_here"),rules:n.rules.notes},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-save-candidate-page-full-width XHRM-save-candidate-page-grid-checkbox"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.candidate.consentToKeepData,"onUpdate:modelValue":t[11]||(t[11]=e=>n.candidate.consentToKeepData=e),type:"checkbox",label:e.$t("recruitment.consent_to_keep_data")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(V,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f),(0,a.createVNode)(y,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(C)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}var yH={name:"SaveCandidate",components:{"submit-button":s,"full-name-input":hp,"vacancy-dropdown":MI,"file-upload-input":Uo},props:{maxFileSize:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates"),{userDateFormat:t}=F();return{http:e,userDateFormat:t}},data(){return{isLoading:!1,candidate:{firstName:null,middleName:null,lastName:null,email:null,contactNumber:null,keywords:null,comment:null,dateOfApplication:ge(pe(),"yyyy-MM-dd"),consentToKeepData:!1,vacancyId:null},resume:{id:null,oldAttachment:null,newAttachment:null,method:"keepCurrent"},rules:{firstName:[Kt,Wt(30)],lastName:[Kt,Wt(30)],middleName:[Wt(30)],email:[Kt,vo,Wt(50)],contactNumber:[fo,Wt(25)],notes:[Wt(250)],keywords:[Wt(250)],resume:[ho(this.maxFileSize),go(this.allowedFileTypes)],applyDate:[Jt(this.userDateFormat),Yt()]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onSave(){let e;this.isLoading=!0,this.http.create({...this.candidate,vacancyId:this.candidate.vacancyId?.id}).then(({data:{data:t}})=>{if(e=parseInt(t.id),this.resume.newAttachment)return this.http.request({method:"POST",url:"/api/v2/recruitment/candidate/attachments",data:{candidateId:e,attachment:this.resume.newAttachment}})}).then(()=>this.$toast.saveSuccess()).then(()=>{I("/recruitment/addCandidate/{id}",{id:e})})},onCancel(){I("/recruitment/viewCandidates")}}};const CH=(0,i.A)(yH,[["render",fH],["__scopeId","data-v-64e90e44"]]);var VH=CH;const bH={class:"XHRM-candidate-page"},wH={class:"XHRM-paper-container"},xH={key:0,class:"XHRM-header-container"},NH={class:"XHRM-container"},kH={class:"XHRM-bottom-container"};function _H(e,t,o,l,n,i){const r=(0,a.resolveComponent)("jobtitle-dropdown"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("vacancy-dropdown"),c=(0,a.resolveComponent)("hiring-manager-dropdown"),u=(0,a.resolveComponent)("candidate-status-dropdown"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("candidate-autocomplete"),g=(0,a.resolveComponent)("oxd-input-field"),v=(0,a.resolveComponent)("date-input"),f=(0,a.resolveComponent)("oxd-divider"),y=(0,a.resolveComponent)("oxd-button"),C=(0,a.resolveComponent)("submit-button"),V=(0,a.resolveComponent)("oxd-form-actions"),b=(0,a.resolveComponent)("oxd-form"),w=(0,a.resolveComponent)("oxd-table-filter"),x=(0,a.resolveComponent)("table-header"),N=(0,a.resolveComponent)("oxd-card-table"),k=(0,a.resolveComponent)("oxd-pagination"),_=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bH,[(0,a.createVNode)(w,{"filter-title":e.$t("general.candidates")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(b,{onSubmitValid:i.filterItems,onReset:i.onReset},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.jobTitle,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.jobTitle=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.vacancy,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.vacancy=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.hiringManager,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.hiringManager=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.status,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.status=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:l.filters.candidate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.candidate=e),rules:l.rules.candidate},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:l.filters.keywords,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.keywords=e),label:e.$t("recruitment.keywords"),placeholder:`${e.$t("recruitment.enter_comma_seperated_words")}...`},null,8,["modelValue","label","placeholder"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filters.fromDate=e),label:e.$t("recruitment.date_of_application"),placeholder:e.$t("general.from"),rules:l.rules.fromDate},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[7]||(t[7]=e=>l.filters.toDate=e),label:"",placeholder:e.$t("general.to"),rules:l.rules.toDate},null,8,["modelValue","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:l.filters.methodOfApplication,"onUpdate:modelValue":t[8]||(t[8]=e=>l.filters.methodOfApplication=e),label:e.$t("recruitment.method_of_application"),type:"select",options:n.applications},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(f),(0,a.createVNode)(V,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{type:"reset","display-type":"ghost",label:e.$t("general.reset")},null,8,["label"]),(0,a.createVNode)(C,{label:e.$t("general.search")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[12]||(t[12]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",wH,[e.$can.create("recruitment_candidates")?((0,a.openBlock)(),(0,a.createElementBlock)("div",xH,[(0,a.createVNode)(y,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(x,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,"show-divider":e.$can.create("recruitment_candidates"),onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","show-divider","onDelete"]),(0,a.createElementVNode)("div",NH,[(0,a.createVNode)(N,{selected:n.checkedItems,"onUpdate:selected":t[9]||(t[9]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[10]||(t[10]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",kH,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(k,{key:0,current:l.currentPage,"onUpdate:current":t[11]||(t[11]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(_,{ref:"deleteDialog"},null,512)])}function SH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",label:e.$t("recruitment.candidate_name"),clear:!1,"create-options":i.loadCandidates},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var DH={name:"CandidateAutocomplete",props:{params:{type:Object,default:()=>({})}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates");return{http:e}},methods:{async loadCandidates(e){return new Promise(t=>{e.trim()?this.http.getAll({candidateName:e.trim(),...this.params}).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:`${e.firstName} ${e.middleName||""} ${e.lastName}`,_candidate:e})))}):t([])})}}};const $H=(0,i.A)(DH,[["render",SH],["__scopeId","data-v-b0528536"]]);var MH=$H;function EH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("general.status"),options:l.options},null,8,["label","options"])}var RH={name:"CandidateStatusDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates/statuses");return(0,a.onBeforeMount)(()=>{t.getAll().then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.label}))})}),{options:e}}};const TH=(0,i.A)(RH,[["render",EH]]);var BH=TH;const IH={jobTitle:null,vacancy:null,hiringManager:null,status:null,keywords:null,application:null,candidate:null,fromDate:null,toDate:null},AH={"vacancy.name":"DEFAULT","candidate.lastName":"DEFAULT","hiringManager.lastName":"DEFAULT","candidate.dateOfApplication":"DESC","candidateVacancy.status":"DEFAULT"};var HH={components:{"vacancy-dropdown":MI,"jobtitle-dropdown":Mp,"delete-confirmation":Xt,"candidate-autocomplete":MH,"hiring-manager-dropdown":BI,"candidate-status-dropdown":BH},props:{status:{type:Object,required:!1,default:null}},setup(e){const{$t:t}=Ie(),{locale:o}=Ae(),{jsDateFormat:l,userDateFormat:n}=F(),{$tEmpName:i}=Ma(),r=[{id:1,label:t("recruitment.application_initiated")},{id:2,label:t("recruitment.shortlisted")},{id:3,label:t("leave.rejected")},{id:4,label:t("recruitment.interview_scheduled")},{id:5,label:t("recruitment.interview_passed")},{id:6,label:t("recruitment.interview_failed")},{id:7,label:t("recruitment.job_offered")},{id:8,label:t("recruitment.offer_declined")},{id:9,label:t("recruitment.hired")}],s=e=>e.map(e=>({id:e.id,vacancy:!1===e.vacancy?.status?`${e.vacancy?.name} (${t("general.closed")})`:e.vacancy?.name,candidate:`${e.firstName} ${e.middleName||""} ${e.lastName}`,manager:e?.vacancy?.hiringManager?.id?i(e.vacancy.hiringManager,{includeMiddle:!0,excludePastEmpTag:!1}):t("general.deleted"),dateOfApplication:ge(he(e.dateOfApplication),l,{locale:o}),status:r.find(t=>t.id===e.status?.id)?.label||"",resume:e.hasAttachment,isSelectable:e.deletable})),d=(0,a.ref)({...IH,...e.status&&{status:e.status}}),c={candidate:[$o],fromDate:[Jt(n),yo(()=>d.value.toDate,t("general.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(n),so(()=>d.value.fromDate,t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]},{sortDefinition:u,sortField:m,sortOrder:p,onSort:h}=Ut({sortDefinition:AH}),g=(0,a.computed)(()=>({jobTitleId:d.value.jobTitle?.id,vacancyId:d.value.vacancy?.id,hiringManagerId:d.value.hiringManager?.id,keywords:d.value.keywords,candidateId:d.value.candidate?.id,fromDate:d.value.fromDate,toDate:d.value.toDate,status:d.value.status?.id,methodOfApplication:d.value.methodOfApplication?.id,model:"list",sortField:m.value,sortOrder:p.value})),v=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates"),{showPaginator:f,currentPage:y,total:C,pages:V,pageSize:b,response:w,isLoading:x,execQuery:N}=Et(v,{query:g,normalizer:s});return h(N),{http:v,showPaginator:f,currentPage:y,isLoading:x,total:C,pages:V,pageSize:b,execQuery:N,items:w,filters:d,sortDefinition:u,rules:c}},data(){return{checkedItems:[],headers:[{name:"vacancy",title:this.$t("recruitment.vacancy"),sortField:"vacancy.name",style:{flex:1}},{name:"candidate",slot:"title",title:this.$t("recruitment.candidate"),sortField:"candidate.lastName",style:{flex:1}},{name:"manager",title:this.$t("recruitment.hiring_manager"),sortField:"hiringManager.lastName",style:{flex:1}},{name:"dateOfApplication",title:this.$t("recruitment.date_of_application"),sortField:"candidate.dateOfApplication",style:{flex:1}},{name:"status",title:this.$t("general.status"),sortField:"candidateVacancy.status",style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer}],applications:[{id:1,label:this.$t("recruitment.manual")},{id:2,label:this.$t("recruitment.online")}]}},methods:{cellRenderer(...[,,,e]){const t={view:{onClick:this.onClickEdit,props:{name:"eye-fill"}}};return e.isSelectable&&(t.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),e.resume&&(t.download={onClick:this.onDownload,props:{name:"download"}}),{props:{header:{cellConfig:t}}}},onClickAdd(){I("/recruitment/addCandidate")},onClickEdit(e){I("/recruitment/addCandidate/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},onDownload(e){if(!e?.id)return;const t="recruitment/viewCandidateAttachment/candidateId",o=`${window.appGlobal.baseUrl}/${t}/${e.id}`;window.open(o,"_blank")},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}).catch(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onReset(){this.filters={...IH},this.filterItems()}}};const XH=(0,i.A)(HH,[["render",_H]]);var UH=XH;function LH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("recruitment-status"),s=(0,a.resolveComponent)("candidate-profile"),d=(0,a.resolveComponent)("history-table");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[n.candidate?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,candidate:n.candidate},null,8,["candidate"])):(0,a.createCommentVNode)("",!0),n.candidate?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,candidate:n.candidate,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize,updatable:o.updatable,onUpdate:i.onCandidateUpdate},null,8,["candidate","allowed-file-types","max-file-size","updatable","onUpdate"])):(0,a.createCommentVNode)("",!0),n.candidate?((0,a.openBlock)(),(0,a.createBlock)(d,{key:2,candidate:n.candidate},null,8,["candidate"])):(0,a.createCommentVNode)("",!0)],64)}const PH={class:"XHRM-card-container"},qH={class:"XHRM-recruitment"},FH={key:0,class:"XHRM-recruitment-status"},zH={class:"XHRM-recruitment-actions"};function jH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",PH,[(0,a.createVNode)(p,{loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.application_stage")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.name")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.candidateName),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("recruitment.vacancy")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.vacancyName?i.vacancyName:"N/A"),1)]),_:1})]),_:1},8,["label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("recruitment.hiring_manager")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.hiringManagerName?i.hiringManagerName:"N/A"),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",qH,[i.recruitmentStatus?((0,a.openBlock)(),(0,a.createElementBlock)("div",FH,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.status"))+": "+(0,a.toDisplayString)(i.recruitmentStatus),1)]),_:1})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",zH,[i.hasWorkflow(3)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,label:e.$t("general.reject"),"display-type":"danger",onClick:t[0]||(t[0]=e=>i.doWorkflow(3))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(8)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,label:e.$t("recruitment.offer_declined"),"display-type":"danger",onClick:t[1]||(t[1]=e=>i.doWorkflow(8))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(6)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:2,label:e.$t("recruitment.mark_interview_failed"),"display-type":"danger",onClick:t[2]||(t[2]=e=>i.doWorkflow(6))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(2)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:3,label:e.$t("recruitment.shortlist"),"display-type":"success",onClick:t[3]||(t[3]=e=>i.doWorkflow(2))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(4)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:4,label:e.$t("recruitment.schedule_interview"),"display-type":"success",onClick:t[4]||(t[4]=e=>i.doWorkflow(4))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(5)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:5,label:e.$t("recruitment.mark_interview_passed"),"display-type":"success",onClick:t[5]||(t[5]=e=>i.doWorkflow(5))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(7)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:6,label:e.$t("recruitment.offer_job"),"display-type":"success",onClick:t[6]||(t[6]=e=>i.doWorkflow(7))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasWorkflow(9)?((0,a.openBlock)(),(0,a.createBlock)(m,{key:7,label:e.$t("recruitment.hire"),"display-type":"success",onClick:t[7]||(t[7]=e=>i.doWorkflow(9))},null,8,["label"])):(0,a.createCommentVNode)("",!0)])])]),_:1},8,["loading"])])}var OH={name:"RecruitmentStatus",props:{candidate:{type:Object,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates"),{$tEmpName:t}=Ma();return{http:e,translateEmpName:t}},data(){return{isLoading:!1,statuses:[{id:1,label:this.$t("recruitment.application_initiated")},{id:2,label:this.$t("recruitment.shortlisted")},{id:3,label:this.$t("leave.rejected")},{id:4,label:this.$t("recruitment.interview_scheduled")},{id:5,label:this.$t("recruitment.interview_passed")},{id:6,label:this.$t("recruitment.interview_failed")},{id:7,label:this.$t("recruitment.job_offered")},{id:8,label:this.$t("recruitment.offer_declined")},{id:9,label:this.$t("recruitment.hired")}],actions:[]}},computed:{recruitmentStatus(){return this.statuses.find(e=>e.id===this.candidate.status?.id)?.label||null},candidateName(){return`${this.candidate.firstName} ${this.candidate?.middleName||""} ${this.candidate.lastName}`},vacancyName(){const{vacancy:e}=this.candidate;return e?!1===e.status?e.name+` (${this.$t("general.closed")})`:e.name:null},hiringManagerName(){return this.candidate.vacancy?.hiringManager?this.translateEmpName(this.candidate.vacancy.hiringManager,{includeMiddle:!0,excludePastEmpTag:!1}):void 0}},watch:{candidate(){this.getAllowedActions()}},beforeMount(){this.getAllowedActions()},methods:{hasWorkflow(e){return this.actions.findIndex(t=>t.id==e)>-1},doWorkflow(e){I("/recruitment/changeCandidateVacancyStatus",{},{candidateId:this.candidate?.id,selectedAction:e})},getAllowedActions(){this.isLoading=!0,this.http.request({method:"GET",url:`/api/v2/recruitment/candidates/${this.candidate?.id}/actions/allowed`}).then(e=>{const{data:t}=e.data;this.actions=[...t]}).finally(()=>{this.isLoading=!1})}}};const GH=(0,i.A)(OH,[["render",jH],["__scopeId","data-v-63514835"]]);var QH=GH;const KH={class:"XHRM-background-container"},WH={class:"XHRM-card-container"},JH={class:"XHRM-header-container"};function YH(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-switch-input"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("full-name-input"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("vacancy-dropdown"),g=(0,a.resolveComponent)("oxd-input-field"),v=(0,a.resolveComponent)("file-upload-input"),f=(0,a.resolveComponent)("date-input"),y=(0,a.resolveComponent)("required-text"),C=(0,a.resolveComponent)("submit-button"),V=(0,a.resolveComponent)("oxd-form-actions"),b=(0,a.resolveComponent)("oxd-form"),w=(0,a.resolveComponent)("confirmation-dialog");return(0,a.openBlock)(),(0,a.createElementBlock)("div",KH,[(0,a.createElementVNode)("div",WH,[(0,a.createElementVNode)("div",JH,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.candidate_profile")),1)]),_:1}),!n.isLoading&&o.updatable?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,modelValue:n.editable,"onUpdate:modelValue":t[0]||(t[0]=e=>n.editable=e),"option-label":e.$t("general.edit"),"label-position":"left"},null,8,["modelValue","option-label"])):(0,a.createCommentVNode)("",!0)]),(0,a.withDirectives)((0,a.createVNode)(d,null,null,512),[[a.vShow,!n.isLoading]]),(0,a.createVNode)(b,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{"first-name":n.profile.firstName,"onUpdate:firstName":t[1]||(t[1]=e=>n.profile.firstName=e),"middle-name":n.profile.middleName,"onUpdate:middleName":t[2]||(t[2]=e=>n.profile.middleName=e),"last-name":n.profile.lastName,"onUpdate:lastName":t[3]||(t[3]=e=>n.profile.lastName=e),rules:n.rules,label:e.$t("general.full_name"),disabled:!n.editable,required:""},null,8,["first-name","middle-name","last-name","rules","label","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.vacancy,"onUpdate:modelValue":t[4]||(t[4]=e=>n.vacancy=e),label:e.$t("recruitment.job_vacancy"),readonly:!n.editable,"exclude-interviewers":!0,status:!0},null,8,["modelValue","label","readonly"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.profile.email,"onUpdate:modelValue":t[5]||(t[5]=e=>n.profile.email=e),label:e.$t("general.email"),placeholder:e.$t("general.type_here"),rules:n.rules.email,disabled:!n.editable,required:""},null,8,["modelValue","label","placeholder","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.profile.contactNumber,"onUpdate:modelValue":t[6]||(t[6]=e=>n.profile.contactNumber=e),label:e.$t("recruitment.contact_number"),placeholder:e.$t("general.type_here"),rules:n.rules.contactNumber,disabled:!n.editable},null,8,["modelValue","label","placeholder","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{newFile:n.attachment.newAttachment,"onUpdate:newFile":t[7]||(t[7]=e=>n.attachment.newAttachment=e),method:n.attachment.method,"onUpdate:method":t[8]||(t[8]=e=>n.attachment.method=e),label:e.$t("recruitment.resume"),"button-label":e.$t("general.browse"),file:n.attachment.oldAttachment,rules:n.rules.resume,hint:e.$t("general.accept_custom_format_file_up_to_n_mb",{count:i.formattedFileSize}),disabled:!n.editable,url:i.getResumeUrl},null,8,["newFile","method","label","button-label","file","rules","hint","disabled","url"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-save-candidate-page --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.profile.keywords,"onUpdate:modelValue":t[9]||(t[9]=e=>n.profile.keywords=e),label:e.$t("recruitment.keywords"),placeholder:`${e.$t("recruitment.enter_comma_seperated_words")}...`,rules:n.rules.keywords,disabled:!n.editable},null,8,["modelValue","label","placeholder","rules","disabled"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{modelValue:n.profile.dateOfApplication,"onUpdate:modelValue":t[10]||(t[10]=e=>n.profile.dateOfApplication=e),label:e.$t("recruitment.date_of_application"),rules:n.rules.applicationDate,disabled:!n.editable},null,8,["modelValue","label","rules","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-save-candidate-page --span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.profile.comment,"onUpdate:modelValue":t[11]||(t[11]=e=>n.profile.comment=e),label:e.$t("general.notes"),type:"textarea",placeholder:e.$t("general.type_here"),disabled:!n.editable},null,8,["modelValue","label","placeholder","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-candidate-grid-checkbox"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:n.profile.consentToKeepData,"onUpdate:modelValue":t[12]||(t[12]=e=>n.profile.consentToKeepData=e),type:"checkbox",label:e.$t("recruitment.consent_to_keep_data"),disabled:!n.editable},null,8,["modelValue","label","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.withDirectives)((0,a.createVNode)(d,null,null,512),[[a.vShow,n.editable]]),n.editable?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y),(0,a.createVNode)(C,{label:e.$t("general.save")},null,8,["label"])]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","onSubmitValid"])]),(0,a.createVNode)(w,{ref:"confirmDialog",title:e.$t("general.confirmation_required"),subtitle:e.$t("recruitment.candidate_vacancy_change_message"),"cancel-label":e.$t("general.no_cancel"),"confirm-label":e.$t("leave.yes_confirm"),"confirm-button-type":"secondary"},null,8,["title","subtitle","cancel-label","confirm-label"])])}const ZH={firstName:"",middleName:"",lastName:"",email:"",contactNumber:"",comment:"",keywords:"",dateOfApplication:null,consentToKeepData:!1},eX={id:null,oldAttachment:{},newAttachment:null,method:"replaceCurrent"},tX={id:null,label:""};var oX={name:"CandidateProfile",components:{DateInput:Ue,"oxd-switch-input":X.Ay,"full-name-input":hp,"vacancy-dropdown":MI,"file-upload-input":Uo,"confirmation-dialog":IB},props:{candidate:{type:Object,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0},updatable:{type:Boolean,required:!1,default:!0}},emits:["update"],setup(){const e=new H(window.appGlobal.baseUrl,"/"),{userDateFormat:t}=F();return{http:e,userDateFormat:t}},data(){return{editable:!1,isLoading:!1,profile:{...ZH},vacancy:{...tX},attachment:{...eX},rules:{firstName:[Kt,Wt(30)],lastName:[Kt,Wt(30)],middleName:[Wt(30)],email:[Kt,vo,Wt(50)],contactNumber:[fo,Wt(25)],keywords:[Wt(250)],applicationDate:[Jt(this.userDateFormat)],resume:[ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},watch:{candidate(){this.fetchCandidate()}},beforeMount(){this.fetchCandidate()},methods:{onSave(){this.candidate.vacancy?.id&&this.candidate.vacancy?.id!==this.vacancy?.id?this.$refs.confirmDialog.showDialog().then(e=>{"ok"===e&&this.updateCandidate()}):this.updateCandidate()},updateCandidate(){this.isLoading=!0,this.http.request({method:"PUT",url:`/api/v2/recruitment/candidates/${this.candidate.id}`,data:{...this.profile,vacancyId:this.vacancy?.id}}).then(()=>!this.attachment.newAttachment&&!this.candidate.hasAttachment||this.http.request({method:"PUT",url:`/api/v2/recruitment/candidate/${this.candidate.id}/attachment`,data:{currentAttachment:this.attachment.oldAttachment?this.attachment.method:void 0,attachment:this.attachment.newAttachment?this.attachment.newAttachment:void 0}})).then(()=>this.$toast.updateSuccess()).then(()=>{this.$emit("update"),this.isLoading=!1,this.editable=!1})},getResumeUrl(){return B("/recruitment/viewCandidateAttachment/candidateId/{candidateId}",{candidateId:this.candidate.id})},fetchCandidate(){this.isLoading=!0,this.profile.firstName=this.candidate.firstName,this.profile.middleName=this.candidate.middleName,this.profile.lastName=this.candidate.lastName,this.profile.email=this.candidate.email,this.profile.contactNumber=this.candidate.contactNumber,this.profile.keywords=this.candidate.keywords,this.profile.dateOfApplication=this.candidate.dateOfApplication,this.profile.comment=this.candidate.comment,this.profile.consentToKeepData=this.candidate.consentToKeepData;const{vacancy:e}=this.candidate;e&&(this.vacancy={id:e.id,label:!1===e.status?e.name+` (${this.$t("general.closed")})`:e.name}),this.candidate.hasAttachment?this.http.request({method:"GET",url:`/api/v2/recruitment/candidate/${this.candidate.id}/attachment`}).then(({data:{data:e}})=>{this.attachment.id=e.id,this.attachment.newAttachment=null,this.attachment.oldAttachment={id:e.id,filename:e.attachment.fileName,fileType:e.attachment.fileType,fileSize:e.attachment.fileSize},this.attachment.method="keepCurrent"}):this.attachment={...eX},this.isLoading=!1}}};const aX=(0,i.A)(oX,[["render",YH],["__scopeId","data-v-3767bffa"]]);var lX=aX;const nX={class:"XHRM-paper-container"},iX={class:"XHRM-header-container"},rX={class:"XHRM-container"},sX={class:"XHRM-bottom-container"};function dX(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("table-header"),d=(0,a.resolveComponent)("oxd-card-table"),c=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",nX,[(0,a.createElementVNode)("div",iX,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.candidate_history")),1)]),_:1})]),(0,a.createVNode)(s,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",rX,[(0,a.createVNode)(d,{headers:n.headers,items:l.items?.data,clickable:!1,selectable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["headers","items","loading"])]),(0,a.createElementVNode)("div",sX,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])}const cX=1,uX=2,mX=3,pX=4,hX=5,gX=6,vX=7,fX=8,yX=9,CX=15,VX=16,bX=17;var wX={name:"HistoryTable",props:{candidate:{type:Object,required:!0}},setup(e){const{$t:t}=Ie(),{locale:o}=Ae(),{jsDateFormat:a}=F(),{$tEmpName:l}=Ma(),n=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidate?.id}/history`),i=n=>{const i=`${e.candidate?.firstName} ${e.candidate?.middleName||""} ${e.candidate?.lastName}`;return n.map(e=>{let n=null;const r={name:"",data:"",interviewers:""},s=l(e.performedBy,{includeMiddle:!0,excludePastEmpTag:!1});if(e.interview){r.name=e.interview.name,r.date=e.interview.date;const t=e.interview.interviewers.map(e=>l(e,{includeMiddle:!0,excludePastEmpTag:!1}));r.interviewers=t.join(", ")}switch(e?.action.id){case bX:n=t("recruitment.candidate_applied_for_the_vacancy",{candidate:i,vacancy:e.vacancyName});break;case VX:n=t("recruitment.employee_added_candidate",{employee:s,candidate:i});break;case cX:n=t("recruitment.employee_assigned_vacancy_to_candidate",{employee:s,vacancy:e.vacancyName});break;case uX:n=t("recruitment.candidate_shortlisted_for_vacancy_by_employee",{vacancy:e.vacancyName,employee:s});break;case mX:n=t("recruitment.employee_rejected_the_candidate",{employee:s,candidate:i,vacancy:e.vacancyName});break;case pX:n=t("recruitment.employee_schedule_interview_with_interviewers",{employee:s,interview:r.name,interviewDate:r.date,interviewers:r.interviewers,vacancy:e.vacancyName});break;case hX:n=t("recruitment.employee_marked_interveiw_passed",{employee:s,interview:r.name,vacancy:e.vacancyName});break;case gX:n=t("recruitment.employee_marked_interveiw_failed",{employee:s,interview:r.name,vacancy:e.vacancyName});break;case vX:n=t("recruitment.employee_offered_the_job",{employee:s,vacancy:e.vacancyName});break;case fX:n=t("recruitment.employee_marked_the_offer_declined",{employee:s,vacancy:e.vacancyName});break;case yX:n=t("recruitment.employee_hired_the_candidate",{employee:s,candidate:i,vacancy:e.vacancyName});break;case CX:n=t("recruitment.employee_removed_candidate_from_vacancy",{employee:s,candidate:i,vacancy:e.vacancyName});break}return{...e,description:n,performedDate:ge(he(e.performedDate),a,{locale:o})}})},{showPaginator:r,currentPage:s,total:d,pages:c,pageSize:u,response:m,isLoading:p,execQuery:h}=Et(n,{normalizer:i});return{http:n,showPaginator:r,currentPage:s,isLoading:p,total:d,pages:c,pageSize:u,execQuery:h,items:m}},data(){return{headers:[{name:"performedDate",slot:"title",title:this.$t("recruitment.performed_date"),style:{flex:"20%"}},{name:"description",title:this.$t("general.description"),style:{flex:"65%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:"15%"},cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer}]}},watch:{candidate(){this.execQuery()}},methods:{cellRenderer(...[,,,e]){const t={};return e.action?.id!=cX&&e.action?.id!=VX&&e.action?.id!=CX&&e.action?.id!=bX&&e.editable&&(t.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),e.action?.id!==pX&&e.action?.id!==hX&&e.action?.id!==gX||!e.editable||(t.attachment={onClick:this.onClickAttachment,props:{name:"paperclip"}}),{props:{header:{cellConfig:t}}}},onClickEdit(e){I("/recruitment/candidateHistory/{candidateId}/{historyId}",{candidateId:this.candidate.id,historyId:e.id})},onClickAttachment(e){I("/recruitment/interviewAttachments/{interviewId}",{interviewId:e.interview?.id})}}};const xX=(0,i.A)(wX,[["render",dX],["__scopeId","data-v-343a672e"]]);var NX=xX,kX={components:{"history-table":NX,"candidate-profile":lX,"recruitment-status":QH},props:{candidateId:{type:Number,required:!0},maxFileSize:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0},updatable:{type:Boolean,required:!1,default:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/candidates");return{http:e}},data(){return{candidate:null}},beforeMount(){this.onCandidateUpdate()},methods:{onCandidateUpdate(){this.http.get(this.candidateId).then(({data:{data:e}})=>{this.candidate=e})}}};const _X=(0,i.A)(kX,[["render",LH]]);var SX=_X;const DX={class:"XHRM-background-container"};function $X(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("interviewer-autocomplete"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("time-input"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("candidate-action-layout");return(0,a.openBlock)(),(0,a.createElementBlock)("div",DX,[(0,a.createVNode)(y,{loading:n.isLoading,"candidate-id":o.candidateId,title:e.$t("recruitment.view_action_history"),onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{label:e.$t("recruitment.performed_action"),value:i.performedAction,readonly:""},null,8,["label","value"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{label:e.$t("general.performed_by"),value:i.performedBy,readonly:""},null,8,["label","value"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{label:e.$t("recruitment.performed_date"),value:i.performedDate,readonly:""},null,8,["label","value"])]),_:1})]),_:1})]),_:1}),i.isScheduleInterview?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.interview.interviewName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.interview.interviewName=e),rules:n.rules.interviewName,label:e.$t("recruitment.interview_title"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.interviewers,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(u,{key:t,modelValue:n.interviewers[t],"onUpdate:modelValue":e=>n.interviewers[t]=e,"show-delete":t>0,rules:n.rules.interviewerName.filter((e,o)=>0===t||o>0),"include-employees":"onlyCurrent",required:"",disabled:!o.editable,onRemove:e=>i.onRemoveInterviewer(t)},null,8,["modelValue","onUpdate:modelValue","show-delete","rules","disabled","onRemove"]))),128)),n.interviewers.length<5&&o.editable?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"icon-name":"plus","display-type":"text",class:"XHRM-input-field-bottom-space",label:e.$t("general.add_another"),onClick:i.onAddAnother},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.interview.interviewDate,"onUpdate:modelValue":t[1]||(t[1]=e=>n.interview.interviewDate=e),rules:n.rules.interviewDate,label:e.$t("general.date"),required:""},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.interview.interviewTime,"onUpdate:modelValue":t[2]||(t[2]=e=>n.interview.interviewTime=e),rules:n.rules.interviewTime,label:e.$t("general.time")},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:n.history.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.history.note=e),rules:n.rules.note,label:e.$t("general.notes"),placeholder:e.$t("general.type_here"),type:"textarea",disabled:n.disabled},null,8,["modelValue","rules","label","placeholder","disabled"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(g),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.back"),onClick:i.onClickBack},null,8,["label","onClick"]),n.disabled?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,label:e.$t("general.save")},null,8,["label"]))]),_:1})]),_:1},8,["loading","candidate-id","title","onSubmitValid"])])}const MX={id:null,action:{id:null,label:null},performedBy:{empNumber:null,lastName:null,firstName:null,middleName:null,terminationId:null},interview:{id:null},performedDate:null,note:null},EX={interviewName:null,interviewDate:null,interviewTime:null};var RX={components:{"candidate-action-layout":NA,"interviewer-autocomplete":zA},props:{candidateId:{type:Number,required:!0},historyId:{type:Number,required:!0},editable:{type:Boolean,required:!1,default:!0}},setup(e){const{locale:t}=Ae(),{jsDateFormat:o,userDateFormat:a}=F(),{$tEmpName:l}=Ma(),n=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/candidates/${e.candidateId}/history`);return{http:n,locale:t,jsDateFormat:o,userDateFormat:a,translateEmpName:l}},data(){return{isLoading:!1,history:{...MX},interview:{...EX},interviewers:[],rules:{interviewName:[Kt,Wt(100)],interviewDate:[Kt,Jt(this.userDateFormat)],interviewTime:[Zt],interviewerName:[Kt,$o,e=>this.interviewers.filter(t=>t&&t.id===e?.id).length<2||this.$t("general.already_exists")],note:[Wt(2e3)]},statuses:[{id:1,label:this.$t("recruitment.application_initiated")},{id:2,label:this.$t("recruitment.shortlist")},{id:3,label:this.$t("general.reject")},{id:4,label:this.$t("recruitment.schedule_interview")},{id:5,label:this.$t("recruitment.mark_interview_passed")},{id:6,label:this.$t("recruitment.mark_interview_failed")},{id:7,label:this.$t("recruitment.offer_job")},{id:8,label:this.$t("recruitment.decline_offer")},{id:9,label:this.$t("recruitment.hire")}],disabled:!1}},computed:{performedBy(){return this.translateEmpName(this.history.performedBy,{includeMiddle:!0,excludePastEmpTag:!1})},performedDate(){return ge(he(this.history.performedDate),this.jsDateFormat,{locale:this.locale})},performedAction(){return this.statuses.find(e=>e.id===this.history.action.id)?.label||null},isScheduleInterview(){return this.history.interview?.id&&4===this.history.action?.id}},beforeMount(){this.isLoading=!0,this.http.get(this.historyId).then(e=>{const{data:t,meta:o}=e.data;return this.history={...t},this.disabled=o.disabled,this.isScheduleInterview?this.http.request({method:"GET",url:`/api/v2/recruitment/candidates/${this.candidateId}/interviews/${this.history.interview.id}`}):null}).then(e=>{if(e){const{data:t}=e.data;this.interview.interviewName=t.name,this.interview.interviewDate=t.interviewDate,this.interview.interviewTime=t.interviewTime,this.history.note=t.note,Array.isArray(t.interviewers)&&(this.interviewers=t.interviewers.map(e=>({id:e.empNumber,label:this.translateEmpName(e,{includeMiddle:!0,excludePastEmpTag:!0}),isPastEmployee:!!e.terminationId})))}}).finally(()=>{this.isLoading=!1})},methods:{onAddAnother(){this.interviewers.length<5&&this.interviewers.push(null)},onRemoveInterviewer(e){this.interviewers.splice(e,1)},onSave(){this.loading=!0,this.http.update(this.historyId,{note:this.history.note}).then(()=>this.isScheduleInterview?this.http.request({method:"PUT",url:`/api/v2/recruitment/candidates/${this.candidateId}/interviews/${this.history.interview.id}`,data:{...this.interview,note:this.history.note,interviewerEmpNumbers:this.interviewers.map(e=>e?.id).filter(Number)}}):null).then(()=>{this.loading=!1,this.$toast.saveSuccess()})},onClickBack(){I("/recruitment/addCandidate/{id}",{id:this.candidateId})}}};const TX=(0,i.A)(RX,[["render",$X]]);var BX=TX;const IX={class:"XHRM-container"},AX={key:1,class:"XHRM-bottom-container"},HX={class:"XHRM-paper-container"},XX=["src"];function UX(e,t,o,l,n,i){const r=(0,a.resolveComponent)("vacancy-card"),s=(0,a.resolveComponent)("oxd-loading-spinner"),d=(0,a.resolveComponent)("oxd-pagination"),c=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",IX,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.vacancies?.data,e=>((0,a.openBlock)(),(0,a.createBlock)(r,{key:e,"vacancy-id":e.vacancyId,"vacancy-title":e.vacancyTitle,"vacancy-description":e.vacancyDescription},null,8,["vacancy-id","vacancy-title","vacancy-description"]))),128)),l.isLoading?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"XHRM-container-loader"})):(0,a.createCommentVNode)("",!0),l.showPaginator?((0,a.openBlock)(),(0,a.createElementBlock)("div",AX,[(0,a.createVNode)(d,{current:l.currentPage,"onUpdate:current":t[0]||(t[0]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])])):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",HX,[(0,a.createVNode)(c,{tag:"p",class:"XHRM-vacancy-list-poweredby"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.powered_by")),1)]),_:1}),(0,a.createElementVNode)("img",{src:l.defaultPic,alt:"XHRM Picture",class:"XHRM-container-img"},null,8,XX),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])],64)}const LX={class:"XHRM-card-container"},PX={class:"XHRM-vacancy-card-header"},qX={key:0,class:"XHRM-vacancy-card-pre-tag"},FX={key:0,class:"XHRM-vacancy-card-footer"};function zX(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-divider");return(0,a.openBlock)(),(0,a.createElementBlock)("div",LX,[(0,a.createElementVNode)("div",PX,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.vacancyTitle),1)]),_:1}),(0,a.createVNode)(s,{label:e.$t("general.apply"),"display-type":"secondary",class:"oxd-button",onClick:i.apply},null,8,["label","onClick"])]),(0,a.withDirectives)((0,a.createVNode)(d,null,null,512),[[a.vShow,o.vacancyDescription]]),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)({"XHRM-vacancy-card-body":i.isViewDetails})},[(0,a.createVNode)(r,{type:"toast-message"},{default:(0,a.withCtx)(()=>[o.vacancyDescription?((0,a.openBlock)(),(0,a.createElementBlock)("pre",qX,(0,a.toDisplayString)(o.vacancyDescription),1)):(0,a.createCommentVNode)("",!0)]),_:1})],2),o.vacancyDescription&&o.vacancyDescription.length>i.descriptionLength?((0,a.openBlock)(),(0,a.createElementBlock)("div",FX,[(0,a.createElementVNode)("a",{onClick:t[0]||(t[0]=(...e)=>i.viewDetails&&i.viewDetails(...e))},[(0,a.createVNode)(r,{tag:"p",class:"XHRM-vacancy-card-anchor-tag"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.isViewDetails?e.$t("general.show_more"):e.$t("general.show_less")),1)]),_:1})])])):(0,a.createCommentVNode)("",!0)])}var jX={name:"VacancyCard",props:{vacancyId:{type:Number,required:!0},vacancyTitle:{type:String,required:!0},vacancyDescription:{type:String,required:!0}},setup(){const e=(0,X.Qs)();return{...(0,a.toRefs)(e)}},data(){return{viewMore:!1}},computed:{isMobile(){return this.windowWidth<600},isViewDetails(){return!this.viewMore},descriptionLength(){return this.isMobile?150:this.windowWidth<1920?250:400}},methods:{viewDetails(){this.viewMore=!this.viewMore},apply(){I("/recruitmentApply/applyVacancy/id/{id}",{id:this.vacancyId})}}};const OX=(0,i.A)(jX,[["render",zX],["__scopeId","data-v-4eed0485"]]);var GX=OX,QX={name:"VacancyList",components:{"vacancy-card":GX,"oxd-loading-spinner":X.VJ},setup(){const e=`${window.appGlobal.publicPath}/images/ohrm_branding.png`,t=e=>e.map(e=>({vacancyId:e.id,vacancyTitle:e.name,vacancyDescription:e.description})),o=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/public/vacancies"),{showPaginator:a,currentPage:l,total:n,pages:i,response:r,isLoading:s}=Et(o,{normalizer:t,pageSize:8});return{defaultPic:e,showPaginator:a,currentPage:l,isLoading:s,total:n,pages:i,vacancies:r}}};const KX=(0,i.A)(QX,[["render",UX],["__scopeId","data-v-3ad3c22b"]]);var WX=KX;const JX={class:"XHRM-container"},YX={class:"XHRM-card-container"},ZX={class:"XHRM-card-container-header"},eU=["src"],tU={class:"XHRM-applicant-card-pre-tag"},oU={key:0,class:"XHRM-vacancy-card-footer"},aU=["value"],lU=["value"],nU={class:"XHRM-applicant-container"},iU={class:"XHRM-paper-container"},rU=["src"];function sU(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("full-name-input"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-input-field"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("success-dialogue");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",JX,[(0,a.createElementVNode)("div",YX,[(0,a.createElementVNode)("div",ZX,[(0,a.createVNode)(r,{class:"XHRM-main-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.apply_for_n_vacancy",{vacancyName:n.vacancyName})),1)]),_:1}),(0,a.createElementVNode)("img",{class:"oxd-brand-banner",src:o.bannerSrc},null,8,eU)]),n.vacancyDescription?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(s),(0,a.createVNode)(r,{class:"XHRM-vacancy-description",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.description")),1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:(0,a.normalizeClass)(i.descriptionClasses)},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("pre",tU,(0,a.toDisplayString)(n.vacancyDescription)+"\n        ",1)]),_:1},8,["class"]),n.vacancyDescription.length>i.descriptionLength?((0,a.openBlock)(),(0,a.createElementBlock)("div",oU,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-vacancy-card-anchor-tag",onClick:i.onToggleMore},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.isViewDetails?e.$t("general.show_less"):e.$t("general.show_more")),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0)],64)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s),(0,a.createVNode)(y,{ref:"applicantForm",method:"post",enctype:"multipart/form-data",loading:n.isLoading,action:i.submitUrl,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("input",{name:"_token",value:o.token,type:"hidden"},null,8,aU),(0,a.createElementVNode)("input",{name:"vacancyId",value:o.vacancyId,type:"hidden"},null,8,lU),(0,a.createElementVNode)("div",nU,[(0,a.createVNode)(m,{class:"XHRM-applicant-container-row"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{firstName:l.applicant.firstName,"onUpdate:firstName":t[0]||(t[0]=e=>l.applicant.firstName=e),lastName:l.applicant.lastName,"onUpdate:lastName":t[1]||(t[1]=e=>l.applicant.lastName=e),middleName:l.applicant.middleName,"onUpdate:middleName":t[2]||(t[2]=e=>l.applicant.middleName=e),label:e.$t("general.full_name"),rules:n.rules,required:""},null,8,["firstName","lastName","middleName","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,{class:"XHRM-applicant-container-row"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-applicant-container-colspan-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.applicant.email,"onUpdate:modelValue":t[3]||(t[3]=e=>l.applicant.email=e),name:"email",label:e.$t("general.email"),placeholder:e.$t("general.type_here"),rules:n.rules.email,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.applicant.contactNumber,"onUpdate:modelValue":t[4]||(t[4]=e=>l.applicant.contactNumber=e),name:"contactNumber",label:e.$t("recruitment.contact_number"),placeholder:e.$t("general.type_here"),rules:n.rules.contactNumber},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.applicant.resume,"onUpdate:modelValue":t[5]||(t[5]=e=>l.applicant.resume=e),name:"resume",type:"file",label:e.$t("recruitment.resume"),"button-label":e.$t("general.browse"),rules:n.rules.resume,required:""},null,8,["modelValue","label","button-label","rules"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accept_custom_format_file_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-applicant-container-colspan-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.applicant.keywords,"onUpdate:modelValue":t[6]||(t[6]=e=>l.applicant.keywords=e),name:"keywords",label:e.$t("recruitment.keywords"),placeholder:`${e.$t("recruitment.enter_comma_seperated_words")}...`,rules:n.rules.keywords},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-applicant-container-colspan-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.applicant.comment,"onUpdate:modelValue":t[7]||(t[7]=e=>l.applicant.comment=e),name:"comment",label:e.$t("general.notes"),type:"textarea",placeholder:e.$t("general.type_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-applicant-container-colspan-2 XHRM-applicant-container-grid-checkbox"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.applicant.consentToKeepData,"onUpdate:modelValue":t[8]||(t[8]=e=>l.applicant.consentToKeepData=e),name:"consentToKeepData",label:e.$t("recruitment.consent_to_keep_data"),type:"checkbox"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{label:e.$t("general.back"),"display-type":"ghost",onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v,{label:e.$t("general.submit")},null,8,["label"])]),_:1})])]),_:1},8,["loading","action","onSubmitValid"])])]),(0,a.createElementVNode)("div",iU,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-vacancy-list-poweredby"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.powered_by")),1)]),_:1}),(0,a.createElementVNode)("img",{src:l.defaultPic,alt:"XHRM Picture",class:"XHRM-container-img"},null,8,rU),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)]),(0,a.createVNode)(C,{ref:"showDialogueModal"},null,512)],64)}const dU={class:"XHRM-modal-header"},cU={class:"XHRM-text-center-align"},uU={class:"XHRM-modal-footer"};function mU(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("simple-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"with-close":!1,class:"XHRM-confirmation-dialog XHRM-dialog-popup","onUpdate:show":i.onSuccess},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",dU,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.application_received")),1)]),_:1})]),(0,a.createElementVNode)("div",cU,[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("recruitment.your_application_has_been_submitted_successfully")),1)]),_:1})]),(0,a.createElementVNode)("div",uU,[(0,a.createVNode)(s,{label:e.$t("general.ok"),"display-type":"text",class:"XHRM-button-margin",onClick:i.onSuccess},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var pU={name:"SuccessDialog",components:{"simple-dialog":X.KB},data(){return{show:!1,resolve:null}},methods:{showSuccessDialog(){return new Promise(e=>{this.resolve=e,this.show=!0})},onSuccess(){this.show=!1,this.resolve&&this.resolve("ok")}}};const hU=(0,i.A)(pU,[["render",mU],["__scopeId","data-v-212b99c7"]]);var gU=hU;const vU={firstName:"",middleName:"",lastName:"",contactNumber:"",email:"",consentToKeepData:!1,resume:null,keywords:null,comment:null};var fU={name:"ApplyJobVacancy",components:{"submit-button":s,"full-name-input":hp,"success-dialogue":gU},props:{allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0},vacancyId:{type:Number,required:!0},success:{type:Boolean,default:!1},bannerSrc:{type:String,required:!0},token:{type:String,required:!0}},setup(){const e=`${window.appGlobal.publicPath}/images/ohrm_branding.png`,t=(0,a.ref)({...vU}),o=(0,X.Qs)(),l=new H(window.appGlobal.baseUrl,"/api/v2/recruitment/public/vacancies");return{http:l,applicant:t,defaultPic:e,...(0,a.toRefs)(o)}},data(){return{title:null,subtitle:null,successLabel:null,isLoading:!1,vacancyName:"",vacancyDescription:null,rules:{firstName:[Kt,Wt(30)],middleName:[Wt(30)],lastName:[Kt,Wt(30)],resume:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)],comment:[Wt(250)],keywords:[Wt(250)],contactNumber:[Wt(25),fo],email:[Kt,vo,Wt(50)]},isViewDetails:!0}},computed:{submitUrl(){return B("/recruitment/public/applicants")},descriptionClasses(){return{"XHRM-vacancy-description":!0,"XHRM-vacancy-card-body":!this.isViewDetails}},isMobile(){return this.windowWidth<600},descriptionLength(){return this.isMobile?150:this.windowWidth<1920?250:400},formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},beforeMount(){this.http.get(this.vacancyId).then(e=>{const{data:t}=e.data;this.vacancyName=t?.name??"",this.vacancyDescription=t?.description})},mounted(){this.success&&this.showDialogue()},methods:{onSave(){this.$refs.applicantForm.$el.submit()},onCancel(){I("/recruitmentApply/jobs.html")},showDialogue(){this.$refs.showDialogueModal.showSuccessDialog().then(e=>{"ok"===e&&I("/recruitmentApply/jobs.html")})},onToggleMore(){this.isViewDetails=!this.isViewDetails}}};const yU=(0,i.A)(fU,[["render",sU],["__scopeId","data-v-6759b8c2"]]);var CU=yU;const VU={class:"XHRM-attachment"},bU={class:"XHRM-attachment-header"},wU={class:"XHRM-container"},xU={class:"XHRM-bottom-container"};function NU(e,t,o,l,n,i){const r=(0,a.resolveComponent)("save-interview-attachment"),s=(0,a.resolveComponent)("edit-interview-attachment"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("table-header"),m=(0,a.resolveComponent)("oxd-card-table"),p=(0,a.resolveComponent)("oxd-pagination"),h=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",VU,[n.showSaveModal?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,http:l.http,"max-file-size":o.maxFileSize,"allowed-file-types":o.allowedFileTypes,onClose:i.closeModel},null,8,["http","max-file-size","allowed-file-types","onClose"])):n.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,http:l.http,data:n.editModalState,"max-file-size":o.maxFileSize,"allowed-file-types":o.allowedFileTypes,onClose:i.closeModel},null,8,["http","data","max-file-size","allowed-file-types","onClose"])):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:2},[(0,a.createElementVNode)("div",bU,[(0,a.createVNode)(d,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.attachments")),1)]),_:1}),(0,a.createVNode)(c,{"icon-name":"plus","display-type":"text",label:e.$t("general.add"),onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(u,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",wU,[(0,a.createVNode)(m,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),headers:n.headers,items:l.items?.data,clickable:!1,selectable:!0,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","headers","items","loading"])]),(0,a.createElementVNode)("div",xU,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])],64)),(0,a.createVNode)(h,{ref:"deleteDialog"},null,512)])}const kU={class:"XHRM-card-container"};function _U(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",kU,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_attachment")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attachment.attachment=e),type:"file",label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),rules:n.rules.attachment,placeholder:e.$t("general.no_file_selected"),required:""},null,8,["modelValue","label","button-label","rules","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.comment,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.comment=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])}const SU={attachment:null,comment:""};var DU={name:"SaveInterviewAttachment",props:{http:{type:Object,required:!0},maxFileSize:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0}},emits:["close"],data(){return{isLoading:!1,attachment:{...SU},rules:{comment:[Wt(200)],attachment:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.attachment}).then(()=>this.$toast.saveSuccess()).then(()=>{this.attachment={...SU},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const $U=(0,i.A)(DU,[["render",_U]]);var MU=$U;const EU={class:"XHRM-card-container"};function RU(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-input-field"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",EU,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_attachment")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.current_file")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.currentFile),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attachment.attachment=e),type:"file",label:e.$t("general.replace_with"),"button-label":e.$t("general.browse"),rules:n.rules.attachment,placeholder:e.$t("general.no_file_selected")},null,8,["modelValue","label","button-label","rules","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.attachment.comment,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.comment=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.comment},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])])}const TU={attachment:null,comment:""};var BU={name:"EditInterviewAttachment",props:{http:{type:Object,required:!0},data:{type:Object,required:!0},maxFileSize:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0}},emits:["close"],data(){return{isLoading:!1,currentFile:"",attachment:{...TU},rules:{comment:[Wt(200)],attachment:[ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.currentFile=t.attachment.fileName,this.attachment.comment=t.comment}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{comment:this.attachment.comment,currentAttachment:null!==this.attachment.attachment?"replaceCurrent":"keepCurrent",attachment:null!==this.attachment.attachment?this.attachment.attachment:void 0}).then(()=>this.$toast.updateSuccess()).then(()=>{this.attachment={...TU},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const IU=(0,i.A)(BU,[["render",RU]]);var AU=IU;const HU=e=>e.map(e=>({id:e.id,interviewId:e.interviewId,filename:e.attachment?.fileName,size:Vh(e.attachment?.fileSize||0,2),fileType:e.attachment?.fileType,comment:e.comment}));var XU={components:{"delete-confirmation":Xt,"save-interview-attachment":MU,"edit-interview-attachment":AU},props:{interviewId:{type:Number,required:!0},maxFileSize:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/recruitment/interviews/${e.interviewId}/attachments`),{showPaginator:o,currentPage:a,total:l,pages:n,pageSize:i,response:r,isLoading:s,execQuery:d}=Et(t,{normalizer:HU,toastNoRecords:!1});return{http:t,showPaginator:o,currentPage:a,isLoading:s,total:l,pages:n,pageSize:i,execQuery:d,items:r}},data(){return{headers:[{name:"filename",slot:"title",title:this.$t("general.file_name"),style:{flex:1}},{name:"size",title:this.$t("general.size"),style:{flex:1}},{name:"fileType",title:this.$t("general.type"),style:{flex:1}},{name:"comment",title:this.$t("general.comment"),style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}},delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},download:{onClick:this.onClickDownload,props:{name:"download"}}}}],checkedItems:[],showSaveModal:!1,showEditModal:!1,editModalState:null}},methods:{onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.items?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showSaveModal=!0,this.showEditModal=!1},onClickEdit(e){this.showSaveModal=!1,this.showEditModal=!0,this.editModalState=e},closeModel(){this.showSaveModal=!1,this.showEditModal=!1,this.resetDataTable()},onClickDownload(e){const t=`${window.appGlobal.baseUrl}/recruitment/viewInterviewAttachment/interview/${this.interviewId}/attachment/${e.id}`;window.open(t,"_blank")}}};const UU=(0,i.A)(XU,[["render",NU],["__scopeId","data-v-2f7d1907"]]);var LU=UU,PU={"view-job-vacancy":UI,"add-job-vacancy":eA,"edit-job-vacancy":vA,"save-candidate":VH,"view-candidates-list":UH,"view-candidate-profile":SX,"shortlist-action":hH,"reject-action":dH,"interview-schedule-action":QA,"interview-passed-action":HA,"interview-failed-action":RA,"offer-job-action":ZA,"offer-decline-action":lH,"hire-action":SA,"view-action-history":BX,"vacancy-list":WX,"apply-job-vacancy":CU,"view-interview-attachments":LU};const qU={class:"XHRM-background-container"},FU={class:"XHRM-paper-container"},zU={class:"XHRM-header-container"},jU={class:"XHRM-container"},OU={class:"XHRM-bottom-container"};function GU(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("table-header"),d=(0,a.resolveComponent)("oxd-card-table"),c=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",qU,[(0,a.createElementVNode)("div",FU,[(0,a.createElementVNode)("div",zU,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.my_performance_trackers")),1)]),_:1})]),(0,a.createVNode)(s,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",jU,[(0,a.createVNode)(d,{order:l.sortDefinition,"onUpdate:order":t[0]||(t[0]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["order","headers","items","loading"])]),(0,a.createElementVNode)("div",OU,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])])}const QU={"performanceTracker.trackerName":"DEFAULT","performanceTracker.addedDate":"DEFAULT","performanceTracker.modifiedDate":"DESC"};var KU={setup(){const{sortDefinition:e,sortField:t,sortOrder:o,onSort:l}=Ut({sortDefinition:QU}),n=(0,a.computed)(()=>({sortField:t.value,sortOrder:o.value})),i=new H(window.appGlobal.baseUrl,"/api/v2/performance/trackers"),{jsDateFormat:r}=F(),{locale:s}=Ae(),d=e=>e.map(e=>({id:e.id,tracker:e.trackerName,addedDate:ge(he(e.addedDate),r,{locale:s}),modifiedDate:ge(he(e.modifiedDate),r,{locale:s})})),{currentPage:c,total:u,showPaginator:m,pages:p,pageSize:h,response:g,execQuery:v,isLoading:f}=Et(i,{query:n,normalizer:d});return l(v),{http:i,total:u,isLoading:f,items:g,execQuery:v,sortDefinition:e,showPaginator:m,pages:p,pageSize:h,currentPage:c}},data(){return{headers:[{name:"tracker",slot:"title",title:this.$t("performance.tracker"),sortField:"performanceTracker.trackerName",style:{flex:"30%"}},{name:"addedDate",title:this.$t("performance.added_date"),sortField:"performanceTracker.addedDate",style:{flex:1}},{name:"modifiedDate",title:this.$t("performance.modified_date"),sortField:"performanceTracker.modifiedDate",style:{flex:1}},{name:"action",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{view:{onClick:this.onClickView,component:"oxd-button",props:{name:"view",label:this.$t("general.view"),displayType:"text"}}}}]}},methods:{onClickView(e){I("/performance/addPerformanceTrackerLog/trackId/{id}?mode=my",{id:e.id})}}};const WU=(0,i.A)(KU,[["render",GU]]);var JU=WU;const YU={class:"XHRM-background-container"},ZU={class:"XHRM-paper-container"},eL={class:"XHRM-container"},tL={class:"XHRM-bottom-container"};function oL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("include-employee-dropdown"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("table-header"),y=(0,a.resolveComponent)("oxd-card-table"),C=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",YU,[(0,a.createVNode)(v,{"filter-title":e.$t("performance.employee_performance_trackers")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:i.filterItems,onReset:i.resetDataTable},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.empName,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.empName=e),rules:n.rules.employee,"api-path":"/api/v2/performance/trackers/reviewers",params:{includeEmployees:l.filters.includeEmployees.param}},null,8,["modelValue","rules","params"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.includeEmployees,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.includeEmployees=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",ZU,[(0,a.createVNode)(f,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",eL,[(0,a.createVNode)(y,{order:l.sortDefinition,"onUpdate:order":t[2]||(t[2]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!1,clickable:!0,loading:l.isLoading,class:"XHRM-employee-list","row-decorator":"oxd-table-decorator-card"},null,8,["order","headers","items","loading"])]),(0,a.createElementVNode)("div",tL,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,current:l.currentPage,"onUpdate:current":t[3]||(t[3]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])])}const aL={"employee.lastName":"DEFAULT","tracker.trackerName":"DEFAULT","tracker.modifiedDate":"DESC","tracker.addedDate":"DEFAULT"};var lL={components:{"include-employee-dropdown":qp,"employee-autocomplete":$a},setup(){const{$t:e}=Ie(),{jsDateFormat:t}=F(),{locale:o}=Ae(),l=a=>a.map(a=>({id:a.id,title:a.title,empName:`${a.employee?.firstName} ${a.employee?.lastName} ${a.employee?.terminationId?` ${e("general.past_employee")}`:""}`,modifiedDate:ge(he(a.modifiedDate),t,{locale:o}),addedDate:ge(he(a.addedDate),t,{locale:o})})),n={empName:null,includeEmployees:{id:1,param:"onlyCurrent",label:e("general.current_employees_only")}},i=(0,a.ref)({...n}),{sortDefinition:r,sortField:s,sortOrder:d,onSort:c}=Ut({sortDefinition:aL}),u=(0,a.computed)(()=>({sortField:s.value,sortOrder:d.value,empNumber:i.value.empName?.id,includeEmployees:i.value.includeEmployees?.param})),m="/api/v2/performance/employees/trackers",p=new H(window.appGlobal.baseUrl,m),{showPaginator:h,currentPage:g,total:v,pages:f,pageSize:y,isLoading:C,response:V,execQuery:b}=Et(p,{query:u,normalizer:l});return c(b),{total:v,showPaginator:h,currentPage:g,pages:f,pageSize:y,isLoading:C,items:V,api:m,http:p,execQuery:b,sortDefinition:r,filters:i}},data(){return{headers:[{name:"empName",slot:"title",title:this.$t("general.employee_name"),sortField:"employee.lastName",style:{flex:2}},{name:"title",title:this.$t("general.trackers"),sortField:"tracker.trackerName",style:{flex:2}},{name:"addedDate",title:this.$t("performance.added_date"),sortField:"tracker.addedDate",style:{flex:1}},{name:"modifiedDate",title:this.$t("performance.modified_date"),sortField:"tracker.modifiedDate",style:{flex:1}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{view:{onClick:this.onClickView,component:"oxd-button",props:{name:"view",label:this.$t("general.view"),class:"XHRM-left-space",displayType:"text"}}}}],rules:{employee:[Wt(100),$o]}}},methods:{async resetDataTable(){await this.execQuery()},async filterItems(){await this.execQuery()},onClickView(e){I("/performance/addPerformanceTrackerLog/trackId/{id}",{id:e.id})}}};const nL=(0,i.A)(lL,[["render",oL]]);var iL=nL;const rL={class:"XHRM-background-container"},sL={class:"XHRM-card-container"},dL={class:"XHRM-module-field-row"};function cL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("jobtitle-dropdown"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",rL,[(0,a.createElementVNode)("div",sL,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.edit_key_performance_indicator")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.kpi.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.kpi.title=e),label:e.$t("performance.key_performance_indicator"),required:"",rules:n.rules.title,autcomplete:"off",readonly:n.isReadOnly},null,8,["modelValue","label","rules","readonly"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.kpi.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>n.kpi.jobTitle=e),required:"",rules:n.rules.jobTitle},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.kpi.minRating,"onUpdate:modelValue":t[2]||(t[2]=e=>n.kpi.minRating=e),modelModifiers:{number:!0},label:e.$t("performance.minimum_rating"),required:"",autcomplete:"off",rules:n.rules.minRating,readonly:n.isReadOnly},null,8,["modelValue","label","rules","readonly"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.kpi.maxRating,"onUpdate:modelValue":t[3]||(t[3]=e=>n.kpi.maxRating=e),modelModifiers:{number:!0},label:e.$t("performance.maximum_rating"),required:"",autcomplete:"off",rules:n.rules.maxRating,readonly:n.isReadOnly},null,8,["modelValue","label","rules","readonly"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",dL,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.make_default_scale")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.kpi.isDefault,"onUpdate:modelValue":t[4]||(t[4]=e=>n.kpi.isDefault=e)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const uL={title:"",jobTitle:null,minRating:null,maxRating:null,isDefault:!1};var mL={name:"KpiSave",components:{"oxd-switch-input":X.Ay,"jobtitle-dropdown":Mp},props:{kpiId:{type:Number,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/performance/kpis");return{http:e}},data(){return{isLoading:!1,kpi:{...uL},isReadOnly:!1,rules:{title:[Kt,Wt(100)],jobTitle:[Kt],minRating:[Kt,No(0,100),xo(()=>this.kpi.maxRating,this.$t("performance.minimum_rating_should_be_less_than_maximum_rating"))],maxRating:[Kt,No(0,100),wo(()=>this.kpi.minRating,this.$t("performance.maximum_rating_should_be_greater_than_minimum_rating"))]}}},created(){this.isLoading=!0,this.http.get(this.kpiId).then(e=>{const{data:t}=e.data,{meta:o}=e.data;this.isReadOnly=!1===o.editable,this.kpi.title=t.title,this.kpi.jobTitle=t.jobTitle.deleted?null:{id:t.jobTitle.id,label:t.jobTitle.name},this.kpi.minRating=t.minRating,this.kpi.maxRating=t.maxRating,this.kpi.isDefault=t.isDefault}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/performance/searchKpi")},onSave(){this.isLoading=!0,this.http.update(this.kpiId,{title:this.kpi.title,jobTitleId:this.kpi.jobTitle.id,minRating:this.kpi.minRating,maxRating:this.kpi.maxRating,isDefault:this.kpi.isDefault}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})}}};const pL=(0,i.A)(mL,[["render",cL],["__scopeId","data-v-2edbaab2"]]);var hL=pL;const gL={class:"XHRM-background-container"},vL={class:"XHRM-card-container"},fL={class:"XHRM-module-field-row"};function yL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("jobtitle-dropdown"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("oxd-switch-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",gL,[(0,a.createElementVNode)("div",vL,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.add_key_performance_indicator")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.kpi.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.kpi.title=e),label:e.$t("performance.key_performance_indicator"),required:"",rules:n.rules.title,autcomplete:"off"},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.kpi.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>n.kpi.jobTitle=e),required:"",rules:n.rules.jobTitle},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.kpi.minRating,"onUpdate:modelValue":t[2]||(t[2]=e=>n.kpi.minRating=e),modelModifiers:{number:!0},label:e.$t("performance.minimum_rating"),required:"",autcomplete:"off",rules:n.rules.minRating},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.kpi.maxRating,"onUpdate:modelValue":t[3]||(t[3]=e=>n.kpi.maxRating=e),modelModifiers:{number:!0},label:e.$t("performance.maximum_rating"),required:"",autcomplete:"off",rules:n.rules.maxRating},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",fL,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-module-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.make_default_scale")),1)]),_:1}),(0,a.createVNode)(h,{modelValue:n.kpi.isDefault,"onUpdate:modelValue":t[4]||(t[4]=e=>n.kpi.isDefault=e)},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const CL={title:"",jobTitle:null,minRating:null,maxRating:null,isDefault:!1};var VL={name:"KpiSave",components:{"oxd-switch-input":X.Ay,"jobtitle-dropdown":Mp},props:{defaultMinRating:{type:Number,required:!1,default:null},defaultMaxRating:{type:Number,required:!1,default:null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/performance/kpis");return{http:e}},data(){return{isLoading:!1,kpi:{...CL},rules:{title:[Kt,Wt(100)],jobTitle:[Kt],minRating:[Kt,No(0,100),xo(()=>this.kpi.maxRating,this.$t("performance.minimum_rating_should_be_less_than_maximum_rating"))],maxRating:[Kt,No(0,100),wo(()=>this.kpi.minRating,this.$t("performance.maximum_rating_should_be_greater_than_minimum_rating"))]}}},beforeMount(){this.kpi.minRating=this.defaultMinRating,this.kpi.maxRating=this.defaultMaxRating},methods:{onCancel(){I("/performance/searchKpi")},onSave(){this.isLoading=!0,this.http.create({title:this.kpi.title,jobTitleId:this.kpi.jobTitle.id,minRating:this.kpi.minRating,maxRating:this.kpi.maxRating,isDefault:this.kpi.isDefault}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const bL=(0,i.A)(VL,[["render",yL],["__scopeId","data-v-51827fb5"]]);var wL=bL;const xL={class:"XHRM-background-container"},NL={class:"XHRM-paper-container"},kL={class:"XHRM-header-container"},_L={class:"XHRM-container"},SL={class:"XHRM-bottom-container"};function DL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("jobtitle-dropdown"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-table-filter"),v=(0,a.resolveComponent)("table-header"),f=(0,a.resolveComponent)("oxd-card-table"),y=(0,a.resolveComponent)("oxd-pagination"),C=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",xL,[(0,a.createVNode)(g,{"filter-title":e.$t("performance.key_performance_indicators_for_job_title")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{onSubmitValid:i.filterItems,onReset:i.resetDataTable},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.jobTitleId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.jobTitleId=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(m,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",NL,[(0,a.createElementVNode)("div",kL,[(0,a.createVNode)(m,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(v,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",_L,[(0,a.createVNode)(f,{selected:n.checkedItems,"onUpdate:selected":t[1]||(t[1]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[2]||(t[2]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",SL,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,current:l.currentPage,"onUpdate:current":t[3]||(t[3]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(C,{ref:"deleteDialog"},null,512)])}const $L={jobTitleId:null},ML={"kpi.title":"ASC","jobTitle.jobTitleName":"DEFAULT"};var EL={name:"KpiSearch",components:{"delete-confirmation":Xt,"jobtitle-dropdown":Mp},setup(){const{$t:e}=Ie(),t=t=>t.map(t=>({id:t.id,title:t.title,jobTitleName:t.jobTitle.name,jobTitleId:t.jobTitle.id,minRating:t.minRating,maxRating:t.maxRating,isDefault:t.isDefault?e("general.yes"):"",isDeletable:t.deletable})),o=(0,a.ref)({...$L}),{sortDefinition:l,sortField:n,sortOrder:i,onSort:r}=Ut({sortDefinition:ML}),s=(0,a.computed)(()=>({sortField:n.value,sortOrder:i.value,jobTitleId:o.value.jobTitleId?.id})),d=new H(window.appGlobal.baseUrl,"/api/v2/performance/kpis"),{showPaginator:c,currentPage:u,total:m,pages:p,pageSize:h,response:g,isLoading:v,execQuery:f}=Et(d,{query:s,normalizer:t});return r(f),{http:d,showPaginator:c,currentPage:u,total:m,pages:p,pageSize:h,items:g,isLoading:v,execQuery:f,filters:o,sortDefinition:l}},data(){return{headers:[{name:"title",title:this.$t("performance.key_performance_indicator"),slot:"title",sortField:"kpi.title",style:{flex:"30%"}},{name:"jobTitleName",title:this.$t("general.job_title"),sortField:"jobTitle.jobTitleName",style:{flex:"30%"}},{name:"minRating",title:this.$t("performance.min_rate"),style:{flex:"10%"}},{name:"maxRating",title:this.$t("performance.max_rate"),style:{flex:"10%"}},{name:"isDefault",title:this.$t("performance.is_default"),style:{flex:"10%"}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:"10%"},cellType:"oxd-table-cell-actions",cellRenderer:this.cellRenderer}],checkedItems:[]}},methods:{cellRenderer(...[,,,e]){const t={};return t.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}},e.isDeletable&&(t.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),{props:{header:{cellConfig:t}}}},onClickAdd(){I("/performance/saveKpi")},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},onClickEdit(e){I("/performance/saveKpi/{id}",{id:e.id})},async filterItems(){await this.execQuery()},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const RL=(0,i.A)(EL,[["render",DL]]);var TL=RL;const BL={class:"XHRM-background-container"},IL={class:"XHRM-card-container"},AL={class:"XHRM-button-row"};function HL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("supervisor-autocomplete"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",BL,[(0,a.createElementVNode)("div",IL,[(0,a.createVNode)(r,{class:"XHRM-main-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.add_review")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{ref:"formRef",loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.review.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.review.employee=e),rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.review.supervisorReviewer,"onUpdate:modelValue":t[1]||(t[1]=e=>n.review.supervisorReviewer=e),rules:n.rules.supervisorReviewer,subordinate:n.review.employee,required:""},null,8,["modelValue","rules","subordinate"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.review.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.review.startDate=e),label:e.$t("performance.review_period_start_date"),rules:n.rules.startDate,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.review.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.review.endDate=e),label:e.$t("performance.review_period_end_date"),rules:n.rules.endDate,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.review.dueDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.review.dueDate=e),label:e.$t("performance.due_date"),rules:n.rules.dueDate,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createElementVNode)("div",AL,[(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),type:"button",onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.save"),type:"submit",onClick:t[5]||(t[5]=e=>i.onSave(!1))},null,8,["label"]),(0,a.createVNode)(v,{"display-type":"secondary",label:e.$t("performance.activate"),type:"button",onClick:t[6]||(t[6]=e=>i.onSave(!0))},null,8,["label"])])]),_:1})]),_:1},8,["loading"])])])}function XL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete");return(0,a.openBlock)(),(0,a.createBlock)(r,{label:e.$t("performance.supervisor_reviewer"),clear:!1,"create-options":i.loadEmployees,required:""},null,8,["label","create-options"])}var UL={name:"SupervisorAutoComplete",components:{"employee-autocomplete":$a},props:{subordinate:{type:Object,required:!1,default:null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/performance/supervisors");return{http:e}},methods:{async loadEmployees(e){return new Promise(t=>{e.trim()&&this.subordinate?this.http.getAll({nameOrId:e.trim(),empNumber:this.subordinate.id}).then(({data:e})=>{t(e.data.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,isPastEmployee:!!e.terminationId})))}):t([])})}}};const LL=(0,i.A)(UL,[["render",XL]]);var PL=LL;const qL={employee:null,supervisorReviewer:null,startDate:null,endDate:null,dueDate:null};var FL={components:{"employee-autocomplete":$a,"supervisor-autocomplete":PL},setup(){const{formRef:e,invalid:t,validate:o}=Bc(),{userDateFormat:a}=F(),l=new H(window.appGlobal.baseUrl,"/api/v2/performance/manage/reviews");return l.setIgnorePath("/api/v2/performance/manage/reviews"),{formRef:e,invalid:t,validate:o,http:l,userDateFormat:a}},data(){return{isLoading:!1,review:{...qL},rules:{employee:[Kt,$o],supervisorReviewer:[Kt,$o],startDate:[Kt,Jt(this.userDateFormat),yo(()=>this.review.endDate,this.$t("performance.review_period_start_date_should_be_before_end_date"))],endDate:[Kt,Jt(this.userDateFormat),so(()=>this.review.startDate,this.$t("performance.review_period_end_date_should_be_after_start_date"))],dueDate:[Kt,Jt(),so(()=>this.review.endDate,this.$t("performance.due_date_should_be_after_review_period_end_date"))]}}},methods:{onCancel(){I("/performance/searchPerformanceReview")},onSave(e=!1){this.validate().then(()=>{!0!==this.invalid&&(this.isLoading=!0,this.http.create({empNumber:this.review.employee.id,reviewerEmpNumber:this.review.supervisorReviewer.id,startDate:this.review.startDate,endDate:this.review.endDate,dueDate:this.review.dueDate,activate:e}).then(()=>!0===e?this.$toast.success({title:this.$t("general.success"),message:this.$t("general.successfully_activated")}):this.$toast.updateSuccess()).then(()=>{this.onCancel()}).catch(e=>this.$toast.warn({title:this.$t("general.warning"),message:e?.data.error.message})).finally(()=>{this.isLoading=!1}))})}}};const zL=(0,i.A)(FL,[["render",HL],["__scopeId","data-v-d9ae7bee"]]);var jL=zL;const OL={class:"XHRM-background-container"},GL={class:"XHRM-card-container"},QL={class:"XHRM-button-row"};function KL(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("supervisor-autocomplete"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",OL,[(0,a.createElementVNode)("div",GL,[(0,a.createVNode)(r,{class:"XHRM-main-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.edit_review")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{ref:"formRef",loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.review.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>n.review.employee=e),rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.review.supervisorReviewer,"onUpdate:modelValue":t[1]||(t[1]=e=>n.review.supervisorReviewer=e),rules:n.rules.supervisorReviewer,required:"",subordinate:n.review.employee},null,8,["modelValue","rules","subordinate"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.review.startDate,"onUpdate:modelValue":t[2]||(t[2]=e=>n.review.startDate=e),label:e.$t("performance.review_period_start_date"),rules:n.rules.startDate,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.review.endDate,"onUpdate:modelValue":t[3]||(t[3]=e=>n.review.endDate=e),label:e.$t("performance.review_period_end_date"),rules:n.rules.endDate,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.review.dueDate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.review.dueDate=e),label:e.$t("performance.due_date"),rules:n.rules.dueDate,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createElementVNode)("div",QL,[(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),type:"button",onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.save"),type:"submit",onClick:t[5]||(t[5]=e=>i.onSave(!1))},null,8,["label"]),(0,a.createVNode)(v,{"display-type":"secondary",label:e.$t("performance.activate"),type:"button",onClick:t[6]||(t[6]=e=>i.onSave(!0))},null,8,["label"])])]),_:1})]),_:1},8,["loading"])])])}const WL={employee:null,supervisorReviewer:null,startDate:null,endDate:null,dueDate:null};var JL={components:{"employee-autocomplete":$a,"supervisor-autocomplete":PL},props:{reviewId:{type:Number,required:!0}},setup(){const{formRef:e,invalid:t,validate:o}=Bc(),{userDateFormat:a}=F(),l=new H(window.appGlobal.baseUrl,"/api/v2/performance/manage/reviews");return l.setIgnorePath("/api/v2/performance/manage/reviews/[0-9]+"),{formRef:e,invalid:t,validate:o,http:l,userDateFormat:a}},data(){return{isLoading:!1,review:{...WL},rules:{employee:[Kt,$o],supervisorReviewer:[Kt,$o],startDate:[Kt,Jt(this.userDateFormat),yo(()=>this.review.endDate,this.$t("general.review_period_start_date_should_be_before_end_date"))],endDate:[Kt,Jt(this.userDateFormat),so(()=>this.review.startDate,this.$t("performance.review_period_end_date_should_be_after_start_date"))],dueDate:[Kt,Jt(),so(()=>this.review.endDate,this.$t("performance.due_date_should_be_after_review_period_end_date"))]}}},created(){this.isLoading=!0,this.http.get(this.reviewId).then(e=>{const{data:t}=e.data;this.review.employee=t.employee?{id:t.employee.empNumber,label:`${t.employee.firstName} ${t.employee.middleName?t.employee.middleName:""} ${t.employee.lastName}`,isPastEmployee:!!t.employee.terminationId}:null,this.review.supervisorReviewer=t.reviewer.employee?{id:t.reviewer.employee.empNumber,label:`${t.reviewer.employee.firstName} ${t.reviewer.employee.middleName?t.reviewer.employee.middleName:""} ${t.reviewer.employee.lastName}`,isPastEmployee:!!t.reviewer.employee.terminationId}:null,this.review.startDate=t.reviewPeriodStart,this.review.endDate=t.reviewPeriodEnd,this.review.dueDate=t.dueDate}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/performance/searchPerformanceReview")},onSave(e=!1){this.validate().then(()=>{if(!0!==this.invalid){if(this.review.supervisorReviewer.isPastEmployee)return this.$toast.warn({title:this.$t("general.warning"),message:this.$t("performance.cannot_add_a_past_employee_as_a_reviewer")});this.isLoading=!0,this.http.update(this.reviewId,{empNumber:this.review.employee.id,reviewerEmpNumber:this.review.supervisorReviewer.id,startDate:this.review.startDate,endDate:this.review.endDate,dueDate:this.review.dueDate,activate:e}).then(()=>!0===e?this.$toast.success({title:this.$t("general.success"),message:this.$t("general.successfully_activated")}):this.$toast.updateSuccess()).then(()=>{this.onCancel()}).catch(e=>this.$toast.warn({title:this.$t("general.warning"),message:e?.data.error.message})).finally(()=>{this.isLoading=!1})}})}}};const YL=(0,i.A)(JL,[["render",KL],["__scopeId","data-v-b7535c5a"]]);var ZL=YL;const eP={class:"XHRM-background-container"},tP={class:"XHRM-paper-container"},oP={class:"XHRM-header-container"},aP={class:"XHRM-container"},lP={class:"XHRM-bottom-container"};function nP(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-table-filter"),v=(0,a.resolveComponent)("table-header"),f=(0,a.resolveComponent)("oxd-card-table"),y=(0,a.resolveComponent)("oxd-pagination"),C=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",eP,[(0,a.createVNode)(g,{"filter-title":e.$t("performance.performance_trackers")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.empNumber,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.empNumber=e),rules:n.rules.employee,params:{includeEmployees:"currentAndPast"}},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(m,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",tP,[(0,a.createElementVNode)("div",oP,[(0,a.createVNode)(m,{"display-type":"secondary","icon-name":"plus",label:e.$t("general.add"),onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(v,{loading:l.isLoading,selected:n.checkedItems.length,total:l.total,onDelete:i.onClickDeleteSelected},null,8,["loading","selected","total","onDelete"]),(0,a.createElementVNode)("div",aP,[(0,a.createVNode)(f,{order:l.sortDefinition,"onUpdate:order":t[1]||(t[1]=e=>l.sortDefinition=e),selected:n.checkedItems,"onUpdate:selected":t[2]||(t[2]=e=>n.checkedItems=e),clickable:!1,headers:n.headers,items:l.response?.data,loading:l.isLoading,selectable:!0,"row-decorator":"oxd-table-decorator-card"},null,8,["order","selected","headers","items","loading"])]),(0,a.createElementVNode)("div",lP,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,current:l.currentPage,"onUpdate:current":t[3]||(t[3]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(C,{ref:"deleteDialog"},null,512)])}const iP={empNumber:null},rP={"performanceTracker.modifiedDate":"DESC","employee.lastName":"ASC","performanceTracker.trackerName":"ASC","performanceTracker.addedDate":"DESC"};var sP={name:"TrackerList",components:{"delete-confirmation":Xt,"employee-autocomplete":$a},props:{unselectableIds:{type:Array,default:()=>[]}},setup(){const{locale:e}=Ae(),{jsDateFormat:t}=F(),{$tEmpName:o}=Ma(),l=a=>a.map(a=>({id:a.id,tracker:a.trackerName,addDate:ge(he(a.addedDate),t,{locale:e}),modifiedDate:ge(he(a.modifiedDate),t,{locale:e}),empName:o(a.employee,{includeMiddle:!1,excludePastEmpTag:!1})})),n=new H(window.appGlobal.baseUrl,"/api/v2/performance/config/trackers"),i=(0,a.ref)({...iP}),{sortDefinition:r,sortField:s,sortOrder:d,onSort:c}=Ut({sortDefinition:rP}),u=(0,a.computed)(()=>({empNumber:i.value.empNumber?.id,sortField:s.value,sortOrder:d.value,includeEmployees:i.value.includeEmployees?.param})),{showPaginator:m,currentPage:p,total:h,response:g,pages:v,isLoading:f,execQuery:y}=Et(n,{query:u,normalizer:l,prefetch:!0,toastNoRecords:!0});return c(y),{http:n,total:h,isLoading:f,showPaginator:m,currentPage:p,pages:v,response:g,execQuery:y,sortDefinition:r,filters:i}},data(){return{headers:[{name:"empName",title:this.$t("general.employee"),slot:"title",sortField:"employee.lastName",style:{flex:1}},{name:"tracker",title:this.$t("performance.tracker"),style:{flex:1},sortField:"performanceTracker.trackerName"},{name:"addDate",title:this.$t("performance.added_date"),sortField:"performanceTracker.addedDate",style:{flex:1}},{name:"modifiedDate",title:this.$t("performance.modified_date"),sortField:"performanceTracker.modifiedDate",style:{flex:1}},{name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],rules:{employee:[Wt(100),$o]}}},methods:{onClickAdd(){I("/performance/addPerformanceTracker")},onClickEdit(e){I("/performance/addPerformanceTracker/{id}",{id:e.id})},onClickDeleteSelected(){const e=this.checkedItems.map(e=>this.response?.data[e].id);this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){const t=this.unselectableIds.findIndex(t=>t==e.id);if(t>-1)return this.$toast.cannotDelete();this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...iP},this.filterItems()}}};const dP=(0,i.A)(sP,[["render",nP]]);var cP=dP;const uP={class:"XHRM-background-container"},mP={class:"XHRM-card-container"};function pP(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("employee-autocomplete"),h=(0,a.resolveComponent)("reviewer-autocomplete"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",uP,[(0,a.createElementVNode)("div",mP,[(0,a.createVNode)(r,{class:"XHRM-main-title",tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.add_performance_tracker")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.tracker.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tracker.name=e),rules:n.rules.tracker,label:e.$t("performance.tracker_name"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.tracker.employee,"onUpdate:modelValue":t[1]||(t[1]=e=>n.tracker.employee=e),rules:n.rules.employee,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.tracker.reviewers,"onUpdate:modelValue":t[2]||(t[2]=e=>n.tracker.reviewers=e),rules:n.rules.reviewers,"exclude-employee":n.tracker.employee,required:""},null,8,["modelValue","rules","exclude-employee"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),type:"button",onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}function hP(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete");return(0,a.openBlock)(),(0,a.createBlock)(r,{label:e.$t("performance.reviewers"),multiple:!0,clear:!1,"create-options":i.loadEmployees,required:""},null,8,["label","create-options"])}var gP={name:"ReviewersAutoComplete",components:{"employee-autocomplete":$a},props:{includeEmployees:{type:String,default:"onlyCurrent"},excludeEmployee:{type:Object,required:!1,default:null}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/performance/trackers/reviewers");return{http:e}},methods:{async loadEmployees(e){return new Promise(t=>{e.trim()?this.http.getAll({nameOrId:e.trim(),empNumber:null==this.excludeEmployee?null:this.excludeEmployee.id}).then(({data:e})=>{t(e.data.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,isPastEmployee:!!e.terminationId})))}):t([])})}}};const vP=(0,i.A)(gP,[["render",hP]]);var fP=vP;const yP={name:null,employee:null,reviewers:[]};var CP={components:{"reviewer-autocomplete":fP,"employee-autocomplete":$a},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/performance/config/trackers");return{http:e}},data(){return{isLoading:!1,tracker:{...yP},rules:{tracker:[Kt,Wt(200)],employee:[Kt,$o,e=>{if(null===e)return!0;const t=this.tracker.reviewers.findIndex(t=>t.id===e.id);return-1==t||this.$t("performance.employee_cannot_be_assigned_as_his_own_reviewer")}],reviewers:[Kt,$o]}}},methods:{onCancel(){I("/performance/viewPerformanceTracker")},onSave(){this.isLoading=!0,this.http.create({trackerName:this.tracker.name.trim(),empNumber:this.tracker.employee.id,reviewerEmpNumbers:this.tracker.reviewers.map(e=>e.id)}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const VP=(0,i.A)(CP,[["render",pP]]);var bP=VP;const wP={class:"XHRM-background-container"},xP={class:"XHRM-card-container"};function NP(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("employee-autocomplete"),h=(0,a.resolveComponent)("reviewer-autocomplete"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",wP,[(0,a.createElementVNode)("div",xP,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.edit_performance_tracker")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.tracker.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.tracker.name=e),rules:n.rules.tracker,label:e.$t("performance.tracker_name"),required:""},null,8,["modelValue","rules","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.tracker.employee,"onUpdate:modelValue":t[1]||(t[1]=e=>n.tracker.employee=e),rules:n.rules.employee,readonly:n.isReadOnly},null,8,["modelValue","rules","readonly"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.tracker.reviewers,"onUpdate:modelValue":t[2]||(t[2]=e=>n.tracker.reviewers=e),rules:n.rules.reviewers,"exclude-employee":n.tracker.employee,required:""},null,8,["modelValue","rules","exclude-employee"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const kP={name:null,employee:null,reviewers:[]};var _P={components:{"employee-autocomplete":$a,"reviewer-autocomplete":fP},props:{performanceTrackerId:{type:Number,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/performance/config/trackers");return{http:e}},data(){return{isLoading:!1,tracker:{...kP},isReadOnly:!1,rules:{tracker:[Kt,Wt(200)],employee:[Kt,$o,e=>{if(null===e)return!0;const t=this.tracker.reviewers.findIndex(t=>t.id===e.id);return-1==t||this.$t("performance.employee_cannot_be_assigned_as_his_own_reviewer")}],reviewers:[Kt,$o]}}},beforeMount(){this.isLoading=!0,this.http.get(this.performanceTrackerId).then(e=>{const{data:t}=e.data;this.isReadOnly=!1===t.ownerEditable,this.tracker.id=t.id,this.tracker.name=t.trackerName,this.tracker.employee=t.employee?{id:t.employee.empNumber,label:`${t.employee.firstName} ${t.employee.middleName} ${t.employee.lastName}`,isPastEmployee:!!t.employee.terminationId}:null,this.tracker.reviewers=t.reviewers.map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,isPastEmployee:!!e.terminationId}))}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/performance/viewPerformanceTracker")},onSave(){this.isLoading=!0;const e={trackerName:this.tracker.name.trim(),empNumber:this.tracker.employee.id,reviewerEmpNumbers:this.tracker.reviewers.map(e=>e.id)};this.http.update(this.performanceTrackerId,e).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})}}};const SP=(0,i.A)(_P,[["render",NP]]);var DP=SP;const $P={class:"XHRM-background-container"},MP={class:"XHRM-paper-container"},EP={class:"XHRM-header-container"},RP={class:"XHRM-container"},TP={class:"XHRM-bottom-container"};function BP(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("table-header"),d=(0,a.resolveComponent)("oxd-card-table"),c=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",$P,[(0,a.createElementVNode)("div",MP,[(0,a.createElementVNode)("div",EP,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.my_reviews")),1)]),_:1})]),(0,a.createVNode)(s,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",RP,[(0,a.createVNode)(d,{order:l.sortDefinition,"onUpdate:order":t[0]||(t[0]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["order","headers","items","loading"])]),(0,a.createElementVNode)("div",TP,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,current:l.currentPage,"onUpdate:current":t[1]||(t[1]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])])}const IP={component:"oxd-icon-button",props:{name:"eye-fill",title:"View"}},AP={component:"oxd-icon-button",props:{name:"pencil-fill",title:"Edit"}},HP={component:"oxd-icon-button",props:{name:"file-text-fill",title:"Evaluate"}},XP={component:"oxd-button",props:{label:"View",displayType:"text",size:"medium",style:{"min-width":"120px"}}},UP={component:"oxd-button",props:{label:"Edit",displayType:"text",size:"medium",style:{"min-width":"120px"}}},LP={component:"oxd-button",props:{label:"Evaluate",displayType:"text",size:"medium",style:{"min-width":"120px"}}},PP={class:"oxd-table-card-cell"},qP={class:"data"};function FP(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)("div",PP,[(0,a.withDirectives)((0,a.createElementVNode)("div",{class:"header"},(0,a.toDisplayString)(o.header.title),513),[[a.vShow,i.showHeader]]),(0,a.createElementVNode)("div",qP,[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.reviewPeriodStart)+" - ",1),(0,a.createVNode)(r,{tag:"span",class:"time"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.reviewPeriodEnd),1)]),_:1})]),_:1})])])}var zP={name:"ReviewPeriodCell",props:{header:{type:Object,required:!0},reviewPeriodStart:{type:String,required:!0},reviewPeriodEnd:{type:String,required:!0}},setup(){const{screenState:e}=(0,X.zW)();return{screenState:e}},computed:{showHeader(){return!("lg"===this.screenState.screenType||"xl"===this.screenState.screenType)}}};const jP=(0,i.A)(zP,[["render",FP],["__scopeId","data-v-1329c5aa"]]);var OP=jP;const GP={"performanceReview.statusId":"ASC","performanceReview.dueDate":"ASC","performanceReview.reviewPeriodStart":"DEFAULT","reviewer.status":"DEFAULT"};var QP={setup(){const{sortDefinition:e,sortField:t,sortOrder:o,onSort:l}=Ut({sortDefinition:GP}),n=(0,a.computed)(()=>({sortField:t.value,sortOrder:o.value})),i=new H(window.appGlobal.baseUrl,"/api/v2/performance/reviews"),{jsDateFormat:r}=F(),{locale:s}=Ae(),d=e=>e.map(e=>({id:e.id,jobTitle:e.jobTitle.name,department:e.subunit.name,reviewPeriod:{reviewPeriodStart:ge(he(e.reviewPeriodStart),r,{locale:s}),reviewPeriodEnd:ge(he(e.reviewPeriodEnd),r,{locale:s})},dueDate:ge(he(e.dueDate),r,{locale:s}),overallStatus:e.overallStatus.statusName,selfEvaluationStatus:e.selfReviewStatus,statusId:e.overallStatus.statusId})),{currentPage:c,total:u,showPaginator:m,pages:p,pageSize:h,response:g,execQuery:v,isLoading:f}=Et(i,{query:n,normalizer:d});return l(v),{http:i,total:u,isLoading:f,items:g,execQuery:v,sortDefinition:e,showPaginator:m,pages:p,pageSize:h,currentPage:c}},data(){return{headers:[{name:"jobTitle",slot:"title",title:this.$t("general.job_title"),style:{flex:1}},{name:"department",title:this.$t("general.sub_unit"),style:{flex:1}},{name:"reviewPeriod",title:this.$t("performance.review_period"),sortField:"performanceReview.reviewPeriodStart",style:{flex:2},cellRenderer:this.reviewPeriodCellRenderer},{name:"dueDate",title:this.$t("performance.due_date"),sortField:"performanceReview.dueDate",style:{flex:1}},{name:"selfEvaluationStatus",title:this.$t("performance.self_evaluation_status"),sortField:"reviewer.status",style:{flex:1}},{name:"overallStatus",title:this.$t("performance.review_status"),sortField:"performanceReview.statusId",style:{flex:1}},{name:"action",slot:"footer",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellRenderer:this.actionButtonCellRenderer}]}},methods:{actionButtonCellRenderer(...[,,,e]){const t={},o=(0,a.inject)(X.Bv);return"lg"===o.screenType||"xl"===o.screenType?"Completed"===e.selfEvaluationStatus?(t.view=IP,t.view.props.title=this.$t("general.view"),t.view.onClick=this.onClickEvaluate):(t.evaluate=HP,t.evaluate.props.title=this.$t("performance.evaluate"),t.evaluate.onClick=this.onClickEvaluate):"Completed"===e.selfEvaluationStatus?(t.view=XP,t.view.props.label=this.$t("general.view"),t.view.onClick=this.onClickEvaluate):(t.evaluate=LP,t.evaluate.props.label=this.$t("performance.evaluate"),t.evaluate.onClick=this.onClickEvaluate),{props:{header:{cellConfig:t}}}},reviewPeriodCellRenderer(...e){const t=e[1];return{component:OP,props:{reviewPeriodStart:t.reviewPeriodStart,reviewPeriodEnd:t.reviewPeriodEnd}}},onClickView(){I("/performance/searchKpi")},onClickEvaluate(e){I("/performance/reviewEvaluate/id/{id}",{id:e.id})}}};const KP=(0,i.A)(QP,[["render",BP],["__scopeId","data-v-e8ff417a"]]);var WP=KP;const JP={class:"XHRM-background-container"},YP={class:"XHRM-paper-container"},ZP={class:"XHRM-container"},eq={class:"XHRM-bottom-container"};function tq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("jobtitle-dropdown"),c=(0,a.resolveComponent)("subunit-dropdown"),u=(0,a.resolveComponent)("include-employee-dropdown"),m=(0,a.resolveComponent)("review-status-dropdown"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("oxd-grid"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("oxd-table-filter"),V=(0,a.resolveComponent)("table-header"),b=(0,a.resolveComponent)("oxd-card-table"),w=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)("div",JP,[(0,a.createVNode)(C,{"filter-title":e.$t("performance.employee_reviews")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(y,{onSubmitValid:i.filterItems,onReset:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:n.rules.employee,params:{includeEmployees:l.filters.includeEmployees.param}},null,8,["modelValue","rules","params"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.jobTitle=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.subunit,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.subunit=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.includeEmployees,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.includeEmployees=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.status,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.status=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.fromDate=e),rules:n.rules.fromDate,label:e.$t("general.from_date")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filters.toDate=e),rules:n.rules.toDate,label:e.$t("general.to_date")},null,8,["modelValue","rules","label"])]),_:1})]),_:1}),(0,a.createVNode)(g),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(v,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[9]||(t[9]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",YP,[(0,a.createVNode)(V,{selected:0,total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",ZP,[(0,a.createVNode)(b,{order:l.sortDefinition,"onUpdate:order":t[7]||(t[7]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["order","headers","items","loading"])]),(0,a.createElementVNode)("div",eq,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(w,{key:0,current:l.currentPage,"onUpdate:current":t[8]||(t[8]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])])}function oq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("performance.review_status"),clear:!1,options:n.statusOpts},null,8,["label","options"])}var aq={name:"ReviewStatusDropdown",data(){return{statusOpts:[{id:1,statusId:2,label:this.$t("performance.activated")},{id:2,statusId:3,label:this.$t("performance.in_progress")},{id:3,statusId:4,label:this.$t("performance.completed")}]}}};const lq=(0,i.A)(aq,[["render",oq]]);var nq=lq;const iq={"employee.lastName":"DEFAULT","performanceReview.reviewPeriodStart":"DEFAULT","performanceReview.dueDate":"DEFAULT","performanceReview.statusId":"ASC"};var rq={name:"ReviewList",components:{"include-employee-dropdown":qp,"review-status-dropdown":nq,"subunit-dropdown":Bp,"jobtitle-dropdown":Mp,"employee-autocomplete":$a},props:{fromDate:{type:String,required:!1,default:null},toDate:{type:String,required:!1,default:null}},setup(e){const{$t:t}=Ie(),{jsDateFormat:o,userDateFormat:l}=F(),{locale:n}=Ae(),i=e=>ge(he(e),o,{locale:n}),r=e=>e.map(e=>({id:e.id,employee:`${e.employee?.firstName} ${e.employee?.lastName} ${e.employee?.terminationId?` ${t("general.past_employee")}`:""}`,jobTitle:e.jobTitle?.name,subunit:e.subunit?.name,reviewPeriod:{reviewPeriodStart:i(e.reviewPeriodStart),reviewPeriodEnd:i(e.reviewPeriodEnd)},dueDate:i(e.dueDate),status:2===e.overallStatus.statusId?t("performance.activated"):3===e.overallStatus.statusId?t("performance.in_progress"):t("performance.completed"),statusId:e.overallStatus.statusId})),s={employee:null,jobTitle:null,subunit:null,status:null,fromDate:null,toDate:null,includeEmployees:{id:1,param:"onlyCurrent",label:t("general.current_employees_only")}},d=(0,a.ref)({...s,...e.fromDate&&{fromDate:e.fromDate},...e.toDate&&{toDate:e.toDate}}),{sortDefinition:c,sortField:u,sortOrder:m,onSort:p}=Ut({sortDefinition:iq}),h=(0,a.computed)(()=>({sortField:u.value,sortOrder:m.value,empNumber:d.value.employee?.id,jobTitleId:d.value.jobTitle?.id,subunitId:d.value.subunit?.id,statusId:d.value.status?.statusId,fromDate:d.value.fromDate,toDate:d.value.toDate,includeEmployees:d.value.includeEmployees?.param})),g=new H(window.appGlobal.baseUrl,"/api/v2/performance/employees/reviews"),{showPaginator:v,currentPage:f,total:y,pages:C,pageSize:V,response:b,isLoading:w,execQuery:x}=Et(g,{query:h,normalizer:r});return p(x),{http:g,showPaginator:v,currentPage:f,isLoading:w,total:y,pages:C,pageSize:V,execQuery:x,items:b,filters:d,sortDefinition:c,userDateFormat:l}},data(){return{headers:[{name:"employee",title:this.$t("general.employee"),slot:"title",sortField:"employee.lastName",style:{flex:1}},{name:"jobTitle",title:this.$t("general.job_title"),style:{flex:1}},{name:"subunit",title:this.$t("general.sub_unit"),style:{flex:1}},{name:"reviewPeriod",title:this.$t("performance.review_period"),sortField:"performanceReview.reviewPeriodStart",style:{flex:1},cellRenderer:this.reviewPeriodCellRenderer},{name:"dueDate",title:this.$t("performance.due_date"),sortField:"performanceReview.dueDate",style:{flex:1}},{name:"status",title:this.$t("performance.review_status"),sortField:"performanceReview.statusId",style:{flex:1}},{name:"action",slot:"footer",title:this.$t("general.actions"),cellType:"oxd-table-cell-actions",cellRenderer:this.actionCellRenderer,style:{flex:1}}],rules:{employee:[Wt(100),$o],fromDate:[Jt(this.userDateFormat),yo(()=>this.filters.toDate,this.$t("general.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(this.userDateFormat),so(()=>this.filters.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]}}},methods:{actionCellRenderer(...[,,,e]){const t={},o=(0,a.inject)(X.Bv);return"lg"===o.screenType||"xl"===o.screenType?4===e.statusId?(t.view=IP,t.view.props.title=this.$t("general.view"),t.view.onClick=this.onClickEvaluate):(t.evaluate=HP,t.evaluate.props.title=this.$t("performance.evaluate"),t.evaluate.onClick=this.onClickEvaluate):4===e.statusId?(t.view=XP,t.view.props.label=this.$t("general.view"),t.view.onClick=this.onClickEvaluate):(t.evaluate=LP,t.evaluate.props.label=this.$t("performance.evaluate"),t.evaluate.onClick=this.onClickEvaluate),{props:{header:{cellConfig:t}}}},reviewPeriodCellRenderer(...e){const t=e[1];return{component:OP,props:{reviewPeriodStart:t.reviewPeriodStart,reviewPeriodEnd:t.reviewPeriodEnd}}},async filterItems(){await this.execQuery()},onClickEvaluate(e){I("/performance/reviewEvaluateByAdmin/{id}",{id:e.id})}}};const sq=(0,i.A)(rq,[["render",tq],["__scopeId","data-v-277f08a0"]]);var dq=sq;const cq={class:"XHRM-background-container"},uq={class:"XHRM-paper-container"},mq={class:"XHRM-header-container"},pq={class:"XHRM-container"},hq={class:"XHRM-bottom-container"};function gq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("jobtitle-dropdown"),c=(0,a.resolveComponent)("review-status-dropdown"),u=(0,a.resolveComponent)("include-employee-dropdown"),m=(0,a.resolveComponent)("date-input"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("oxd-divider"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-table-filter"),C=(0,a.resolveComponent)("table-header"),V=(0,a.resolveComponent)("oxd-card-table"),b=(0,a.resolveComponent)("oxd-pagination"),w=(0,a.resolveComponent)("delete-confirmation-dialog");return(0,a.openBlock)(),(0,a.createElementBlock)("div",cq,[(0,a.createVNode)(y,{"filter-title":e.$t("performance.manage_performance_reviews")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{onSubmitValid:i.filterItems,onReset:i.resetDataTable},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:n.rules.employee,params:{includeEmployees:l.filters.includeEmployees.param}},null,8,["modelValue","rules","params"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.jobTitle=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.status,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.status=e),options:l.statusOpts},null,8,["modelValue","options"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.includeEmployees,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.includeEmployees=e)},null,8,["modelValue"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.reviewer,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.reviewer=e),label:e.$t("performance.reviewer"),params:{includeEmployees:"currentAndPast"}},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.fromDate=e),rules:n.rules.fromDate,label:e.$t("general.from_date")},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(s,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filters.toDate=e),rules:n.rules.toDate,label:e.$t("general.to_date")},null,8,["modelValue","rules","label"])]),_:1})]),_:1}),(0,a.createVNode)(h),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.reset"),type:"reset"},null,8,["label"]),(0,a.createVNode)(g,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[10]||(t[10]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",uq,[(0,a.createElementVNode)("div",mq,[(0,a.createVNode)(g,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(C,{selected:n.checkedItems.length,total:l.total,loading:l.isLoading,onDelete:i.onClickDeleteSelected},null,8,["selected","total","loading","onDelete"]),(0,a.createElementVNode)("div",pq,[(0,a.createVNode)(V,{selected:n.checkedItems,"onUpdate:selected":t[7]||(t[7]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[8]||(t[8]=e=>l.sortDefinition=e),headers:n.headers,items:l.items?.data,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","headers","items","loading"])]),(0,a.createElementVNode)("div",hq,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,current:l.currentPage,"onUpdate:current":t[9]||(t[9]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(w,{ref:"deleteDialog"},null,512)])}const vq={"employee.lastName":"DEFAULT","performanceReview.reviewPeriodStart":"DEFAULT","performanceReview.dueDate":"DEFAULT","performanceReview.statusId":"ASC","jobTitle.jobTitleName":"DEFAULT","reviewerEmployee.lastName":"DEFAULT"};var fq={name:"ReviewSearch",components:{"include-employee-dropdown":qp,"review-status-dropdown":nq,"jobtitle-dropdown":Mp,"employee-autocomplete":$a,"delete-confirmation-dialog":Xt},props:{fromDate:{type:String,required:!1,default:null},toDate:{type:String,required:!1,default:null}},setup(e){const{$t:t}=Ie(),{jsDateFormat:o,userDateFormat:l}=F(),{locale:n}=Ae(),{$tEmpName:i}=Ma(),r=e=>ge(he(e),o,{locale:n}),s=[{id:1,label:t("performance.inactive")},{id:2,label:t("performance.activated")},{id:3,label:t("performance.in_progress")},{id:4,label:t("performance.completed")}],d=e=>e.map(e=>{const t=e.employee,o=e.reviewer?.employee;return{id:e.id,employee:i(t),reviewer:i(o),jobTitle:e.jobTitle?.name,reviewPeriod:{reviewPeriodStart:r(e.reviewPeriodStart),reviewPeriodEnd:r(e.reviewPeriodEnd)},dueDate:r(e.dueDate),status:s.find(t=>t.id===e.overallStatus.statusId).label,statusId:e.overallStatus.statusId}}),c={employee:null,jobTitle:null,status:null,reviewer:null,fromDate:null,toDate:null,includeEmployees:{id:1,param:"onlyCurrent",label:t("general.current_employees_only")}},u=(0,a.ref)({...c,...e.fromDate&&{fromDate:e.fromDate},...e.toDate&&{toDate:e.toDate}}),{sortDefinition:m,sortField:p,sortOrder:h,onSort:g}=Ut({sortDefinition:vq}),v=(0,a.computed)(()=>({sortField:p.value,sortOrder:h.value,empNumber:u.value.employee?.id,jobTitleId:u.value.jobTitle?.id,statusId:u.value.status?.id,reviewerEmpNumber:u.value.reviewer?.id,fromDate:u.value.fromDate,toDate:u.value.toDate,includeEmployees:u.value.includeEmployees?.param})),f=new H(window.appGlobal.baseUrl,"/api/v2/performance/manage/reviews"),{showPaginator:y,currentPage:C,total:V,pages:b,pageSize:w,response:x,isLoading:N,execQuery:k}=Et(f,{query:v,normalizer:d});return g(k),{http:f,showPaginator:y,currentPage:C,isLoading:N,total:V,pages:b,pageSize:w,execQuery:k,items:x,filters:u,sortDefinition:m,statusOpts:s,userDateFormat:l}},data(){return{headers:[{name:"employee",title:this.$t("general.employee"),slot:"title",sortField:"employee.lastName",style:{flex:"14%"}},{name:"jobTitle",title:this.$t("general.job_title"),sortField:"jobTitle.jobTitleName",style:{flex:"14%"}},{name:"reviewPeriod",title:this.$t("performance.review_period"),sortField:"performanceReview.reviewPeriodStart",style:{flex:"14%"},cellRenderer:this.reviewPeriodCellRenderer},{name:"dueDate",title:this.$t("performance.due_date"),sortField:"performanceReview.dueDate",style:{flex:"14%"}},{name:"reviewer",title:this.$t("performance.reviewer"),sortField:"reviewerEmployee.lastName",style:{flex:"14%"}},{name:"status",title:this.$t("performance.review_status"),sortField:"performanceReview.statusId",style:{flex:"14%"}},{name:"action",slot:"footer",title:this.$t("general.actions"),cellType:"oxd-table-cell-actions",cellRenderer:this.actionButtonCellRenderer,style:{flex:"16%"}}],checkedItems:[],rules:{employee:[Wt(100),$o],fromDate:[Jt(this.userDateFormat),yo(()=>this.filters.toDate,this.$t("general.from_date_should_be_before_to_date"),{allowSameDate:!0})],toDate:[Jt(this.userDateFormat),so(()=>this.filters.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]}}},methods:{actionButtonCellRenderer(...[,,,e]){const t={},o=(0,a.inject)(X.Bv);return t.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},"lg"===o.screenType||"xl"===o.screenType?4===e.statusId?(t.view=IP,t.view.props.title=this.$t("general.view"),t.view.onClick=this.onClickEvaluate):1===e.statusId?(t.edit=AP,t.edit.props.title=this.$t("general.edit"),t.edit.onClick=this.onClickEdit):(t.evaluate=HP,t.evaluate.props.title=this.$t("performance.evaluate"),t.evaluate.onClick=this.onClickEvaluate):4===e.statusId?(t.view=XP,t.view.props.label=this.$t("general.view"),t.view.onClick=this.onClickEvaluate):1===e.statusId?(t.edit=UP,t.edit.props.label=this.$t("general.edit"),t.edit.onClick=this.onClickEdit):(t.evaluate=LP,t.evaluate.props.label=this.$t("performance.evaluate"),t.evaluate.onClick=this.onClickEvaluate),{props:{header:{cellConfig:t}}}},reviewPeriodCellRenderer(...e){const t=e[1];return{component:OP,props:{reviewPeriodStart:t.reviewPeriodStart,reviewPeriodEnd:t.reviewPeriodEnd}}},onClickEdit(e){I("/performance/saveReview/{id}",{id:e.id})},onClickAdd(){I("/performance/saveReview")},onClickEvaluate(e){I("/performance/reviewEvaluateByAdmin/{id}",{id:e.id})},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},async filterItems(){await this.execQuery()},async resetDataTable(){this.checkedItems=[],await this.execQuery()}}};const yq=(0,i.A)(fq,[["render",gq],["__scopeId","data-v-b186a776"]]);var Cq=yq;const Vq={class:"XHRM-background-container"},bq={class:"XHRM-card-container"},wq={class:"XHRM-employee-tracker"},xq={class:"XHRM-employee-tracker-image-section"},Nq={class:"XHRM-employee-tracker-image-wrapper"},kq=["src"],_q={class:"XHRM-employee-tracker-header-section"},Sq={class:"XHRM-employee-tracker-header"},Dq={class:"XHRM-employee-tracker-ratings"},$q={key:0,class:"XHRM-employee-tracker-ratings-info"},Mq={key:1,class:"XHRM-employee-tracker-ratings-info"},Eq={class:"XHRM-paper-container"},Rq={class:"XHRM-header-container"},Tq={ref:"scrollerRef",class:"XHRM-container"},Bq={key:0,class:"XHRM-employee-tracker-no-records"};function Iq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-icon"),d=(0,a.resolveComponent)("oxd-button"),c=(0,a.resolveComponent)("employee-tracker-log-card"),u=(0,a.resolveComponent)("oxd-sheet"),m=(0,a.resolveComponent)("oxd-loading-spinner"),p=(0,a.resolveComponent)("add-tracker-log-modal"),h=(0,a.resolveComponent)("edit-tracker-log-modal"),g=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Vq,[(0,a.createElementVNode)("div",bq,[(0,a.createElementVNode)("div",wq,[(0,a.createElementVNode)("div",xq,[(0,a.createElementVNode)("div",Nq,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:l.imgSrc},null,8,kq)])]),(0,a.createElementVNode)("div",_q,[(0,a.createElementVNode)("div",Sq,[(0,a.createVNode)(r,{tag:"h5",class:"XHRM-employee-tracker-header-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.trackerName),1)]),_:1}),(0,a.createVNode)(r,{tag:"h6",class:"XHRM-employee-tracker-header-subtitle"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.employeeName),1)]),_:1})]),(0,a.createElementVNode)("div",Dq,[e.meta.positive>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",$q,[(0,a.createVNode)(s,{class:"XHRM-employee-tracker-ratings-icon --positive",type:"svg",name:"thumbsup"}),(0,a.createVNode)(r,{class:"XHRM-employee-tracker-ratings-text --positive"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.meta.positive),1)]),_:1})])):(0,a.createCommentVNode)("",!0),e.meta.negative>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",Mq,[(0,a.createVNode)(s,{class:"XHRM-employee-tracker-ratings-icon --negative",type:"svg",name:"thumbsdown"}),(0,a.createVNode)(r,{class:"XHRM-employee-tracker-ratings-text --negative"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.meta.negative),1)]),_:1})])):(0,a.createCommentVNode)("",!0)])])])]),t[0]||(t[0]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",Eq,[(0,a.createElementVNode)("div",Rq,[(0,a.createVNode)(r,{tag:"h5",class:"XHRM-employee-tracker-list-header"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.tracker_logs")),1)]),_:1}),(0,a.createVNode)(d,{label:e.$t("performance.add_log"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createElementVNode)("div",Tq,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.items,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(u,{key:t,gutters:!1,type:"gray-lighten-2",class:"XHRM-scroll-card"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{"tracker-log":e,onEdit:i.onClickEdit,onDelete:i.onClickDelete},null,8,["tracker-log","onEdit","onDelete"])]),_:2},1024))),128)),e.showNoRecordsFound?((0,a.openBlock)(),(0,a.createElementBlock)("div",Bq,[(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.n_records_found",{count:0})),1)]),_:1})])):(0,a.createCommentVNode)("",!0),e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,class:"XHRM-container-loader"})):(0,a.createCommentVNode)("",!0)],512)]),n.showAddTrackerModal?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,"tracker-id":o.trackerId,onClose:i.onAddTrackerModalClose},null,8,["tracker-id","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditTrackerModal?((0,a.openBlock)(),(0,a.createBlock)(h,{key:1,"tracker-id":o.trackerId,"tracker-log-id":n.editTrackerLogId,onClose:i.onEditTrackerModalClose},null,8,["tracker-id","tracker-log-id","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(g,{ref:"deleteDialog"},null,512)])}function Aq(e,{refName:t="scrollerRef",scrollDistance:o=100,debounceInterval:l=100}={}){let n=0,i=!1;const r=(0,a.ref)(),s=(0,X.Ld)(async()=>e(),l),d=()=>{let e,t,a;r.value?({scrollHeight:e,clientHeight:t,scrollTop:a}=r.value.$el||r.value):(a=window.scrollY,e=document.body.scrollHeight,t=document.body.clientHeight),i=a>n,n=a;const l=a+t>=e-(o||0);i&&l&&s()};return(0,a.onMounted)(async()=>{await(0,a.nextTick)(),r.value?(r.value.$el||r.value).addEventListener("scroll",d):document.addEventListener("scroll",d)}),(0,a.onBeforeUnmount)(()=>{r.value?(r.value.$el||r.value).removeEventListener("scroll",d):document.removeEventListener("scroll",d)}),{[t]:r}}const Hq={class:"XHRM-modal-header"},Xq={class:"XHRM-add-tracker-log-ratings-container"};function Uq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("tracker-log-rating-button"),m=(0,a.resolveComponent)("required-text"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{style:{width:"90%",maxWidth:"650px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Hq,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.add_tracker_log")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.trackerLog.log,"onUpdate:modelValue":t[0]||(t[0]=e=>n.trackerLog.log=e),label:e.$t("performance.log"),placeholder:e.$t("general.type_here"),rules:n.rules.log,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Xq,[(0,a.createVNode)(u,{label:e.$t("performance.positive"),selected:n.rating,type:"positive",onClick:i.onClickPositive},null,8,["label","selected","onClick"]),(0,a.createVNode)(u,{label:e.$t("performance.negative"),selected:!n.rating,type:"negative",onClick:i.onClickNegative},null,8,["label","selected","onClick"])])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.trackerLog.comment,"onUpdate:modelValue":t[1]||(t[1]=e=>n.trackerLog.comment=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_here"),rules:n.rules.comment,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{class:"XHRM-form-action"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p,{"display-type":"secondary",label:e.$t("general.save"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}function Lq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createBlock)(s,{"display-type":"text",label:o.label,class:(0,a.normalizeClass)(i.buttonClasses),onClick:t[0]||(t[0]=t=>e.$emit("click"))},{icon:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"svg",name:i.iconName,class:(0,a.normalizeClass)(i.iconClasses)},null,8,["name","class"])]),_:1},8,["label","class"])}var Pq={name:"TrackerLogRatingButton",components:{"oxd-icon":X.dp},props:{label:{type:String,required:!0},selected:{type:Boolean,required:!0},type:{type:String,required:!0,validator:function(e){return-1!==["positive","negative"].indexOf(e)}}},emits:["click"],computed:{iconName(){return"thumbs"+("positive"===this.type?"up":"down")},buttonClasses(){return{"XHRM-tracker-rating-button":!0,"--deselected":!this.selected}},iconClasses(){return{"XHRM-tracker-rating-icon":!0,[`--${this.type}`]:!0}}}};const qq=(0,i.A)(Pq,[["render",Lq],["__scopeId","data-v-317b1a5e"]]);var Fq=qq;const zq={log:"",comment:""};var jq={name:"AddTrackerLogModal",components:{"oxd-dialog":X.KB,"tracker-log-rating-button":Fq},props:{trackerId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/performance/trackers/${e.trackerId}/logs`);return{http:t}},data(){return{isLoading:!1,rating:!0,trackerLog:{...zq},rules:{log:[Kt,Wt(150)],comment:[Kt,Wt(3e3)]}}},methods:{onClickPositive(){this.rating=!0},onClickNegative(){this.rating=!1},onSave(){this.isLoading=!0,this.http.create({log:this.trackerLog.log,comment:this.trackerLog.comment,achievement:this.rating?1:2}).then(()=>{this.$toast.saveSuccess(),this.onCancel()})},onCancel(){this.$emit("close")}}};const Oq=(0,i.A)(jq,[["render",Uq],["__scopeId","data-v-7ed2ac4a"]]);var Gq=Oq;const Qq={class:"XHRM-modal-header"},Kq={class:"XHRM-add-tracker-log-ratings-container"};function Wq(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("tracker-log-rating-button"),m=(0,a.resolveComponent)("required-text"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{style:{width:"90%",maxWidth:"650px"},"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Qq,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.edit_tracker_log")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.trackerLog.log,"onUpdate:modelValue":t[0]||(t[0]=e=>n.trackerLog.log=e),label:e.$t("performance.log"),placeholder:e.$t("general.type_here"),rules:n.rules.log,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",Kq,[(0,a.createVNode)(u,{label:e.$t("performance.positive"),selected:n.rating,type:"positive",onClick:i.onClickPositive},null,8,["label","selected","onClick"]),(0,a.createVNode)(u,{label:e.$t("performance.negative"),selected:!n.rating,type:"negative",onClick:i.onClickNegative},null,8,["label","selected","onClick"])])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.trackerLog.comment,"onUpdate:modelValue":t[1]||(t[1]=e=>n.trackerLog.comment=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_here"),rules:n.rules.comment,required:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(h,{class:"XHRM-form-action"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p,{"display-type":"secondary",label:e.$t("general.save"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const Jq={log:"",comment:""};var Yq={name:"EditTrackerLogModal",components:{"oxd-dialog":X.KB,"tracker-log-rating-button":Fq},props:{trackerId:{type:Number,required:!0},trackerLogId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/performance/trackers/${e.trackerId}/logs`);return{http:t}},data(){return{isLoading:!1,rating:!0,trackerLog:{...Jq},rules:{log:[Kt,Wt(150)],comment:[Kt,Wt(3e3)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.trackerLogId).then(e=>{const{data:t}=e.data;this.trackerLog.log=t.log,this.trackerLog.comment=t.comment,this.rating="1"===t.achievement}).finally(()=>{this.isLoading=!1})},methods:{onClickPositive(){this.rating=!0},onClickNegative(){this.rating=!1},onSave(){this.isLoading=!0,this.http.update(this.trackerLogId,{log:this.trackerLog.log,comment:this.trackerLog.comment,achievement:this.rating?1:2}).then(()=>{this.$toast.updateSuccess(),this.onCancel()})},onCancel(){this.$emit("close")}}};const Zq=(0,i.A)(Yq,[["render",Wq],["__scopeId","data-v-3fd47890"]]);var eF=Zq;const tF={class:"XHRM-employee-tracker-log"},oF={class:"XHRM-employee-tracker-log-image-section"},aF={class:"XHRM-employee-tracker-log-image-wrapper"},lF=["src"],nF={class:"XHRM-employee-tracker-log-content-section"},iF={class:"XHRM-employee-tracker-log-reviewer-name"},rF={class:"XHRM-employee-tracker-log-content-container"},sF={class:"XHRM-employee-tracker-log-header"},dF={class:"XHRM-employee-tracker-log-title"},cF={class:"XHRM-employee-tracker-log-body"},uF={class:"XHRM-employee-tracker-log-reviewer-date"},mF={class:"XHRM-employee-tracker-log-reviewer-date-container"},pF={key:0,class:"XHRM-employee-tracker-log-reviewer-date-container"};function hF(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-icon"),d=(0,a.resolveComponent)("oxd-table-dropdown");return(0,a.openBlock)(),(0,a.createElementBlock)("div",tF,[(0,a.createElementVNode)("div",oF,[(0,a.createElementVNode)("div",aF,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:o.trackerLog.reviewerPictureSrc},null,8,lF)])]),(0,a.createElementVNode)("div",nF,[(0,a.createElementVNode)("div",iF,[(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.trackerLog.reviewerName),1)]),_:1})]),(0,a.createElementVNode)("div",rF,[(0,a.createElementVNode)("div",sF,[(0,a.createElementVNode)("div",dF,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-employee-tracker-log-title-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.trackerLog.log),1)]),_:1}),(0,a.createVNode)(s,{type:"svg",class:(0,a.normalizeClass)({"XHRM-employee-tracker-log-title-icon":!0,"--positive":"1"===o.trackerLog.achievement,"--negative":"2"===o.trackerLog.achievement}),name:"thumbs"+("1"===o.trackerLog.achievement?"up":"down")},null,8,["class","name"])]),o.trackerLog.editable?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,options:n.dropdownOptions,onClick:t[0]||(t[0]=e=>i.onTrackerDropdownAction(e,o.trackerLog))},null,8,["options"])):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",cF,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-employee-tracker-log-body-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.trackerLog.comment),1)]),_:1})])]),(0,a.createElementVNode)("div",uF,[(0,a.createElementVNode)("div",mF,[(0,a.createVNode)(s,{class:"XHRM-employee-tracker-log-reviewer-date-icon",name:"calendar-plus",title:e.$t("performance.added_on")},null,8,["title"]),(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.trackerLog.addedDate),1)]),_:1})]),o.trackerLog.modifiedDate?((0,a.openBlock)(),(0,a.createElementBlock)("div",pF,[(0,a.createVNode)(s,{class:"XHRM-employee-tracker-log-reviewer-date-icon",name:"pencil",title:e.$t("performance.modified_on")},null,8,["title"]),(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.trackerLog.modifiedDate),1)]),_:1})])):(0,a.createCommentVNode)("",!0)])])])}var gF={name:"EmployeeTrackerLogCard",components:{"oxd-icon":X.dp,"oxd-table-dropdown":X.b_},props:{trackerLog:{type:Object,required:!0}},emits:["edit","delete"],data(){return{dropdownOptions:[{label:this.$t("general.edit"),context:"edit"},{label:this.$t("performance.delete"),context:"delete"}]}},methods:{onTrackerDropdownAction(e,t){switch(e.context){case"edit":this.$emit("edit",t.id);break;case"delete":this.$emit("delete",t.id);break}}}};const vF=(0,i.A)(gF,[["render",hF],["__scopeId","data-v-22d7a2d6"]]);var fF=vF,yF={name:"ViewEmployeeTrackerLogs",components:{"oxd-icon":X.dp,"oxd-sheet":X.tg,"oxd-loading-spinner":X.VJ,"add-tracker-log-modal":Gq,"edit-tracker-log-modal":eF,"delete-confirmation":Xt,"employee-tracker-log-card":fF},props:{trackerId:{type:Number,required:!0},empNumber:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/performance/trackers/${e.trackerId}/logs`),o=10,l=(0,a.reactive)({total:0,items:[],meta:{positive:0,negative:0},infinite:!1,isLoading:!1,showNoRecordsFound:!1}),{$tEmpName:n}=Ma(),{jsDateFormat:i}=F(),{locale:r}=Ae(),s=()=>{l.showNoRecordsFound=!1,l.isLoading=!0,t.getAll({limit:o,offset:0===l.items.length?0:o}).then(e=>{const{data:t,meta:o}=e.data;l.total=o?.total||0,Array.isArray(t)&&(l.items=[...l.items,...t.map(e=>({...e,reviewerPictureSrc:`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.reviewer.empNumber}`,reviewerName:n(e.reviewer),addedDate:ge(he(e.addedDate),i,{locale:r}),modifiedDate:ge(he(e.modifiedDate),i,{locale:r})}))],l.meta={...l.meta,...o})}).finally(()=>{l.showNoRecordsFound=0===l.total,l.isLoading=!1})},{scrollerRef:d}=Aq(()=>{l.items.length>=l.total||s()}),c=(0,a.computed)(()=>`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.empNumber}`);return{http:t,scrollerRef:d,fetchData:s,...(0,a.toRefs)(l),imgSrc:c}},data(){return{trackerName:"",employeeName:"",showAddTrackerModal:!1,showEditTrackerModal:!1,editTrackerLogId:null}},beforeMount(){this.http.request({method:"GET",url:`/api/v2/performance/employees/trackers/${this.trackerId}`}).then(e=>{const{data:t}=e.data;this.trackerName=t.trackerName,this.employeeName=`${t.employee.firstName} ${t.employee.lastName} ${t.employee.terminationId?` ${this.$t("general.past_employee")}`:""}`}).then(()=>{this.fetchData()})},methods:{onClickAdd(){this.showAddTrackerModal=!0},onAddTrackerModalClose(){this.showAddTrackerModal=!1,this.resetItems()},onEditTrackerModalClose(){this.showEditTrackerModal=!1,this.resetItems()},onClickEdit(e){this.editTrackerLogId=e,this.showEditTrackerModal=!0},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e])})},deleteItems(e){e instanceof Array&&(this.items=[],this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).finally(()=>{this.fetchData()}))},resetItems(){this.items=[],this.fetchData()}}};const CF=(0,i.A)(yF,[["render",Iq],["__scopeId","data-v-36910d7e"]]);var VF=CF;const bF={class:"XHRM-background-container"},wF={class:"XHRM-card-container"},xF={class:"XHRM-performance-review-actions"};function NF(e,t,o,l,n,i){const r=(0,a.resolveComponent)("review-confirm-modal"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("review-summary"),c=(0,a.resolveComponent)("evaluation-form"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("final-evaluation"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bF,[(0,a.createVNode)(r,{ref:"confirmDialog"},null,512),(0,a.createElementVNode)("div",wF,[(0,a.createVNode)(s,{tag:"h5",class:"XHRM-performance-review-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.performance_review")),1)]),_:1})]),t[8]||(t[8]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(d,{loading:n.isLoading,status:o.status,"due-date":o.dueDate,employee:n.employee.details,"job-title":n.employee.jobTitle,"review-period-end":o.reviewPeriodEnd,"review-period-start":o.reviewPeriodStart,"final-rating":n.finalRating},null,8,["loading","status","due-date","employee","job-title","review-period-end","review-period-start","final-rating"]),t[9]||(t[9]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(g,{ref:"formRef",loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.employeeReview,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employeeReview=e),kpis:n.kpis,rules:n.rules,editable:i.hasSupervisorUpdateAction,collapsed:n.employee.status<3,collapsible:3===n.employee.status,employee:n.employee.details,"job-title":n.employee.jobTitle,status:n.employee.status,title:e.$t("performance.self_evaluation_by")},null,8,["modelValue","kpis","rules","editable","collapsed","collapsible","employee","job-title","status","title"]),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(c,{modelValue:n.supervisorReview,"onUpdate:modelValue":t[6]||(t[6]=e=>n.supervisorReview=e),kpis:n.kpis,rules:n.rules,editable:i.hasSaveAction||i.hasCompleteAction,collapsible:!0,employee:n.supervisor.details,"job-title":n.supervisor.jobTitle,status:n.supervisor.status,title:e.$t("performance.supervisor_evaluation_by")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),((0,a.openBlock)(),(0,a.createBlock)(m,{key:n.isFinalizeRequired,"final-rating":n.finalRating,"onUpdate:finalRating":t[1]||(t[1]=e=>n.finalRating=e),"final-comment":n.finalComment,"onUpdate:finalComment":t[2]||(t[2]=e=>n.finalComment=e),"completed-date":n.completedDate,"onUpdate:completedDate":t[3]||(t[3]=e=>n.completedDate=e),status:o.status,"is-required":n.isFinalizeRequired},null,8,["final-rating","final-comment","completed-date","status","is-required"])),(0,a.withDirectives)((0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createElementVNode)("div",xF,[i.hasCancelAction?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickCancel},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),i.hasSaveAction?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,"display-type":"ghost",type:"button",label:e.$t("general.save"),onClick:t[4]||(t[4]=e=>i.onSubmit(!1))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasCompleteAction?((0,a.openBlock)(),(0,a.createBlock)(p,{key:2,type:"button","display-type":"secondary",label:e.$t("performance.complete"),onClick:t[5]||(t[5]=e=>i.onSubmit(!0))},null,8,["label"])):(0,a.createCommentVNode)("",!0)])]),_:1},512),[[a.vShow,i.hasActions]])]),_:1},8,["modelValue","kpis","rules","editable","employee","job-title","status","title"])]),_:1},8,["loading"])])}o(5367),o(2731);const kF={class:"XHRM-card-container"},_F={class:"XHRM-performance-review-summary"},SF={class:"XHRM-performance-review-owner"},DF=["src"],$F={class:"XHRM-performance-review-owner-employee-section"},MF={class:"XHRM-performance-review-owner-employee"},EF={class:"XHRM-performance-review-rating"};function RF(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",kF,[(0,a.createElementVNode)("div",_F,[(0,a.createVNode)(r,{tag:"h5",class:"XHRM-performance-review-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.review_summary")),1)]),_:1}),(0,a.createVNode)(u,{loading:o.loading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"XHRM-performance-review-details"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3,class:"XHRM-performance-review-details-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",SF,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:l.imgSrc},null,8,DF),(0,a.createElementVNode)("div",$F,[(0,a.createElementVNode)("div",MF,[(0,a.createVNode)(r,{tag:"h5",class:"XHRM-performance-review-owner-employee-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.employeeName),1)]),_:1}),(0,a.createVNode)(r,{tag:"h6",class:"XHRM-performance-review-owner-employee-job"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.jobTitle),1)]),_:1})])])])]),_:1}),(0,a.withDirectives)((0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",EF,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.final_rating")),1)]),_:1}),(0,a.createVNode)(r,{tag:"h4",class:"XHRM-performance-review-rating-number"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.finalRating),1)]),_:1})])]),_:1},512),[[a.vShow,4===o.status]])]),_:1})]),_:1}),(0,a.createVNode)(c,{class:"XHRM-performance-review-details"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{cols:3,class:"XHRM-performance-review-details-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-performance-review-column"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.review_status")),1)]),_:1}),(0,a.createVNode)(r,{class:"XHRM-performance-review-bold"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.reviewStatus),1)]),_:1})]),_:1}),(0,a.createVNode)(s,{class:"XHRM-performance-review-column"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.review_period")),1)]),_:1}),(0,a.createVNode)(r,{class:"XHRM-performance-review-bold"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.reviewPeriod),1)]),_:1})]),_:1}),(0,a.createVNode)(s,{class:"XHRM-performance-review-column"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.review_due_date")),1)]),_:1}),(0,a.createVNode)(r,{class:"XHRM-performance-review-bold"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.reviewDueDate),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])])])}const TF=`${window.appGlobal.publicPath}/images/default-photo.png`;var BF={name:"ReviewSummary",props:{employee:{type:Object,required:!0},jobTitle:{type:String,required:!0},status:{type:Number,required:!0},reviewPeriodStart:{type:String,required:!0},reviewPeriodEnd:{type:String,required:!0},dueDate:{type:String,required:!0},loading:{type:Boolean,required:!0},finalRating:{type:Number,default:0}},setup(e){const{$t:t}=Ie(),{locale:o}=Ae(),{jsDateFormat:l}=F(),{$tEmpName:n}=Ma(),i=[{id:1,label:t("performance.inactive")},{id:2,label:t("performance.activated")},{id:3,label:t("performance.in_progress")},{id:4,label:t("performance.completed")}],r=e=>ge(he(e),l,{locale:o}),s=(0,a.computed)(()=>e.employee.empNumber?`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.employee.empNumber}`:TF),d=i.find(t=>t.id===e.status).label,c=`${r(e.reviewPeriodStart)} - ${r(e.reviewPeriodEnd)}`,u=r(e.dueDate),m=(0,a.computed)(()=>n(e.employee,{includeMiddle:!0,excludePastEmpTag:!1}));return{imgSrc:s,reviewStatus:d,reviewPeriod:c,reviewDueDate:u,employeeName:m}}};const IF=(0,i.A)(BF,[["render",RF],["__scopeId","data-v-a2891fb6"]]);var AF=IF;const HF={key:1,class:"XHRM-performance-review-read"},XF={key:1,class:"XHRM-performance-review-read"},UF={key:1,class:"XHRM-performance-review-read"};function LF(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("date-input"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-grid");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(r,{class:"XHRM-performance-review-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.review_finalization")),1)]),_:1}),t[3]||(t[3]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(u,{cols:4,class:"XHRM-performance-review-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.date_of_completion")),1)]),_:1}),l.editable?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"model-value":o.completedDate,rules:n.rules.completedDate,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:completedDate",t))},null,8,["model-value","rules"])):((0,a.openBlock)(),(0,a.createElementBlock)("div",HF,[(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.formattedCompletedDate),1)]),_:1})]))]),_:1}),(0,a.createVNode)(d,{class:"XHRM-performance-review-grid-rating"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.final_rating")),1)]),_:1}),l.editable?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,"model-value":o.finalRating,rules:n.rules.finalRating,"onUpdate:modelValue":t[1]||(t[1]=t=>e.$emit("update:finalRating",t))},null,8,["model-value","rules"])):((0,a.openBlock)(),(0,a.createElementBlock)("div",XF,[(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.finalRating),1)]),_:1})]))]),_:1}),(0,a.createVNode)(d,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.final_comments")),1)]),_:1}),l.editable?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,rows:"1",type:"textarea","model-value":o.finalComment,rules:n.rules.finalComment,"onUpdate:modelValue":t[2]||(t[2]=t=>e.$emit("update:finalComment",t))},null,8,["model-value","rules"])):((0,a.openBlock)(),(0,a.createElementBlock)("div",UF,[(0,a.createVNode)(r,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.finalComment),1)]),_:1})]))]),_:1})]),_:1})])}var PF={name:"FinalEvaluation",props:{completedDate:{type:String,default:null,required:!1},finalRating:{type:Number,default:null,required:!1},finalComment:{type:String,default:null,required:!1},status:{type:Number,required:!0},isRequired:{type:Boolean,required:!0}},emits:["update:finalRating","update:finalComment","update:completedDate"],setup(e){const{locale:t}=Ae(),{jsDateFormat:o,userDateFormat:l}=F(),n=(0,a.computed)(()=>4!==e.status),i=(0,a.computed)(()=>ge(he(e.completedDate),o,{locale:t}));return{editable:n,userDateFormat:l,formattedCompletedDate:i}},data(){return{rules:{completedDate:[Jt(this.userDateFormat),...this.isRequired?[Kt]:[]],finalRating:[So(0,this.$t("performance.rating_should_be_greater_than_or_equal_to_minValue",{minValue:0})),Do(100,this.$t("performance.rating_should_be_less_than_or_equal_to_maxValue",{maxValue:100})),...this.isRequired?[Kt]:[]],finalComment:[...this.isRequired?[Kt]:[]]}}}};const qF=(0,i.A)(PF,[["render",LF],["__scopeId","data-v-26031617"]]);var FF=qF;const zF={class:"XHRM-evaluation XHRM-card-container"},jF={class:"XHRM-evaluation-header"},OF=["src"],GF={class:"XHRM-evaluation-title-name"};function QF(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-grid"),c=(0,a.resolveComponent)("oxd-icon-button"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zF,[(0,a.createVNode)(r,{class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.title),1)]),_:1}),(0,a.createElementVNode)("div",jF,[(0,a.createVNode)(d,{cols:3,class:"XHRM-evaluation-header-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-evaluation-title"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("img",{class:"XHRM-evaluation-title-profile-image",alt:"profile picture",src:l.profileImgSrc},null,8,OF),(0,a.createElementVNode)("div",GF,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.employeeName),1)]),_:1}),(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.jobTitle),1)]),_:1})])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.status")),1)]),_:1}),(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.evaluationLabel),1)]),_:1})]),_:1})]),_:1}),o.collapsible?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,"with-container":!1,name:l.isCollapsed?"chevron-down":"chevron-up",onClick:l.toggleForm},null,8,["name","onClick"])):(0,a.createCommentVNode)("",!0)]),l.isCollapsed?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(u),(0,a.createVNode)(d,{cols:4,class:"XHRM-evaluation-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.kpis")),1)]),_:1})]),_:1}),(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.rating")),1)]),_:1})]),_:1}),(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-header"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.comments")),1)]),_:1})]),_:1}),(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-spacer-md"}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.kpis,(t,n)=>((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:t.id},[(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-kpi"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-evaluation-grid-kpi-header",type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.kpi")),1)]),_:1}),(0,a.createVNode)(r,{title:t.title,tag:"p",class:"XHRM-evaluation-grid-kpi-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.title),1)]),_:2},1032,["title"]),(0,a.createVNode)(r,{class:"XHRM-evaluation-grid-kpi-minmax",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.min"))+": "+(0,a.toDisplayString)(t.minRating),1)]),_:2},1024),(0,a.createVNode)(r,{class:"XHRM-evaluation-grid-kpi-minmax",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.max"))+": "+(0,a.toDisplayString)(t.maxRating),1)]),_:2},1024)]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-evaluation-grid-kpi-header",type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.rating")),1)]),_:1}),(0,a.createVNode)(m,{type:"input",disabled:!o.editable,rules:o.rules[n],"model-value":o.modelValue.kpis[n].rating,"onUpdate:modelValue":e=>l.onUpdateRating(e,n)},null,8,["disabled","rules","model-value","onUpdate:modelValue"])]),_:2},1024),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-evaluation-grid-kpi-header",type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.comment")),1)]),_:1}),(0,a.createVNode)(m,{class:"XHRM-evaluation-grid-comment",rows:"2",type:"textarea",disabled:!o.editable,rules:l.commentValidators,"model-value":o.modelValue.kpis[n].comment,"onUpdate:modelValue":e=>l.onUpdateComment(e,n)},null,8,["disabled","rules","model-value","onUpdate:modelValue"])]),_:2},1024),(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-spacer-md"})],64))),128))]),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(d,{cols:3,class:"XHRM-evaluation-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{class:"XHRM-evaluation-grid-general"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"XHRM-evaluation-grid-general-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.general_comment")),1)]),_:1})]),_:1}),(0,a.createVNode)(s,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{class:"XHRM-evaluation-grid-comment",rows:"2",type:"textarea",disabled:!o.editable,rules:l.commentValidators,"model-value":o.modelValue.generalComment,"onUpdate:modelValue":t[0]||(t[0]=e=>l.onUpdateGeneralComment(e))},null,8,["disabled","rules","model-value"])]),_:1})]),_:1}),(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)],64))])}const KF=`${window.appGlobal.publicPath}/images/default-photo.png`;var WF={components:{"oxd-divider":X.zQ},props:{kpis:{type:Array,required:!0},title:{type:String,required:!0},editable:{type:Boolean,required:!0},collapsible:{type:Boolean,required:!0},employee:{type:Object,required:!0},jobTitle:{type:String,required:!0},rules:{type:Array,required:!0},modelValue:{type:Object,required:!0,validator:e=>Object.hasOwn(e,"kpis")&&Object.hasOwn(e,"generalComment")},collapsed:{type:Boolean,default:!1},status:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,t){const{$t:o}=Ie(),{$tEmpName:l}=Ma(),n=(0,a.ref)(e.collapsed),i=[Wt(2e3)],r=(0,a.computed)(()=>e.employee.empNumber?`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.employee.empNumber}`:KF),s=(0,a.computed)(()=>l(e.employee)),d=()=>{n.value=!n.value},c=(o,a)=>{t.emit("update:modelValue",{kpis:e.modelValue.kpis.map((e,t)=>t===a?{...e,rating:o}:e),generalComment:e.modelValue.generalComment})},u=(o,a)=>{t.emit("update:modelValue",{kpis:e.modelValue.kpis.map((e,t)=>t===a?{...e,comment:o}:e),generalComment:e.modelValue.generalComment})},m=o=>{t.emit("update:modelValue",{kpis:e.modelValue.kpis,generalComment:o})},p=[{id:1,label:o("performance.evaluation_activated")},{id:2,label:o("performance.evaluation_in_progress")},{id:3,label:o("performance.evaluation_completed")}],h=(0,a.computed)(()=>p.find(t=>t.id===e.status).label);return{toggleForm:d,isCollapsed:n,employeeName:s,profileImgSrc:r,onUpdateRating:c,onUpdateComment:u,onUpdateGeneralComment:m,commentValidators:i,evaluationLabel:h}}};const JF=(0,i.A)(WF,[["render",QF],["__scopeId","data-v-83acfa8c"]]);var YF=JF;function ZF(e){const{$t:t}=Ie(),o=t=>e.request({method:"GET",url:`/api/v2/performance/reviews/${t}/kpis`}),a=t=>e.request({method:"GET",url:`/api/v2/performance/reviews/${t}/evaluation/supervisor`}),l=t=>e.request({method:"GET",url:`/api/v2/performance/reviews/${t}/evaluation/employee`}),n=t=>e.request({method:"GET",url:`/api/v2/performance/reviews/${t}/evaluation/final`}),i=(t,o)=>e.request({method:"PUT",url:`/api/v2/performance/reviews/${t}/evaluation/final`,data:{...o,finalComment:""===o.finalComment?null:o.finalComment}}),r=(t,o,a)=>e.request({method:"PUT",url:`/api/v2/performance/reviews/${t}/evaluation/employee`,data:{complete:o,ratings:a.kpis,generalComment:a.generalComment}}),s=(t,o)=>e.request({method:"PUT",url:`/api/v2/performance/reviews/${t}/evaluation/supervisor`,data:{ratings:o.kpis,generalComment:o.generalComment}}),d=e=>e.map(e=>[So(e.minRating,t("performance.rating_should_be_greater_than_or_equal_to_minValue",{minValue:e.minRating})),Do(e.maxRating,t("performance.rating_should_be_less_than_or_equal_to_maxValue",{maxValue:e.maxRating}))]),c=e=>({kpis:e.map(e=>({kpiId:e.id,rating:null,comment:null})),generalComment:null}),u=(e,t,o)=>({kpis:o.map(({kpiId:t})=>{const o=e.find(e=>e.kpi.id===t);return{kpiId:t,rating:o?.rating,comment:o?.comment}}),generalComment:t}),m=e=>({details:{empNumber:e.employee.empNumber,firstName:e.employee.firstName,lastName:e.employee.lastName,middleName:e.employee.middleName,terminationId:e.employee.terminationId},jobTitle:e.employee.jobTitle.name,status:e.status}),p=e=>new Map(e?.map(e=>[e.action,e.name]));return{getAllKpis:o,getEmployeeReview:l,getSupervisorReview:a,getFinalReview:n,generateRules:d,generateModel:c,generateReviewerData:m,generateAllowedActions:p,generateEvaluationFormData:u,finalizeReview:i,saveEmployeeReview:r,saveSupervisorReview:s}}const ez={class:"XHRM-modal-header"},tz={class:"XHRM-text-center-align"},oz={class:"XHRM-modal-footer"};function az(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"#app"},[n.show?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-dialog-popup","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",ez,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.confirm_review_submission")),1)]),_:1})]),(0,a.createElementVNode)("div",tz,[(0,a.createVNode)(r,{type:"subtitle-2"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.confirm_review_submission_message")),1)]),_:1})]),(0,a.createElementVNode)("div",oz,[(0,a.createVNode)(s,{"display-type":"ghost",class:"XHRM-button-margin",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(s,{"display-type":"secondary",class:"XHRM-button-margin",label:e.$t("general.ok"),onClick:i.onConfirm},null,8,["label","onClick"])])]),_:1},8,["onUpdate:show"])):(0,a.createCommentVNode)("",!0)])}var lz={name:"ReviewConfirmModal",components:{"oxd-dialog":X.KB},data(){return{show:!1,reject:null,resolve:null}},methods:{showDialog(){return new Promise((e,t)=>{this.resolve=e,this.reject=t,this.show=!0})},onConfirm(){this.show=!1,this.resolve&&this.resolve("ok")},onCancel(){this.show=!1,this.resolve&&this.resolve("cancel")}}};const nz=(0,i.A)(lz,[["render",az],["__scopeId","data-v-bd2a3af0"]]);var iz=nz;const rz={details:{empNumber:null,firstName:"",lastName:"",middleName:"",terminationId:null},jobTitle:"",status:1,actions:new Map};var sz={components:{"review-summary":AF,"final-evaluation":FF,"evaluation-form":YF,"review-confirm-modal":iz},props:{reviewId:{type:Number,required:!0},status:{type:Number,required:!0},reviewPeriodStart:{type:String,required:!0},reviewPeriodEnd:{type:String,required:!0},dueDate:{type:String,required:!0},isReviewer:{type:Boolean,default:!1}},setup(){const{formRef:e,invalid:t,validate:o}=Bc(),a=new H(window.appGlobal.baseUrl,""),{getAllKpis:l,getEmployeeReview:n,getSupervisorReview:i,getFinalReview:r,generateRules:s,generateModel:d,generateReviewerData:c,generateAllowedActions:u,generateEvaluationFormData:m,finalizeReview:p,saveEmployeeReview:h,saveSupervisorReview:g}=ZF(a);return{http:a,invalid:t,formRef:e,validate:o,getAllKpis:l,generateRules:s,generateModel:d,generateReviewerData:c,generateAllowedActions:u,generateEvaluationFormData:m,getEmployeeReview:n,getSupervisorReview:i,getFinalReview:r,finalizeReview:p,saveEmployeeReview:h,saveSupervisorReview:g}},data(){return{kpis:[],rules:[],employee:{...rz},employeeReview:{},supervisor:{...rz},supervisorReview:{},isLoading:!1,finalRating:null,finalComment:null,completedDate:null,isFinalizeRequired:!1}},computed:{hasSupervisorUpdateAction(){return this.employee.actions.has("supervisorUpdate")},hasSaveAction(){return this.supervisor.actions.has("save")},hasCompleteAction(){return this.supervisor.actions.has("complete")},hasCancelAction(){return 4!==this.status},hasActions(){return this.hasSupervisorUpdateAction||this.hasSaveAction||this.hasCompleteAction||this.hasCancelAction}},beforeMount(){this.isLoading=!0,this.getAllKpis(this.reviewId).then(e=>{const{data:t}=e.data;return this.kpis=[...t],this.rules=this.generateRules(t),this.employeeReview=this.generateModel(t),this.supervisorReview=this.generateModel(t),this.getEmployeeReview(this.reviewId)}).then(e=>{const{data:t}=e.data,{meta:o}=e.data;return this.employee=this.generateReviewerData(o.reviewer),this.employee.actions=this.generateAllowedActions(o.allowedActions),this.employeeReview=this.generateEvaluationFormData(t,o.generalComment,this.employeeReview.kpis),this.getSupervisorReview(this.reviewId)}).then(e=>{const{data:t}=e.data,{meta:o}=e.data;return this.supervisor=this.generateReviewerData(o.reviewer),this.supervisor.actions=this.generateAllowedActions(o.allowedActions),this.supervisorReview=this.generateEvaluationFormData(t,o.generalComment,this.supervisorReview.kpis),this.getFinalReview(this.reviewId)}).then(e=>{const{data:t}=e.data;this.finalRating=t.finalRating,this.finalComment=t.finalComment,this.completedDate=t.completedDate}).finally(()=>{this.isLoading=!1})},methods:{onSubmit(e=!1){this.isFinalizeRequired=e,this.$nextTick().then(()=>this.validate()).then(()=>{!0!==this.invalid&&(e?this.$refs.confirmDialog.showDialog().then(e=>{"ok"===e&&this.submitReview(!0)}):this.submitReview(!1))})},submitReview(e=!1){this.isLoading=!0,this.saveSupervisorReview(this.reviewId,this.supervisorReview).then(()=>{if(this.hasSupervisorUpdateAction)return this.saveEmployeeReview(this.reviewId,!0,this.employeeReview)}).then(()=>this.finalizeReview(this.reviewId,{complete:e,finalRating:this.finalRating,finalComment:this.finalComment,completedDate:this.completedDate})).then(()=>this.$toast.saveSuccess()).finally(()=>{A()})},onClickCancel(){I(this.isReviewer?"/performance/searchEvaluatePerformanceReview":"/performance/searchPerformanceReview")}}};const dz=(0,i.A)(sz,[["render",NF],["__scopeId","data-v-0f214212"]]);var cz=dz;const uz={class:"XHRM-background-container"},mz={class:"XHRM-card-container"},pz={key:0},hz={class:"XHRM-performance-review-actions"},gz={key:1};function vz(e,t,o,l,n,i){const r=(0,a.resolveComponent)("review-confirm-modal"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("review-summary"),c=(0,a.resolveComponent)("evaluation-form"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("final-evaluation"),g=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",uz,[(0,a.createVNode)(r,{ref:"confirmDialog"},null,512),(0,a.createElementVNode)("div",mz,[(0,a.createVNode)(s,{tag:"h5",class:"XHRM-performance-review-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.performance_review")),1)]),_:1})]),t[11]||(t[11]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(d,{loading:n.isLoading,status:o.status,"due-date":o.dueDate,employee:n.employee.details,"job-title":n.employee.jobTitle,"review-period-end":o.reviewPeriodEnd,"review-period-start":o.reviewPeriodStart,"final-rating":n.finalRating},null,8,["loading","status","due-date","employee","job-title","review-period-end","review-period-start","final-rating"]),t[12]||(t[12]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(g,{ref:"formRef",loading:n.isLoading},{default:(0,a.withCtx)(()=>[o.status<4?((0,a.openBlock)(),(0,a.createElementBlock)("div",pz,[(0,a.createVNode)(c,{modelValue:n.supervisorReview,"onUpdate:modelValue":t[0]||(t[0]=e=>n.supervisorReview=e),kpis:n.kpis,rules:n.rules,editable:!1,collapsible:!1,collapsed:!0,employee:n.supervisor.details,"job-title":n.supervisor.jobTitle,status:n.supervisor.status,title:e.$t("performance.supervisor_evaluation_by")},null,8,["modelValue","kpis","rules","employee","job-title","status","title"]),t[9]||(t[9]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(c,{modelValue:n.employeeReview,"onUpdate:modelValue":t[3]||(t[3]=e=>n.employeeReview=e),kpis:n.kpis,rules:n.rules,editable:n.employee.status<3,collapsed:!1,collapsible:!0,employee:n.employee.details,"job-title":n.employee.jobTitle,status:n.employee.status,title:e.$t("performance.self_evaluation_by")},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createElementVNode)("div",hz,[i.hasCancelAction?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onClickCancel},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0),i.hasSaveAction?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,"display-type":"ghost",type:"button",label:e.$t("general.save"),onClick:t[1]||(t[1]=e=>i.onSubmit(!1))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.hasCompleteAction?((0,a.openBlock)(),(0,a.createBlock)(m,{key:2,type:"button","display-type":"secondary",label:e.$t("performance.complete"),onClick:t[2]||(t[2]=e=>i.onSubmit(!0))},null,8,["label"])):(0,a.createCommentVNode)("",!0)])]),_:1},512),[[a.vShow,i.hasActions]])]),_:1},8,["modelValue","kpis","rules","editable","employee","job-title","status","title"])])):(0,a.createCommentVNode)("",!0),4===o.status?((0,a.openBlock)(),(0,a.createElementBlock)("div",gz,[(0,a.createVNode)(c,{modelValue:n.employeeReview,"onUpdate:modelValue":t[4]||(t[4]=e=>n.employeeReview=e),kpis:n.kpis,rules:n.rules,editable:!1,collapsed:!1,collapsible:!0,employee:n.employee.details,"job-title":n.employee.jobTitle,status:n.employee.status,title:e.$t("performance.self_evaluation_by")},null,8,["modelValue","kpis","rules","employee","job-title","status","title"]),t[10]||(t[10]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(c,{modelValue:n.supervisorReview,"onUpdate:modelValue":t[8]||(t[8]=e=>n.supervisorReview=e),kpis:n.kpis,rules:n.rules,editable:!1,collapsible:!0,collapsed:!1,employee:n.supervisor.details,"job-title":n.supervisor.jobTitle,status:n.supervisor.status,title:e.$t("performance.supervisor_evaluation_by")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u),(0,a.createVNode)(h,{"final-rating":n.finalRating,"onUpdate:finalRating":t[5]||(t[5]=e=>n.finalRating=e),"final-comment":n.finalComment,"onUpdate:finalComment":t[6]||(t[6]=e=>n.finalComment=e),"completed-date":n.completedDate,"onUpdate:completedDate":t[7]||(t[7]=e=>n.completedDate=e),status:o.status,"is-required":!1},null,8,["final-rating","final-comment","completed-date","status"])]),_:1},8,["modelValue","kpis","rules","employee","job-title","status","title"])])):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading"])])}const fz={details:{empNumber:null,firstName:"",lastName:"",terminationId:null},jobTitle:"",status:1,actions:new Map};var yz={name:"SelfEvaluation",components:{"review-summary":AF,"final-evaluation":FF,"evaluation-form":YF,"review-confirm-modal":iz},props:{reviewId:{type:Number,required:!0},status:{type:Number,required:!0},reviewPeriodStart:{type:String,required:!0},reviewPeriodEnd:{type:String,required:!0},dueDate:{type:String,required:!0}},setup(){const{formRef:e,invalid:t,validate:o}=Bc(),a=new H(window.appGlobal.baseUrl,""),{getAllKpis:l,getEmployeeReview:n,getSupervisorReview:i,getFinalReview:r,generateRules:s,generateModel:d,generateReviewerData:c,generateAllowedActions:u,generateEvaluationFormData:m,finalizeReview:p,saveEmployeeReview:h}=ZF(a);return{http:a,invalid:t,formRef:e,validate:o,getAllKpis:l,generateRules:s,generateModel:d,generateReviewerData:c,generateAllowedActions:u,generateEvaluationFormData:m,getEmployeeReview:n,getSupervisorReview:i,getFinalReview:r,finalizeReview:p,saveEmployeeReview:h}},data(){return{kpis:[],rules:[],employee:{...fz},employeeReview:{},supervisor:{...fz},supervisorReview:{},isLoading:!1,finalRating:null,finalComment:null,completedDate:null}},computed:{hasSaveAction(){return this.employee.actions.has("save")},hasCompleteAction(){return this.employee.actions.has("complete")},hasCancelAction(){return!(4===this.status||3===this.employee?.status)},hasActions(){return this.hasSaveAction||this.hasCancelAction||this.hasCompleteAction}},beforeMount(){this.isLoading=!0,this.getAllKpis(this.reviewId).then(e=>{const{data:t}=e.data;return this.kpis=[...t],this.rules=this.generateRules(t),this.employeeReview=this.generateModel(t),this.supervisorReview=this.generateModel(t),this.getEmployeeReview(this.reviewId)}).then(e=>{const{data:t}=e.data,{meta:o}=e.data;return this.employee=this.generateReviewerData(o.reviewer),this.employee.actions=this.generateAllowedActions(o.allowedActions),this.employeeReview=this.generateEvaluationFormData(t,o.generalComment,this.employeeReview.kpis),this.getSupervisorReview(this.reviewId)}).then(e=>{const{data:t}=e.data,{meta:o}=e.data;return this.supervisor=this.generateReviewerData(o.reviewer),this.supervisor.actions=this.generateAllowedActions(o.allowedActions),this.supervisorReview=this.generateEvaluationFormData(t,o.generalComment,this.supervisorReview.kpis),4===this.status?this.getFinalReview(this.reviewId):{}}).then(e=>{if(0!==Object.keys(e).length){const{data:t}=e.data;this.finalRating=t.finalRating,this.finalComment=t.finalComment,this.completedDate=t.completedDate}}).finally(()=>{this.isLoading=!1})},methods:{onSubmit(e=!1){this.$nextTick().then(()=>this.validate()).then(async()=>{!0!==this.invalid&&(e?this.$refs.confirmDialog.showDialog().then(e=>{"ok"===e&&this.submitReview(!0)}):this.submitReview(!1))})},submitReview(e=!1){this.isLoading=!0,this.saveEmployeeReview(this.reviewId,e,this.employeeReview).then(()=>this.$toast.saveSuccess()).finally(()=>{A()})},onClickCancel(){I("/performance/myPerformanceReview")}}};const Cz=(0,i.A)(yz,[["render",vz],["__scopeId","data-v-1d329f91"]]);var Vz=Cz,bz={"my-tracker":JU,"employee-trackers":iL,"kpi-search":TL,"kpi-save":wL,"kpi-edit":hL,"add-review":jL,"edit-review":ZL,"performance-tracker-list":cP,"performance-tracker-save":bP,"performance-tracker-edit":DP,"my-reviews":WP,"review-list":dq,"review-search":Cq,"employee-tracker-logs":VF,"admin-evaluation":cz,"self-evaluation":Vz};const wz={class:"XHRM-background-container"},xz={class:"XHRM-corporate-directory"},Nz={class:"XHRM-paper-container"},kz={ref:"scrollerRef",class:"XHRM-container"},_z={key:0,class:"XHRM-corporate-directory-sidebar"};function Sz(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("submit-button"),g=(0,a.resolveComponent)("oxd-form-actions"),v=(0,a.resolveComponent)("oxd-form"),f=(0,a.resolveComponent)("oxd-table-filter"),y=(0,a.resolveComponent)("table-header"),C=(0,a.resolveComponent)("employee-details"),V=(0,a.resolveComponent)("summary-card"),b=(0,a.resolveComponent)("oxd-loading-spinner"),w=(0,a.resolveComponent)("summary-card-details");return(0,a.openBlock)(),(0,a.createElementBlock)("div",wz,[(0,a.createVNode)(f,{"filter-title":e.$t("general.directory")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(v,{onSubmitValid:i.onSearch,onReset:i.onReset},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:3},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:e.filters.employeeNumber,"onUpdate:modelValue":t[0]||(t[0]=t=>e.filters.employeeNumber=t),rules:l.rules.employee,"api-path":"/api/v2/directory/employees"},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.filters.jobTitleId,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filters.jobTitleId=t),type:"select",label:e.$t("general.job_title"),options:o.jobTitles},null,8,["modelValue","label","options"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:e.filters.locationId,"onUpdate:modelValue":t[2]||(t[2]=t=>e.filters.locationId=t),type:"select",label:e.$t("general.location"),options:o.locations},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(g,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{label:e.$t("general.reset"),"display-type":"ghost",type:"reset"},null,8,["label"]),(0,a.createVNode)(h,{label:e.$t("general.search")},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid","onReset"])]),_:1},8,["filter-title"]),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",xz,[(0,a.createElementVNode)("div",Nz,[(0,a.createVNode)(y,{selected:0,total:e.total,loading:!1,"show-divider":!1},null,8,["total"]),(0,a.createElementVNode)("div",kz,[(0,a.createVNode)(c,{cols:i.colSize},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.employees,(t,o)=>((0,a.openBlock)(),(0,a.createBlock)(s,{key:t},{default:(0,a.withCtx)(()=>[i.isMobile&&e.currentIndex===o?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,"employee-id":t.id,"employee-name":t.employeeName,"employee-sub-unit":t.employeeSubUnit,"employee-location":t.employeeLocation,"employee-designation":t.employeeJobTitle,onClick:e=>i.showEmployeeDetails(o)},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{"employee-id":t.id,"is-mobile":i.isMobile},null,8,["employee-id","is-mobile"])]),_:2},1032,["employee-id","employee-name","employee-sub-unit","employee-location","employee-designation","onClick"])):((0,a.openBlock)(),(0,a.createBlock)(V,{key:1,"employee-id":t.id,"employee-name":t.employeeName,"employee-sub-unit":t.employeeSubUnit,"employee-location":t.employeeLocation,"employee-designation":t.employeeJobTitle,onClick:e=>i.showEmployeeDetails(o)},null,8,["employee-id","employee-name","employee-sub-unit","employee-location","employee-designation","onClick"]))]),_:2},1024))),128))]),_:1},8,["cols"]),e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,class:"XHRM-container-loader"})):(0,a.createCommentVNode)("",!0)],512),t[4]||(t[4]=(0,a.createElementVNode)("div",{class:"XHRM-bottom-container"},null,-1))]),i.isEmployeeSelected&&!1===i.isMobile?((0,a.openBlock)(),(0,a.createElementBlock)("div",_z,[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(w,{"employee-designation":e.employees[e.currentIndex].employeeJobTitle,"employee-id":e.employees[e.currentIndex].id,"employee-location":e.employees[e.currentIndex].employeeLocation,"employee-name":e.employees[e.currentIndex].employeeName,"employee-sub-unit":e.employees[e.currentIndex].employeeSubUnit,onHideDetails:t[3]||(t[3]=e=>i.hideEmployeeDetails())},null,8,["employee-designation","employee-id","employee-location","employee-name","employee-sub-unit"])]),_:1})])):(0,a.createCommentVNode)("",!0)])])}const Dz={class:"XHRM-directory-card-body"};function $z(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("profile-picture"),c=(0,a.resolveComponent)("oxd-sheet");return(0,a.openBlock)(),(0,a.createBlock)(c,{gutters:!1,class:"XHRM-directory-card"},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createElementVNode)("div",{class:"XHRM-directory-card-top",onClick:t[0]||(t[0]=t=>e.$emit("hide-details",!1))},[(0,a.createVNode)(r,{name:"arrow-right"})],512),[[a.vShow,o.showBackButton]]),(0,a.createVNode)(s,{tag:"p",class:(0,a.normalizeClass)(i.cardTitleClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.employeeName),1)]),_:1},8,["class"]),(0,a.createVNode)(d,{id:o.employeeId},null,8,["id"]),(0,a.withDirectives)((0,a.createVNode)(s,{tag:"p",class:(0,a.normalizeClass)(i.cardSubTitleClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.employeeDesignation),1)]),_:1},8,["class"]),[[a.vShow,o.employeeDesignation]]),(0,a.withDirectives)((0,a.createElementVNode)("div",Dz,[(0,a.createVNode)(r,{class:"XHRM-directory-card-icon",name:"geo-alt-fill"}),(0,a.createElementVNode)("div",null,[(0,a.withDirectives)((0,a.createVNode)(s,{tag:"p",class:(0,a.normalizeClass)(i.cardDescriptionClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.employeeSubUnit),1)]),_:1},8,["class"]),[[a.vShow,o.employeeSubUnit]]),(0,a.withDirectives)((0,a.createVNode)(s,{tag:"p",class:(0,a.normalizeClass)(i.cardDescriptionClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.employeeLocation),1)]),_:1},8,["class"]),[[a.vShow,o.employeeLocation]])])],512),[[a.vShow,o.employeeSubUnit||o.employeeLocation]]),(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)]),_:3})}const Mz={class:"XHRM-profile-picture"},Ez=["src"];function Rz(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",Mz,[(0,a.createElementVNode)("img",{src:l.imgSrc,alt:"Profile Picture",class:"XHRM-profile-picture-img"},null,8,Ez)])}const Tz=`${window.appGlobal.publicPath}/images/default-photo.png`;var Bz={name:"ProfilePicture",props:{id:{type:Number,required:!0}},setup(e){const t=(0,a.computed)(()=>e.id?`${window.appGlobal.baseUrl}/pim/viewPhoto/empNumber/${e.id}`:Tz);return{imgSrc:t}}};const Iz=(0,i.A)(Bz,[["render",Rz],["__scopeId","data-v-480df21e"]]);var Az=Iz,Hz={name:"SummaryCard",components:{"oxd-icon":X.dp,"oxd-sheet":X.tg,"profile-picture":Az},props:{employeeId:{type:Number,required:!0},employeeName:{type:String,required:!0},employeeDesignation:{type:String,required:!1,default:null},employeeSubUnit:{type:String,default:""},employeeLocation:{type:String,default:""},showBackButton:{type:Boolean,default:!1}},emits:["hide-details"],computed:{hasDefaultSlot(){return!!this.$slots.default},cardTitleClasses(){return{"XHRM-directory-card-header":!0,"--break-words":!this.hasDefaultSlot}},cardSubTitleClasses(){return{"XHRM-directory-card-subtitle":!0,"--break-words":!this.hasDefaultSlot}},cardDescriptionClasses(){return{"XHRM-directory-card-description":!0,"--break-words":!this.hasDefaultSlot}}}};const Xz=(0,i.A)(Hz,[["render",$z],["__scopeId","data-v-6e7ed6a6"]]);var Uz=Xz;const Lz={class:"XHRM-directory-card-rounded-body"},Pz={class:"XHRM-directory-card-icon"},qz={class:"XHRM-directory-card-icon"},Fz={class:"XHRM-directory-card-hover-body"},zz={class:"XHRM-directory-card-hover-body XHRM-directory-card-hover-icon"},jz={class:"XHRM-directory-card-hover-body"},Oz={class:"XHRM-directory-card-hover-body XHRM-directory-card-hover-icon"};function Gz(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-icon-button"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("qr-code");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.withDirectives)((0,a.createVNode)(r,null,null,512),[[a.vShow,n.employeeWorkEmail||n.employeeWorkTelephone]]),(0,a.withDirectives)((0,a.createElementVNode)("div",Lz,[(0,a.withDirectives)((0,a.createElementVNode)("div",Pz,[(0,a.createVNode)(s,{"display-type":"success",name:"telephone-fill",onClick:(0,a.withModifiers)(i.openClientTelephone,["stop"])},null,8,["onClick"])],512),[[a.vShow,n.employeeWorkTelephone]]),(0,a.withDirectives)((0,a.createElementVNode)("div",qz,[(0,a.createVNode)(s,{"display-type":"danger",name:"envelope-fill",onClick:(0,a.withModifiers)(i.openClientEmail,["stop"])},null,8,["onClick"])],512),[[a.vShow,n.employeeWorkEmail]])],512),[[a.vShow,n.employeeWorkEmail||n.employeeWorkTelephone]]),(0,a.withDirectives)((0,a.createElementVNode)("div",{class:"XHRM-directory-card-hover",onMouseleave:t[0]||(t[0]=e=>n.showTelephoneClip=!1),onMouseover:t[1]||(t[1]=e=>n.showTelephoneClip=!0)},[(0,a.createElementVNode)("div",Fz,[(0,a.createVNode)(d,{type:"toast-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("pim.work_telephone")),1)]),_:1}),(0,a.createVNode)(d,{ref:"cloneTelephone",type:"toast-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.employeeWorkTelephone),1)]),_:1},512)]),(0,a.createElementVNode)("div",zz,[(0,a.withDirectives)((0,a.createVNode)(s,{name:"files",onClick:(0,a.withModifiers)(i.copyTelephone,["stop"])},null,8,["onClick"]),[[a.vShow,n.showTelephoneClip||o.isMobile]])])],544),[[a.vShow,n.employeeWorkTelephone]]),(0,a.withDirectives)((0,a.createVNode)(r,null,null,512),[[a.vShow,n.employeeWorkTelephone]]),(0,a.withDirectives)((0,a.createElementVNode)("div",{class:"XHRM-directory-card-hover",onMouseleave:t[2]||(t[2]=e=>n.showEmailClip=!1),onMouseover:t[3]||(t[3]=e=>n.showEmailClip=!0)},[(0,a.createElementVNode)("div",jz,[(0,a.createVNode)(d,{type:"toast-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.work_email")),1)]),_:1}),(0,a.createVNode)(d,{ref:"cloneEmail",type:"toast-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.employeeWorkEmail),1)]),_:1},512)]),(0,a.createElementVNode)("div",Oz,[(0,a.withDirectives)((0,a.createVNode)(s,{name:"files",onClick:(0,a.withModifiers)(i.copyEmail,["stop"])},null,8,["onClick"]),[[a.vShow,n.showEmailClip||o.isMobile]])])],544),[[a.vShow,n.employeeWorkEmail]]),(0,a.withDirectives)((0,a.createVNode)(r,null,null,512),[[a.vShow,n.employeeWorkEmail]]),n.qrPayload&&(n.employeeWorkTelephone||n.employeeWorkEmail)?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,value:n.qrPayload},null,8,["value"])):(0,a.createCommentVNode)("",!0)],64)}var Qz=o(7583),Kz={name:"QRCode",props:{value:{type:String,required:!0}},setup(e){const t=(0,a.ref)(""),o=async()=>{const o=await(0,Qz.dY)(String(e.value),{type:"image/png",width:140});t.value=o||""};return(0,a.watch)(()=>e.value,o),(0,a.onBeforeMount)(o),()=>(0,a.h)("img",{src:t.value,class:"XHRM-qr-code"})}};const Wz=(0,i.A)(Kz,[["__scopeId","data-v-444286d7"]]);var Jz=Wz,Yz={name:"EmployeeDetails",components:{"qr-code":Jz,"oxd-divider":X.zQ},props:{employeeId:{type:Number,required:!0},isMobile:{type:Boolean,default:!1}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/directory/employees");return{http:e}},data(){return{employeeWorkTelephone:null,employeeWorkEmail:null,showTelephoneClip:!1,showEmailClip:!1,toGoEmail:null,qrPayload:null,employeeName:null}},watch:{employeeId:function(){this.callEmployeeDetailsApi()}},beforeMount(){this.callEmployeeDetailsApi()},methods:{openClientTelephone(){window.location.href="tel:"+this.employeeWorkTelephone},openClientEmail(){window.location.href="mailto:"+this.employeeWorkEmail},copyEmail(){navigator.clipboard?.writeText(this.employeeWorkEmail)},copyTelephone(){navigator.clipboard?.writeText(this.employeeWorkTelephone)},callEmployeeDetailsApi(){this.http.get(this.employeeId,{model:"detailed"}).then(e=>{const{data:t}=e.data;this.employeeName={firstName:t.firstName,middleName:t.middleName,lastName:t.lastName},this.employeeWorkEmail=t.contactInfo?.workEmail,this.employeeWorkTelephone=t.contactInfo?.workTelephone,this.generateQrPayload()})},generateQrPayload(){let e="";e+=`N:${this.employeeName?.lastName||""};`,e+=`${this.employeeName?.firstName||""};`,e+=`${this.employeeName?.middleName||""};\n`,this.employeeWorkTelephone&&(e+=`TEL;CELL:${this.employeeWorkTelephone}\n`),this.employeeWorkEmail&&(e+=`EMAIL;WORK;INTERNET:${this.employeeWorkEmail}\n`),this.qrPayload=`BEGIN:VCARD\nVERSION:3.0\n${e}END:VCARD\n`}}};const Zz=(0,i.A)(Yz,[["render",Gz],["__scopeId","data-v-672ec2c0"]]);var ej=Zz;function tj(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-details"),s=(0,a.resolveComponent)("summary-card");return(0,a.openBlock)(),(0,a.createBlock)(s,{"employee-id":o.employeeId,"show-back-button":!0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{"employee-id":o.employeeId},null,8,["employee-id"])]),_:1},8,["employee-id"])}var oj={name:"SummaryCardDetails",components:{"employee-details":ej,"summary-card":Uz},props:{employeeId:{type:Number,required:!0}}};const aj=(0,i.A)(oj,[["render",tj]]);var lj=aj;const nj={employeeNumber:null,jobTitleId:null,locationId:null};var ij={name:"CorporateDirectory",components:{"summary-card":Uz,"oxd-loading-spinner":X.VJ,"employee-details":ej,"summary-card-details":lj,"employee-autocomplete":$a},props:{jobTitles:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]}},setup(){const{$t:e}=Ie(),{noRecordsFound:t}=_t(),o=(0,X.Qs)(),l={employee:[Wt(100),$o]},n=t=>t.map(t=>({id:t.empNumber,employeeName:`${t.firstName} ${t.middleName} ${t.lastName} `+(t.terminationId?e("general.past_employee"):""),employeeJobTitle:t.jobTitle?.isDeleted?`${t.jobTitle?.title} `+e("general.deleted"):t.jobTitle?.title,employeeSubUnit:t.subunit?.name,employeeLocation:t.location?.name})),i=new H(window.appGlobal.baseUrl,"/api/v2/directory/employees"),r=14,s=(0,a.reactive)({total:0,offset:0,employees:[],currentIndex:-1,isLoading:!1,filters:{...nj}}),d=()=>{s.isLoading=!0,i.getAll({limit:r,offset:s.offset,locationId:s.filters.locationId?.id,empNumber:s.filters.employeeNumber?.id,jobTitleId:s.filters.jobTitleId?.id}).then(e=>{const{data:o,meta:a}=e.data;s.total=a?.total||0,Array.isArray(o)&&(s.employees=[...s.employees,...n(o)]),0===s.total&&t()}).finally(()=>s.isLoading=!1)},{scrollerRef:c}=Aq(()=>{s.employees.length>=s.total||(s.offset+=r,d())});return{rules:l,fetchData:d,scrollerRef:c,...(0,a.toRefs)(s),...(0,a.toRefs)(o)}},computed:{isMobile(){return this.windowWidth<800},isEmployeeSelected(){return this.currentIndex>=0},oxdGridClasses(){return{"XHRM-container":!0,"XHRM-container-min-display":this.isEmployeeSelected}},colSize(){return this.windowWidth>=1920?this.isEmployeeSelected?5:7:this.isEmployeeSelected?3:4}},beforeMount(){this.fetchData()},methods:{hideEmployeeDetails(){this.currentIndex=-1},showEmployeeDetails(e){this.currentIndex!=e?this.currentIndex=e:this.hideEmployeeDetails()},onSearch(){this.hideEmployeeDetails(),this.employees=[],this.offset=0,this.fetchData()},onReset(){this.hideEmployeeDetails(),this.employees=[],this.offset=0,this.filters={...nj},this.fetchData()}}};const rj=(0,i.A)(ij,[["render",Sz],["__scopeId","data-v-a43196aa"]]);var sj=rj,dj={"corporate-directory-employee-list":sj};const cj={class:"XHRM-login-form"},uj={class:"XHRM-login-error"},mj=["value"],pj={class:"XHRM-login-forgot"},hj={class:"XHRM-login-footer"},gj={key:0,class:"XHRM-login-footer-sm"},vj={href:"https://www.linkedin.com/company/XHRM/mycompany/",target:"_blank"},fj={href:"https://www.facebook.com/XHRM/",target:"_blank"},yj={href:"https://twitter.com/XHRM?lang=en",target:"_blank"},Cj={href:"https://www.youtube.com/c/XHRMInc",target:"_blank"};function Vj(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-alert"),d=(0,a.resolveComponent)("oxd-sheet"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form-actions"),h=(0,a.resolveComponent)("oxd-form"),g=(0,a.resolveComponent)("oxd-divider"),v=(0,a.resolveComponent)("social-media-auth"),f=(0,a.resolveComponent)("oxd-icon"),y=(0,a.resolveComponent)("login-layout");return(0,a.openBlock)(),(0,a.createBlock)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-login-title",tag:"h5"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.login")),1)]),_:1}),(0,a.createElementVNode)("div",cj,[(0,a.createElementVNode)("div",uj,[(0,a.createVNode)(s,{show:null!==o.error,message:o.error?.message||"",type:"error"},null,8,["show","message"]),o.isDemoMode?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,type:"gray-lighten-2",class:"XHRM-demo-credentials"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[...t[2]||(t[2]=[(0,a.createTextVNode)("Username : Admin",-1)])]),_:1}),(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[...t[3]||(t[3]=[(0,a.createTextVNode)("Password : admin123",-1)])]),_:1})]),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(h,{ref:"loginForm",method:"post",action:i.submitUrl,onSubmitValid:i.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("input",{name:"_token",value:o.token,type:"hidden"},null,8,mj),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),name:"username",label:e.$t("general.username"),"label-icon":"person",placeholder:e.$t("auth.username"),rules:n.rules.username,autofocus:""},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),name:"password",label:e.$t("general.password"),"label-icon":"key",placeholder:e.$t("auth.password"),type:"password",rules:n.rules.password},null,8,["modelValue","label","placeholder","rules"])]),_:1}),(0,a.createVNode)(p,{class:"XHRM-login-action"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{class:"XHRM-login-button","display-type":"main",label:e.$t("auth.login"),type:"submit"},null,8,["label"])]),_:1}),(0,a.createElementVNode)("div",pj,[(0,a.createVNode)(r,{class:"XHRM-login-forgot-header",onClick:i.navigateUrl},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.forgot_password"))+"? ",1)]),_:1},8,["onClick"])])]),_:1},8,["action","onSubmitValid"]),o.authenticators.length>0?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(g,{class:"XHRM-login-seperator"}),(0,a.createVNode)(v,{authenticators:o.authenticators},null,8,["authenticators"])],64)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",hj,[o.showSocialMedia?((0,a.openBlock)(),(0,a.createElementBlock)("div",gj,[(0,a.createElementVNode)("a",vj,[(0,a.createVNode)(f,{type:"svg",class:"XHRM-sm-icon",name:"linkedinFill"})]),(0,a.createElementVNode)("a",fj,[(0,a.createVNode)(f,{type:"svg",class:"XHRM-sm-icon",name:"facebookFill"})]),(0,a.createElementVNode)("a",yj,[(0,a.createVNode)(f,{type:"svg",class:"XHRM-sm-icon",name:"twitterFill"})]),(0,a.createElementVNode)("a",Cj,[(0,a.createVNode)(f,{type:"svg",class:"XHRM-sm-icon",name:"youtubeFill"})])])):(0,a.createCommentVNode)("",!0),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])]),_:3})}const bj={class:"XHRM-login-layout"},wj={class:"XHRM-login-layout-blob"},xj={class:"XHRM-login-container"},Nj={class:"XHRM-login-slot-wrapper"},kj={class:"XHRM-login-slot"},_j={class:"XHRM-login-logo-mobile"},Sj=["src"],Dj={class:"XHRM-login-logo"},$j=["src"];function Mj(e,t,o,l,n,i){const r=(0,a.resolveComponent)("login-branding");return(0,a.openBlock)(),(0,a.createElementBlock)("div",bj,[(0,a.createElementVNode)("div",wj,[(0,a.createElementVNode)("div",xj,[(0,a.createElementVNode)("div",Nj,[(0,a.createVNode)(r,{"img-src":o.loginBannerSrc},null,8,["img-src"]),(0,a.createElementVNode)("div",kj,[(0,a.createElementVNode)("div",_j,[(0,a.createElementVNode)("img",{src:o.loginLogoSrc,alt:"XHRM-logo"},null,8,Sj)]),(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)])])]),(0,a.createElementVNode)("div",Dj,[(0,a.createElementVNode)("img",{src:o.loginLogoSrc,alt:"XHRM-logo"},null,8,$j)])])])}var Ej={name:"LoginLayout",components:{"login-branding":AR},props:{loginLogoSrc:{type:String,required:!0},loginBannerSrc:{type:String,required:!0}}};const Rj=(0,i.A)(Ej,[["render",Mj],["__scopeId","data-v-2989e16e"]]);var Tj=Rj;const Bj={class:"XHRM-social-auth"};function Ij(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("auth-button");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-social-auth-header"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.or_login_with")),1)]),_:1})]),(0,a.createElementVNode)("div",Bj,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.socialAuthenticators,e=>((0,a.openBlock)(),(0,a.createBlock)(s,{key:e.id,label:e.label,style:(0,a.normalizeStyle)({background:"url("+e.backgroundImage+") no-repeat left center","background-size":"contain","text-align":"center",padding:"1px"}),onClick:(0,a.withModifiers)(t=>i.onClickAction(e.id),["prevent"])},null,8,["label","style","onClick"]))),128))])],64)}var Aj={name:"AuthButton",props:{label:{type:String,required:!0}},setup(e){return()=>(0,a.h)("a",{title:e.label,class:"XHRM-auth-button"},(0,a.h)(X.FA,{tag:"p",class:"XHRM-auth-button-text"},()=>e.label))}};const Hj=(0,i.A)(Aj,[["__scopeId","data-v-5d7e287f"]]);var Xj=Hj,Uj={name:"SocialMediaAuth",components:{"auth-button":Xj},props:{authenticators:{type:Array,default:()=>[]}},setup(e){const t=new H(window.appGlobal.baseUrl,""),o=(0,a.computed)(()=>e.authenticators.map(e=>({...e,backgroundImage:l(e.url)}))),l=e=>{const t=e.toLowerCase();switch(!0){case t.includes("google"):return`${window.appGlobal.publicPath}/images/google.svg`;case t.includes("microsoft"):return`${window.appGlobal.publicPath}/images/microsoft.svg`;case t.includes("okta"):return`${window.appGlobal.publicPath}/images/okta.svg`;case t.includes("keycloak"):return`${window.appGlobal.publicPath}/images/keycloak.svg`;case t.includes("auth0"):return`${window.appGlobal.publicPath}/images/auth0.svg`;default:return`${window.appGlobal.publicPath}/images/default.svg`}};return{socialAuthenticators:o,http:t}},methods:{onClickAction(e){I("/openidauth/openIdCredentials/{providerId}",{providerId:e})}}};const Lj=(0,i.A)(Uj,[["render",Ij],["__scopeId","data-v-c1276a2a"]]);var Pj=Lj,qj={components:{"oxd-icon":X.dp,"oxd-alert":X.qO,"oxd-sheet":X.tg,"login-layout":Tj,"social-media-auth":Pj},props:{error:{type:Object,default:()=>null},token:{type:String,required:!0},showSocialMedia:{type:Boolean,default:!0},isDemoMode:{type:Boolean,default:!1},authenticators:{type:Array,default:()=>[]}},data(){return{username:"",password:"",rules:{username:[Kt],password:[Kt]},submitted:!1}},computed:{submitUrl(){return B("/auth/validate")}},beforeMount(){setTimeout(()=>{A()},12e5)},methods:{onSubmit(){this.submitted||(this.submitted=!0,this.$refs.loginForm.$el.submit())},navigateUrl(){I("/auth/requestPasswordResetCode")}}};const Fj=(0,i.A)(qj,[["render",Vj],["__scopeId","data-v-2a1a6e57"]]);var zj=Fj;function jj(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-alert");return(0,a.openBlock)(),(0,a.createBlock)(r,{show:!0,type:"error",message:e.$t("auth.credential_required")},null,8,["message"])}var Oj={components:{"oxd-alert":X.qO}};const Gj=(0,i.A)(Oj,[["render",jj]]);var Qj=Gj;const Kj={class:"XHRM-forgot-password-container"},Wj={class:"XHRM-forgot-password-wrapper"},Jj={class:"XHRM-card-container"},Yj=["value"],Zj=["value"],eO={class:"XHRM-forgot-password-buttons"};function tO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("card-note"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("password-strength-indicator"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Kj,[(0,a.createElementVNode)("div",Wj,[(0,a.createElementVNode)("div",Jj,[(0,a.createVNode)(h,{ref:"resetForm",method:"post",action:i.submitUrl,onSubmitValid:i.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.reset_password")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(d,{"note-text":e.$t("auth.set_new_password"),class:"XHRM-forgot-password-card-note"},null,8,["note-text"]),(0,a.createElementVNode)("input",{name:"_token",value:o.token,type:"hidden"},null,8,Yj),(0,a.createElementVNode)("input",{name:"resetCode",value:o.code,type:"hidden"},null,8,Zj),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{value:o.username,label:e.$t("auth.username"),readonly:"",name:"username","label-icon":"person"},null,8,["value","label"])]),_:1}),(0,a.createVNode)(u,{class:"XHRM-forgot-password-row"},{default:(0,a.withCtx)(()=>[n.user.newPassword?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"password-strength":l.passwordStrength},null,8,["password-strength"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,{modelValue:n.user.newPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.user.newPassword=e),rules:n.rules.newPassword,label:e.$t("auth.new_password"),placeholder:e.$t("auth.password"),name:"password",type:"password","label-icon":"key",autocomplete:"off"},null,8,["modelValue","rules","label","placeholder"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.user.confirmPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>n.user.confirmPassword=e),rules:n.rules.confirmPassword,placeholder:e.$t("auth.password"),label:e.$t("general.confirm_password"),type:"password","label-icon":"key",autocomplete:"off",name:"confirmPassword"},null,8,["modelValue","rules","placeholder","label"])]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",eO,[(0,a.createVNode)(p,{label:e.$t("general.save"),size:"large",type:"submit","display-type":"secondary",class:"XHRM-forgot-password-button"},null,8,["label"])])]),_:1},8,["action","onSubmitValid"])])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}function oO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-icon");return(0,a.openBlock)(),(0,a.createBlock)(r,{class:(0,a.normalizeClass)({"XHRM-card-note":!0,"XHRM-card-note--background":o.hasNote,"XHRM-card-note--icon":o.hasNoteIcon})},{default:(0,a.withCtx)(()=>[o.hasNote?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,class:"XHRM-sub-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.note"))+": ",1)]),_:1})):(0,a.createCommentVNode)("",!0),o.hasNoteIcon?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,tag:"span",class:"XHRM-card-note-icon"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{name:"exclamation-triangle",class:"XHRM-card-icon"})]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(r,{class:(0,a.normalizeClass)({"XHRM-card-note-text":o.hasNoteIcon})},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.noteText),1)]),_:1},8,["class"])]),_:1},8,["class"])}var aO={name:"CardNote",components:{"oxd-icon":X.dp},props:{noteText:{type:String,required:!0},hasNote:{type:Boolean,default:!1},hasNoteIcon:{type:Boolean,required:!1}}};const lO=(0,i.A)(aO,[["render",oO],["__scopeId","data-v-2323968a"]]);var nO=lO,iO={name:"ResetPassword",components:{"card-note":nO,"password-strength-indicator":za},props:{username:{type:String,required:!0},token:{type:String,required:!0},code:{type:String,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,""),{passwordStrength:t,validatePassword:o}=La(e);return{http:e,passwordStrength:t,validatePassword:o}},data(){return{user:{username:"",newPassword:"",confirmPassword:""},rules:{newPassword:[Kt,Wt(64),(0,X.Ld)(this.validatePassword,500)],confirmPassword:[Kt,Wt(64),e=>!!e&&e===this.user.newPassword||this.$t("general.passwords_do_not_match")]}}},computed:{submitUrl(){return B("/auth/resetPassword")}},methods:{onSubmit(){this.$refs.resetForm.$el.submit()}}};const rO=(0,i.A)(iO,[["render",tO],["__scopeId","data-v-84306b90"]]);var sO=rO;const dO={class:"XHRM-forgot-password-container"},cO={class:"XHRM-forgot-password-wrapper"},uO={class:"XHRM-card-container"},mO={class:"XHRM-login-error"},pO=["value"],hO=["value"],gO={class:"XHRM-forgot-password-buttons"};function vO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-alert"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("password-strength-indicator"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",dO,[(0,a.createElementVNode)("div",cO,[(0,a.createElementVNode)("div",uO,[(0,a.createVNode)(h,{ref:"resetForm",method:"post",action:i.submitUrl,onSubmitValid:i.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.change_weak_password")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",mO,[(0,a.createVNode)(d,{show:!0,message:o.invalidCode?e.$t("auth.invalid_password_reset_code"):o.error?.message||e.$t("auth.password_not_strong"),type:"error"},null,8,["message"])]),o.invalidCode?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createElementVNode)("input",{name:"resetCode",value:o.code,type:"hidden"},null,8,pO),(0,a.createElementVNode)("input",{name:"_token",value:o.token,type:"hidden"},null,8,hO),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{value:o.username,label:e.$t("auth.username"),readonly:"",name:"username","label-icon":"person"},null,8,["value","label"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.user.currentPassword,"onUpdate:modelValue":t[0]||(t[0]=e=>n.user.currentPassword=e),rules:n.rules.currentPassword,label:e.$t("pim.current_password"),type:"password","label-icon":"key",autocomplete:"off",name:"currentPassword"},null,8,["modelValue","rules","label"])]),_:1}),(0,a.createVNode)(u,{class:"XHRM-forgot-password-row"},{default:(0,a.withCtx)(()=>[n.user.newPassword?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"password-strength":l.passwordStrength},null,8,["password-strength"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,{modelValue:n.user.newPassword,"onUpdate:modelValue":t[1]||(t[1]=e=>n.user.newPassword=e),rules:n.rules.newPassword,label:e.$t("auth.new_password"),placeholder:e.$t("auth.password"),name:"password",type:"password","label-icon":"key",autocomplete:"off"},null,8,["modelValue","rules","label","placeholder"])]),_:1}),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.user.confirmPassword,"onUpdate:modelValue":t[2]||(t[2]=e=>n.user.confirmPassword=e),rules:n.rules.confirmPassword,placeholder:e.$t("auth.password"),label:e.$t("general.confirm_password"),type:"password","label-icon":"key",autocomplete:"off",name:"confirmPassword"},null,8,["modelValue","rules","placeholder","label"])]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",gO,[(0,a.createVNode)(p,{label:e.$t("general.save"),size:"large",type:"submit","display-type":"secondary",class:"XHRM-forgot-password-button"},null,8,["label"])])],64))]),_:1},8,["action","onSubmitValid"])])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var fO={name:"ResetWeakPassword",components:{"password-strength-indicator":za,"oxd-alert":X.qO},props:{username:{type:String,required:!0},code:{type:String,required:!0},token:{type:String,required:!0},error:{type:Object,default:()=>null},invalidCode:{type:Boolean,default:()=>!1}},setup(){const e=new H(window.appGlobal.baseUrl,""),{passwordStrength:t,validatePassword:o}=La(e);return{http:e,passwordStrength:t,validatePassword:o}},data(){return{user:{username:"",currentPassword:"",confirmPassword:""},rules:{currentPassword:[Kt,Wt(64)],newPassword:[Kt,Wt(64),(0,X.Ld)(this.validatePassword,500)],confirmPassword:[Kt,Wt(64),e=>!!e&&e===this.user.newPassword||this.$t("general.passwords_do_not_match")]}}},computed:{submitUrl(){return B("/auth/resetWeakPassword")}},methods:{onSubmit(){this.$refs.resetForm.$el.submit()}}};const yO=(0,i.A)(fO,[["render",vO],["__scopeId","data-v-217cbfbf"]]);var CO=yO;const VO={class:"XHRM-forgot-password-container"},bO={class:"XHRM-forgot-password-wrapper"},wO={class:"XHRM-card-container"};function xO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("card-note");return(0,a.openBlock)(),(0,a.createElementBlock)("div",VO,[(0,a.createElementVNode)("div",bO,[(0,a.createElementVNode)("div",wO,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-forgot-password-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.reset_password")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(d,{"note-text":e.$t("auth.reset_password_token_expired_note"),class:"XHRM-forgot-password-card-note","has-note-icon":""},null,8,["note-text"]),(0,a.createVNode)(r,{class:"XHRM-forgot-password-reset"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"span",class:"XHRM-forgot-password-reset--link",onClick:i.navigateUrl},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.click_here")),1)]),_:1},8,["onClick"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("auth.request_new_password_token")),1)]),_:1})])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var NO={name:"ResetPasswordError",components:{"card-note":nO},methods:{navigateUrl(){I("/auth/requestPasswordResetCode")}}};const kO=(0,i.A)(NO,[["render",xO],["__scopeId","data-v-04582c95"]]);var _O=kO;const SO={class:"XHRM-admin-access-container"},DO={class:"XHRM-card-container"},$O=["value"],MO={class:"XHRM-admin-access-button-container"};function EO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-alert"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-button"),m=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",SO,[(0,a.createElementVNode)("div",DO,[(0,a.createVNode)(m,{ref:"verifyForm",method:"post",action:i.submitUrl,onSubmitValid:i.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-admin-access-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.admin_access")),1)]),_:1}),t[1]||(t[1]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(n.noteContainerClass)},[(0,a.createVNode)(r,{tag:"toast-message"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.admin_access_note")),1)]),_:1})],2),(0,a.createVNode)(s,{show:null!==o.error,type:"error",message:o.error?.message},null,8,["show","message"]),(0,a.createElementVNode)("input",{name:"_token",value:o.token,type:"hidden"},null,8,$O),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{"model-value":o.username,name:"username",label:e.$t("general.username"),"label-icon":"person",disabled:""},null,8,["model-value","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.password,"onUpdate:modelValue":t[0]||(t[0]=e=>n.password=e),name:"password",label:e.$t("general.password"),"label-icon":"key",type:"password",rules:n.rules.password,autofocus:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createElementVNode)("div",MO,[(0,a.createVNode)(u,{class:"XHRM-admin-access-button","display-type":"ghost",size:"large",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(u,{class:"XHRM-admin-access-button","display-type":"secondary",size:"large",label:e.$t("general.confirm"),type:"submit"},null,8,["label"])])]),_:1},8,["action","onSubmitValid"])]),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var RO={name:"AdministratorAccess",components:{"oxd-alert":X.qO},props:{username:{type:String,required:!0},error:{type:Object,default:()=>null},token:{type:String,required:!0},backUrl:{type:String,default:null}},data(){return{password:"",rules:{password:[Kt]},noteClasses:{"XHRM-admin-access-note":!0,"--padding":null===this.error},noteContainerClass:{"XHRM-admin-access-note-container":null===this.error}}},computed:{submitUrl(){return B("/auth/adminVerify")}},methods:{onSubmit(){this.$refs.verifyForm.$el.submit()},onCancel(){I(this.backUrl)}}};const TO=(0,i.A)(RO,[["render",EO],["__scopeId","data-v-86b90e66"]]);var BO=TO;const IO={class:"XHRM-forgot-password-container"},AO={class:"XHRM-forgot-password-wrapper"},HO={class:"XHRM-card-container"},XO=["value"],UO={class:"XHRM-forgot-password-button-container"};function LO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("card-note"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",IO,[(0,a.createElementVNode)("div",AO,[(0,a.createElementVNode)("div",HO,[(0,a.createVNode)(p,{ref:"resetForm",method:"post",action:i.submitUrl,onSubmitValid:i.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-forgot-password-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.reset_password")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(d,{"note-text":e.$t("auth.username_identify_reset_note"),class:"XHRM-forgot-password-card-note"},null,8,["note-text"]),(0,a.createElementVNode)("input",{name:"_token",value:o.token,type:"hidden"},null,8,XO),(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),name:"username",label:e.$t("auth.username"),"label-icon":"person",rules:n.rules.username,placeholder:e.$t("auth.username")},null,8,["modelValue","label","rules","placeholder"])]),_:1}),(0,a.createVNode)(s),(0,a.createElementVNode)("div",UO,[(0,a.createVNode)(m,{class:"XHRM-forgot-password-button XHRM-forgot-password-button--cancel","display-type":"ghost",size:"large",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(m,{class:"XHRM-forgot-password-button XHRM-forgot-password-button--reset","display-type":"secondary",size:"large",label:e.$t("auth.reset_password"),type:"submit"},null,8,["label"])])]),_:1},8,["action","onSubmitValid"])])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var PO={name:"RequestResetPassword",components:{"card-note":nO},props:{token:{type:String,required:!0}},data(){return{username:"",rules:{username:[Kt]}}},computed:{submitUrl(){return B("/auth/requestResetPassword")}},methods:{onCancel(){I("/auth/login")},onSubmit(){this.$refs.resetForm.$el.submit()}}};const qO=(0,i.A)(PO,[["render",LO],["__scopeId","data-v-611b8438"]]);var FO=qO;const zO={class:"XHRM-forgot-password-container"},jO={class:"XHRM-forgot-password-wrapper"},OO={class:"XHRM-card-container"};function GO(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("card-note");return(0,a.openBlock)(),(0,a.createElementBlock)("div",zO,[(0,a.createElementVNode)("div",jO,[(0,a.createElementVNode)("div",OO,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-forgot-password-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.reset_password_link_sent_successfully")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(d,{"note-text":e.$t("auth.reset_password_link_via_email"),class:"XHRM-forgot-password-card-note"},null,8,["note-text"]),(0,a.createVNode)(d,{"note-text":e.$t("auth.follow_link_to_select_password"),class:"XHRM-forgot-password-card-note"},null,8,["note-text"]),(0,a.createVNode)(d,{"note-text":e.$t("auth.email_not_receive_note"),class:"XHRM-forgot-password-card-note","has-note":""},null,8,["note-text"])])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var QO={name:"ResetPasswordSuccess",components:{"card-note":nO}};const KO=(0,i.A)(QO,[["render",GO],["__scopeId","data-v-08d77c8c"]]);var WO=KO;const JO={class:"XHRM-forgot-password-container"},YO={class:"XHRM-forgot-password-wrapper"},ZO={class:"XHRM-card-container"};function eG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("card-note");return(0,a.openBlock)(),(0,a.createElementBlock)("div",JO,[(0,a.createElementVNode)("div",YO,[(0,a.createElementVNode)("div",ZO,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-forgot-password-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.reset_password")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(d,{"note-text":e.$t("auth.configured_receive_email_notification_note"),class:"XHRM-forgot-password-card-note","has-note-icon":""},null,8,["note-text"]),(0,a.createVNode)(r,{class:"XHRM-forgot-password-reset"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"span",class:"XHRM-forgot-password-reset--link",onClick:i.navigateUrl},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.click_here")),1)]),_:1},8,["onClick"]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("auth.back_to_login")),1)]),_:1})])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var tG={name:"EmailConfigurationWarning",components:{"card-note":nO},methods:{navigateUrl(){I("/auth/login")}}};const oG=(0,i.A)(tG,[["render",eG],["__scopeId","data-v-094bcc57"]]);var aG=oG;const lG={class:"XHRM-forgot-password-container"},nG={class:"XHRM-forgot-password-wrapper"},iG={class:"XHRM-card-container"};function rG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("card-note");return(0,a.openBlock)(),(0,a.createElementBlock)("div",lG,[(0,a.createElementVNode)("div",nG,[(0,a.createElementVNode)("div",iG,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-forgot-password-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("auth.reset_password_link_was_not_sent")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(d,{"note-text":e.$t("auth.your_reset_password_link_not_sent_error"),class:"XHRM-forgot-password-card-note"},null,8,["note-text"]),(0,a.createVNode)(d,{"note-text":e.$t("auth.please_contact_admin_reset_password"),class:"XHRM-forgot-password-card-note"},null,8,["note-text"])])]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)])}var sG={name:"ResetPasswordFailure",components:{"card-note":nO}};const dG=(0,i.A)(sG,[["render",rG],["__scopeId","data-v-2d267c40"]]);var cG=dG,uG={"auth-login":zj,"auth-forbidden":Qj,"reset-password":sO,"auth-admin-access":BO,"reset-weak-password":CO,"reset-password-error":_O,"reset-password-success":WO,"reset-password-failure":cG,"request-reset-password":FO,"email-configuration-warning":aG};function mG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-attendance-widget"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("my-action-summary-widget"),c=(0,a.resolveComponent)("quick-launch-widget"),u=(0,a.resolveComponent)("buzz-latest-post-widget"),m=(0,a.resolveComponent)("employees-on-leave-widget"),p=(0,a.resolveComponent)("employee-subunit-widget"),h=(0,a.resolveComponent)("employee-location-widget"),g=(0,a.resolveComponent)("oxd-grid");return(0,a.openBlock)(),(0,a.createBlock)(g,{class:"XHRM-dashboard-grid",cols:3},{default:(0,a.withCtx)(()=>[e.$can.read("dashboard_time_widget")?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r)]),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(s,{class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d)]),_:1}),(0,a.createVNode)(s,{class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c)]),_:1}),e.$can.read("dashboard_buzz_widget")?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u)]),_:1})):(0,a.createCommentVNode)("",!0),e.$can.read("dashboard_leave_widget")?((0,a.openBlock)(),(0,a.createBlock)(s,{key:2,class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m)]),_:1})):(0,a.createCommentVNode)("",!0),e.$can.read("dashboard_subunit_widget")?((0,a.openBlock)(),(0,a.createBlock)(s,{key:3,class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p)]),_:1})):(0,a.createCommentVNode)("",!0),e.$can.read("dashboard_location_widget")?((0,a.openBlock)(),(0,a.createBlock)(s,{key:4,class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h)]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1})}const pG=["title"];function hG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-grid-item"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("base-widget");return(0,a.openBlock)(),(0,a.createBlock)(u,{icon:"lightning-charge-fill",empty:i.isEmpty,loading:n.isLoading,title:e.$t("dashboard.quick_launch")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:3,class:"XHRM-quick-launch"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.sortedActions,e=>((0,a.openBlock)(),(0,a.createBlock)(d,{key:e,class:"XHRM-quick-launch-card"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{"icon-type":"svg",class:"XHRM-quick-launch-icon",name:e.icon,title:e.label,onClick:t=>i.onClickAction(e.path)},null,8,["name","title","onClick"]),(0,a.createElementVNode)("div",{class:"XHRM-quick-launch-heading",title:e.label},[(0,a.createVNode)(s,{tag:"p",class:"--text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.label),1)]),_:2},1024)],8,pG)]),_:2},1024))),128))]),_:1})]),_:1},8,["empty","loading","title"])}const gG={class:"XHRM-dashboard-widget-header"},vG={class:"XHRM-dashboard-widget-name"},fG={key:0,class:"XHRM-dashboard-widget-body-nocontent"},yG=["src"];function CG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-loading-spinner"),u=(0,a.resolveComponent)("oxd-sheet");return(0,a.openBlock)(),(0,a.createBlock)(u,{gutters:!1,class:"XHRM-dashboard-widget"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",gG,[(0,a.createElementVNode)("div",vG,[(0,a.createVNode)(r,{name:o.icon,type:o.iconType,class:"XHRM-dashboard-widget-icon"},null,8,["name","type"]),(0,a.createVNode)(s,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.title),1)]),_:1})]),(0,a.renderSlot)(e.$slots,"action",{},void 0,!0)]),(0,a.createVNode)(d),o.loading?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,class:"XHRM-dashboard-widget-loader"})):((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,ref:"widgetRef",class:(0,a.normalizeClass)(l.widgetBodyClasses)},[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0),o.empty?((0,a.openBlock)(),(0,a.createElementBlock)("div",fG,[(0,a.createElementVNode)("img",{src:l.defaultPic,alt:"No Content",class:"XHRM-dashboard-widget-img"},null,8,yG),(0,a.createVNode)(s,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.emptyText||e.$t("dashboard.not_available")),1)]),_:1})])):(0,a.createCommentVNode)("",!0)],2))]),_:3})}var VG={name:"BaseWidget",components:{"oxd-sheet":X.tg,"oxd-icon":X.dp,"oxd-loading-spinner":X.VJ},props:{icon:{type:String,required:!0},title:{type:String,required:!0},loading:{type:Boolean,default:!1},empty:{type:Boolean,default:!1},emptyText:{type:String,default:null},iconType:{type:String,default:void 0}},setup(){const e=(0,a.ref)(),t=`${window.appGlobal.publicPath}/images/dashboard_empty_widget_watermark.png`,o=(0,a.computed)(()=>({"XHRM-dashboard-widget-body":!0,"--scroll-visible":e.value?.scrollHeight>e.value?.clientHeight}));return{widgetRef:e,defaultPic:t,widgetBodyClasses:o}}};const bG=(0,i.A)(VG,[["render",CG],["__scopeId","data-v-78c22e4f"]]);var wG=bG,xG={name:"QuickLaunchWidget",components:{"base-widget":wG},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/shortcuts");return{http:e}},data(){return{isLoading:!1,quickLaunchActions:[]}},computed:{isEmpty(){return 0===this.quickLaunchActions.length},sortedActions(){return[...this.quickLaunchActions].sort((e,t)=>e.order-t.order)}},beforeMount(){this.isLoading=!0;const e={"leave.assign_leave":{order:1,icon:"leaveassign",label:this.$t("leave.assign_leave"),path:"/leave/assignLeave"},"leave.leave_list":{order:2,icon:"leavelist",label:this.$t("leave.leave_list"),path:"/leave/viewLeaveList"},"time.employee_timesheet":{order:3,icon:"timesheets",label:this.$t("general.timesheets"),path:"/time/viewEmployeeTimesheet"},"leave.apply_leave":{order:4,icon:"leaveapply",label:this.$t("leave.apply_leave"),path:"/leave/applyLeave"},"leave.my_leave":{order:5,icon:"myleaves",label:this.$t("general.my_leave"),path:"/leave/viewMyLeaveList"},"time.my_timesheet":{order:6,icon:"mytimesheet",label:this.$t("time.my_timesheet"),path:"/time/viewMyTimesheet"}};this.http.getAll().then(t=>{const{data:o}=t.data;for(const a in o)o[a]&&this.quickLaunchActions.push(e[a])}).finally(()=>{this.isLoading=!1})},methods:{onClickAction(e){e&&I(e)}}};const NG=(0,i.A)(xG,[["render",hG],["__scopeId","data-v-e45f1a4a"]]);var kG=NG;const _G={class:"XHRM-buzz-widget-header-text"},SG=["src"];function DG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("profile-image"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("video-frame"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("base-widget");return(0,a.openBlock)(),(0,a.createBlock)(p,{icon:"camera-fill",empty:l.isEmpty,loading:l.isLoading,title:e.$t("dashboard.buzz_latest_posts"),"empty-text":e.$t("dashboard.no_posts_added")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{class:"XHRM-buzz-widget",cols:1},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(l.posts,e=>((0,a.openBlock)(),(0,a.createBlock)(u,{key:e,class:"XHRM-buzz-widget-card"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",{class:"XHRM-buzz-widget-header",onClick:t[0]||(t[0]=(...e)=>l.onClickPost&&l.onClickPost(...e))},[(0,a.createVNode)(r,{employee:e.employee},null,8,["employee"]),(0,a.createElementVNode)("div",_G,[(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-widget-header-emp"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.employeeFullName),1)]),_:2},1024),(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-widget-header-time"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.dateTime),1)]),_:2},1024)])]),(0,a.createVNode)(d,{class:"XHRM-buzz-widget-divider"}),e.text?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,tag:"p",class:"XHRM-buzz-widget-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.text),1)]),_:2},1024)):(0,a.createCommentVNode)("",!0),e.postImgSrc?((0,a.openBlock)(),(0,a.createElementBlock)("img",{key:1,src:e.postImgSrc,class:"XHRM-buzz-widget-picture"},null,8,SG)):(0,a.createCommentVNode)("",!0),e.postVideoSrc?((0,a.openBlock)(),(0,a.createBlock)(c,{key:2,"video-src":e.postVideoSrc},null,8,["video-src"])):(0,a.createCommentVNode)("",!0)]),_:2},1024))),128))]),_:1})]),_:1},8,["empty","loading","title","empty-text"])}const $G={class:"XHRM-buzz-video"},MG=["src"];function EG(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",$G,[(0,a.createElementVNode)("iframe",{src:i.embedURL,frameborder:"0",class:"XHRM-buzz-video-frame",title:"XHRM buzz video frame",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,MG)])}var RG={name:"VideoFrame",props:{videoSrc:{type:String,required:!0}},computed:{embedURL(){return new String(this.videoSrc).trim()}}};const TG=(0,i.A)(RG,[["render",EG],["__scopeId","data-v-8403f62e"]]);var BG=TG;function IG(e){const t=(t,o=0,a=!1)=>e.request({method:"GET",url:`/api/v2/buzz/shares/${t}/comments`,params:{limit:o,...a&&{model:"detailed"}}}),o=(t,o)=>e.request({method:"POST",url:`/api/v2/buzz/shares/${t}/comments`,data:{text:o}}),a=(t,o,a)=>e.request({method:"PUT",url:`/api/v2/buzz/shares/${t}/comments/${o}`,data:{text:a}}),l=(t,o)=>e.request({method:"DELETE",url:`/api/v2/buzz/shares/${t}/comments/${o}`}),n=t=>e.request({method:"GET",url:`/api/v2/buzz/shares/${t}/likes`}),i=(t,o,a,l)=>e.request({method:"GET",url:"/api/v2/buzz/feed",params:{limit:t,offset:o,sortOrder:a,sortField:l}}),r=(t,o)=>e.request({method:o?"DELETE":"POST",url:`/api/v2/buzz/shares/${t}/likes`}),s=(t,o)=>e.request({method:o?"DELETE":"POST",url:`/api/v2/buzz/comments/${t}/likes`}),d=t=>e.request({method:"DELETE",url:`/api/v2/buzz/shares/${t}`}),c=(t,o)=>("photo"===o.type&&delete o["link"],"video"===o.type&&(delete o["photos"],delete o["deletedPhotos"]),"text"===o.type&&(delete o["link"],delete o["photos"]),e.request({method:"PUT",url:`/api/v2/buzz/posts/${t}`,data:{...o},params:{model:"detailed"}})),u=(t,o)=>e.request({method:"PUT",url:`/api/v2/buzz/shares/${t}`,data:{text:o},params:{model:"detailed"}});return{fetchPosts:i,updatePost:c,deletePost:d,updatePostLike:r,fetchPostLikes:n,savePostComment:o,updateSharedPost:u,updatePostComment:a,deletePostComment:l,fetchPostComments:t,updateCommentLike:s}}const AG={class:"XHRM-buzz-profile-image"},HG=["src"];function XG(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",AG,[(0,a.createElementVNode)("img",{alt:"profile picture",src:i.imageSrc},null,8,HG)])}var UG={name:"ProfileImage",props:{employee:{type:Object,required:!0}},computed:{imageSrc(){return`../pim/viewPhoto/empNumber/${this.employee.empNumber}`}}};const LG=(0,i.A)(UG,[["render",XG],["__scopeId","data-v-2249a990"]]);var PG=LG,qG={name:"BuzzLatestPostWidget",components:{"base-widget":wG,"video-frame":BG,"profile-image":PG},setup(){const e=(0,a.ref)([]),t=(0,a.ref)(!1),{locale:o}=Ae(),{jsDateFormat:l,jsTimeFormat:n}=F(),{$tEmpName:i}=Ma(),{fetchPosts:r}=IG(new H(window.appGlobal.baseUrl,"")),s=(0,a.computed)(()=>0===e.value.length),d=()=>I("/buzz/viewBuzz");return(0,a.onBeforeMount)(()=>{t.value=!0,r(5,0,"DESC","share.createdAtUtc").then(t=>{const{data:a}=t.data;e.value=a.map(e=>{const{employee:t,createdDate:a,createdTime:r,originalPost:s}=e,d=e.video?.link||null,c=he(`${a} ${r} +00:00`,"yyyy-MM-dd HH:mm xxx"),u=ge(c,`${l} ${n}`,{locale:o}),m=i(t,{includeMiddle:!0,excludePastEmpTag:!1}),p=Array.isArray(e?.photoIds)?`${window.appGlobal.baseUrl}/buzz/photo/${e.photoIds[0]}`:null,h=s?s.text:e.text;return{...e,text:h,dateTime:u,postImgSrc:p,postVideoSrc:d,employeeFullName:m}})}).finally(()=>{t.value=!1})}),{posts:e,isEmpty:s,isLoading:t,onClickPost:d}}};const FG=(0,i.A)(qG,[["render",DG],["__scopeId","data-v-310fcb68"]]);var zG=FG;function jG(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-pie-chart"),s=(0,a.resolveComponent)("base-widget");return(0,a.openBlock)(),(0,a.createBlock)(s,{icon:"pie-chart-fill",loading:n.isLoading,title:e.$t("dashboard.employee_distribution_by_sub_unit")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{data:n.dataset,"aspect-ratio":!1,"custom-legend":!0,"custom-tooltip":!0,"wrapper-classes":"emp-distrib-chart"},null,8,["data"])]),_:1},8,["loading","title"])}var OG={name:"EmployeeSubunitWidget",components:{"base-widget":wG,"oxd-pie-chart":X.uI},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/employees/subunit");return{http:e}},data(){return{dataset:[],isLoading:!1}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t,meta:o}=e.data,a=[X.OK.COLOR_HEAT_WAVE,X.OK.COLOR_CHROME_YELLOW,X.OK.COLOR_YELLOW_GREEN,X.OK.COLOR_MOUNTAIN_MEADOW,X.OK.COLOR_PACIFIC_BLUE,X.OK.COLOR_BLEU_DE_FRANCE,X.OK.COLOR_MAJORELLE_BLUE,X.OK.COLOR_MEDIUM_ORCHID,X.OK.COLOR_FANDANGO_PINK];this.dataset=t.map((e,t)=>!!e.count&&{value:e.count,color:a[t],label:e.subunit.name}).filter(e=>e),o?.otherEmployeeCount&&this.dataset.push({value:o.otherEmployeeCount,color:X.OK.COLOR_FANDANGO_PINK,label:this.$t("pim.other")}),o?.unassignedEmployeeCount&&this.dataset.push({value:o.unassignedEmployeeCount,color:X.OK.COLOR_TART_ORANGE,label:this.$t("dashboard.unassigned")})}).finally(()=>{this.isLoading=!1})}};const GG=(0,i.A)(OG,[["render",jG],["__scopeId","data-v-7b45057c"]]);var QG=GG;const KG={key:0,class:"XHRM-todo-list"},WG={key:0,class:"XHRM-todo-list-item"},JG={key:1,class:"XHRM-todo-list-item"},YG={key:2,class:"XHRM-todo-list-item"},ZG={key:3,class:"XHRM-todo-list-item"},eQ={key:4,class:"XHRM-todo-list-item"};function tQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("base-widget");return(0,a.openBlock)(),(0,a.createBlock)(d,{icon:"list-check",empty:i.isEmpty,"empty-text":i.emptyText,loading:e.isLoading,title:e.$t("dashboard.my_actions")},{default:(0,a.withCtx)(()=>[n.myActions.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",KG,[n.leaveRequestCount>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",WG,[(0,a.createVNode)(r,{class:"XHRM-report-icon",name:"attendanceAlt","icon-type":"svg","display-type":"success",onClick:i.onClickPendingLeave},null,8,["onClick"]),(0,a.createVNode)(s,{tag:"p",onClick:i.onClickPendingLeave},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.n_pending_leave_request",{pendingActionsCount:n.leaveRequestCount})),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0),n.timeSheetCount>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",JG,[(0,a.createVNode)(r,{class:"XHRM-report-icon",name:"timeAlt","icon-type":"svg","display-type":"warn",onClick:i.onClickPendingTimesheet},null,8,["onClick"]),(0,a.createVNode)(s,{tag:"p",onClick:i.onClickPendingTimesheet},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.n_pending_time_sheet",{pendingActionsCount:n.timeSheetCount})),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0),n.reviewCount>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",YG,[(0,a.createVNode)(r,{class:"XHRM-report-icon",name:"appraisals","icon-type":"svg","display-type":"danger",onClick:i.onClickPendingReview},null,8,["onClick"]),(0,a.createVNode)(s,{tag:"p",onClick:i.onClickPendingReview},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.n_pending_performance_evaluate",{pendingActionsCount:n.reviewCount})),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0),n.selfReviewCount>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",ZG,[(0,a.createVNode)(r,{class:"XHRM-report-icon",name:"appraisals","icon-type":"svg","display-type":"danger",onClick:i.onClickPendingReview},null,8,["onClick"]),(0,a.createVNode)(s,{tag:"p",onClick:i.onClickSelfReview},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.n_pending_self_review",{pendingActionsCount:n.selfReviewCount})),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0),n.interviewCount>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",eQ,[(0,a.createVNode)(r,{class:"XHRM-report-icon",name:"interview","icon-type":"svg","display-type":"info",onClick:i.onClickPendingInterview},null,8,["onClick"]),(0,a.createVNode)(s,{tag:"p",onClick:i.onClickPendingInterview},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.n_pending_candidate_interview",{pendingActionsCount:n.interviewCount})),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0)]),_:1},8,["empty","empty-text","loading","title"])}var oQ={name:"MyActionSummaryWidget",components:{"base-widget":wG},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/employees/action-summary");return{http:e}},data(){return{myActions:[],leaveRequestCount:0,timeSheetCount:0,reviewCount:0,selfReviewCount:0,interviewCount:0}},computed:{isEmpty(){return 0===this.myActions.length},emptyText(){return this.$t("dashboard.no_pending_actions")}},beforeMount(){this.isLoading=!1,this.http.getAll().then(e=>{const{data:t}=e.data;this.myActions=t.map(e=>{const{group:t,pendingActionCount:o}=e;"Leave Requests To Approve"===t&&(this.leaveRequestCount=o),"Timesheets To Approve"===t&&(this.timeSheetCount=o),"Pending Appraisal Reviews"===t&&(this.reviewCount=o),"Pending Self Reviews"===t&&(this.selfReviewCount=o),"Candidates To Interview"===t&&(this.interviewCount=o)})}).finally(()=>{this.isLoading=!1})},methods:{onClickPendingLeave(){I("/leave/viewLeaveList")},onClickPendingTimesheet(){I("/time/viewEmployeeTimesheet")},onClickPendingReview(){I("/performance/searchEvaluatePerformanceReview")},onClickPendingInterview(){I("/recruitment/viewCandidates",void 0,{statusId:4})},onClickSelfReview(){I("/performance/myPerformanceReview")}}};const aQ=(0,i.A)(oQ,[["render",tQ],["__scopeId","data-v-8771864a"]]);var lQ=aQ;function nQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-pie-chart"),s=(0,a.resolveComponent)("base-widget");return(0,a.openBlock)(),(0,a.createBlock)(s,{icon:"pie-chart-fill",loading:n.isLoading,title:e.$t("dashboard.employee_distribution_by_location")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{data:n.dataset,"aspect-ratio":!1,"custom-legend":!0,"custom-tooltip":!0,"wrapper-classes":"emp-distrib-chart"},null,8,["data"])]),_:1},8,["loading","title"])}var iQ={name:"EmployeeLocationWidget",components:{"base-widget":wG,"oxd-pie-chart":X.uI},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/employees/locations");return{http:e}},data(){return{dataset:[],isLoading:!1}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t,meta:o}=e.data,a=[X.OK.COLOR_HEAT_WAVE,X.OK.COLOR_CHROME_YELLOW,X.OK.COLOR_YELLOW_GREEN,X.OK.COLOR_MOUNTAIN_MEADOW,X.OK.COLOR_PACIFIC_BLUE,X.OK.COLOR_BLEU_DE_FRANCE,X.OK.COLOR_MAJORELLE_BLUE,X.OK.COLOR_MEDIUM_ORCHID,X.OK.COLOR_FANDANGO_PINK];this.dataset=t.map((e,t)=>!!e.count&&{value:e.count,color:a[t],label:e.location.name}).filter(e=>e),o?.otherEmployeeCount&&this.dataset.push({value:o.otherEmployeeCount,color:X.OK.COLOR_FANDANGO_PINK,label:this.$t("pim.other")}),o?.unassignedEmployeeCount&&this.dataset.push({value:o.unassignedEmployeeCount,color:X.OK.COLOR_TART_ORANGE,label:this.$t("dashboard.unassigned")})}).finally(()=>{this.isLoading=!1})}};const rQ=(0,i.A)(iQ,[["render",nQ],["__scopeId","data-v-0033cf3b"]]);var sQ=rQ;const dQ={class:"XHRM-leave-card-profile-image"},cQ=["src"],uQ={class:"XHRM-leave-card-details"};function mQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("base-widget"),c=(0,a.resolveComponent)("employees-on-leave-config-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(d,{icon:"leaveAlt","icon-type":"svg",class:"emp-leave-chart",empty:i.isEmpty,"empty-text":i.emptyText,loading:n.isLoading,title:e.$t("dashboard.employees_on_leave_today")},(0,a.createSlots)({default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.leaveList,e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"XHRM-leave-card"},[(0,a.createElementVNode)("div",dQ,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:`../pim/viewPhoto/empNumber/${e.empNumber}`},null,8,cQ)]),(0,a.createElementVNode)("div",uQ,[(0,a.createVNode)(s,{tag:"p",class:"XHRM-leave-card-emp-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.empName),1)]),_:2},1024),e.leaveType?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,tag:"p",class:"XHRM-leave-card-leave-details"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.leaveType),1)]),_:2},1024)):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(s,{tag:"p",class:"XHRM-leave-card-emp-id"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.employeeId),1)]),_:2},1024)]))),128))]),_:2},[e.$can.update("dashboard_employees_on_leave_today_config")?{name:"action",fn:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{class:"XHRM-leave-card-icon",name:"gear-fill",onClick:i.onClickConfig},null,8,["onClick"])]),key:"0"}:void 0]),1032,["empty","empty-text","loading","title"]),n.showConfigModal?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,onClose:i.onConfigModalClose},null,8,["onClose"])):(0,a.createCommentVNode)("",!0)],64)}const pQ={class:"XHRM-modal-header"},hQ={class:"XHRM-config-title"};function gQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-input-field"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-button"),p=(0,a.resolveComponent)("submit-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(v,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",pQ,[(0,a.createVNode)(r,{type:"svg",name:"leaveAlt"}),(0,a.createElementVNode)("div",hQ,[(0,a.createVNode)(s,{type:"card-body"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.employees_on_leave_today")),1)]),_:1}),(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.configurations")),1)]),_:1})])]),(0,a.createVNode)(d),(0,a.createVNode)(g,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{class:"XHRM-config-checkbox"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:n.showAccessibleEmployeesOnly,"onUpdate:modelValue":t[0]||(t[0]=e=>n.showAccessibleEmployeesOnly=e),type:"switch",label:e.$t("dashboard.only_show_accessible_employees_on_leave_for_other_users")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(p)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}var vQ={name:"EmployeesOnLeaveConfigModal",components:{"oxd-icon":X.dp,"oxd-dialog":X.KB},emits:["close"],setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/config/employee-on-leave-today");return{http:e}},data(){return{isLoading:!1,showAccessibleEmployeesOnly:!1}},beforeMount(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t}=e.data;this.showAccessibleEmployeesOnly=t.showOnlyAccessibleEmployeesOnLeaveToday}).finally(()=>this.isLoading=!1)},methods:{onSave(){this.isLoading=!0,this.http.request({method:"PUT",data:{showOnlyAccessibleEmployeesOnLeaveToday:this.showAccessibleEmployeesOnly}}).then(()=>{this.$toast.updateSuccess(),this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const fQ=(0,i.A)(vQ,[["render",gQ],["__scopeId","data-v-241a6550"]]);var yQ=fQ,CQ={name:"EmployeesOnLeaveWidget",components:{"oxd-icon":X.dp,"base-widget":wG,"employees-on-leave-config-modal":yQ},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/employees/leaves"),{$tEmpName:t}=Ma();return{http:e,tEmpName:t}},data(){return{leaveList:[],isLoading:!1,leavePeriod:null,showConfigModal:!1}},computed:{isEmpty(){return 0===this.leaveList.length},emptyText(){return this.leavePeriod?this.$t("dashboard.no_employees_are_on_leave_today"):this.$t("dashboard.leave_period_not_defined")}},beforeMount(){this.isLoading=!0,this.http.getAll({date:ge(pe(),"yyyy-MM-dd")}).then(e=>{const{data:t,meta:o}=e.data;this.leaveList=t.map(e=>{const{employee:t,leaveType:o,duration:a}=e;let l=o?.name;return l&&"half_day_morning"===a&&(l+=` (${this.$t("leave.half_day_morning")})`),l&&"half_day_afternoon"===a&&(l+=` (${this.$t("leave.half_day_evening")})`),l&&"specify_time"===a&&(l+=` (${e.startTime} - ${e.endTime})`),{leaveType:l,empNumber:t.empNumber,employeeId:t.employeeId,empName:this.tEmpName(t,{includeMiddle:!1,excludePastEmpTag:!1})}}),this.leavePeriod=o?.leavePeriodDefined}).finally(()=>{this.isLoading=!1})},methods:{onClickConfig(){this.showConfigModal=!0},onConfigModalClose(){this.showConfigModal=!1}}};const VQ=(0,i.A)(CQ,[["render",mQ],["__scopeId","data-v-553a034f"]]);var bQ=VQ;const wQ={class:"XHRM-attendance-card"},xQ={class:"XHRM-attendance-card-profile"},NQ={class:"XHRM-attendance-card-profile-image"},kQ=["src"],_Q={class:"XHRM-attendance-card-profile-record"},SQ={class:"XHRM-attendance-card-bar"},DQ={class:"XHRM-attendance-card-summary"},$Q={class:"XHRM-attendance-card-summary-week"},MQ={class:"XHRM-attendance-card-summary-total"};function EQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-icon-button"),d=(0,a.resolveComponent)("oxd-divider"),c=(0,a.resolveComponent)("oxd-icon"),u=(0,a.resolveComponent)("oxd-bar-chart"),m=(0,a.resolveComponent)("base-widget");return(0,a.openBlock)(),(0,a.createBlock)(m,{icon:"clock-fill",loading:n.isLoading,title:e.$t("dashboard.time_at_work")},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",wQ,[(0,a.createElementVNode)("div",xQ,[(0,a.createElementVNode)("div",NQ,[(0,a.createElementVNode)("img",{alt:"profile picture",class:"employee-image",src:`../pim/viewPhoto/empNumber/${n.empNumber}`},null,8,kQ)]),(0,a.createElementVNode)("div",_Q,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-attendance-card-state"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.lastState),1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-attendance-card-details"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.lastRecord),1)]),_:1})])]),(0,a.createElementVNode)("div",SQ,[(0,a.createVNode)(r,{tag:"span",class:"XHRM-attendance-card-fulltime"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.dayTotal.hours)+"h",1),t[0]||(t[0]=(0,a.createTextVNode)()),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(n.dayTotal.minutes)+"m",1),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.$t("general.today")),1)]),_:1}),(0,a.createVNode)(s,{name:"stopwatch","display-type":"solid-main",class:"XHRM-attendance-card-action",onClick:i.onClickPunchIn},null,8,["onClick"])]),(0,a.createVNode)(d),(0,a.createElementVNode)("div",DQ,[(0,a.createElementVNode)("div",$Q,[(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("dashboard.this_week")),1)]),_:1}),(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.currentWeek),1)]),_:1})]),(0,a.createElementVNode)("div",MQ,[(0,a.createVNode)(c,{name:"stopwatch",class:"XHRM-attendance-card-icon"}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-attendance-card-fulltime"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.weekTotal.hours)+"h "+(0,a.toDisplayString)(n.weekTotal.minutes)+"m ",1)]),_:1})])])]),(0,a.createVNode)(u,{grid:!1,data:n.dataset,"y-axsis":!1,"aspect-ratio":!1,"wrapper-classes":"emp-attendance-chart"},null,8,["data"])]),_:1},8,["loading","title"])}var RQ={name:"EmployeeAttendanceWidget",components:{"oxd-icon":X.dp,"base-widget":wG,"oxd-bar-chart":X.bb},setup(){const{locale:e}=Ae(),t=new H(window.appGlobal.baseUrl,"/api/v2/dashboard/employees/time-at-work");return{http:t,locale:e}},data(){return{dataset:[],state:null,endDate:null,userDate:null,userTime:null,startDate:null,isLoading:!1,empNumber:null,timezoneOffset:null,dayTotal:{hours:0,minutes:0},weekTotal:{hours:0,minutes:0}}},computed:{lastState(){switch(this.state){case"PUNCHED IN":return this.$t("attendance.punched_in");case"PUNCHED OUT":return this.$t("attendance.punched_out");default:return this.$t("attendance.not_punched_in")}},lastRecord(){if(!this.userDate||!this.userTime)return null;const e=he(`${this.userDate} ${this.userTime}`,"yyyy-MM-dd HH:mm"),t=ge(e,"hh:mm a",{locale:this.locale});if(!(0,ue.A)(e)){const o=ge(e,"MMM do",{locale:this.locale});return this.$t("dashboard.state_date_at_time_timezone_offset",{lastState:this.lastState,date:o,time:t,timezoneOffset:this.timezoneOffset})}return this.$t("dashboard.state_today_at_time_timezone_offset",{lastState:this.lastState,time:t,timezoneOffset:this.timezoneOffset})},currentWeek(){if(!this.startDate||!this.endDate)return null;const e=ge(he(this.startDate),"MMM dd",{locale:this.locale}),t=ge(he(this.endDate),"MMM dd",{locale:this.locale});return`${e} - ${t}`}},beforeMount(){this.fetchWidgetData()},methods:{onClickPunchIn(){I("/attendance/punchIn")},fetchWidgetData(){this.isLoading=!0;const e=pe(),t=e.getTimezoneOffset()/60*-1;this.http.getAll({timezoneOffset:t,currentDate:ge(e,"yyyy-MM-dd"),currentTime:ge(new Date,"HH:mm")}).then(e=>{const{data:t,meta:o}=e.data;this.dataset=t.map(e=>({value:e.totalTime.hours+e.totalTime.minutes/60,label:this.$t(`general.${new String(e.workDay.day).toLowerCase()}`),color:X.OK.COLOR_HEAT_WAVE}));const{lastAction:a,currentDay:l,currentWeek:n,currentUser:i}=o;a&&(this.state=a.state,this.userDate=a.userDate,this.userTime=a.userTime,this.timezoneOffset=a.timezoneOffset),n&&(this.weekTotal=n.totalTime,this.endDate=n.endDate?.date,this.startDate=n.startDate?.date),l&&(this.dayTotal=l.totalTime),i&&(this.empNumber=i.empNumber)}).finally(()=>{this.isLoading=!1})}}};const TQ=(0,i.A)(RQ,[["render",EQ],["__scopeId","data-v-4b488ba3"]]);var BQ=TQ,IQ={components:{"quick-launch-widget":kG,"buzz-latest-post-widget":zG,"employee-subunit-widget":QG,"my-action-summary-widget":lQ,"employee-location-widget":sQ,"employees-on-leave-widget":bQ,"employee-attendance-widget":BQ},mounted(){const e=new H(window.appGlobal.baseUrl,"/events/push");e.create()}};const AQ=(0,i.A)(IQ,[["render",mG],["__scopeId","data-v-ba016444"]]);var HQ=AQ,XQ={"view-dashboard":HQ};function UQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("post-filters"),s=(0,a.resolveComponent)("news-feed"),d=(0,a.resolveComponent)("oxd-tab-panel"),c=(0,a.resolveComponent)("upcoming-anniversaries"),u=(0,a.resolveComponent)("oxd-tab-container"),m=(0,a.resolveComponent)("oxd-grid-item"),p=(0,a.resolveComponent)("oxd-grid");return l.isMobile?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,ref:"swipeRef",modelValue:l.tabSelector,"onUpdate:modelValue":t[0]||(t[0]=e=>l.tabSelector=e),"keep-alive":!0},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{key:"buzz_newsfeed",name:e.$t("buzz.buzz_newsfeed")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{mobile:!0,employee:o.employee,"sort-field":l.sortField},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{mobile:!0,filter:l.sortField,onUpdatePriority:l.onUpdatePriority},null,8,["filter","onUpdatePriority"])]),_:1},8,["employee","sort-field"])]),_:1},8,["name"]),(0,a.createVNode)(d,{key:"buzz_anniversary",name:e.$t("buzz.upcoming_anniversaries")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c)]),_:1},8,["name"])]),_:1},8,["modelValue"])):l.width<1920?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,cols:2,class:"XHRM-buzz-layout"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{employee:o.employee,"sort-field":l.sortField},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{filter:l.sortField,onUpdatePriority:l.onUpdatePriority},null,8,["filter","onUpdatePriority"])]),_:1},8,["employee","sort-field"])]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c)]),_:1})]),_:1})):((0,a.openBlock)(),(0,a.createBlock)(p,{key:2,cols:3,class:"XHRM-buzz-layout"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{filter:l.sortField,onUpdatePriority:l.onUpdatePriority},null,8,["filter","onUpdatePriority"])]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{employee:o.employee,"sort-field":l.sortField},null,8,["employee","sort-field"])]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c)]),_:1})]),_:1}))}var LQ=o(7168),PQ=o.n(LQ);function qQ(e){let t;const o=(0,a.ref)();return(0,a.onMounted)(()=>{if(!o.value)return;t=new(PQ().Manager)(o.value?.$el||o.value);const a=new(PQ().Swipe);t.add(a),t.on("swipe",e)}),(0,a.onBeforeUnmount)(()=>{t?.destroy()}),{swipeContainer:o}}const FQ={class:"XHRM-buzz-newsfeed"},zQ=["src"];function jQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("create-post"),d=(0,a.resolveComponent)("post-body"),c=(0,a.resolveComponent)("post-actions"),u=(0,a.resolveComponent)("post-stats"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("post-comment-container"),h=(0,a.resolveComponent)("post-container"),g=(0,a.resolveComponent)("oxd-grid-item"),v=(0,a.resolveComponent)("oxd-grid"),f=(0,a.resolveComponent)("oxd-loading-spinner"),y=(0,a.resolveComponent)("edit-post-modal"),C=(0,a.resolveComponent)("share-post-modal"),V=(0,a.resolveComponent)("photo-carousel"),b=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",FQ,[(0,a.createVNode)(r,{type:"card-title",class:"XHRM-buzz-newsfeed-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.buzz_newsfeed")),1)]),_:1}),((0,a.openBlock)(),(0,a.createBlock)(s,{key:e.posts,employee:o.employee,onRefresh:l.resetFeed},null,8,["employee","onRefresh"])),(0,a.renderSlot)(e.$slots,"default",{},void 0,!0),(0,a.createVNode)(v,{cols:1,class:"XHRM-buzz-newsfeed-posts"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.posts,(e,t)=>((0,a.openBlock)(),(0,a.createBlock)(g,{key:e},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{post:e,onEdit:e=>l.onEdit(t),onDelete:e=>l.onDelete(t)},(0,a.createSlots)({content:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{post:e,onSelectPhoto:e=>l.onSelectPhoto(e,t)},null,8,["post","onSelectPhoto"])]),actionButton:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{post:e,onLike:e=>l.onLike(t),onShare:e=>l.onShare(t),onComment:e=>l.onComment(t)},null,8,["post","onLike","onShare","onComment"])]),postStats:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{post:e,mobile:o.mobile,onComment:e=>l.onComment(t)},null,8,["post","mobile","onComment"])]),_:2},[e.showComments?{name:"comments",fn:(0,a.withCtx)(()=>[(0,a.createVNode)(m),(0,a.createVNode)(p,{"post-id":e.id,employee:o.employee,onCreate:e=>l.onCreateComment(t),onDelete:e=>l.onDeleteComment(t)},null,8,["post-id","employee","onCreate","onDelete"])]),key:"0"}:void 0]),1032,["post","onEdit","onDelete"])]),_:2},1024))),128)),(0,a.withDirectives)((0,a.createVNode)(g,{class:"XHRM-buzz-newsfeed-noposts"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("img",{src:l.noPostsPic,alt:"No Posts"},null,8,zQ),(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.no_posts_available")),1)]),_:1})]),_:1},512),[[a.vShow,!e.isLoading&&0===e.posts.length]])]),_:1}),e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,class:"XHRM-buzz-newsfeed-loader"})):(0,a.createCommentVNode)("",!0)]),e.showEditModal?((0,a.openBlock)(),(0,a.createBlock)(y,{key:0,employee:o.employee,data:e.editModalState.post,onClose:l.onCloseEditModal},null,8,["employee","data","onClose"])):(0,a.createCommentVNode)("",!0),e.showShareModal?((0,a.openBlock)(),(0,a.createBlock)(C,{key:1,employee:o.employee,data:e.shareModalState,onClose:l.onCloseShareModal},null,8,["employee","data","onClose"])):(0,a.createCommentVNode)("",!0),e.showPhotoCarousel?((0,a.openBlock)(),(0,a.createBlock)(V,{key:2,mobile:o.mobile,post:e.photoCarouselState.post,"photo-index":e.photoCarouselState.photoIndex,onClose:l.onClosePhotoCarousel,onLike:t[0]||(t[0]=t=>l.onLike(e.photoCarouselState.postIndex)),onCreateComment:t[1]||(t[1]=t=>l.onCreateComment(e.photoCarouselState.postIndex)),onDeleteComment:t[2]||(t[2]=t=>l.onDeleteComment(e.photoCarouselState.postIndex))},null,8,["mobile","post","photo-index","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(b,{ref:"deleteDialog",message:e.$t("buzz.post_delete_confirmation_message")},null,8,["message"])],64)}const OQ={class:"XHRM-buzz-post-body"},GQ={key:1},QQ=["onClick"],KQ=["onClick"],WQ={key:0};function JQ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("video-frame"),d=(0,a.resolveComponent)("oxd-icon"),c=(0,a.resolveComponent)("photo-frame");return(0,a.openBlock)(),(0,a.createElementBlock)("div",OQ,[o.post.text?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,tag:"p",class:(0,a.normalizeClass)(l.postClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.post.text),1)]),_:1},8,["class"])):(0,a.createCommentVNode)("",!0),(0,a.withDirectives)((0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-post-body-readmore",onClick:l.onClickReadMore},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.read_more")),1)]),_:1},8,["onClick"]),[[a.vShow,!e.readMore]]),!o.post.text||"video"!==o.post.type&&"photo"!==o.post.type?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("br",GQ)),"video"===o.post.type?((0,a.openBlock)(),(0,a.createBlock)(s,{key:2,"video-src":o.post.video.link},null,8,["video-src"])):(0,a.createCommentVNode)("",!0),"photo"===o.post.type?((0,a.openBlock)(),(0,a.createBlock)(c,{key:3,media:o.post.photoIds},{content:(0,a.withCtx)(({index:e})=>[3===e&&5===o.post.photoIds.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"XHRM-buzz-post-body-picture --more",onClick:t=>l.onClickPicture(e)},[(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-post-body-more"},{default:(0,a.withCtx)(()=>[...t[0]||(t[0]=[(0,a.createTextVNode)("+1",-1)])]),_:1}),(0,a.createVNode)(d,{class:"XHRM-buzz-post-body-more",name:"images"})],8,QQ)):((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:1,class:"XHRM-buzz-post-body-picture",onClick:t=>l.onClickPicture(e)},null,8,KQ))]),_:1},8,["media"])):(0,a.createCommentVNode)("",!0),l.originalPost?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:4},[o.post.text||"video"===o.post.type||"photo"===o.post.type?((0,a.openBlock)(),(0,a.createElementBlock)("br",WQ)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-post-body-employee"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.employee),1)]),_:1}),(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-post-body-date"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.dateTime),1)]),_:1}),l.originalPost.text?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,tag:"p",class:"XHRM-buzz-post-body-original-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.text),1)]),_:1})):(0,a.createCommentVNode)("",!0)],64)):(0,a.createCommentVNode)("",!0)])}const YQ=["src"];function ZQ(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(i.classes)},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.photos,(t,o)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:"XHRM-buzz-photos-item"},[(0,a.renderSlot)(e.$slots,"content",{data:t,index:o},void 0,!0),(0,a.createElementVNode)("img",{src:t},null,8,YQ)]))),128))],2)}var eK={name:"PhotoFrame",props:{media:{type:Array,required:!0}},computed:{classes(){return{"XHRM-buzz-photos":!0,"--two-thumbnails":2===this.media.length,"--three-thumbnails":3===this.media.length,"--four-thumbnails":4===this.media.length,"--five-thumbnails":5===this.media.length}},photos(){return(this.media||[]).map(e=>{if("number"===typeof e)return`${window.appGlobal.baseUrl}/buzz/photo/${e}`;const{type:t,base64:o}=e;return`data:${t};base64,${o}`})}}};const tK=(0,i.A)(eK,[["render",ZQ],["__scopeId","data-v-7651c3d4"]]);var oK=tK,aK={name:"PostBody",components:{"oxd-icon":X.dp,"photo-frame":oK,"video-frame":BG},props:{post:{type:Object,required:!0}},emits:["close","selectPhoto"],setup(e,t){const{locale:o}=Ae(),{jsDateFormat:l,jsTimeFormat:n}=F(),{$tEmpName:i}=Ma(),r=(0,a.reactive)({readMore:new String(e.post?.text).length<500}),s=(0,a.computed)(()=>({"XHRM-buzz-post-body-text":!0,"--truncate":!1===r.readMore})),d=()=>{r.readMore=!r.readMore},c=e=>{t.emit("selectPhoto",e)},u=(0,a.computed)(()=>{if(null===e.post.originalPost)return null;const{createdDate:t,createdTime:a}=e.post.originalPost,r=he(`${t} ${a} +00:00`,"yyyy-MM-dd HH:mm xxx");return{text:e.post.originalPost.text,employee:i(e.post.originalPost.employee,{includeMiddle:!0,excludePastEmpTag:!1}),dateTime:ge(r,`${l} ${n}`,{locale:o})}});return{postClasses:s,originalPost:u,onClickPicture:c,onClickReadMore:d,...(0,a.toRefs)(r)}}};const lK=(0,i.A)(aK,[["render",JQ],["__scopeId","data-v-9b8a20b0"]]);var nK=lK;const iK={class:"XHRM-buzz-stats"},rK={class:"XHRM-buzz-stats-row"},sK={class:"XHRM-buzz-stats-row"};function dK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("post-stats-modal"),c=(0,a.resolveDirective)("click-outside");return(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",iK,[(0,a.createElementVNode)("div",rK,[(0,a.createVNode)(r,{name:"heart-fill",class:"XHRM-buzz-stats-like-icon"}),(0,a.createVNode)(s,{tag:"p",class:(0,a.normalizeClass)(i.likesClasses),onClick:i.onShowLikeList},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.likesCount),1)]),_:1},8,["class","onClick"]),n.showLikeList?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,type:"likes",icon:"heart-fill",mobile:o.mobile,"post-id":o.post.id,onClose:i.onClose},null,8,["mobile","post-id","onClose"])):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",sK,[(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-stats-active",onClick:i.onShowComments},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.commentsCount),1)]),_:1},8,["onClick"]),i.sharesCount?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[t[0]||(t[0]=(0,a.createTextVNode)("  ",-1)),(0,a.createVNode)(s,{tag:"p",class:(0,a.normalizeClass)(i.sharesClasses),onClick:i.onShowSharesList},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.sharesCount),1)]),_:1},8,["class","onClick"])],64)):(0,a.createCommentVNode)("",!0),n.showSharesList?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,type:"shares",icon:"share-fill",mobile:o.mobile,"post-id":o.post.post.id,onClose:i.onClose},null,8,["mobile","post-id","onClose"])):(0,a.createCommentVNode)("",!0)])])),[[c,i.onClose]])}const cK={class:"XHRM-buzz-stats-dialog-header"};function uK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("profile-image"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-loading-spinner"),c=(0,a.resolveComponent)("oxd-sheet"),u=(0,a.resolveComponent)("oxd-icon"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-dialog");return o.mobile?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,class:"XHRM-buzz-stats-dialog","onUpdate:show":l.onClose},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",cK,[(0,a.createVNode)(u,{class:(0,a.normalizeClass)({"XHRM-buzz-stats-dialog-icon":!0,"--likes":"likes"===o.type}),name:o.icon,"with-container":!0},null,8,["class","name"]),"shares"===o.type?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.n_share",{shareCount:e.total})),1)]),_:1})):(0,a.createCommentVNode)("",!0),"likes"===o.type?((0,a.openBlock)(),(0,a.createBlock)(s,{key:1},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.n_like",{likesCount:e.total})),1)]),_:1})):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(m),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.users,e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"XHRM-buzz-stats-dialog-employee"},[(0,a.createVNode)(r,{employee:e.employee},null,8,["employee"]),(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-stats-dialog-employee-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.fullName),1)]),_:2},1024)]))),128)),e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-buzz-loader"})):(0,a.createCommentVNode)("",!0)]),_:1},8,["onUpdate:show"])):((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,gutters:!1,type:"white",class:"XHRM-buzz-stats-modal"},{default:(0,a.withCtx)(()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.users,e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:"XHRM-buzz-stats-modal-employee"},[(0,a.createVNode)(r,{employee:e.employee},null,8,["employee"]),(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-stats-modal-employee-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.fullName),1)]),_:2},1024)]))),128)),e.isLoading?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,class:"XHRM-buzz-loader"})):(0,a.createCommentVNode)("",!0)]),_:1}))}var mK={name:"PostStatsModal",components:{"oxd-icon":X.dp,"oxd-sheet":X.tg,"oxd-dialog":X.KB,"profile-image":PG,"oxd-loading-spinner":X.VJ},props:{postId:{type:Number,required:!0},type:{type:String,required:!0},icon:{type:String,required:!0},mobile:{type:Boolean,default:!1}},emits:["close"],setup(e,t){let o;const l=10,{$tEmpName:n}=Ma();switch(e.type){case"likes":o=`/api/v2/buzz/shares/${e.postId}/likes`;break;case"shares":o=`/api/v2/buzz/posts/${e.postId}/shares`;break;default:break}const i=new H(window.appGlobal.baseUrl,o),r=(0,a.reactive)({total:0,offset:0,users:[],isLoading:!1}),s=()=>{r.isLoading=!0,i.getAll({limit:l,offset:r.offset}).then(e=>{const{data:t,meta:o}=e.data;if(r.total=o?.total||0,Array.isArray(t)){const e=t.map(e=>{const{employee:t}=e;return{employee:t,fullName:n(t,{includeMiddle:!1,excludePastEmpTag:!1})}});r.users=[...r.users,...e]}}).finally(()=>r.isLoading=!1)};Aq(()=>{r.users.length>=r.total||(r.offset+=l,s())}),(0,a.onBeforeMount)(()=>s());const d=()=>{t.emit("close")};return{onClose:d,fetchData:s,...(0,a.toRefs)(r)}}};const pK=(0,i.A)(mK,[["render",uK],["__scopeId","data-v-1fcf4d44"]]);var hK=pK,gK={name:"PostStats",components:{"oxd-icon":X.dp,"post-stats-modal":hK},directives:{"click-outside":X.DW},props:{post:{type:Object,required:!0},mobile:{type:Boolean,default:!1}},emits:["comment"],data(){return{showLikeList:!1,showSharesList:!1}},computed:{likesCount(){return this.$t("buzz.n_like",{likesCount:this.post.stats?.numOfLikes||0})},sharesCount(){return null===this.post.stats?.numOfShares?null:this.$t("buzz.n_share",{shareCount:this.post.stats?.numOfShares||0})},commentsCount(){return this.$t("buzz.n_comment",{commentCount:this.post.stats?.numOfComments||0})},likesClasses(){return{"XHRM-buzz-stats-active":this.post.stats?.numOfLikes>0}},sharesClasses(){return{"XHRM-buzz-stats-active":this.post.stats?.numOfShares>0}}},methods:{onShowComments(){this.$emit("comment")},onShowLikeList(){this.showSharesList=!1,this.post.stats?.numOfLikes&&(this.showLikeList=!0)},onShowSharesList(){this.showLikeList=!1,this.post.stats?.numOfShares&&(this.showSharesList=!0)},onClose(){this.showLikeList=!1,this.showSharesList=!1}}};const vK=(0,i.A)(gK,[["render",dK],["__scopeId","data-v-7292608d"]]);var fK=vK;const yK={class:"XHRM-buzz-create-post-header"},CK={class:"XHRM-buzz-create-post-header-text"},VK={class:"XHRM-buzz-create-post-actions"};function bK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("profile-image"),s=(0,a.resolveComponent)("oxd-button"),d=(0,a.resolveComponent)("oxd-buzz-post-input"),c=(0,a.resolveComponent)("oxd-form"),u=(0,a.resolveComponent)("oxd-divider"),m=(0,a.resolveComponent)("oxd-glass-button"),p=(0,a.resolveComponent)("oxd-sheet"),h=(0,a.resolveComponent)("share-video-modal"),g=(0,a.resolveComponent)("share-photo-modal");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(p,{class:"XHRM-buzz-create-post"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",yK,[(0,a.createVNode)(r,{employee:o.employee},null,8,["employee"]),(0,a.createElementVNode)("div",CK,[(0,a.createVNode)(c,{onSubmitValid:l.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.post,"onUpdate:modelValue":t[0]||(t[0]=e=>l.post=e),rules:l.rules,placeholder:e.$t("buzz.post_placeholder")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{type:"submit",label:e.$t("buzz.post")},null,8,["label"])]),_:1},8,["modelValue","rules","placeholder"])]),_:1},8,["onSubmitValid"])])]),(0,a.createVNode)(u),(0,a.createElementVNode)("div",VK,[(0,a.createVNode)(m,{icon:"cameraglass",label:e.$t("buzz.share_photos"),onClick:l.onClickSharePhotos},null,8,["label","onClick"]),(0,a.createVNode)(m,{icon:"videoglass",label:e.$t("buzz.share_video"),onClick:l.onClickShareVideos},null,8,["label","onClick"])])]),_:1}),l.showVideoModal?((0,a.openBlock)(),(0,a.createBlock)(h,{key:0,text:l.post,employee:o.employee,onClose:l.onCloseVideoModal},null,8,["text","employee","onClose"])):(0,a.createCommentVNode)("",!0),l.showPhotoModal?((0,a.openBlock)(),(0,a.createBlock)(g,{key:1,text:l.post,employee:o.employee,onClose:l.onClosePhotoModal},null,8,["text","employee","onClose"])):(0,a.createCommentVNode)("",!0)],64)}function wK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-buzz-post-input"),s=(0,a.resolveComponent)("oxd-input-field"),d=(0,a.resolveComponent)("video-frame"),c=(0,a.resolveComponent)("post-modal");return(0,a.openBlock)(),(0,a.createBlock)(c,{loading:e.isLoading,title:e.$t("buzz.share_video"),onSubmit:l.onSubmit,onClose:t[2]||(t[2]=t=>e.$emit("close",!1))},{header:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:e.post.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.post.text=t),rules:l.rules.text,placeholder:e.$t("buzz.post_placeholder")},null,8,["modelValue","rules","placeholder"])]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{modelValue:e.post.url,"onUpdate:modelValue":t[1]||(t[1]=t=>e.post.url=t),type:"textarea",rules:l.rules.url,label:e.$t("buzz.video_url"),placeholder:e.$t("buzz.paste_video_url")},null,8,["modelValue","rules","label","placeholder"]),e.embedURL?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"video-src":e.embedURL},null,8,["video-src"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","title","onSubmit"])}const xK={class:"XHRM-modal-header"},NK={class:"XHRM-buzz-post-modal-header"},kK={class:"XHRM-buzz-post-modal-header-text"};function _K(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("profile-image"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("oxd-form-actions"),m=(0,a.resolveComponent)("oxd-form"),p=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(p,{class:"XHRM-dialog-modal",persistent:!0,"onUpdate:show":l.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",xK,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.title),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(m,{loading:o.loading,onSubmitValid:l.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",NK,[(0,a.createVNode)(d,{employee:o.employee},null,8,["employee"]),(0,a.createElementVNode)("div",kK,[(0,a.renderSlot)(e.$slots,"header",{},void 0,!0)])]),(0,a.renderSlot)(e.$slots,"default",{},void 0,!0),(0,a.createVNode)(u,{class:"XHRM-buzz-post-modal-actions"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{type:"submit",disabled:o.disabled,label:o.actionLabel||e.$t("buzz.share")},null,8,["disabled","label"])]),_:1})]),_:3},8,["loading","onSubmitValid"])]),_:3},8,["onUpdate:show"])}var SK={name:"PostModal",components:{"oxd-dialog":X.KB,"profile-image":PG},props:{title:{type:String,required:!0},employee:{type:Object,required:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},actionLabel:{type:String,default:null,required:!1}},emits:["close","submit"],setup(e,t){const o=()=>{t.emit("submit")},a=()=>{t.emit("close")};return{onSubmit:o,onCancel:a}}};const DK=(0,i.A)(SK,[["render",_K],["__scopeId","data-v-48d582e9"]]);var $K=DK,MK={name:"ShareVideoModal",components:{"post-modal":$K,"video-frame":BG,"oxd-buzz-post-input":X.TK},props:{text:{type:String,default:null}},emits:["close"],setup(e,t){const{$t:o}=Ie(),l=new H(window.appGlobal.baseUrl,"/api/v2/buzz/posts"),n=(0,a.reactive)({post:{text:e.text||null,url:null},embedURL:null,isLoading:!1}),i={url:[Kt,(0,X.Ld)(async e=>{if(!e)return!0;n.embedURL=null;const t=await l.request({method:"GET",url:"/api/v2/buzz/validation/links",params:{url:e}}),{data:a}=t.data;return!0===a?.valid?(n.embedURL=a.embeddedURL,!0):o("general.invalid_video_url_message")},500)],text:[Wt(65530)]},r=()=>{n.isLoading=!0,l.create({type:"video",link:n.post.url,text:n.post.text}).then(()=>t.emit("close",!0))};return{rules:i,onSubmit:r,...(0,a.toRefs)(n)}}};const EK=(0,i.A)(MK,[["render",wK]]);var RK=EK;function TK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-buzz-post-input"),s=(0,a.resolveComponent)("photo-input"),d=(0,a.resolveComponent)("post-modal");return(0,a.openBlock)(),(0,a.createBlock)(d,{loading:e.isLoading,disabled:l.isDisabled,title:e.$t("buzz.share_photos"),onSubmit:l.onSubmit,onClose:t[2]||(t[2]=t=>e.$emit("close",!1))},{header:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:e.post.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.post.text=t),rules:l.rules.text,placeholder:e.$t("buzz.post_placeholder")},null,8,["modelValue","rules","placeholder"])]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,{modelValue:e.post.photos,"onUpdate:modelValue":t[1]||(t[1]=t=>e.post.photos=t)},null,8,["modelValue"])]),_:1},8,["loading","disabled","title","onSubmit"])}const BK={class:"XHRM-photo-input"},IK={class:"XHRM-photo-input-field"};function AK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("oxd-alert"),d=(0,a.resolveComponent)("photo-upload-area"),c=(0,a.resolveComponent)("oxd-button"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("photo-frame");return(0,a.openBlock)(),(0,a.createElementBlock)("div",BK,[(0,a.createVNode)(s,{type:"error",show:!!l.validationMessage,message:l.validationMessage},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{name:"x",class:"XHRM-photo-input-remove",onClick:l.onClickCloseAlert},null,8,["onClick"])]),_:1},8,["show","message"]),l.showUploadArea?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,"onUpdate:modelValue":l.onFileChange},null,8,["onUpdate:modelValue"])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",IK,[l.showUploadButton?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,type:"file",value:"","onUpdate:modelValue":l.onFileChange},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{"icon-name":"file-image",label:e.$t("buzz.add_photos")},null,8,["label"])]),_:1},8,["onUpdate:modelValue"])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(m,{media:o.modelValue},{content:(0,a.withCtx)(({index:e})=>[(0,a.createVNode)(r,{name:"x",class:"XHRM-photo-input-remove --float",onClick:t=>l.onClickRemove(e)},null,8,["onClick"])]),_:1},8,["media"])])}const HK={class:"XHRM-photo-upload-area"};function XK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(d,{type:"file"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",HK,[(0,a.createVNode)(r,{class:"XHRM-photo-upload-icon",name:"images"}),(0,a.createVNode)(s,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.add_photos")),1)]),_:1})])]),_:1})}var UK={name:"PhotoUploadArea",components:{"oxd-icon":X.dp}};const LK=(0,i.A)(UK,[["render",XK],["__scopeId","data-v-6027df4f"]]);var PK=LK,qK={name:"PhotoInput",components:{"oxd-alert":X.qO,"photo-frame":oK,"photo-upload-area":PK},props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,t){const{$t:o}=Ie(),l=(0,a.ref)(""),n=go(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/x-png"]),i=ho(2097152),r=a=>{if(a)return l.value="",!0!==i(a)?l.value=o("buzz.file_size_validation_message"):!0!==n(a)?l.value=o("buzz.file_type_validation_message"):void t.emit("update:modelValue",[...e.modelValue||[],a])},s=o=>{l.value="",t.emit("update:modelValue",(e.modelValue||[]).filter((e,t)=>o!==t))},d=()=>{l.value=""},c=(0,a.computed)(()=>Array.isArray(e.modelValue)&&e.modelValue.length<1),u=(0,a.computed)(()=>Array.isArray(e.modelValue)&&e.modelValue.length>0&&e.modelValue.length<5);return{onFileChange:r,onClickRemove:s,showUploadArea:c,showUploadButton:u,onClickCloseAlert:d,validationMessage:l}}};const FK=(0,i.A)(qK,[["render",AK],["__scopeId","data-v-5cdc5fa8"]]);var zK=FK,jK={name:"SharePhotoModal",components:{"post-modal":$K,"photo-input":zK,"oxd-buzz-post-input":X.TK},props:{text:{type:String,default:null}},emits:["close"],setup(e,t){const o={text:[Wt(65530)]},l=new H(window.appGlobal.baseUrl,"/api/v2/buzz/posts"),n=(0,a.reactive)({post:{text:e.text||null,photos:[]},isLoading:!1}),i=()=>{n.isLoading=!0,l.create({type:"photo",text:n.post.text,photos:n.post.photos}).then(()=>t.emit("close",!0))},r=(0,a.computed)(()=>0===n.post.photos.length);return{rules:o,onSubmit:i,isDisabled:r,...(0,a.toRefs)(n)}}};const OK=(0,i.A)(jK,[["render",TK]]);var GK=OK,QK={name:"CreatePost",components:{"oxd-sheet":X.tg,"profile-image":PG,"oxd-glass-button":X.k0,"oxd-buzz-post-input":X.TK,"share-video-modal":RK,"share-photo-modal":GK},props:{employee:{type:Object,required:!0}},emits:["refresh"],setup(e,t){const o=(0,a.ref)(null),{saveSuccess:l}=_t(),n=(0,a.ref)(!1),i=(0,a.ref)(!1),r=[Wt(65530)],s=new H(window.appGlobal.baseUrl,"/api/v2/buzz/posts"),d=()=>{null!==o.value&&""!==String(o.value).trim()&&s.create({type:"text",text:o.value}).then(()=>{l(),o.value=null,t.emit("refresh")})},c=()=>{i.value=!0},u=()=>{n.value=!0},m=e=>{n.value=!1,e&&(l(),t.emit("refresh"))},p=e=>{i.value=!1,e&&(l(),t.emit("refresh"))};return{post:o,rules:r,onSubmit:d,showVideoModal:n,showPhotoModal:i,onCloseVideoModal:m,onClosePhotoModal:p,onClickSharePhotos:c,onClickShareVideos:u}}};const KK=(0,i.A)(QK,[["render",bK],["__scopeId","data-v-56e6e39c"]]);var WK=KK;const JK={class:"XHRM-buzz-post-actions"};function YK(e,t,o,l,n,i){const r=(0,a.resolveComponent)("post-like"),s=(0,a.resolveComponent)("post-comment"),d=(0,a.resolveComponent)("post-share");return(0,a.openBlock)(),(0,a.createElementBlock)("div",JK,[(0,a.createVNode)(r,{like:o.post.liked,onClick:t[0]||(t[0]=e=>l.onClickAction("like"))},null,8,["like"]),(0,a.createVNode)(s,{onClick:t[1]||(t[1]=e=>l.onClickAction("comment"))}),(0,a.createVNode)(d,{onClick:t[2]||(t[2]=e=>l.onClickAction("share"))})])}function ZK(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)({"XHRM-like-animation":o.like})},[((0,a.openBlock)(),(0,a.createElementBlock)("svg",{id:"heart-svg",class:"XHRM-heart-icon",viewBox:"467 392 58 57",xmlns:"http://www.w3.org/2000/svg",onClick:t[0]||(t[0]=(...t)=>e.addLike&&e.addLike(...t))},[...t[1]||(t[1]=[(0,a.createStaticVNode)('<g id="Group" fill="none" fill-rule="evenodd" transform="translate(467 392)" data-v-754efce9><path id="heart" class="XHRM-heart-icon-path" d="M29.144 20.773c-.063-.13-4.227-8.67-11.44-2.59C7.63 28.795 28.94 43.256 29.143 43.394c.204-.138 21.513-14.6 11.44-25.213-7.214-6.08-11.377 2.46-11.44 2.59z" fill="#64728c" data-v-754efce9></path><g class="XHRM-heart-icon-group7" opacity="0" transform="translate(7 6)" data-v-754efce9><circle class="XHRM-heart-icon-oval1" fill="#9CD8C3" cx="2" cy="6" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval2" fill="#8CE8C3" cx="5" cy="2" r="2" data-v-754efce9></circle></g><g class="XHRM-heart-icon-group6" opacity="0" transform="translate(0 28)" data-v-754efce9><circle class="XHRM-heart-icon-oval1" fill="#CC8EF5" cx="2" cy="7" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval2" fill="#91D2FA" cx="3" cy="2" r="2" data-v-754efce9></circle></g><g class="XHRM-heart-icon-group3" opacity="0" transform="translate(52 28)" data-v-754efce9><circle class="XHRM-heart-icon-oval2" fill="#9CD8C3" cx="2" cy="7" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval1" fill="#8CE8C3" cx="4" cy="2" r="2" data-v-754efce9></circle></g><g class="XHRM-heart-icon-group2" opacity="0" transform="translate(44 6)" data-v-754efce9><circle class="XHRM-heart-icon-oval2" fill="#CC8EF5" cx="5" cy="6" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval1" fill="#CC8EF5" cx="2" cy="2" r="2" data-v-754efce9></circle></g><g class="XHRM-heart-icon-group5" opacity="0" transform="translate(14 50)" data-v-754efce9><circle class="XHRM-heart-icon-oval1" fill="#91D2FA" cx="6" cy="5" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval2" fill="#91D2FA" cx="2" cy="2" r="2" data-v-754efce9></circle></g><g class="XHRM-heart-icon-group4" opacity="0" transform="translate(35 50)" data-v-754efce9><circle class="XHRM-heart-icon-oval1" fill="#F48EA7" cx="6" cy="5" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval2" fill="#F48EA7" cx="2" cy="2" r="2" data-v-754efce9></circle></g><g class="XHRM-heart-icon-group1" opacity="0" transform="translate(24)" data-v-754efce9><circle class="XHRM-heart-icon-oval1" fill="#9FC7FA" cx="2.5" cy="3" r="2" data-v-754efce9></circle><circle class="XHRM-heart-icon-oval2" fill="#9FC7FA" cx="7.5" cy="2" r="2" data-v-754efce9></circle></g></g>',1)])])),t[2]||(t[2]=(0,a.createElementVNode)("span",{class:"XHRM-heart-icon-circle"},null,-1))],2)}var eW={name:"PostLikeButton",props:{like:{type:Boolean,required:!0}}};const tW=(0,i.A)(eW,[["render",ZK],["__scopeId","data-v-754efce9"]]);var oW=tW;function aW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button");return(0,a.openBlock)(),(0,a.createBlock)(r,{name:"share-fill","with-container":!0})}var lW={name:"PostShareButton"};const nW=(0,i.A)(lW,[["render",aW]]);var iW=nW;function rW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button");return(0,a.openBlock)(),(0,a.createBlock)(r,{name:"chat-text-fill","with-container":!0})}var sW={name:"PostCommentButton"};const dW=(0,i.A)(sW,[["render",rW]]);var cW=dW,uW={name:"PostActions",components:{"post-like":oW,"post-share":iW,"post-comment":cW},props:{post:{type:Object,required:!0}},emits:["like","comment","share"],setup(e,t){let o=!1;const{updatePostLike:a}=IG(new H(window.appGlobal.baseUrl,"")),l=l=>{switch(l){case"comment":t.emit("comment");break;case"share":t.emit("share");break;case"like":o||(o=!0,a(e.post.id,e.post.liked).then(()=>{o=!1,t.emit("like")}));break;default:break}};return{onClickAction:l}}};const mW=(0,i.A)(uW,[["render",YK],["__scopeId","data-v-89b6eed2"]]);var pW=mW;const hW={key:2};function gW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-buzz-post-input"),s=(0,a.resolveComponent)("video-frame"),d=(0,a.resolveComponent)("photo-frame"),c=(0,a.resolveComponent)("oxd-text"),u=(0,a.resolveComponent)("photo-input"),m=(0,a.resolveComponent)("oxd-input-field"),p=(0,a.resolveComponent)("post-modal");return(0,a.openBlock)(),(0,a.createBlock)(p,{loading:e.isLoading,title:e.$t("buzz.edit_post"),"action-label":e.$t("buzz.post"),onSubmit:l.onSubmit,onClose:t[3]||(t[3]=t=>e.$emit("close",!1))},{header:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:e.post.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.post.text=t),rules:l.rules.text},null,8,["modelValue","rules"])]),default:(0,a.withCtx)(()=>[o.data.originalPost?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},["video"===o.data.type?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"video-src":o.data.video.link},null,8,["video-src"])):(0,a.createCommentVNode)("",!0),"photo"===o.data.type?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,media:o.data.photoIds},null,8,["media"])):(0,a.createCommentVNode)("",!0),"video"===o.data.type||"photo"===o.data.type?((0,a.openBlock)(),(0,a.createElementBlock)("br",hW)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,{tag:"p",class:"XHRM-buzz-share-employee"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.employee),1)]),_:1}),(0,a.createVNode)(c,{tag:"p",class:"XHRM-buzz-share-date"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.dateTime),1)]),_:1}),l.originalPost.text?((0,a.openBlock)(),(0,a.createBlock)(c,{key:3,tag:"p",class:"XHRM-buzz-share-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.text),1)]),_:1})):(0,a.createCommentVNode)("",!0)],64)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},["text"===e.post.type||"photo"===e.post.type?((0,a.openBlock)(),(0,a.createBlock)(u,{key:0,modelValue:e.post.photos,"onUpdate:modelValue":t[1]||(t[1]=t=>e.post.photos=t)},null,8,["modelValue"])):(0,a.createCommentVNode)("",!0),"video"===e.post.type?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,modelValue:e.post.video,"onUpdate:modelValue":t[2]||(t[2]=t=>e.post.video=t),type:"textarea",rules:l.rules.url,label:e.$t("buzz.video_url")},null,8,["modelValue","rules","label"])):(0,a.createCommentVNode)("",!0),e.embedURL?((0,a.openBlock)(),(0,a.createBlock)(s,{key:2,"video-src":e.embedURL},null,8,["video-src"])):(0,a.createCommentVNode)("",!0)],64))]),_:1},8,["loading","title","action-label","onSubmit"])}var vW={name:"EditPostModal",components:{"post-modal":$K,"photo-frame":oK,"photo-input":zK,"video-frame":BG,"oxd-buzz-post-input":X.TK},props:{data:{type:Object,required:!0}},emits:["close"],setup(e,t){const{$t:o}=Ie(),{locale:l}=Ae(),{jsDateFormat:n,jsTimeFormat:i}=F(),{$tEmpName:r}=Ma(),s=new H(window.appGlobal.baseUrl,""),{updateSuccess:d}=_t(),{updatePost:c,updateSharedPost:u}=IG(s),m=(0,a.reactive)({post:{text:e.data.text,type:e.data.type,photos:e.data.photoIds||[],video:e.data.video?.link||null},isLoading:!1,embedURL:e.data.video?.link||null}),p=()=>{let o="text";m.isLoading=!0,m.post.photos.length>0&&(o="photo"),m.post.video&&(o="video"),new Promise(t=>{e.data.originalPost?t(u(e.data.id,m.post.text)):t(c(e.data.post.id,{type:o,text:m.post.text,link:m.post.video,photos:m.post.photos.filter(e=>"object"===typeof e),deletedPhotos:(e.data.photoIds||[]).filter(e=>-1===m.post.photos.findIndex(t=>t===e))}))}).then(e=>{d(),t.emit("close",e.data)})},h={url:[Kt,(0,X.Ld)(async e=>{if(!e)return!0;m.embedURL=null;const t=await s.request({method:"GET",url:"/api/v2/buzz/validation/links",params:{url:e}}),{data:a}=t.data;return!0===a?.valid?(m.embedURL=a.embeddedURL,!0):o("general.invalid_video_url_message")},500)],text:[Wt(65530),t=>"video"===e.data.type||m.post.photos.length>0||Kt(t)]},g=(0,a.computed)(()=>{const t=e.data.originalPost?.text,o=e.data.originalPost?.employee,{createdDate:a,createdTime:s}=e.data.originalPost,d=he(`${a} ${s} +00:00`,"yyyy-MM-dd HH:mm xxx");return{text:t,employee:r(o,{includeMiddle:!0,excludePastEmpTag:!1}),dateTime:ge(d,`${n} ${i}`,{locale:l})}});return{rules:h,onSubmit:p,originalPost:g,...(0,a.toRefs)(m)}}};const fW=(0,i.A)(vW,[["render",gW],["__scopeId","data-v-0f2a26f6"]]);var yW=fW;function CW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("post-actions-pill"),s=(0,a.resolveComponent)("photo-viewer"),d=(0,a.resolveComponent)("post-details");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(l.layoutClasses)},[l.showPhoto?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,post:o.post,"photo-index":o.photoIndex,onClose:t[1]||(t[1]=t=>e.$emit("close",!1))},{default:(0,a.withCtx)(()=>[o.mobile?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,post:o.post,onLike:t[0]||(t[0]=t=>e.$emit("like")),onComment:l.onClickComment},null,8,["post","onComment"])):(0,a.createCommentVNode)("",!0)]),_:1},8,["post","photo-index"])):(0,a.createCommentVNode)("",!0),l.showDetails?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,post:o.post,mobile:o.mobile,onLike:t[2]||(t[2]=t=>e.$emit("like")),onClose:t[3]||(t[3]=t=>e.$emit("close",!1)),onCreateComment:t[4]||(t[4]=t=>e.$emit("createComment",t)),onDeleteComment:t[5]||(t[5]=t=>e.$emit("deleteComment",t))},null,8,["post","mobile"])):(0,a.createCommentVNode)("",!0)],2)}const VW={class:"XHRM-photo-viewer"},bW=["src"],wW=["src"],xW={key:0,class:"XHRM-photo-viewer-controls"},NW={class:"XHRM-photo-viewer-actions"};function kW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",VW,[(0,a.createElementVNode)("img",{class:"XHRM-photo-viewer-background",alt:"photo",src:l.selectedPhoto},null,8,bW),(0,a.createElementVNode)("img",{class:"XHRM-photo-viewer-photo",alt:"background",src:l.selectedPhoto},null,8,wW),o.post.photoIds.length>1?((0,a.openBlock)(),(0,a.createElementBlock)("div",xW,[(0,a.createVNode)(r,{class:"XHRM-photo-viewer-icon actions",name:"chevron-left",disabled:0===e.index,onClick:l.onClickPreviousPhoto},null,8,["disabled","onClick"]),(0,a.createVNode)(r,{class:"XHRM-photo-viewer-icon actions",name:"chevron-right",disabled:e.index===o.post.photoIds.length-1,onClick:l.onClickNextPhoto},null,8,["disabled","onClick"])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",NW,[(0,a.renderSlot)(e.$slots,"default",{},void 0,!0)]),(0,a.createVNode)(r,{class:"XHRM-photo-viewer-close actions",name:"x",onClick:l.onClickClose},null,8,["onClick"])])}var _W={name:"PhotoViewer",props:{post:{type:Object,required:!0},photoIndex:{type:Number,required:!0}},emits:["close"],setup(e,t){const o=(0,a.reactive)({index:e.photoIndex}),l=()=>o.index++,n=()=>o.index--,i=(0,a.computed)(()=>{const t=e.post.photoIds[o.index];return`${window.appGlobal.baseUrl}/buzz/photo/${t}`}),r=e=>{e.key&&"Escape"!==e.key||t.emit("close")};return window.addEventListener("keydown",r),(0,a.onBeforeUnmount)(()=>window.removeEventListener("keydown",r)),{onClickClose:r,selectedPhoto:i,onClickNextPhoto:l,onClickPreviousPhoto:n,...(0,a.toRefs)(o)}}};const SW=(0,i.A)(_W,[["render",kW],["__scopeId","data-v-22535b86"]]);var DW=SW;const $W={class:"XHRM-post-details"},MW={class:"XHRM-post-details-header"},EW={class:"XHRM-post-details-header-text"},RW={class:"XHRM-post-details-actions"};function TW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-icon-button"),s=(0,a.resolveComponent)("profile-image"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-divider"),u=(0,a.resolveComponent)("post-like"),m=(0,a.resolveComponent)("post-stats"),p=(0,a.resolveComponent)("post-comment-container");return(0,a.openBlock)(),(0,a.createElementBlock)("div",$W,[(0,a.createVNode)(r,{class:"XHRM-post-details-close",name:"x","with-container":!1,onClick:l.onClickClose},null,8,["onClick"]),(0,a.createElementVNode)("div",MW,[(0,a.createVNode)(s,{employee:o.post.employee},null,8,["employee"]),(0,a.createElementVNode)("div",EW,[(0,a.createVNode)(d,{tag:"p",class:"XHRM-post-details-emp-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.employeeFullName),1)]),_:1}),(0,a.createVNode)(d,{tag:"p",class:"XHRM-post-details-time"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.postDateTime),1)]),_:1})])]),o.post.text?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,tag:"p",class:(0,a.normalizeClass)(l.postClasses)},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.post.text),1)]),_:1},8,["class"])):(0,a.createCommentVNode)("",!0),(0,a.withDirectives)((0,a.createVNode)(d,{tag:"p",class:"XHRM-post-details-readmore",onClick:l.onClickReadMore},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.read_more")),1)]),_:1},8,["onClick"]),[[a.vShow,!l.readMore]]),(0,a.createVNode)(c),(0,a.createElementVNode)("div",RW,[(0,a.createVNode)(u,{like:o.post.liked,onClick:l.onClickLike},null,8,["like","onClick"]),(0,a.createVNode)(m,{post:o.post,mobile:o.mobile},null,8,["post","mobile"])]),(0,a.createVNode)(c),(0,a.createVNode)(p,{"post-id":o.post.id,employee:o.post.employee,onCreate:t[0]||(t[0]=t=>e.$emit("createComment",t)),onDelete:t[1]||(t[1]=t=>e.$emit("deleteComment",t))},null,8,["post-id","employee"])])}const BW={class:"XHRM-buzz-comment"},IW={class:"XHRM-buzz-comment-add"},AW={key:0};function HW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("profile-image"),s=(0,a.resolveComponent)("oxd-input-field"),d=(0,a.resolveComponent)("oxd-form"),c=(0,a.resolveComponent)("post-comment"),u=(0,a.resolveComponent)("oxd-text"),m=(0,a.resolveComponent)("delete-confirmation"),p=(0,a.resolveDirective)("autofocus");return(0,a.openBlock)(),(0,a.createElementBlock)("div",BW,[(0,a.createElementVNode)("div",IW,[(0,a.createVNode)(r,{employee:o.employee},null,8,["employee"]),(0,a.createVNode)(d,{onSubmitValid:l.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(s,{modelValue:e.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.text=t),placeholder:e.$t("buzz.write_your_comment")},null,8,["modelValue","placeholder"]),[[p]])]),_:1},8,["onSubmitValid"])]),e.total>0?((0,a.openBlock)(),(0,a.createElementBlock)("br",AW)):(0,a.createCommentVNode)("",!0),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.comments,e=>((0,a.openBlock)(),(0,a.createBlock)(c,{key:e,data:e,"post-id":o.postId,onEdit:l.onEditComment,onLike:l.onLikeComment,onDelete:l.onDeleteComment},null,8,["data","post-id","onEdit","onLike","onDelete"]))),128)),e.total>4?((0,a.openBlock)(),(0,a.createBlock)(u,{key:1,tag:"p",class:"XHRM-buzz-comment-readmore",onClick:l.onClickShowMore},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.showAllComments?e.$t("general.show_less"):e.$t("general.show_more")),1)]),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(m,{ref:"deleteDialog",message:e.$t("buzz.post_delete_confirmation_message")},null,8,["message"])])}function XW(){const e={mounted(e){e&&e.querySelector("input")?.focus()}};return{autofocus:e}}const UW={class:"XHRM-comment-wrapper"},LW={class:"XHRM-post-comment"},PW={key:1,class:"XHRM-post-comment-area"},qW={key:0,class:"XHRM-post-comment-stats"},FW={key:2,class:"XHRM-post-comment-action-area"};function zW(e,t,o,l,n,i){const r=(0,a.resolveComponent)("profile-image"),s=(0,a.resolveComponent)("oxd-input-field"),d=(0,a.resolveComponent)("oxd-text"),c=(0,a.resolveComponent)("oxd-form"),u=(0,a.resolveComponent)("oxd-icon"),m=(0,a.resolveDirective)("autofocus");return(0,a.openBlock)(),(0,a.createElementBlock)("div",UW,[(0,a.createVNode)(r,{employee:o.data.employee},null,8,["employee"]),(0,a.createElementVNode)("div",LW,[e.edit?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,onSubmitValid:l.onSubmit},{default:(0,a.withCtx)(()=>[(0,a.withDirectives)((0,a.createVNode)(s,{modelValue:e.comment,"onUpdate:modelValue":t[0]||(t[0]=t=>e.comment=t),rules:l.rules,onKeydown:(0,a.withKeys)((0,a.withModifiers)(l.onCancelComment,["stop"]),["esc"])},null,8,["modelValue","rules","onKeydown"]),[[m]]),(0,a.createVNode)(d,{tag:"span"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.press_esc_to"))+"",1)]),_:1}),(0,a.createVNode)(d,{tag:"span",class:"XHRM-post-comment-action --cancel",onClick:l.onCancelComment},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.cancel")),1)]),_:1},8,["onClick"])]),_:1},8,["onSubmitValid"])):((0,a.openBlock)(),(0,a.createElementBlock)("div",PW,[(0,a.createVNode)(d,{tag:"p",class:"XHRM-post-comment-employee"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.employeeFullName),1)]),_:1}),(0,a.createVNode)(d,{tag:"span",class:(0,a.normalizeClass)({"XHRM-post-comment-text":!0,"--truncate":!1===e.readMore})},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.comment),1)]),_:1},8,["class"]),(0,a.withDirectives)((0,a.createVNode)(d,{tag:"span",class:"XHRM-post-comment-readmore",onClick:l.onClickReadMore},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.read_more")),1)]),_:1},8,["onClick"]),[[a.vShow,!e.readMore]]),(0,a.createVNode)(d,{tag:"p",class:"XHRM-post-comment-datetime"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.dateTime),1)]),_:1}),o.data.comment.numOfLikes>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",qW,[(0,a.createVNode)(u,{name:"heart-fill",class:"XHRM-post-comment-stats-icon"}),(0,a.createVNode)(d,{tag:"p",class:"XHRM-post-comment-stats-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.data.comment.numOfLikes),1)]),_:1})])):(0,a.createCommentVNode)("",!0)])),e.edit?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",FW,[(0,a.createVNode)(d,{tag:"p",class:(0,a.normalizeClass)({"XHRM-post-comment-action":!0,"--liked":!0===o.data.comment.liked}),onClick:l.onClickLike},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.like")),1)]),_:1},8,["class","onClick"]),o.data.permission.canUpdate?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,tag:"p",class:"XHRM-post-comment-action",onClick:l.onClickEdit},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit")),1)]),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0),o.data.permission.canDelete?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,tag:"p",class:"XHRM-post-comment-action",onClick:l.onClickDelete},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("performance.delete")),1)]),_:1},8,["onClick"])):(0,a.createCommentVNode)("",!0)]))])])}var jW={name:"PostComment",components:{"oxd-icon":X.dp,"profile-image":PG},directives:{...XW()},props:{postId:{type:Number,required:!0},data:{type:Object,required:!0}},emits:["edit","delete","like"],setup(e,t){let o=!1;const{locale:l}=Ae(),{jsDateFormat:n,jsTimeFormat:i}=F(),{$tEmpName:r}=Ma(),s=[Kt,Wt(65530)],d=(0,a.reactive)({edit:!1,comment:e.data.comment.text,readMore:new String(e.data.comment.text).length<500}),{updatePostComment:c,updateCommentLike:u}=IG(new H(window.appGlobal.baseUrl,"")),m=()=>{c(e.postId,e.data.comment.id,d.comment).then(()=>{d.edit=!1,t.emit("edit",e.data.comment.id)})},p=()=>{d.edit=!0},h=()=>{o||(o=!0,u(e.data.comment.id,e.data.comment.liked).then(()=>{o=!1,t.emit("like",e.data.comment.id)}))},g=()=>{t.emit("delete",e.data.comment.id)},v=()=>{d.readMore=!d.readMore},f=()=>{d.comment=e.data.comment.text,d.edit=!1},y=(0,a.computed)(()=>{const{createdDate:t,createdTime:o}=e.data.comment,a=he(`${t} ${o} +00:00`,"yyyy-MM-dd HH:mm xxx");return ge(a,`${n} ${i}`,{locale:l})}),C=(0,a.computed)(()=>r(e.data.employee,{includeMiddle:!0,excludePastEmpTag:!1}));return{rules:s,dateTime:y,onSubmit:m,onClickLike:h,onClickEdit:p,onClickDelete:g,onClickReadMore:v,onCancelComment:f,employeeFullName:C,...(0,a.toRefs)(d)}}};const OW=(0,i.A)(jW,[["render",zW],["__scopeId","data-v-2923cf11"]]);var GW=OW,QW={name:"PostCommentContainer",components:{"post-comment":GW,"profile-image":PG,"delete-confirmation":Xt},directives:{...XW()},props:{postId:{type:Number,required:!0},employee:{type:Object,required:!0}},emits:["create","delete"],setup(e,t){const o=(0,a.ref)(),l=(0,a.reactive)({text:null,total:0,comments:[],showAllComments:!1}),{saveSuccess:n,updateSuccess:i,deleteSuccess:r}=_t(),{fetchPostComments:s,savePostComment:d,deletePostComment:c}=IG(new H(window.appGlobal.baseUrl,"")),u=()=>{s(e.postId,l.showAllComments?0:4,!0).then(e=>{const{data:t,meta:o}=e.data;l.total=o.total,l.comments=[...t]})},m=()=>{l.text&&d(e.postId,l.text).then(()=>{l.text=null,u(),n(),t.emit("create")})},p=()=>{l.showAllComments=!l.showAllComments,u()},h=()=>{u(),i()},g=a=>{o.value.showDialog().then(o=>{"ok"===o&&c(e.postId,a).then(()=>{u(),r(),t.emit("delete")})})},v=()=>{u()};return(0,a.onBeforeMount)(()=>u()),{onSubmit:m,deleteDialog:o,onLikeComment:v,onEditComment:h,onClickShowMore:p,onDeleteComment:g,...(0,a.toRefs)(l)}}};const KW=(0,i.A)(QW,[["render",HW],["__scopeId","data-v-263173ff"]]);var WW=KW,JW={name:"PostDetails",components:{"post-stats":fK,"post-like":oW,"profile-image":PG,"post-comment-container":WW},props:{post:{type:Object,required:!0},mobile:{type:Boolean,default:!1}},emits:["like","close","createComment","deleteComment"],setup(e,t){let o=!1;const{locale:l}=Ae(),{jsDateFormat:n,jsTimeFormat:i}=F(),{$tEmpName:r}=Ma(),s=(0,a.ref)(new String(e.post?.text).length<500),{updatePostLike:d}=IG(new H(window.appGlobal.baseUrl,"")),c=(0,a.computed)(()=>{const{createdDate:t,createdTime:o}=e.post,a=he(`${t} ${o} +00:00`,"yyyy-MM-dd HH:mm xxx");return ge(a,`${n} ${i}`,{locale:l})}),u=(0,a.computed)(()=>r(e.post.employee,{includeMiddle:!0,excludePastEmpTag:!1})),m=()=>t.emit("close"),p=()=>{o||(o=!0,d(e.post.id,e.post.liked).then(()=>{o=!1,t.emit("like")}))},h=(0,a.computed)(()=>({"XHRM-post-details-text":!0,"--truncate":!1===s.value})),g=()=>{s.value=!s.value};return{readMore:s,postClasses:h,onClickLike:p,onClickClose:m,postDateTime:c,onClickReadMore:g,employeeFullName:u}}};const YW=(0,i.A)(JW,[["render",TW],["__scopeId","data-v-5a1c902f"]]);var ZW=YW;const eJ={class:"XHRM-buzz-pill"},tJ={class:"XHRM-buzz-pill-actions"},oJ={class:"XHRM-buzz-pill-stats"},aJ={class:"XHRM-buzz-pill-stats-likes"},lJ={class:"XHRM-buzz-pill-stats-other"};function nJ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("post-like"),s=(0,a.resolveComponent)("post-comment"),d=(0,a.resolveComponent)("oxd-icon"),c=(0,a.resolveComponent)("oxd-text");return(0,a.openBlock)(),(0,a.createElementBlock)("div",eJ,[(0,a.createElementVNode)("div",tJ,[(0,a.createVNode)(r,{like:o.post.liked,onClick:l.onClickLike},null,8,["like","onClick"]),(0,a.createVNode)(s,{onClick:l.onClickComment},null,8,["onClick"])]),(0,a.createElementVNode)("div",oJ,[(0,a.createElementVNode)("div",aJ,[(0,a.createVNode)(d,{name:"heart-fill"}),(0,a.createVNode)(c,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.n_like",{likesCount:o.post.stats.numOfLikes})),1)]),_:1})]),(0,a.createElementVNode)("div",lJ,[(0,a.createVNode)(c,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.combinedPostStats),1)]),_:1})])])])}var iJ={name:"PostActionsPill",components:{"oxd-icon":X.dp,"post-like":oW,"post-comment":cW},props:{post:{type:Object,required:!0}},emits:["like","comment"],setup(e,t){let o=!1;const{updatePostLike:a}=IG(new H(window.appGlobal.baseUrl,"")),l=()=>{t.emit("comment")},n=()=>{o||(o=!0,a(e.post.id,e.post.liked).then(()=>{o=!1,t.emit("like")}))};return{onClickLike:n,onClickComment:l}},computed:{combinedPostStats(){const e=this.$t("buzz.n_comment",{commentCount:this.post.stats?.numOfComments||0}),t=this.$t("buzz.n_share",{shareCount:this.post.stats?.numOfShares||0});return null===this.post.stats?.numOfShares?e:`${e}, ${t}`}}};const rJ=(0,i.A)(iJ,[["render",nJ],["__scopeId","data-v-444a996d"]]);var sJ=rJ,dJ={name:"PhotoCarousel",components:{"photo-viewer":DW,"post-details":ZW,"post-actions-pill":sJ},props:{post:{type:Object,required:!0},mobile:{type:Boolean,default:!1},photoIndex:{type:Number,required:!0}},emits:["like","close","createComment","deleteComment"],setup(e){const t=(0,a.reactive)({view:"photo",index:e.photoIndex}),o=()=>t.index++,l=()=>t.index--,n=()=>t.view="details",i=(0,a.computed)(()=>e.post.photoIds[t.index]),r=(0,a.computed)(()=>({"XHRM-photo-carousel":!0,"--web":!1===e.mobile})),s=(0,a.computed)(()=>!1===e.mobile||"photo"===t.view),d=(0,a.computed)(()=>!1===e.mobile||"details"===t.view);return{showPhoto:s,showDetails:d,layoutClasses:r,selectedPhoto:i,onClickComment:n,onClickNextPhoto:o,onClickPreviousPhoto:l,...(0,a.toRefs)(t)}}};const cJ=(0,i.A)(dJ,[["render",CW],["__scopeId","data-v-6b3bab74"]]);var uJ=cJ;const mJ={class:"XHRM-buzz-post"},pJ={class:"XHRM-buzz-post-header"},hJ={class:"XHRM-buzz-post-header-details"},gJ={class:"XHRM-buzz-post-header-text"},vJ={key:0,class:"XHRM-buzz-post-header-config"},fJ={class:"XHRM-buzz-post-body"},yJ={class:"XHRM-buzz-post-footer"};function CJ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("profile-image"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-icon-button"),c=(0,a.resolveComponent)("oxd-icon"),u=(0,a.resolveComponent)("oxd-dropdown"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-sheet");return(0,a.openBlock)(),(0,a.createBlock)(p,{gutters:!1,type:"white",class:"XHRM-buzz"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",mJ,[(0,a.createElementVNode)("div",pJ,[(0,a.createElementVNode)("div",hJ,[(0,a.createVNode)(r,{employee:o.post.employee},null,8,["employee"]),(0,a.createElementVNode)("div",gJ,[(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-post-emp-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.employeeFullName),1)]),_:1}),(0,a.createVNode)(s,{tag:"p",class:"XHRM-buzz-post-time"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.postDateTime),1)]),_:1})])]),o.post.permission.canUpdate||o.post.permission.canDelete?((0,a.openBlock)(),(0,a.createElementBlock)("div",vJ,[(0,a.createVNode)(u,null,{content:(0,a.withCtx)(()=>[o.post.permission.canDelete?((0,a.openBlock)(),(0,a.createElementBlock)("li",{key:0,class:"XHRM-buzz-post-header-config-item",onClick:t[0]||(t[0]=t=>e.$emit("delete",t))},[(0,a.createVNode)(c,{name:"trash"}),(0,a.createVNode)(s,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.delete_post")),1)]),_:1})])):(0,a.createCommentVNode)("",!0),o.post.permission.canUpdate?((0,a.openBlock)(),(0,a.createElementBlock)("li",{key:1,class:"XHRM-buzz-post-header-config-item",onClick:t[1]||(t[1]=t=>e.$emit("edit",t))},[(0,a.createVNode)(c,{name:"pencil"}),(0,a.createVNode)(s,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.edit_post")),1)]),_:1})])):(0,a.createCommentVNode)("",!0)]),default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{name:"three-dots","with-container":!0})]),_:1})])):(0,a.createCommentVNode)("",!0)]),(0,a.createVNode)(m)]),(0,a.createElementVNode)("div",fJ,[(0,a.renderSlot)(e.$slots,"content",{},void 0,!0),(0,a.renderSlot)(e.$slots,"body",{},void 0,!0)]),(0,a.createElementVNode)("div",yJ,[(0,a.renderSlot)(e.$slots,"actionButton",{},void 0,!0),(0,a.renderSlot)(e.$slots,"postStats",{},void 0,!0)]),(0,a.renderSlot)(e.$slots,"comments",{},void 0,!0)]),_:3})}var VJ={name:"PostContainer",components:{"oxd-icon":X.dp,"oxd-sheet":X.tg,"oxd-dropdown":X.EL,"profile-image":PG},props:{post:{type:Object,required:!0}},emits:["edit","delete"],setup(e){const{locale:t}=Ae(),{jsDateFormat:o,jsTimeFormat:l}=F(),{$tEmpName:n}=Ma(),i=(0,a.computed)(()=>n(e.post.employee,{includeMiddle:!0,excludePastEmpTag:!1})),r=(0,a.computed)(()=>{const{createdDate:a,createdTime:n}=e.post,i=he(`${a} ${n} +00:00`,"yyyy-MM-dd HH:mm xxx");return ge(i,`${o} ${l}`,{locale:t})});return{postDateTime:r,employeeFullName:i}}};const bJ=(0,i.A)(VJ,[["render",CJ],["__scopeId","data-v-72e5d8ba"]]);var wJ=bJ;const xJ={key:2};function NJ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-buzz-post-input"),s=(0,a.resolveComponent)("video-frame"),d=(0,a.resolveComponent)("photo-frame"),c=(0,a.resolveComponent)("oxd-text"),u=(0,a.resolveComponent)("post-modal");return(0,a.openBlock)(),(0,a.createBlock)(u,{loading:e.isLoading,title:e.$t("buzz.share_post"),onSubmit:l.onSubmit,onClose:t[1]||(t[1]=t=>e.$emit("close",!1))},{header:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:e.post.text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.post.text=t),rules:l.rules.text,placeholder:e.$t("buzz.post_placeholder")},null,8,["modelValue","rules","placeholder"])]),default:(0,a.withCtx)(()=>["video"===o.data.type?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"video-src":o.data.video.link},null,8,["video-src"])):(0,a.createCommentVNode)("",!0),"photo"===o.data.type?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,media:o.data.photoIds},null,8,["media"])):(0,a.createCommentVNode)("",!0),"video"===o.data.type||"photo"===o.data.type?((0,a.openBlock)(),(0,a.createElementBlock)("br",xJ)):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(c,{tag:"p",class:"XHRM-buzz-share-employee"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.employee),1)]),_:1}),(0,a.createVNode)(c,{tag:"p",class:"XHRM-buzz-share-date"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.dateTime),1)]),_:1}),l.originalPost.text?((0,a.openBlock)(),(0,a.createBlock)(c,{key:3,tag:"p",class:"XHRM-buzz-share-text"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(l.originalPost.text),1)]),_:1})):(0,a.createCommentVNode)("",!0)]),_:1},8,["loading","title","onSubmit"])}var kJ={name:"SharePostModal",components:{"post-modal":$K,"photo-frame":oK,"video-frame":BG,"oxd-buzz-post-input":X.TK},props:{data:{type:Object,required:!0}},emits:["close"],setup(e,t){const{locale:o}=Ae(),{saveSuccess:l}=_t(),{jsDateFormat:n,jsTimeFormat:i}=F(),{$tEmpName:r}=Ma(),s={text:[Wt(65530)]},d=new H(window.appGlobal.baseUrl,"/api/v2/buzz/shares"),c=(0,a.reactive)({post:{text:null},isLoading:!1}),u=()=>{c.isLoading=!0,d.create({text:c.post.text,shareId:e.data.id}).then(()=>{l(),t.emit("close",!0)})},m=(0,a.computed)(()=>{const t=e.data.originalPost?.text||e.data.text,a=e.data.originalPost?.employee||e.data.employee,{createdDate:l,createdTime:s}=e.data.originalPost||e.data,d=he(`${l} ${s} +00:00`,"yyyy-MM-dd HH:mm xxx");return{text:t,employee:r(a,{includeMiddle:!0,excludePastEmpTag:!1}),dateTime:ge(d,`${n} ${i}`,{locale:o})}});return{rules:s,onSubmit:u,originalPost:m,...(0,a.toRefs)(c)}}};const _J=(0,i.A)(kJ,[["render",NJ],["__scopeId","data-v-03a6e32c"]]);var SJ=_J,DJ={name:"NewsFeed",components:{"post-body":nK,"post-stats":fK,"create-post":WK,"post-actions":pW,"oxd-loading-spinner":X.VJ,"photo-carousel":uJ,"post-container":wJ,"edit-post-modal":yW,"share-post-modal":SJ,"post-comment-container":WW,"delete-confirmation":Xt},props:{employee:{type:Object,required:!0},sortField:{type:String,required:!0},mobile:{type:Boolean,default:!1}},setup(e){const t=10,o=(0,a.ref)(),{deleteSuccess:l}=_t(),{fetchPosts:n,deletePost:i}=IG(new H(window.appGlobal.baseUrl,"")),r=`${window.appGlobal.publicPath}/images/buzz_no_posts.svg`,s=(0,a.reactive)({total:0,offset:0,posts:[],isLoading:!1,showEditModal:!1,editModalState:null,showShareModal:!1,shareModalState:null,showPhotoCarousel:!1,photoCarouselState:null}),d=()=>{s.isLoading=!0,n(t,s.offset,"DESC",e.sortField).then(e=>{const{data:t,meta:o}=e.data;s.total=o.total||0,Array.isArray(t)&&(s.posts=[...s.posts,...t])}).finally(()=>s.isLoading=!1)};Aq(()=>{s.posts.length>=s.total||(s.offset+=t,d())});const c=e=>{s.posts[e].liked=!s.posts[e].liked,s.posts[e].liked?s.posts[e].stats.numOfLikes++:s.posts[e].stats.numOfLikes--},u=e=>{s.showEditModal=!0,s.editModalState={postIndex:e,post:s.posts[e]},document.body.style.overflow="hidden"},m=e=>{s.showShareModal=!0,s.shareModalState=s.posts[e],document.body.style.overflow="hidden"},p=e=>{s.posts[e].showComments?s.posts[e].showComments=!1:s.posts[e].showComments=!0},h=()=>{s.posts=[],s.offset=0,d()},g=(e,t)=>{s.photoCarouselState={postIndex:t,photoIndex:e,post:s.posts[t]},s.showPhotoCarousel=!0,document.body.style.overflow="hidden"},v=()=>{s.showPhotoCarousel=!1,s.photoCarouselState=null,document.body.style.overflow="auto"},f=e=>{s.showShareModal=!1,s.shareModalState=null,document.body.style.overflow="auto",e&&h()},y=e=>{const{data:t}=e;t&&(s.posts[s.editModalState.postIndex]={...t}),s.showEditModal=!1,s.editModalState=null,document.body.style.overflow="auto"},C=e=>{o.value.showDialog().then(t=>{"ok"===t&&i(s.posts[e].id).then(()=>{h(),l()})})},V=e=>{s.posts[e].stats.numOfComments++},b=e=>{s.posts[e].stats.numOfComments--};return(0,a.onBeforeMount)(()=>d()),(0,a.watch)(()=>e.sortField,()=>{s.posts=[],s.offset=0,d()}),{onLike:c,onEdit:u,onShare:m,onDelete:C,resetFeed:h,onComment:p,noPostsPic:r,deleteDialog:o,onSelectPhoto:g,onCreateComment:V,onDeleteComment:b,onCloseEditModal:y,onCloseShareModal:f,onClosePhotoCarousel:v,...(0,a.toRefs)(s)}}};const $J=(0,i.A)(DJ,[["render",jQ],["__scopeId","data-v-7ddce242"]]);var MJ=$J;const EJ={class:"XHRM-post-filters"};function RJ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",EJ,[(0,a.createVNode)(r,{"icon-name":"clock-history",class:"XHRM-post-filters-button",label:i.mostRecentButtonLabel,"display-type":i.mostRecentButtonType,onClick:t[0]||(t[0]=t=>e.$emit("updatePriority","share.createdAtUtc"))},null,8,["label","display-type"]),(0,a.createVNode)(r,{"icon-name":"heart-fill",class:"XHRM-post-filters-button",label:i.mostLikesButtonLabel,"display-type":i.mostLikesButtonType,onClick:t[1]||(t[1]=t=>e.$emit("updatePriority","share.numOfLikes"))},null,8,["label","display-type"]),(0,a.createVNode)(r,{"icon-name":"chat-dots-fill",class:"XHRM-post-filters-button",label:i.mostCommentsButtonLabel,"display-type":i.mostCommentsButtonType,onClick:t[2]||(t[2]=t=>e.$emit("updatePriority","share.numOfComments"))},null,8,["label","display-type"])])}var TJ={name:"PostFilters",props:{filter:{type:String,required:!0},mobile:{type:Boolean,default:!1}},emits:["updatePriority"],computed:{isMostRecent(){return"share.createdAtUtc"===this.filter},isMostLikes(){return"share.numOfLikes"===this.filter},isMostComments(){return"share.numOfComments"===this.filter},mostRecentButtonType(){return this.isMostRecent?"label-warn":"text"},mostLikesButtonType(){return this.isMostLikes?"label-warn":"text"},mostCommentsButtonType(){return this.isMostComments?"label-warn":"text"},mostRecentButtonLabel(){return this.mobile?this.isMostRecent?this.$t("buzz.most_recent_posts"):"":this.$t("buzz.most_recent_posts")},mostLikesButtonLabel(){return this.mobile?this.isMostLikes?this.$t("buzz.most_liked_posts"):"":this.$t("buzz.most_liked_posts")},mostCommentsButtonLabel(){return this.mobile?this.isMostComments?this.$t("buzz.most_commented_posts"):"":this.$t("buzz.most_commented_posts")}}};const BJ=(0,i.A)(TJ,[["render",RJ],["__scopeId","data-v-6a27a4e9"]]);var IJ=BJ;const AJ={class:"XHRM-buzz-anniversary"},HJ={class:"XHRM-buzz-anniversary-profile"},XJ={class:"XHRM-buzz-anniversary-profile-details"},UJ={class:"XHRM-buzz-anniversary-duration"},LJ=["src"],PJ={class:"XHRM-buzz-anniversary-durations-text"},qJ={key:0,class:"XHRM-buzz-anniversary-nocontent"},FJ=["src"],zJ={key:0,class:"XHRM-buzz-anniversary-footer"};function jJ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("profile-image");return(0,a.openBlock)(),(0,a.createElementBlock)("div",AJ,[(0,a.createVNode)(r,{type:"card-title",class:"XHRM-buzz-anniversary-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.upcoming_anniversaries")),1)]),_:1}),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["XHRM-buzz-anniversary-content",{"--show-more":n.anniversariesCount>5}])},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.anniversaries,t=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:"XHRM-buzz-anniversary-item"},[(0,a.createElementVNode)("div",HJ,[(0,a.createVNode)(s,{employee:t},null,8,["employee"]),(0,a.createElementVNode)("div",XJ,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-anniversary-emp-name"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.empName),1)]),_:2},1024),(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-anniversary-job-details"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.jobTitle),1)]),_:2},1024)])]),(0,a.createElementVNode)("div",UJ,[(0,a.createElementVNode)("img",{alt:"year celebration",class:"XHRM-buzz-anniversary-year-celebration",src:l.celebrationPic},null,8,LJ),(0,a.createElementVNode)("div",PJ,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-anniversary-duration-years"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.anniversaryYear),1)]),_:2},1024),(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-anniversary-duration-years"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("buzz.n_year",{yearsCount:t.anniversaryYear})),1)]),_:2},1024),(0,a.createVNode)(r,{tag:"p",class:"XHRM-buzz-anniversary-duration-date"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(t.joinedDate),1)]),_:2},1024)])])]))),128)),i.isEmpty?((0,a.openBlock)(),(0,a.createElementBlock)("div",qJ,[(0,a.createElementVNode)("img",{src:l.noContentPic,alt:"No Content"},null,8,FJ),(0,a.createVNode)(r,{tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.no_records_found")),1)]),_:1})])):(0,a.createCommentVNode)("",!0)],2),n.anniversariesCount>5?((0,a.openBlock)(),(0,a.createElementBlock)("div",zJ,[(0,a.createVNode)(r,{tag:"p",onClick:i.onSeeMore},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.isViewDetails?e.$t("general.show_more"):e.$t("general.show_less")),1)]),_:1},8,["onClick"])])):(0,a.createCommentVNode)("",!0)])}var OJ={name:"UpcomingAnniversaries",components:{"profile-image":PG},setup(){const{locale:e}=Ae(),{$tEmpName:t}=Ma(),o=`${window.appGlobal.publicPath}/images/year_celebration.png`,a=`${window.appGlobal.publicPath}/images/buzz_no_anniversaries.png`,l=new H(window.appGlobal.baseUrl,"/api/v2/buzz/anniversaries");return{http:l,locale:e,noContentPic:a,celebrationPic:o,tEmpName:t}},data(){return{viewMore:!1,isLoading:!1,anniversaries:[],anniversariesCount:0}},computed:{isViewDetails(){return!this.viewMore},isEmpty(){return!this.isLoading&&0===this.anniversaries.length}},beforeMount(){this.anniversariesLimit=5,this.getAnniversaries()},methods:{onSeeMore(){this.viewMore=!this.viewMore,this.viewMore?this.anniversariesLimit=0:this.anniversariesLimit=5,this.getAnniversaries()},getAnniversaries(){this.isLoading=!0,this.http.getAll({limit:this.anniversariesLimit}).then(e=>{const{data:t,meta:o}=e.data;this.anniversaries=t.map(e=>{const{employee:t,jobTitle:o,joinedDate:a}=e;return{empNumber:t.empNumber,empName:this.tEmpName(t,{includeMiddle:!1,excludePastEmpTag:!1}),jobTitle:o.title,joinedDate:ge(he(a),"MMM dd",{locale:this.locale}),anniversaryYear:(new Date).getFullYear()-new Date(a).getFullYear()}}),this.anniversariesCount=o?.total}).finally(()=>this.isLoading=!1)}}};const GJ=(0,i.A)(OJ,[["render",jJ],["__scopeId","data-v-54b2b7ca"]]);var QJ=GJ,KJ={components:{"news-feed":MJ,"oxd-tab-panel":X.Tj,"post-filters":IJ,"oxd-tab-container":X.Ku,"upcoming-anniversaries":QJ},props:{employee:{type:Object,required:!0}},setup(){const{$t:e}=Ie(),t=(0,a.ref)(null),o=(0,X.Qs)(),l=(0,a.ref)("share.createdAtUtc"),n=(0,a.computed)(()=>!(o.screenType===X.Xr.DEVICE_LG||o.screenType===X.Xr.DEVICE_XL)),i=(0,a.computed)(()=>o.windowWidth),{swipeContainer:r}=qQ(o=>{const a=o.offsetDirection;2===a&&(t.value=e("buzz.upcoming_anniversaries")),4===a&&(t.value=e("buzz.buzz_newsfeed"))}),s=e=>{e&&(l.value=e)};return{width:i,isMobile:n,sortField:l,tabSelector:t,onUpdatePriority:s,swipeRef:r}}};const WJ=(0,i.A)(KJ,[["render",UQ],["__scopeId","data-v-e72bdcb4"]]);var JJ=WJ,YJ={"view-buzz":JJ};const ZJ={class:"XHRM-system-check"};function eY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("flex-table"),d=(0,a.resolveComponent)("oxd-button"),c=(0,a.resolveComponent)("oxd-form-actions"),u=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createBlock)(u,{loading:n.isLoading,class:(0,a.normalizeClass)(n.isLoading?"XHRM-system-check-form-loading":"XHRM-system-check-form")},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",ZJ,[(0,a.createVNode)(r,{tag:"h5",class:"XHRM-system-check-title"},{default:(0,a.withCtx)(()=>[...t[0]||(t[0]=[(0,a.createTextVNode)(" System Check ",-1)])]),_:1}),t[3]||(t[3]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(r,{class:"XHRM-system-check-content"},{default:(0,a.withCtx)(()=>[...t[1]||(t[1]=[(0,a.createTextVNode)(" To properly function the system, please ensure that all of the system check items listed below are green. If any are red, please take the necessary steps to fix them. ",-1)])]),_:1}),t[4]||(t[4]=(0,a.createElementVNode)("br",null,null,-1)),n.error?.message?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,class:"XHRM-system-check-content --error"},{default:(0,a.withCtx)(()=>[...t[2]||(t[2]=[(0,a.createTextVNode)(" An unexpected error occurred. Please provide the file write permission to ",-1),(0,a.createElementVNode)("b",null,"/src/log",-1),(0,a.createTextVNode)(" directory and check the error log in ",-1),(0,a.createElementVNode)("b",null,"/src/log/XHRM.log",-1),(0,a.createTextVNode)(" file for more details. ",-1)])]),_:1})):(0,a.createCommentVNode)("",!0),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.items,e=>((0,a.openBlock)(),(0,a.createBlock)(s,{key:e.category,items:e.checks,"title-name":e.category},null,8,["items","title-name"]))),128)),(0,a.createVNode)(c,{class:"XHRM-system-check-action"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{class:"XHRM-left-space","display-type":"ghost",label:"Re-Check",type:"submit",onClick:i.reCheck},null,8,["onClick"])]),_:1})]),(0,a.renderSlot)(e.$slots,"footer",{},void 0,!0)]),_:3},8,["loading","class"])}const tY={class:"XHRM-flex-table"};function oY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider");return(0,a.openBlock)(),(0,a.createElementBlock)("div",tY,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-flex-table-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(o.titleName),1)]),_:1}),(0,a.createVNode)(s,{class:"XHRM-flex-table-divider"}),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.items,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t,class:"XHRM-flex-table-row"},[(0,a.createVNode)(r,{class:"XHRM-flex-table-content"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.label),1)]),_:2},1024),(0,a.createVNode)(r,{class:(0,a.normalizeClass)(i.getClass(e.value.status))},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.value.message),1)]),_:2},1032,["class"])]))),128))])}var aY={name:"FlexTable",props:{titleName:{type:String,required:!0},items:{type:Array,required:!0,default:()=>[]}},methods:{getClass(e){return 1===e?"XHRM-flex-table-value --success":2===e?"XHRM-flex-table-value --warning":"XHRM-flex-table-value --error"}}};const lY=(0,i.A)(aY,[["render",oY],["__scopeId","data-v-6d2c9862"]]);var nY=lY,iY={name:"SystemCheckScreen",components:{"flex-table":nY},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/core/system-check");return{http:e}},data(){return{items:[],isLoading:!1,isInterrupted:!1,error:null}},beforeMount(){this.fetchData()},methods:{fetchData(){this.isLoading=!0,this.http.getAll().then(e=>{const{data:t,meta:o}=e.data;this.items=t,this.isInterrupted=o.isInterrupted,this.error=o.error}).finally(()=>{this.isLoading=!1})},reCheck(){this.fetchData()}}};const rY=(0,i.A)(iY,[["render",eY],["__scopeId","data-v-628ece3b"]]);var sY=rY,dY={"system-check":sY};const cY={class:"XHRM-paper-container"},uY={class:"XHRM-header-container"},mY={class:"XHRM-container"},pY={class:"XHRM-bottom-container"};function hY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("event-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("table-header"),y=(0,a.resolveComponent)("oxd-card-table"),C=(0,a.resolveComponent)("oxd-pagination"),V=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(v,{"filter-title":e.$t("claim.events")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.name=e),label:e.$t("claim.event_name")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.status,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.status=e),type:"select",label:e.$t("general.status"),options:n.ClaimEventStatuses},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",cY,[(0,a.createElementVNode)("div",uY,[(0,a.createVNode)(p,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(f,{total:l.total,loading:l.isLoading,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","selected","onDelete"]),(0,a.createElementVNode)("div",mY,[(0,a.createVNode)(y,{selected:n.checkedItems,"onUpdate:selected":t[2]||(t[2]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[3]||(t[3]=e=>l.sortDefinition=e),items:l.items.data,headers:n.headers,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","items","headers","loading"])]),(0,a.createElementVNode)("div",pY,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,current:l.currentPage,"onUpdate:current":t[4]||(t[4]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(V,{ref:"deleteDialog"},null,512)],64)}function gY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",clear:!1,label:e.$t("claim.event_name"),"create-options":i.loadEvents},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var vY={name:"EventAutocomplete",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/claim/events");return{http:e}},methods:{async loadEvents(e){return new Promise(t=>{if(e.trim()){const o={name:e.trim()};this.http.getAll(o).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:e.name})))})}else t([])})}}};const fY=(0,i.A)(vY,[["render",gY],["__scopeId","data-v-0d74ec74"]]);var yY=fY;const CY={name:"",status:null},VY={"claimEvent.name":"ASC","claimEvent.status":"DESC"};var bY={components:{"delete-confirmation":Xt,"event-autocomplete":yY},setup(){const e=(0,a.ref)({...CY}),{$t:t}=Ie(),{sortDefinition:o,sortField:l,sortOrder:n,onSort:i}=Ut({sortDefinition:VY}),r=(0,a.computed)(()=>({eventId:"object"===typeof e.value.name?e.value.name.id:null,name:"string"===typeof e.value.name?e.value.name:null,status:e.value.status?1===e.value.status?.id:null,sortField:l.value,sortOrder:n.value})),s=e=>e.map(e=>({id:e.id,name:e.name,description:e.description,status:e.status?t("general.active"):t("performance.inactive")})),d=new H(window.appGlobal.baseUrl,"/api/v2/claim/events"),{showPaginator:c,currentPage:u,total:m,pages:p,pageSize:h,response:g,isLoading:v,execQuery:f}=Et(d,{normalizer:s,query:r});return i(f),{http:d,showPaginator:c,currentPage:u,isLoading:v,total:m,pages:p,pageSize:h,execQuery:f,items:g,response:g,filters:e,sortDefinition:o}},data(){return{headers:[{name:"name",title:this.$t("claim.event_name"),slot:"title",sortField:"claimEvent.name",style:{flex:3}},{name:"status",title:this.$t("general.status"),sortField:"claimEvent.status",style:{flex:2}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],ClaimEventStatuses:[{id:1,label:this.$t("general.active")},{id:0,label:this.$t("performance.inactive")}]}},methods:{async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...CY},this.filterItems()},onClickAdd(){I("/claim/saveEvents")},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},onClickEdit(e){I("/claim/saveEvents/{id}",{id:e.id})}}};const wY=(0,i.A)(bY,[["render",hY]]);var xY=wY;const NY={class:"XHRM-background-container"},kY={class:"XHRM-card-container"},_Y={class:"XHRM-sm-field"};function SY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-switch-input"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",NY,[(0,a.createElementVNode)("div",kY,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.add_event")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.claimEvent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.claimEvent.name=e),label:e.$t("claim.event_name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.claimEvent.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.claimEvent.description=e),type:"textarea",label:e.$t("general.description"),rules:n.rules.description},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",_Y,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-sm-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active")),1)]),_:1}),(0,a.createVNode)(u,{modelValue:n.claimEvent.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.claimEvent.status=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const DY={name:"",description:"",status:!0};var $Y={components:{"oxd-switch-input":X.Ay},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/claim/events"),{createUniqueValidator:t}=Lo(e),o=t("ClaimEvent","name",{matchByField:"isDeleted",matchByValue:"false"});return{http:e,claimEventNameUniqueValidation:o}},data(){return{isLoading:!1,claimEvent:{...DY},rules:{name:[Kt,this.claimEventNameUniqueValidation,Wt(100)],description:[Wt(1e3)]}}},methods:{onCancel(){I("/claim/viewEvents")},onSave(){this.isLoading=!0,this.http.create({...this.claimEvent,name:this.claimEvent.name.trim()}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const MY=(0,i.A)($Y,[["render",SY],["__scopeId","data-v-578d1e4a"]]);var EY=MY;const RY={class:"XHRM-background-container"},TY={class:"XHRM-card-container"},BY={class:"XHRM-sm-field"};function IY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-switch-input"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",RY,[(0,a.createElementVNode)("div",TY,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.edit_event")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.claimEvent.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.claimEvent.name=e),label:e.$t("claim.event_name"),disabled:!n.canEdit,rules:n.rules.name,required:""},null,8,["modelValue","label","disabled","rules"])]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.claimEvent.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.claimEvent.description=e),type:"textarea",label:e.$t("general.description"),rules:n.rules.description},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",BY,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-sm-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active")),1)]),_:1}),(0,a.createVNode)(m,{modelValue:n.claimEvent.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.claimEvent.status=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const AY={name:"",description:"",status:null};var HY={components:{"oxd-switch-input":X.Ay},props:{id:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/claim/events"),{createUniqueValidator:o}=Lo(t),a=o("ClaimEvent","name",{entityId:e.id,matchByField:"isDeleted",matchByValue:"false"});return{http:t,claimEventNameUniqueValidation:a}},data(){return{isLoading:!1,claimEvent:{...AY},canEdit:!1,name:"",rules:{name:[Kt,this.claimEventNameUniqueValidation,Wt(100)],description:[Wt(1e3)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.id).then(e=>{const{data:t}=e.data;this.claimEvent={...t},this.name=t.name,this.canEdit=e.data.meta.canEdit}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/claim/viewEvents")},onSave(){this.isLoading=!0,this.http.update(this.id,{name:this.canEdit?this.claimEvent.name:null,description:this.claimEvent.description,status:this.claimEvent.status}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})}}};const XY=(0,i.A)(HY,[["render",IY],["__scopeId","data-v-2519aa11"]]);var UY=XY;const LY={class:"XHRM-paper-container"},PY={class:"XHRM-header-container"},qY={class:"XHRM-container"},FY={class:"XHRM-bottom-container"};function zY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("expense-type-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid"),u=(0,a.resolveComponent)("oxd-form-row"),m=(0,a.resolveComponent)("oxd-divider"),p=(0,a.resolveComponent)("oxd-button"),h=(0,a.resolveComponent)("oxd-form-actions"),g=(0,a.resolveComponent)("oxd-form"),v=(0,a.resolveComponent)("oxd-table-filter"),f=(0,a.resolveComponent)("table-header"),y=(0,a.resolveComponent)("oxd-card-table"),C=(0,a.resolveComponent)("oxd-pagination"),V=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(v,{"filter-title":e.$t("claim.expense_types")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.name=e),label:e.$t("general.name")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.status,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.status=e),type:"select",label:e.$t("general.status"),options:n.ExpenseTypeStatuses},null,8,["modelValue","label","options"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m),(0,a.createVNode)(h,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(p,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",LY,[(0,a.createElementVNode)("div",PY,[(0,a.createVNode)(p,{label:e.$t("general.add"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(f,{total:l.total,loading:l.isLoading,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","selected","onDelete"]),(0,a.createElementVNode)("div",qY,[(0,a.createVNode)(y,{selected:n.checkedItems,"onUpdate:selected":t[2]||(t[2]=e=>n.checkedItems=e),order:l.sortDefinition,"onUpdate:order":t[3]||(t[3]=e=>l.sortDefinition=e),items:l.items.data,headers:n.headers,selectable:!0,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","order","items","headers","loading"])]),(0,a.createElementVNode)("div",FY,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,current:l.currentPage,"onUpdate:current":t[4]||(t[4]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(V,{ref:"deleteDialog"},null,512)],64)}function jY(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",clear:!1,label:e.$t("general.name"),"create-options":i.loadTypes},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var OY={name:"ExpenseTypeAutocomplete",setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/claim/expenses/types");return{http:e}},methods:{async loadTypes(e){return new Promise(t=>{if(e.trim()){const o={name:e.trim()};this.http.getAll(o).then(({data:e})=>{t(e.data.map(e=>({id:e.id,label:e.name})))})}else t([])})}}};const GY=(0,i.A)(OY,[["render",jY],["__scopeId","data-v-b4ddba9e"]]);var QY=GY;const KY={name:"",status:null},WY={"expenseType.name":"ASC","expenseType.status":"DESC"};var JY={components:{"delete-confirmation":Xt,"expense-type-autocomplete":QY},setup(){const e=(0,a.ref)({...KY}),{$t:t}=Ie(),{sortDefinition:o,sortField:l,sortOrder:n,onSort:i}=Ut({sortDefinition:WY}),r=(0,a.computed)(()=>({expenseTypeId:"object"===typeof e.value.name?e.value.name.id:null,name:"string"===typeof e.value.name?e.value.name:null,status:e.value.status?1===e.value.status?.id:null,sortField:l.value,sortOrder:n.value})),s=e=>e.map(e=>({id:e.id,name:e.name,description:e.description,status:e.status?t("general.active"):t("performance.inactive")})),d=new H(window.appGlobal.baseUrl,"/api/v2/claim/expenses/types"),{showPaginator:c,currentPage:u,total:m,pages:p,pageSize:h,response:g,isLoading:v,execQuery:f}=Et(d,{normalizer:s,query:r});return i(f),{http:d,showPaginator:c,currentPage:u,isLoading:v,total:m,pages:p,pageSize:h,execQuery:f,items:g,response:g,filters:e,sortDefinition:o}},data(){return{headers:[{name:"name",title:this.$t("general.name"),slot:"title",sortField:"expenseType.name",style:{flex:3}},{name:"status",title:this.$t("general.status"),sortField:"expenseType.status",style:{flex:2}},{name:"actions",title:this.$t("general.actions"),slot:"action",style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{delete:{onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},edit:{onClick:this.onClickEdit,props:{name:"pencil-fill"}}}}],checkedItems:[],ExpenseTypeStatuses:[{id:1,label:this.$t("general.active")},{id:0,label:this.$t("performance.inactive")}]}},methods:{async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...KY},this.filterItems()},onClickAdd(){I("/claim/saveExpense")},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},onClickEdit(e){I("/claim/saveExpense/{id}",{id:e.id})}}};const YY=(0,i.A)(JY,[["render",zY]]);var ZY=YY;const eZ={class:"XHRM-background-container"},tZ={class:"XHRM-card-container"},oZ={class:"XHRM-sm-field"};function aZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-switch-input"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",eZ,[(0,a.createElementVNode)("div",tZ,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.add_expense_type")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.expenseTypes.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.expenseTypes.name=e),label:e.$t("general.name"),rules:n.rules.name,required:""},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.expenseTypes.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.expenseTypes.description=e),type:"textarea",label:e.$t("general.description"),rules:n.rules.description},null,8,["modelValue","label","rules"])]),_:1}),(0,a.createVNode)(c,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",oZ,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-sm-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active")),1)]),_:1}),(0,a.createVNode)(u,{modelValue:n.expenseTypes.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.expenseTypes.status=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const lZ={name:"",description:"",status:!0};var nZ={components:{"oxd-switch-input":X.Ay},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/claim/expenses/types"),{createUniqueValidator:t}=Lo(e),o=t("ExpenseType","name",{matchByField:"isDeleted",matchByValue:"false"});return{http:e,expenseTypeNameUniqueValidation:o}},data(){return{isLoading:!1,expenseTypes:{...lZ},rules:{name:[Kt,this.expenseTypeNameUniqueValidation,Wt(100)],description:[Wt(1e3)]}}},methods:{onCancel(){I("/claim/viewExpense")},onSave(){this.isLoading=!0,this.http.create({...this.expenseTypes,name:this.expenseTypes.name.trim()}).then(()=>this.$toast.saveSuccess()).then(()=>{this.onCancel()})}}};const iZ=(0,i.A)(nZ,[["render",aZ],["__scopeId","data-v-742db446"]]);var rZ=iZ;const sZ={class:"XHRM-background-container"},dZ={class:"XHRM-card-container"},cZ={class:"XHRM-sm-field"};function uZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-form-row"),u=(0,a.resolveComponent)("oxd-grid-item"),m=(0,a.resolveComponent)("oxd-switch-input"),p=(0,a.resolveComponent)("oxd-grid"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",sZ,[(0,a.createElementVNode)("div",dZ,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.edit_expense_type")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.expenseTypes.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.expenseTypes.name=e),label:e.$t("general.name"),disabled:!n.canEdit,rules:n.rules.name,required:""},null,8,["modelValue","label","disabled","rules"])]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.expenseTypes.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.expenseTypes.description=e),type:"textarea",label:e.$t("general.description"),rules:n.rules.description},null,8,["modelValue","label","rules"])]),_:1})]),_:1}),(0,a.createVNode)(u,{class:"--offset-row-3"},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",cZ,[(0,a.createVNode)(r,{tag:"p",class:"XHRM-sm-field-label"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.active")),1)]),_:1}),(0,a.createVNode)(m,{modelValue:n.expenseTypes.status,"onUpdate:modelValue":t[2]||(t[2]=e=>n.expenseTypes.status=e)},null,8,["modelValue"])])]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const mZ={name:"",description:"",status:!1};var pZ={components:{"oxd-switch-input":X.Ay},props:{id:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,"/api/v2/claim/expenses/types"),{createUniqueValidator:o}=Lo(t),a=o("ExpenseType","name",{entityId:e.id,matchByField:"isDeleted",matchByValue:"false"});return{http:t,expenseTypeNameUniqueValidation:a}},data(){return{isLoading:!1,expenseTypes:{...mZ},canEdit:!1,name:"",rules:{name:[Kt,this.expenseTypeNameUniqueValidation,Wt(100)],description:[Wt(1e3)]}}},beforeMount(){this.isLoading=!0,this.http.get(this.id).then(e=>{const{data:t}=e.data;this.expenseTypes={...t},this.name=t.name,this.canEdit=e.data.meta.canEdit}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/claim/viewExpense")},onSave(){this.isLoading=!0,this.http.update(this.id,{name:this.canEdit?this.expenseTypes.name:null,description:this.expenseTypes.description,status:this.expenseTypes.status}).then(()=>this.$toast.updateSuccess()).then(()=>{this.onCancel()})}}};const hZ=(0,i.A)(pZ,[["render",uZ],["__scopeId","data-v-d74eb580"]]);var gZ=hZ;const vZ={class:"XHRM-background-container"},fZ={class:"XHRM-card-container"};function yZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("claim-event-dropdown"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-input-field"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",vZ,[(0,a.createElementVNode)("div",fZ,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.create_claim_request")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.request.event,"onUpdate:modelValue":t[0]||(t[0]=e=>n.request.event=e),rules:n.rules.event,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.request.currency,"onUpdate:modelValue":t[1]||(t[1]=e=>n.request.currency=e),type:"select",rules:n.rules.currency,options:o.currencies,label:e.$t("general.currency"),required:""},null,8,["modelValue","rules","options","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:n.request.remarks,"onUpdate:modelValue":t[2]||(t[2]=e=>n.request.remarks=e),type:"textarea",label:e.$t("claim.remarks"),rules:n.rules.remarks},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v,{label:e.$t("claim.create")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}function CZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("claim.event"),options:l.options},null,8,["label","options"])}var VZ={name:"ClaimEventDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/claim/events");return(0,a.onBeforeMount)(()=>{t.getAll({limit:0,status:!0}).then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.name}))})}),{options:e}}};const bZ=(0,i.A)(VZ,[["render",CZ]]);var wZ=bZ;const xZ={event:null,currency:null,remarks:null};var NZ={name:"SubmitClaimRequest",components:{"claim-event-dropdown":wZ},props:{currencies:{type:Array,default:()=>[]}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/claim/requests");return{http:e}},data(){return{isLoading:!1,request:{...xZ},id:0,rules:{event:[Kt],currency:[Kt],remarks:[Wt(1e3)]}}},methods:{onCancel(){I("/claim/viewClaim")},onSave(){this.isLoading=!0,this.http.create({claimEventId:this.request.event.id,currencyId:this.request.currency.id,remarks:this.request.remarks}).then(e=>(this.id=e.data.data.id,this.$toast.saveSuccess())).then(()=>{I("/claim/submitClaim/id/{id}",{id:this.id})})}}};const kZ=(0,i.A)(NZ,[["render",yZ]]);var _Z=kZ;const SZ={class:"XHRM-background-container"},DZ={class:"XHRM-paper-container"},$Z={class:"XHRM-card-container"};function MZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-form"),h=(0,a.resolveComponent)("claim-expenses"),g=(0,a.resolveComponent)("claim-attachment"),v=(0,a.resolveComponent)("claim-action-buttons");return(0,a.openBlock)(),(0,a.createElementBlock)("div",SZ,[(0,a.createElementVNode)("div",DZ,[(0,a.createElementVNode)("div",$Z,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.submit_claim")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,{loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.request.referenceId,"onUpdate:modelValue":t[0]||(t[0]=e=>n.request.referenceId=e),label:e.$t("claim.reference_id"),disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:i.formattedEventName,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formattedEventName=e),label:e.$t("claim.event"),disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.statusMap[n.request.status],"onUpdate:modelValue":t[2]||(t[2]=e=>n.statusMap[n.request.status]=e),label:e.$t("general.status"),disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.currency.name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.currency.name=e),label:e.$t("general.currency"),disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.request.remarks,"onUpdate:modelValue":t[4]||(t[4]=e=>n.request.remarks=e),label:e.$t("claim.remarks"),type:"textarea",disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),(0,a.createVNode)(h,{"request-id":o.id,currency:n.currency,"can-edit":i.canEdit},null,8,["request-id","currency","can-edit"]),t[5]||(t[5]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(g,{"request-id":o.id,"can-edit":i.canEdit,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize},null,8,["request-id","can-edit","allowed-file-types","max-file-size"]),t[6]||(t[6]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(v,{"request-id":o.id,"allowed-actions":n.allowedActions},null,8,["request-id","allowed-actions"])])])}const EZ={class:"XHRM-horizontal-padding XHRM-vertical-padding"},RZ={class:"XHRM-action-header"},TZ={class:"XHRM-container"};function BZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-button"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("add-attachment-modal"),p=(0,a.resolveComponent)("edit-attachment-modal"),h=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(r,{class:"XHRM-horizontal-margin"}),(0,a.createElementVNode)("div",EZ,[(0,a.createElementVNode)("div",RZ,[(0,a.createVNode)(s,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.attachments")),1)]),_:1}),o.canEdit?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"text",onClick:i.onClickAdd},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(c,{total:l.total,loading:l.isLoading,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","selected","onDelete"]),(0,a.createElementVNode)("div",TZ,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),class:"XHRM-card-table",items:l.items.data,headers:i.tableHeaders,selectable:o.canEdit,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","items","headers","selectable","loading"])]),n.showAddAttachmentModal?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"request-id":o.requestId,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize,onClose:i.onCloseAddAttachmentModal},null,8,["request-id","allowed-file-types","max-file-size","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditAttachmentModal?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,"request-id":o.requestId,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize,data:n.editModalState,onClose:i.onCloseEditAttachmentModal},null,8,["request-id","allowed-file-types","max-file-size","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(h,{ref:"deleteDialog"},null,512)],64)}const IZ={class:"XHRM-modal-header"};function AZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("required-text"),h=(0,a.resolveComponent)("oxd-button"),g=(0,a.resolveComponent)("submit-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(y,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",IZ,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.add_attachment")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(f,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attachment.attachment=e),type:"file",label:e.$t("general.select_file"),"button-label":e.$t("general.browse"),rules:n.rules.attachment,placeholder:e.$t("general.no_file_selected"),required:""},null,8,["modelValue","label","button-label","rules","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.attachment.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.description=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p),(0,a.createVNode)(h,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(g)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const HZ={attachment:null,description:""};var XZ={name:"SaveAttachment",components:{"oxd-dialog":X.KB},props:{requestId:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/attachments`);return{http:t}},data(){return{isLoading:!1,attachment:{...HZ},rules:{description:[Wt(200)],attachment:[Kt,ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},methods:{onSave(){this.isLoading=!0,this.http.create({...this.attachment}).then(()=>this.$toast.saveSuccess()).then(()=>{this.attachment={...HZ},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const UZ=(0,i.A)(XZ,[["render",AZ]]);var LZ=UZ;const PZ={class:"XHRM-modal-header"};function qZ(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-group"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-input-field"),h=(0,a.resolveComponent)("required-text"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("submit-button"),f=(0,a.resolveComponent)("oxd-form-actions"),y=(0,a.resolveComponent)("oxd-form"),C=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(C,{class:"XHRM-dialog-modal","onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",PZ,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.edit_attachment")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(y,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{label:e.$t("general.current_file")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{tag:"p",class:"current-file"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(n.currentFile),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),t[2]||(t[2]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.attachment.attachment,"onUpdate:modelValue":t[0]||(t[0]=e=>n.attachment.attachment=e),type:"file",label:e.$t("general.replace_with"),"button-label":e.$t("general.browse"),rules:n.rules.attachment,placeholder:e.$t("general.no_file_selected")},null,8,["modelValue","label","button-label","rules","placeholder"]),(0,a.createVNode)(r,{class:"XHRM-input-hint",tag:"p"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.accepts_up_to_n_mb",{count:i.formattedFileSize})),1)]),_:1})]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.attachment.description,"onUpdate:modelValue":t[1]||(t[1]=e=>n.attachment.description=e),type:"textarea",label:e.$t("general.comment"),placeholder:e.$t("general.type_comment_here"),rules:n.rules.description},null,8,["modelValue","label","placeholder","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(f,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h),(0,a.createVNode)(g,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(v)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const FZ={attachment:null,description:""};var zZ={name:"SaveAttachment",components:{"oxd-dialog":X.KB},props:{data:{type:Object,required:!0},requestId:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/attachments`);return{http:t}},data(){return{isLoading:!1,currentFile:"",attachment:{...FZ},rules:{description:[Wt(200)],attachment:[ho(this.maxFileSize),go(this.allowedFileTypes)]}}},computed:{formattedFileSize(){return Math.round(this.maxFileSize/1048576*100)/100}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.currentFile=GM(t.attachment.fileName),this.attachment.description=t.attachment.description}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{...this.attachment}).then(()=>this.$toast.updateSuccess()).then(()=>{this.attachment={...FZ},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const jZ=(0,i.A)(zZ,[["render",qZ],["__scopeId","data-v-2590357d"]]);var OZ=jZ,GZ={name:"ClaimAttachment",components:{"delete-confirmation":Xt,"add-attachment-modal":LZ,"edit-attachment-modal":OZ},props:{requestId:{type:Number,required:!0},canEdit:{type:Boolean,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(e){const{locale:t}=Ae(),{jsDateFormat:o}=F(),a=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/attachments`),{$tEmpName:l}=Ma(),n=e=>e.map(e=>({id:e.id,attachedDate:e.date?ge(he(e.date),o,{locale:t}):"",filename:e.attachment.fileName??"",size:e.attachment.size?Vh(e.attachment.size,2):"",fileType:e.attachment.fileType?e.attachment.fileType:"",description:e.attachment.description?e.attachment.description:"",attachedByName:l(e.attachedBy,{excludePastEmpTag:!1})})),{showPaginator:i,currentPage:r,total:s,pages:d,pageSize:c,response:u,isLoading:m,execQuery:p}=Et(a,{normalizer:n,toastNoRecords:!1});return{http:a,showPaginator:i,currentPage:r,isLoading:m,total:s,pages:d,pageSize:c,execQuery:p,items:u}},data(){return{headers:[{name:"filename",slot:"title",cellType:"oxd-table-cell-truncate",title:this.$t("general.file_name"),style:{flex:1}},{name:"description",title:this.$t("general.description"),cellType:"oxd-table-cell-truncate",style:{flex:1}},{name:"size",title:this.$t("general.size"),style:{flex:1}},{name:"fileType",title:this.$t("general.type"),style:{flex:1}},{name:"attachedDate",title:this.$t("pim.date_added"),style:{flex:1}},{name:"attachedByName",title:this.$t("pim.added_by"),style:{flex:1}}],checkedItems:[],editModalState:null,showAddAttachmentModal:!1,showEditAttachmentModal:!1}},computed:{tableHeaders(){let e=this.headers;e.length>6&&e.pop();const t={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.canEdit&&(t.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}},t.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}}),t.cellConfig.download={onClick:this.onClickDownload,props:{name:"download"}},e.push(t),e}},methods:{async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showAddAttachmentModal=!0,this.showEditAttachmentModal=!1},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},onClickEdit(e){this.showAddAttachmentModal=!1,this.editModalState=e,this.showEditAttachmentModal=!0},onCloseAddAttachmentModal(){this.showAddAttachmentModal=!1,this.reloadAttachments()},onCloseEditAttachmentModal(){this.showEditAttachmentModal=!1,this.reloadAttachments()},async reloadAttachments(){await this.execQuery()},onClickDownload(e){const t=`${window.appGlobal.baseUrl}/claim/requests/${this.requestId}/attachId/${e.id}`;window.open(t,"_blank")}}};const QZ=(0,i.A)(GZ,[["render",BZ],["__scopeId","data-v-0ff71508"]]);var KZ=QZ;const WZ={class:"XHRM-horizontal-padding XHRM-vertical-padding"},JZ={class:"XHRM-action-header"},YZ={class:"XHRM-container"},ZZ={class:"XHRM-bottom-container"};function e0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-divider"),s=(0,a.resolveComponent)("oxd-text"),d=(0,a.resolveComponent)("oxd-button"),c=(0,a.resolveComponent)("table-header"),u=(0,a.resolveComponent)("oxd-card-table"),m=(0,a.resolveComponent)("add-expense-modal"),p=(0,a.resolveComponent)("edit-expense-modal"),h=(0,a.resolveComponent)("delete-confirmation");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(r,{class:"XHRM-horizontal-margin"}),(0,a.createElementVNode)("div",WZ,[(0,a.createElementVNode)("div",JZ,[(0,a.createVNode)(s,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.expenses")),1)]),_:1}),o.canEdit?((0,a.openBlock)(),(0,a.createBlock)(d,{key:0,label:e.$t("general.add"),"icon-name":"plus","display-type":"text",onClick:i.onClickAdd},null,8,["label","onClick"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(c,{total:l.total,loading:l.isLoading,selected:n.checkedItems.length,onDelete:i.onClickDeleteSelected},null,8,["total","loading","selected","onDelete"]),(0,a.createElementVNode)("div",YZ,[(0,a.createVNode)(u,{selected:n.checkedItems,"onUpdate:selected":t[0]||(t[0]=e=>n.checkedItems=e),items:l.items.data,headers:i.tableHeaders,selectable:o.canEdit,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["selected","items","headers","selectable","loading"])]),(0,a.createElementVNode)("div",ZZ,[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.total_amount",{currencyName:o.currency.name,totalAmount:i.formatedAmount})),1)]),_:1})]),n.showAddExpenseModal?((0,a.openBlock)(),(0,a.createBlock)(m,{key:0,"request-id":o.requestId,onClose:i.onCloseAddExpenseModal},null,8,["request-id","onClose"])):(0,a.createCommentVNode)("",!0),n.showEditExpenseModal?((0,a.openBlock)(),(0,a.createBlock)(p,{key:1,"request-id":o.requestId,data:n.editModalState,onClose:i.onCloseEditExpenseModal},null,8,["request-id","data","onClose"])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(h,{ref:"deleteDialog"},null,512)],64)}const t0={class:"XHRM-modal-header"};function o0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("claim-expense-type-dropdown"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("oxd-input-field"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(V,{"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",t0,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.add_expense")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.expense.type,"onUpdate:modelValue":t[0]||(t[0]=e=>n.expense.type=e),label:e.$t("claim.expense_type"),rules:n.rules.type},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.expense.date,"onUpdate:modelValue":t[1]||(t[1]=e=>n.expense.date=e),label:e.$t("general.date"),rules:n.rules.date,years:n.yearsArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.expense.amount,"onUpdate:modelValue":t[2]||(t[2]=e=>n.expense.amount=e),label:e.$t("general.amount"),rules:n.rules.amount,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.expense.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.expense.note=e),type:"textarea",label:e.$t("general.note"),rules:n.rules.note},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}function a0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("claim.event"),options:l.options,required:""},null,8,["label","options"])}var l0={name:"ClaimEventDropdown",setup(){const e=(0,a.ref)([]),t=new H(window.appGlobal.baseUrl,"/api/v2/claim/expenses/types");return(0,a.onBeforeMount)(()=>{t.getAll({limit:0,status:!0}).then(({data:t})=>{e.value=t.data.map(e=>({id:e.id,label:e.name}))})}),{options:e}}};const n0=(0,i.A)(l0,[["render",a0]]);var i0=n0;const r0={type:null,date:null,amount:null,note:null};var s0={name:"SaveExpense",components:{"oxd-dialog":X.KB,"claim-expense-type-dropdown":i0},props:{requestId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/expenses`),{userDateFormat:o}=F();return{http:t,userDateFormat:o}},data(){return{isLoading:!1,yearsArray:[...xy()],expense:{...r0},rules:{type:[Kt],date:[Kt,Jt(this.userDateFormat)],note:[Wt(1e3)],amount:[Kt,Co(1e10),Ro]}}},methods:{onSave(){this.isLoading=!0,this.http.create({expenseTypeId:this.expense.type.id,date:this.expense.date,amount:Number(this.expense.amount).toFixed(2),note:this.expense.note}).then(()=>this.$toast.saveSuccess()).then(()=>{this.expense={...r0},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const d0=(0,i.A)(s0,[["render",o0]]);var c0=d0;const u0={class:"XHRM-modal-header"};function m0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("claim-expense-type-dropdown"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("oxd-input-field"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(V,{"onUpdate:show":i.onCancel},{default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",u0,[(0,a.createVNode)(r,{type:"card-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.edit_expense")),1)]),_:1})]),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.selectedOption,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedOption=e),label:e.$t("claim.expense_type"),rules:n.rules.type},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:2,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.expense.date,"onUpdate:modelValue":t[1]||(t[1]=e=>n.expense.date=e),label:e.$t("general.date"),rules:n.rules.date,years:e.yearsArray,required:""},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.expense.amount,"onUpdate:modelValue":t[2]||(t[2]=e=>n.expense.amount=e),label:e.$t("general.amount"),rules:n.rules.amount,required:""},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:1,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.expense.note,"onUpdate:modelValue":t[3]||(t[3]=e=>n.expense.note=e),type:"textarea",label:e.$t("general.note"),rules:n.rules.note},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{type:"button","display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f)]),_:1})]),_:1},8,["loading","onSubmitValid"])]),_:1},8,["onUpdate:show"])}const p0={expenseType:null,date:null,amount:null,note:null};var h0={name:"EditExpense",components:{"oxd-dialog":X.KB,"claim-expense-type-dropdown":i0},props:{data:{type:Object,required:!0},requestId:{type:Number,required:!0}},emits:["close"],setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/expenses`),{userDateFormat:o}=F();return{http:t,userDateFormat:o}},data(){return{isLoading:!1,selectedOption:{},expense:{...p0},rules:{type:[Kt],date:[Kt,Jt(this.userDateFormat)],note:[Wt(1e3)],amount:[Kt,ao,Co(1e10),Ro]}}},beforeMount(){this.isLoading=!0,this.http.get(this.data.id).then(e=>{const{data:t}=e.data;this.expense=t,this.expense.amount=parseFloat(t.amount).toFixed(2),this.selectedOption={id:t.expenseType.id,label:t.expenseType.isDeleted?`${t.expenseType.name} (${this.$t("general.deleted")})`:t.expenseType.status?t.expenseType.name:`${t.expenseType.name} (${this.$t("performance.inactive")})`}}).finally(()=>{this.isLoading=!1})},methods:{onSave(){this.isLoading=!0,this.http.update(this.data.id,{expenseTypeId:this.selectedOption.id,date:this.expense.date,amount:Number(this.expense.amount).toFixed(2),note:this.expense.note}).then(()=>this.$toast.updateSuccess()).then(()=>{this.expense={...p0},this.onCancel()})},onCancel(){this.$emit("close",!0)}}};const g0=(0,i.A)(h0,[["render",m0]]);var v0=g0,f0={name:"ClaimExpenses",components:{"delete-confirmation":Xt,"add-expense-modal":c0,"edit-expense-modal":v0},props:{requestId:{type:Number,required:!0},currency:{type:Object,required:!0},canEdit:{type:Boolean,required:!0}},setup(e){const{locale:t}=Ae(),{jsDateFormat:o}=F(),l=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/expenses`),n=e=>e.map(e=>({id:e.id,date:e.date?ge(he(e.date),o,{locale:t}):"",amount:e.amount?e.amount.toFixed(2):"0.00",note:e.note?e.note:"",expenseType:e.expenseType?e.expenseType.name:""})),{showPaginator:i,currentPage:r,total:s,pages:d,pageSize:c,response:u,isLoading:m,execQuery:p}=Et(l,{normalizer:n,toastNoRecords:!1}),h=(0,a.computed)(()=>{const e=u.value?.meta;return e?e.totalAmount.toFixed(2):(0).toFixed(2)});return{http:l,showPaginator:i,currentPage:r,isLoading:m,total:s,pages:d,pageSize:c,execQuery:p,items:u,totalAmount:h}},data(){return{headers:[{name:"expenseType",slot:"title",title:this.$t("claim.expense_type"),style:{flex:2}},{name:"date",title:this.$t("general.date"),style:{flex:1}},{name:"note",title:this.$t("general.note"),cellType:"oxd-table-cell-truncate",style:{flex:2}},{name:"amount",style:{flex:1},title:this.$t("general.amount")}],checkedItems:[],showAddExpenseModal:!1,showEditExpenseModal:!1,editModalState:null}},computed:{tableHeaders(){let e=this.headers;const t={name:"actions",slot:"action",title:this.$t("general.actions"),style:{flex:1},cellType:"oxd-table-cell-actions",cellConfig:{}};return this.canEdit&&(t.cellConfig.edit={onClick:this.onClickEdit,props:{name:"pencil-fill"}},t.cellConfig.delete={onClick:this.onClickDelete,component:"oxd-icon-button",props:{name:"trash"}}),e[3]={name:"amount",title:`${this.$t("general.amount")} (${this.currency.name})`,style:{flex:1}},Object.keys(t.cellConfig).length>0&&e.push(t),e},formatedAmount(){const e=Number(this.totalAmount);return e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}},methods:{async resetDataTable(){this.checkedItems=[],await this.execQuery()},onClickAdd(){this.showAddExpenseModal=!0},onClickDeleteSelected(){const e=[];this.checkedItems.forEach(t=>{e.push(this.items?.data[t].id)}),this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems(e)})},deleteItems(e){e instanceof Array&&(this.isLoading=!0,this.http.deleteAll({ids:e}).then(()=>this.$toast.deleteSuccess()).then(()=>{this.isLoading=!1,this.resetDataTable()}))},onClickDelete(e){this.$refs.deleteDialog.showDialog().then(t=>{"ok"===t&&this.deleteItems([e.id])})},onCloseAddExpenseModal(){this.showAddExpenseModal=!1,this.resetDataTable()},onCloseEditExpenseModal(){this.showEditExpenseModal=!1,this.resetDataTable()},onClickEdit(e){this.showEditExpenseModal=!0,this.editModalState=e,this.showAddExpenseModal=!1}}};const y0=(0,i.A)(f0,[["render",e0],["__scopeId","data-v-14d6ec57"]]);var C0=y0;function V0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-button");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)({"XHRM-action-button-container":o.allowedActions.length<2,"XHRM-action-buttons-container":o.allowedActions.length>1})},[(0,a.createVNode)(r,{"display-type":"ghost",class:"XHRM-sm-button",label:e.$t("general.back"),onClick:i.onBack},null,8,["label","onClick"]),i.isCancelAllowed?((0,a.openBlock)(),(0,a.createBlock)(r,{key:0,"display-type":"danger",class:"XHRM-sm-button",label:e.$t("general.cancel"),onClick:t[0]||(t[0]=e=>i.onClaimAction("CANCEL"))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.isRejectAllowed?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,"display-type":"danger",class:"XHRM-sm-button",label:e.$t("general.reject"),onClick:t[1]||(t[1]=e=>i.onClaimAction("REJECT"))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.isApproveAllowed?((0,a.openBlock)(),(0,a.createBlock)(r,{key:2,"display-type":"secondary",class:"XHRM-sm-button",label:e.$t("general.approve"),onClick:t[2]||(t[2]=e=>i.onClaimAction("APPROVE"))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.isPayAllowed?((0,a.openBlock)(),(0,a.createBlock)(r,{key:3,"display-type":"secondary",class:"XHRM-sm-button",label:e.$t("claim.pay"),onClick:t[3]||(t[3]=e=>i.onClaimAction("PAY"))},null,8,["label"])):(0,a.createCommentVNode)("",!0),i.isSubmitAllowed?((0,a.openBlock)(),(0,a.createBlock)(r,{key:4,"display-type":"secondary",class:"XHRM-sm-button",label:e.$t("general.submit"),onClick:t[4]||(t[4]=e=>i.onClaimAction("SUBMIT"))},null,8,["label"])):(0,a.createCommentVNode)("",!0)],2)}var b0={name:"ClaimActionButtons",props:{requestId:{type:Number,required:!0},allowedActions:{type:Array,required:!0},isAssigned:{default:!1,type:Boolean,required:!1}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/claim/requests/${e.requestId}/action`);return{http:t}},computed:{isCancelAllowed(){return this.allowedActions.includes("Cancel")},isSubmitAllowed(){return this.allowedActions.includes("Submit")},isApproveAllowed(){return this.allowedActions.includes("Approve")},isRejectAllowed(){return this.allowedActions.includes("Reject")},isPayAllowed(){return this.allowedActions.includes("Pay")}},methods:{onClaimAction(e){this.http.request({method:"PUT",data:{action:e}}).then(()=>this.$toast.saveSuccess()).then(()=>{this.isAssigned?I(`/claim/assignClaim/id/${this.requestId}`):I(`/claim/submitClaim/id/${this.requestId}`)})},onBack(){this.isAssigned?I("/claim/viewAssignClaim"):I("/claim/viewClaim")}}};const w0=(0,i.A)(b0,[["render",V0],["__scopeId","data-v-08481588"]]);var x0=w0,N0={name:"SubmitClaim",components:{"claim-attachment":KZ,"claim-expenses":C0,"claim-action-buttons":x0},props:{id:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0}},setup(){const e=new H(window.appGlobal.baseUrl,"/api/v2/claim/requests");return{http:e}},data(){const e={SUBMITTED:this.$t("time.submitted"),APPROVED:this.$t("time.approved"),REJECTED:this.$t("leave.rejected"),CANCELLED:this.$t("leave.cancelled"),PAID:this.$t("claim.paid"),INITIATED:this.$t("claim.initiated")};return{isLoading:!1,request:{},claimEvent:{},currency:{},response:{},allowedActions:[],statusMap:e}},computed:{canEdit(){return!!this.allowedActions&&this.allowedActions.includes("Submit")},formattedEventName(){return this.claimEvent.isDeleted?`${this.claimEvent.name} (${this.$t("general.deleted")})`:this.claimEvent.status?this.claimEvent.name:`${this.claimEvent.name} (${this.$t("performance.inactive")})`}},beforeMount(){this.isLoading=!0,this.http.get(this.id).then(e=>{const{data:t,meta:o}=e.data;this.response=e.data,this.request=t,this.claimEvent=t.claimEvent,this.currency=t.currencyType,this.allowedActions=o.allowedActions.map(e=>e.name)}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/claim/submitClaim")}}};const k0=(0,i.A)(N0,[["render",MZ]]);var _0=k0;const S0={class:"XHRM-paper-container"},D0={class:"XHRM-header-container"},$0={class:"XHRM-container"},M0={class:"XHRM-bottom-container"};function E0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("reference-id-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("claim-event-dropdown"),c=(0,a.resolveComponent)("status-dropdown"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("date-input"),h=(0,a.resolveComponent)("oxd-divider"),g=(0,a.resolveComponent)("oxd-button"),v=(0,a.resolveComponent)("oxd-form-actions"),f=(0,a.resolveComponent)("oxd-form"),y=(0,a.resolveComponent)("oxd-table-filter"),C=(0,a.resolveComponent)("table-header"),V=(0,a.resolveComponent)("oxd-card-table"),b=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(y,{"filter-title":e.$t("claim.my_claims")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.referenceId,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.referenceId=e),label:e.$t("claim.reference_id")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.claimEvent,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.claimEvent=e),label:e.$t("claim.event_name")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.status,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.status=e),label:e.$t("general.status")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.fromDate=e),label:e.$t("general.from_date"),rules:n.rules.date,years:e.yearsArray},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.toDate=e),label:e.$t("general.to_date"),rules:n.rules.toDate,years:e.yearsArray},null,8,["modelValue","label","rules","years"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(h),(0,a.createVNode)(v,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(g,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",S0,[(0,a.createElementVNode)("div",D0,[(0,a.createVNode)(g,{label:e.$t("claim.submit_claim"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(C,{total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",$0,[(0,a.createVNode)(V,{order:l.sortDefinition,"onUpdate:order":t[5]||(t[5]=e=>l.sortDefinition=e),items:l.items.data,headers:n.headers,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["order","items","headers","loading"])]),(0,a.createElementVNode)("div",M0,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(b,{key:0,current:l.currentPage,"onUpdate:current":t[6]||(t[6]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])],64)}function R0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",clear:!1,label:e.$t("claim.reference_id"),"create-options":i.loadTypes},{option:(0,a.withCtx)(({data:e})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.label),1)]),_:1},8,["label","create-options"])}var T0={name:"ReferenceIdAutocomplete",props:{isAssigned:{default:!1,type:Boolean,required:!1}},setup(e){const t=new H(window.appGlobal.baseUrl,e.isAssigned?"/api/v2/claim/employees/requests?model=summary":"/api/v2/claim/requests?model=summary");return{http:t}},methods:{async loadTypes(e){return new Promise(t=>{if(e.trim()){const o={referenceId:e.trim()};this.http.getAll(o).then(({data:e})=>{t(e.data.map(e=>({id:e.referenceId,label:e.referenceId})))})}else t([])})}}};const B0=(0,i.A)(T0,[["render",R0],["__scopeId","data-v-74c3c453"]]);var I0=B0;function A0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"select",label:e.$t("general.status"),options:n.options},null,8,["label","options"])}var H0={name:"StatusDropdown",data(){const e=(0,a.ref)([{id:"INITIATED",label:this.$t("claim.initiated")},{id:"SUBMITTED",label:this.$t("time.submitted")},{id:"APPROVED",label:this.$t("time.approved")},{id:"REJECTED",label:this.$t("leave.rejected")},{id:"CANCELLED",label:this.$t("leave.cancelled")},{id:"PAID",label:this.$t("claim.paid")}]);return{options:e}}};const X0=(0,i.A)(H0,[["render",A0]]);var U0=X0;const L0={referenceId:"",claimEvent:null,status:null,fromDate:null,toDate:null},P0={"claimRequest.referenceId":"DESC","claimRequest.claimEvent.name":"ASC","claimRequest.status":"ASC","claimRequest.submittedDate":"ASC"};var q0={components:{"reference-id-autocomplete":I0,"claim-event-dropdown":wZ,"status-dropdown":U0},setup(){const e=(0,a.ref)({...L0}),{sortDefinition:t,sortField:o,sortOrder:l,onSort:n}=Ut({sortDefinition:P0}),{locale:i}=Ae(),{jsDateFormat:r}=F(),s=(0,a.computed)(()=>({referenceId:"object"===typeof e.value.referenceId&&e.value.referenceId?e.value.referenceId.id:"string"===typeof e.value.referenceId?e.value.referenceId:null,eventId:e.value.claimEvent?e.value.claimEvent?.id:null,status:e.value.status?e.value.status?.id:null,fromDate:e.value.fromDate,toDate:e.value.toDate,sortField:"claimRequest.claimEvent.name"===o.value?"claimEvent.name":o.value,sortOrder:l.value})),d=e=>e.map(e=>({id:e.id,referenceId:e.referenceId,eventName:e.claimEvent.name,description:e.description,currency:e.currencyType.name,status:e.status.charAt(0).toUpperCase()+e.status.slice(1).toLowerCase(),submittedDate:ge(he(e.submittedDate),r,{locale:i}),amount:Number(e.amount).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})),c=new H(window.appGlobal.baseUrl,"/api/v2/claim/requests"),{showPaginator:u,currentPage:m,total:p,pages:h,pageSize:g,response:v,isLoading:f,execQuery:y}=Et(c,{normalizer:d,query:s});return n(y),{http:c,showPaginator:u,currentPage:m,isLoading:f,total:p,pages:h,pageSize:g,execQuery:y,items:v,response:v,filters:e,sortDefinition:t,useDateFormat:F}},data(){return{headers:[{name:"referenceId",title:this.$t("claim.reference_id"),slot:"title",sortField:"claimRequest.referenceId",style:{flex:3}},{name:"eventName",title:this.$t("claim.event_name"),slot:"title",cellType:"oxd-table-cell-truncate",sortField:"claimRequest.claimEvent.name",style:{flex:3}},{name:"description",title:this.$t("general.description"),slot:"title",cellType:"oxd-table-cell-truncate",sortField:"claimRequest.description",style:{flex:4}},{name:"currency",title:this.$t("general.currency"),slot:"title",style:{flex:3}},{name:"submittedDate",title:this.$t("claim.submitted_date"),slot:"title",sortField:"claimRequest.submittedDate",style:{flex:3}},{name:"status",title:this.$t("general.status"),sortField:"claimRequest.status",style:{flex:2}},{name:"amount",title:this.$t("general.amount"),slot:"title",sortField:"claimRequest.amount",style:{flex:3}},{name:"actions",slot:"right",title:this.$t("general.actions"),style:{flex:3},cellType:"oxd-table-cell-actions",cellConfig:{view:{onClick:this.onClickView,component:"oxd-button",props:{label:this.$t("claim.view_details"),displayType:"text",size:"medium"}}}}],rules:{date:[Jt(this.userDateFormat)],toDate:[Jt(this.userDateFormat),so(()=>this.filters.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})]}}},methods:{async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...L0},this.filterItems()},onClickAdd(){I("/claim/submitClaim")},onClickView(e){I("/claim/submitClaim/id/{id}",{id:e.id})}}};const F0=(0,i.A)(q0,[["render",E0]]);var z0=F0;const j0={class:"XHRM-background-container"},O0={class:"XHRM-card-container"};function G0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("claim-employee-autocomplete"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("claim-event-dropdown"),h=(0,a.resolveComponent)("oxd-input-field"),g=(0,a.resolveComponent)("required-text"),v=(0,a.resolveComponent)("oxd-button"),f=(0,a.resolveComponent)("submit-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form");return(0,a.openBlock)(),(0,a.createElementBlock)("div",j0,[(0,a.createElementVNode)("div",O0,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.create_claim_request")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(C,{loading:n.isLoading,onSubmitValid:i.onSave},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.employee=e),rules:n.rules.employee,params:{includeEmployees:"onlyCurrent"},required:"","auth-employee-number":o.authEmployeeNumber},null,8,["modelValue","rules","auth-employee-number"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,{modelValue:n.request.event,"onUpdate:modelValue":t[1]||(t[1]=e=>n.request.event=e),rules:n.rules.event,required:""},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.request.currency,"onUpdate:modelValue":t[2]||(t[2]=e=>n.request.currency=e),type:"select",rules:n.rules.currency,options:o.currencies,label:e.$t("general.currency"),required:""},null,8,["modelValue","rules","options","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{class:"--span-column-2"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:n.request.remarks,"onUpdate:modelValue":t[3]||(t[3]=e=>n.request.remarks=e),type:"textarea",label:e.$t("claim.remarks"),rules:n.rules.remarks},null,8,["modelValue","label","rules"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g),(0,a.createVNode)(v,{"display-type":"ghost",label:e.$t("general.cancel"),onClick:i.onCancel},null,8,["label","onClick"]),(0,a.createVNode)(f,{label:e.$t("claim.create")},null,8,["label"])]),_:1})]),_:1},8,["loading","onSubmitValid"])])])}const Q0={key:0,class:"past-employee-tag"};function K0(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-input-field");return(0,a.openBlock)(),(0,a.createBlock)(r,{type:"autocomplete",label:e.$t("general.employee_name"),clear:!1,"create-options":i.loadEmployees},{afterSelected:(0,a.withCtx)(({data:t})=>[t.isPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("general.past_employee")),1)],64)):(0,a.createCommentVNode)("",!0)]),option:(0,a.withCtx)(({data:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(t.label),1),t.isPastEmployee?((0,a.openBlock)(),(0,a.createElementBlock)("div",Q0,(0,a.toDisplayString)(e.$t("general.past_employee")),1)):(0,a.createCommentVNode)("",!0)]),_:1},8,["label","create-options"])}var W0={name:"ClaimEmployeeAutocomplete",props:{params:{type:Object,default:()=>({})},apiPath:{type:String,default:"/api/v2/pim/employees"},authEmployeeNumber:{type:Number,default:null}},setup(e){const t=new H(window.appGlobal.baseUrl,e.apiPath);return{http:t}},methods:{async loadEmployees(e){return new Promise(t=>{e.trim()?this.http.getAll({nameOrId:e.trim(),...this.params}).then(({data:e})=>{t(e.data.filter(e=>e.empNumber!==this.authEmployeeNumber).map(e=>({id:e.empNumber,label:`${e.firstName} ${e.middleName} ${e.lastName}`,_employee:e,isPastEmployee:!!e.terminationId})))}):t([])})}}};const J0=(0,i.A)(W0,[["render",K0],["__scopeId","data-v-5efcdd36"]]);var Y0=J0;const Z0={event:null,currency:null,remarks:null};var e1={name:"AssignClaimRequest",components:{"claim-event-dropdown":wZ,"claim-employee-autocomplete":Y0},props:{currencies:{type:Array,default:()=>[]},authEmployeeNumber:{type:Number,required:!0}},setup(){const e=(0,a.ref)(null);return{employee:e}},data(){return{isLoading:!1,request:{...Z0},id:0,rules:{employee:[Kt,$o],event:[Kt],currency:[Kt],remarks:[Wt(1e3)]}}},methods:{onCancel(){I("/claim/viewAssignClaim")},onSave(){this.isLoading=!0;const e=new H(window.appGlobal.baseUrl,`/api/v2/claim/employees/${this.employee.id}/requests`);e.create({claimEventId:this.request.event.id,currencyId:this.request.currency.id,remarks:this.request.remarks}).then(e=>(this.id=e.data.data.id,this.$toast.saveSuccess())).then(()=>{I("/claim/assignClaim/id/{id}",{id:this.id})})}}};const t1=(0,i.A)(e1,[["render",G0]]);var o1=t1;const a1={class:"XHRM-background-container"},l1={class:"XHRM-paper-container"},n1={class:"XHRM-card-container"};function i1(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-text"),s=(0,a.resolveComponent)("oxd-divider"),d=(0,a.resolveComponent)("oxd-input-field"),c=(0,a.resolveComponent)("oxd-grid-item"),u=(0,a.resolveComponent)("oxd-grid"),m=(0,a.resolveComponent)("oxd-form-row"),p=(0,a.resolveComponent)("oxd-form"),h=(0,a.resolveComponent)("claim-expenses"),g=(0,a.resolveComponent)("claim-attachment"),v=(0,a.resolveComponent)("claim-action-buttons");return(0,a.openBlock)(),(0,a.createElementBlock)("div",a1,[(0,a.createElementVNode)("div",l1,[(0,a.createElementVNode)("div",n1,[(0,a.createVNode)(r,{tag:"h6",class:"XHRM-main-title"},{default:(0,a.withCtx)(()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.$t("claim.assign_claim")),1)]),_:1}),(0,a.createVNode)(s),(0,a.createVNode)(p,{loading:n.isLoading},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.employeeName,"onUpdate:modelValue":t[0]||(t[0]=e=>n.employeeName=e),label:e.$t("general.employee"),disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.request.referenceId,"onUpdate:modelValue":t[1]||(t[1]=e=>n.request.referenceId=e),label:e.$t("claim.reference_id"),disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:i.formattedEventName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formattedEventName=e),label:e.$t("claim.event"),disabled:""},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.statusMap[n.request.status],"onUpdate:modelValue":t[3]||(t[3]=e=>n.statusMap[n.request.status]=e),label:e.$t("general.status"),disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.currency.name,"onUpdate:modelValue":t[4]||(t[4]=e=>n.currency.name=e),label:e.$t("general.currency"),disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(m,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{cols:3,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:n.request.remarks,"onUpdate:modelValue":t[5]||(t[5]=e=>n.request.remarks=e),label:e.$t("claim.remarks"),type:"textarea",disabled:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["loading"])]),(0,a.createVNode)(h,{"request-id":o.id,currency:n.currency,"can-edit":i.canEdit},null,8,["request-id","currency","can-edit"]),t[6]||(t[6]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(g,{"request-id":o.id,"can-edit":i.canEdit,"allowed-file-types":o.allowedFileTypes,"max-file-size":o.maxFileSize},null,8,["request-id","can-edit","allowed-file-types","max-file-size"]),t[7]||(t[7]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createVNode)(v,{"request-id":o.id,"allowed-actions":n.allowedActions,"is-assigned":!0},null,8,["request-id","allowed-actions"])])])}var r1={name:"AssignClaim",components:{"claim-attachment":KZ,"claim-expenses":C0,"claim-action-buttons":x0},props:{id:{type:Number,required:!0},allowedFileTypes:{type:Array,required:!0},maxFileSize:{type:Number,required:!0},empNumber:{type:Number,required:!0}},setup(e){const t=new H(window.appGlobal.baseUrl,`/api/v2/claim/employees/${e.empNumber}/requests`);return{http:t}},data(){const e={SUBMITTED:this.$t("time.submitted"),APPROVED:this.$t("time.approved"),REJECTED:this.$t("leave.rejected"),CANCELLED:this.$t("leave.cancelled"),PAID:this.$t("claim.paid"),INITIATED:this.$t("claim.initiated")};return{isLoading:!1,request:{},claimEvent:{},currency:{},response:{},allowedActions:[],employee:{},statusMap:e,employeeName:""}},computed:{canEdit(){return!!this.allowedActions&&this.allowedActions.includes("Submit")},formattedEventName(){return this.claimEvent.isDeleted?`${this.claimEvent.name} ${this.$t("general.deleted")}`:this.claimEvent.status?this.claimEvent.name:`${this.claimEvent.name} (${this.$t("performance.inactive")})`}},beforeMount(){const{$tEmpName:e}=Ma();this.isLoading=!0,this.http.get(this.id).then(t=>{const{data:o,meta:a}=t.data;this.response=t.data,this.request=o,this.claimEvent=o.claimEvent,this.currency=o.currencyType,this.allowedActions=a.allowedActions.map(e=>e.name),this.employee=a.employee,this.employeeName=e(this.employee)}).finally(()=>{this.isLoading=!1})},methods:{onCancel(){I("/claim/submitClaim")}}};const s1=(0,i.A)(r1,[["render",i1]]);var d1=s1;const c1={class:"XHRM-paper-container"},u1={class:"XHRM-header-container"},m1={class:"XHRM-container"},p1={class:"XHRM-bottom-container"};function h1(e,t,o,l,n,i){const r=(0,a.resolveComponent)("employee-autocomplete"),s=(0,a.resolveComponent)("oxd-grid-item"),d=(0,a.resolveComponent)("reference-id-autocomplete"),c=(0,a.resolveComponent)("claim-event-dropdown"),u=(0,a.resolveComponent)("status-dropdown"),m=(0,a.resolveComponent)("oxd-grid"),p=(0,a.resolveComponent)("oxd-form-row"),h=(0,a.resolveComponent)("date-input"),g=(0,a.resolveComponent)("include-employee-dropdown"),v=(0,a.resolveComponent)("oxd-divider"),f=(0,a.resolveComponent)("oxd-button"),y=(0,a.resolveComponent)("oxd-form-actions"),C=(0,a.resolveComponent)("oxd-form"),V=(0,a.resolveComponent)("oxd-table-filter"),b=(0,a.resolveComponent)("table-header"),w=(0,a.resolveComponent)("oxd-card-table"),x=(0,a.resolveComponent)("oxd-pagination");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createVNode)(V,{"filter-title":e.$t("claim.employee_claims")},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(C,{onSubmitValid:i.filterItems},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(r,{modelValue:l.filters.employee,"onUpdate:modelValue":t[0]||(t[0]=e=>l.filters.employee=e),rules:n.rules.employee,params:{includeEmployees:"currentAndPast"}},null,8,["modelValue","rules"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(d,{modelValue:l.filters.referenceId,"onUpdate:modelValue":t[1]||(t[1]=e=>l.filters.referenceId=e),"is-assigned":!0,label:e.$t("claim.reference_id")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(c,{modelValue:l.filters.claimEvent,"onUpdate:modelValue":t[2]||(t[2]=e=>l.filters.claimEvent=e),label:e.$t("claim.event_name")},null,8,["modelValue","label"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(u,{modelValue:l.filters.status,"onUpdate:modelValue":t[3]||(t[3]=e=>l.filters.status=e),label:e.$t("general.status")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(p,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(m,{cols:4,class:"XHRM-full-width-grid"},{default:(0,a.withCtx)(()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:l.filters.fromDate,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filters.fromDate=e),label:e.$t("general.from_date"),rules:n.rules.date,years:e.yearsArray},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(h,{modelValue:l.filters.toDate,"onUpdate:modelValue":t[5]||(t[5]=e=>l.filters.toDate=e),label:e.$t("general.to_date"),rules:n.rules.toDate,years:e.yearsArray},null,8,["modelValue","label","rules","years"])]),_:1}),(0,a.createVNode)(s,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(g,{modelValue:l.filters.includeEmployees,"onUpdate:modelValue":t[6]||(t[6]=e=>l.filters.includeEmployees=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.createVNode)(v),(0,a.createVNode)(y,null,{default:(0,a.withCtx)(()=>[(0,a.createVNode)(f,{"display-type":"ghost",label:e.$t("general.reset"),onClick:i.onClickReset},null,8,["label","onClick"]),(0,a.createVNode)(f,{class:"XHRM-left-space","display-type":"secondary",label:e.$t("general.search"),type:"submit"},null,8,["label"])]),_:1})]),_:1},8,["onSubmitValid"])]),_:1},8,["filter-title"]),t[9]||(t[9]=(0,a.createElementVNode)("br",null,null,-1)),(0,a.createElementVNode)("div",c1,[(0,a.createElementVNode)("div",u1,[(0,a.createVNode)(f,{label:e.$t("claim.assign_claim"),"icon-name":"plus","display-type":"secondary",onClick:i.onClickAdd},null,8,["label","onClick"])]),(0,a.createVNode)(b,{total:l.total,loading:l.isLoading},null,8,["total","loading"]),(0,a.createElementVNode)("div",m1,[(0,a.createVNode)(w,{order:l.sortDefinition,"onUpdate:order":t[7]||(t[7]=e=>l.sortDefinition=e),items:l.items.data,headers:n.headers,selectable:!1,clickable:!1,loading:l.isLoading,"row-decorator":"oxd-table-decorator-card"},null,8,["order","items","headers","loading"])]),(0,a.createElementVNode)("div",p1,[l.showPaginator?((0,a.openBlock)(),(0,a.createBlock)(x,{key:0,current:l.currentPage,"onUpdate:current":t[8]||(t[8]=e=>l.currentPage=e),length:l.pages},null,8,["current","length"])):(0,a.createCommentVNode)("",!0)])])],64)}const g1={referenceId:"",employee:null,claimEvent:null,status:null,fromDate:null,toDate:null},v1={"claimRequest.referenceId":"DESC","employee.firstName":"ASC","claimEvent.name":"ASC","claimRequest.status":"ASC","claimRequest.submittedDate":"ASC"};var f1={components:{"reference-id-autocomplete":I0,"claim-event-dropdown":wZ,"status-dropdown":U0,"employee-autocomplete":$a,"include-employee-dropdown":qp},props:{empNumber:{type:Number,required:!0}},setup(){const{$t:e}=Ie(),t=(0,a.ref)({includeEmployees:{id:1,param:"onlyCurrent",label:e("general.current_employees_only")},...g1}),{$tEmpName:o}=Ma(),{sortDefinition:l,sortField:n,sortOrder:i,onSort:r}=Ut({sortDefinition:v1}),{locale:s}=Ae(),{jsDateFormat:d}=F(),c=(0,a.computed)(()=>({referenceId:"object"===typeof t.value.referenceId&&t.value.referenceId?t.value.referenceId.id:"string"===typeof t.value.referenceId?t.value.referenceId:null,empNumber:t.value.employee?.id,eventId:t.value.claimEvent?t.value.claimEvent?.id:null,status:t.value.status?t.value.status?.id:null,fromDate:t.value.fromDate,toDate:t.value.toDate,includeEmployees:t.value.includeEmployees?.param,sortField:"claimRequest.claimEvent.name"===n.value?"claimEvent.name":n.value,sortOrder:i.value})),u=e=>e.map(e=>({id:e.id,referenceId:e.referenceId,employee:o(e.employee),eventName:e.claimEvent.name,description:e.description,currency:e.currencyType.name,status:e.status.charAt(0).toUpperCase()+e.status.slice(1).toLowerCase(),submittedDate:ge(he(e.submittedDate),d,{locale:s}),amount:Number(e.amount).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})})),m=new H(window.appGlobal.baseUrl,"/api/v2/claim/employees/requests"),{showPaginator:p,currentPage:h,total:g,pages:v,pageSize:f,response:y,isLoading:C,execQuery:V}=Et(m,{normalizer:u,query:c});return r(V),{http:m,showPaginator:p,currentPage:h,isLoading:C,total:g,pages:v,pageSize:f,execQuery:V,items:y,response:y,filters:t,sortDefinition:l,useDateFormat:F}},data(){return{headers:[{name:"referenceId",title:this.$t("claim.reference_id"),slot:"title",sortField:"claimRequest.referenceId",style:{flex:3}},{name:"employee",title:this.$t("general.employee_name"),slot:"title",sortField:"employee.firstName",style:{flex:4}},{name:"eventName",title:this.$t("claim.event_name"),slot:"title",cellType:"oxd-table-cell-truncate",sortField:"claimEvent.name",style:{flex:3}},{name:"description",title:this.$t("general.description"),slot:"title",cellType:"oxd-table-cell-truncate",sortField:"claimRequest.description",style:{flex:4}},{name:"currency",title:this.$t("general.currency"),slot:"title",style:{flex:3}},{name:"submittedDate",title:this.$t("claim.submitted_date"),slot:"title",sortField:"claimRequest.submittedDate",style:{flex:3}},{name:"status",title:this.$t("general.status"),sortField:"claimRequest.status",style:{flex:2}},{name:"amount",title:this.$t("general.amount"),slot:"title",sortField:"claimRequest.amount",style:{flex:3}},{name:"actions",slot:"right",title:this.$t("general.actions"),style:{flex:4},cellType:"oxd-table-cell-actions",cellConfig:{view:{onClick:this.onClickView,component:"oxd-button",props:{label:this.$t("claim.view_details"),displayType:"text",size:"medium"}}}}],rules:{date:[Jt(this.userDateFormat)],toDate:[Jt(this.userDateFormat),so(()=>this.filters.fromDate,this.$t("general.to_date_should_be_after_from_date"),{allowSameDate:!0})],employee:[Wt(100),$o]}}},methods:{async resetDataTable(){this.checkedItems=[],await this.execQuery()},async filterItems(){await this.execQuery()},onClickReset(){this.filters={...g1},this.filterItems()},onClickAdd(){I("/claim/assignClaim")},onClickView(e){I("/claim/assignClaim/id/{id}",{id:e.id})}}};const y1=(0,i.A)(f1,[["render",h1]]);var C1=y1,V1={"claim-event":xY,"claim-event-create":EY,"claim-event-edit":UY,"claim-expense-types":ZY,"claim-expense-type-create":rZ,"claim-expense-type-edit":gZ,"submit-claim-request":_Z,"submit-claim":_0,"my-claim":z0,"assign-claim-request":o1,"assign-claim":d1,"employee-claim":C1};const b1={class:"pm-container"},w1={class:"pm-sidebar"},x1={class:"pm-sidebar-header"},N1={class:"pm-nav"},k1={key:0,class:"pm-nav-item",style:{padding:"5px 15px"}},_1=["onClick"],S1={class:"pm-main"},D1={class:"pm-toolbar"},$1={class:"pm-search-container"},M1={key:0,class:"pm-unlock-loading"},E1={key:1,class:"pm-unlock-error"},R1={key:2,class:"pm-content"},T1={key:3,class:"pm-content"},B1={class:"pm-audit-log"},I1={class:"pm-audit-header"},A1={class:"pm-audit-filters"},H1={key:0,class:"pm-empty"},X1={key:1,class:"pm-audit-table"},U1={class:"pm-audit-ua"},L1={key:4,class:"pm-content"},P1={key:0,class:"pm-grid"},q1=["onClick"],F1=["onClick"],z1=["src"],j1={class:"pm-card-info"},O1={class:"pm-card-name"},G1={class:"pm-card-sub"},Q1={class:"pm-card-actions"},K1=["onClick"],W1=["onClick"],J1=["onClick"],Y1=["onClick"],Z1=["onClick"],e8={key:1,class:"pm-empty"};function t8(e,t,o,l,n,i){const r=(0,a.resolveComponent)("security-dashboard"),s=(0,a.resolveComponent)("vault-item-view"),d=(0,a.resolveComponent)("vault-item-form"),c=(0,a.resolveComponent)("share-modal");return(0,a.openBlock)(),(0,a.createElementBlock)("div",b1,[(0,a.createElementVNode)("div",w1,[(0,a.createElementVNode)("div",x1,[t[20]||(t[20]=(0,a.createElementVNode)("h3",{class:"pm-title"},"Vault",-1)),(0,a.createElementVNode)("button",{class:"pm-add-btn",onClick:t[0]||(t[0]=t=>e.showAddItemModal=!0)},[...t[19]||(t[19]=[(0,a.createElementVNode)("i",{class:"oxd-icon bi-plus-lg"},null,-1),(0,a.createTextVNode)(" New Item ",-1)])])]),(0,a.createElementVNode)("nav",N1,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pm-nav-item",{active:"all"===e.currentFilter}]),onClick:t[1]||(t[1]=t=>e.currentFilter="all")},[...t[21]||(t[21]=[(0,a.createElementVNode)("i",{class:"oxd-icon bi-shield-lock"},null,-1),(0,a.createElementVNode)("span",null,"All Items",-1)])],2),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pm-nav-item",{active:"favorites"===e.currentFilter}]),onClick:t[2]||(t[2]=t=>e.currentFilter="favorites")},[...t[22]||(t[22]=[(0,a.createElementVNode)("i",{class:"oxd-icon bi-star"},null,-1),(0,a.createElementVNode)("span",null,"Favorites",-1)])],2),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pm-nav-item",{active:"shared"===e.currentFilter}]),onClick:t[3]||(t[3]=t=>{e.currentFilter="shared",e.fetchSharedWithMe()})},[...t[23]||(t[23]=[(0,a.createElementVNode)("i",{class:"oxd-icon bi-people"},null,-1),(0,a.createElementVNode)("span",null,"Shared with Me",-1)])],2),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pm-nav-item",{active:"security"===e.currentFilter}]),onClick:t[4]||(t[4]=t=>e.currentFilter="security")},[...t[24]||(t[24]=[(0,a.createElementVNode)("i",{class:"oxd-icon bi-activity"},null,-1),(0,a.createElementVNode)("span",null,"Security Audit",-1)])],2),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pm-nav-item",{active:"activity"===e.currentFilter}]),onClick:t[5]||(t[5]=t=>{e.currentFilter="activity",e.fetchAuditLog()})},[...t[25]||(t[25]=[(0,a.createElementVNode)("i",{class:"oxd-icon bi-clock-history"},null,-1),(0,a.createElementVNode)("span",null,"Activity Log",-1)])],2),t[28]||(t[28]=(0,a.createElementVNode)("div",{class:"pm-nav-divider"},null,-1)),(0,a.createElementVNode)("div",{class:"pm-nav-header",style:{display:"flex","justify-content":"space-between","align-items":"center",cursor:"pointer"},onClick:t[6]||(t[6]=t=>e.showAddCategoryInput=!e.showAddCategoryInput)},[...t[26]||(t[26]=[(0,a.createTextVNode)(" Categories ",-1),(0,a.createElementVNode)("i",{class:"bi bi-plus",style:{"font-size":"1.2rem"}},null,-1)])]),e.showAddCategoryInput?((0,a.openBlock)(),(0,a.createElementBlock)("div",k1,[(0,a.withDirectives)((0,a.createElementVNode)("input",{ref:"categoryInput","onUpdate:modelValue":t[7]||(t[7]=t=>e.newCategoryName=t),placeholder:"New Category...",class:"pm-search-input",style:{padding:"8px","font-size":"0.9rem"},onKeyup:t[8]||(t[8]=(0,a.withKeys)((...t)=>e.createCategory&&e.createCategory(...t),["enter"])),onBlur:t[9]||(t[9]=t=>e.showAddCategoryInput=!1)},null,544),[[a.vModelText,e.newCategoryName]])])):(0,a.createCommentVNode)("",!0),((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.categories,o=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:o.id,class:(0,a.normalizeClass)(["pm-nav-item",{active:e.currentFilter===o.id}]),onClick:t=>e.currentFilter=o.id},[t[27]||(t[27]=(0,a.createElementVNode)("i",{class:"oxd-icon bi-folder"},null,-1)),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(o.name),1)],10,_1))),128))])]),(0,a.createElementVNode)("div",S1,[(0,a.createElementVNode)("div",D1,[(0,a.createElementVNode)("div",$1,[t[29]||(t[29]=(0,a.createElementVNode)("i",{class:"bi bi-search pm-search-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.searchQuery=t),class:"pm-search-input",placeholder:"Search your secure vault..."},null,512),[[a.vModelText,e.searchQuery]])]),(0,a.createElementVNode)("button",{class:"pm-lock-btn",title:"Lock Vault",onClick:t[11]||(t[11]=(...t)=>e.lockVault&&e.lockVault(...t))},[...t[30]||(t[30]=[(0,a.createElementVNode)("i",{class:"bi bi-lock-fill"},null,-1)])])]),e.isUnlocking?((0,a.openBlock)(),(0,a.createElementBlock)("div",M1,[...t[31]||(t[31]=[(0,a.createElementVNode)("i",{class:"bi bi-shield-lock"},null,-1),(0,a.createElementVNode)("p",null,"Unlocking your vault...",-1)])])):e.unlockError?((0,a.openBlock)(),(0,a.createElementBlock)("div",E1,[t[32]||(t[32]=(0,a.createElementVNode)("i",{class:"bi bi-exclamation-triangle"},null,-1)),(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(e.unlockError),1),(0,a.createElementVNode)("button",{class:"pm-add-btn",onClick:t[12]||(t[12]=(...t)=>e.initAutoUnlock&&e.initAutoUnlock(...t))},"Retry")])):"security"===e.currentFilter?((0,a.openBlock)(),(0,a.createElementBlock)("div",R1,[(0,a.createVNode)(r,{items:e.allDataForAudit,onEdit:e.editItem},null,8,["items","onEdit"])])):"activity"===e.currentFilter?((0,a.openBlock)(),(0,a.createElementBlock)("div",T1,[(0,a.createElementVNode)("div",B1,[(0,a.createElementVNode)("div",I1,[t[34]||(t[34]=(0,a.createElementVNode)("h3",null,"Activity Log",-1)),(0,a.createElementVNode)("div",A1,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":t[13]||(t[13]=t=>e.auditFilter.action=t),class:"pm-audit-select",onChange:t[14]||(t[14]=(...t)=>e.fetchAuditLog&&e.fetchAuditLog(...t))},[...t[33]||(t[33]=[(0,a.createStaticVNode)('<option value="" data-v-25ca0d56>All Actions</option><option value="created" data-v-25ca0d56>Created</option><option value="viewed" data-v-25ca0d56>Viewed</option><option value="updated" data-v-25ca0d56>Updated</option><option value="deleted" data-v-25ca0d56>Deleted</option><option value="password_copied" data-v-25ca0d56>Password Copied</option><option value="url_launched" data-v-25ca0d56>URL Launched</option><option value="shared" data-v-25ca0d56>Shared</option><option value="unshared" data-v-25ca0d56>Unshared</option>',9)])],544),[[a.vModelSelect,e.auditFilter.action]]),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[15]||(t[15]=t=>e.auditFilter.from=t),type:"date",class:"pm-audit-input",onChange:t[16]||(t[16]=(...t)=>e.fetchAuditLog&&e.fetchAuditLog(...t))},null,544),[[a.vModelText,e.auditFilter.from]]),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[17]||(t[17]=t=>e.auditFilter.to=t),type:"date",class:"pm-audit-input",onChange:t[18]||(t[18]=(...t)=>e.fetchAuditLog&&e.fetchAuditLog(...t))},null,544),[[a.vModelText,e.auditFilter.to]])])]),0===e.auditLogs.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",H1,[...t[35]||(t[35]=[(0,a.createElementVNode)("i",{class:"bi bi-clock-history"},null,-1),(0,a.createElementVNode)("p",null,"No activity recorded yet.",-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)("table",X1,[t[36]||(t[36]=(0,a.createElementVNode)("thead",null,[(0,a.createElementVNode)("tr",null,[(0,a.createElementVNode)("th",null,"User"),(0,a.createElementVNode)("th",null,"Action"),(0,a.createElementVNode)("th",null,"Item"),(0,a.createElementVNode)("th",null,"IP Address"),(0,a.createElementVNode)("th",null,"Browser"),(0,a.createElementVNode)("th",null,"Time")])],-1)),(0,a.createElementVNode)("tbody",null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.auditLogs,t=>((0,a.openBlock)(),(0,a.createElementBlock)("tr",{key:t.id},[(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(t.userFullName||t.userName),1),(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)("pm-audit-badge pm-audit-"+t.action)},(0,a.toDisplayString)(e.formatAction(t.action)),3)]),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(t.itemName||""),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(t.ipAddress||""),1),(0,a.createElementVNode)("td",U1,(0,a.toDisplayString)(e.formatUserAgent(t.userAgent)),1),(0,a.createElementVNode)("td",null,(0,a.toDisplayString)(e.formatDate(t.createdAt)),1)]))),128))])]))])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",L1,[e.items.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",P1,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.items,o=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:o.id,class:"pm-card",onClick:t=>e.viewItem(o)},[(0,a.createElementVNode)("button",{class:(0,a.normalizeClass)(["pm-favorite-btn",{active:o.favorite}]),onClick:(0,a.withModifiers)(t=>e.toggleFavorite(o),["stop"])},[(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(o.favorite?"bi-star-fill":"bi-star")},null,2)],10,F1),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["pm-card-icon",o.itemType])},[e.getFaviconUrl(o)?((0,a.openBlock)(),(0,a.createElementBlock)("img",{key:0,src:e.getFaviconUrl(o),class:"pm-favicon"},null,8,z1)):((0,a.openBlock)(),(0,a.createElementBlock)("i",{key:1,class:(0,a.normalizeClass)(e.getItemIcon(o.itemType))},null,2))],2),(0,a.createElementVNode)("div",j1,[(0,a.createElementVNode)("div",O1,(0,a.toDisplayString)(o.name),1),(0,a.createElementVNode)("div",G1,(0,a.toDisplayString)(o.username||"Secure Entry"),1)]),(0,a.createElementVNode)("div",Q1,[(0,a.createElementVNode)("button",{class:"pm-icon-btn",title:"Copy Username",onClick:(0,a.withModifiers)(t=>e.copyToClipboard(o.username),["stop"])},[...t[37]||(t[37]=[(0,a.createElementVNode)("i",{class:"bi bi-person"},null,-1)])],8,K1),(0,a.createElementVNode)("button",{class:"pm-icon-btn",title:"Copy Password",onClick:(0,a.withModifiers)(t=>e.copyToClipboard(o.password,o.id),["stop"])},[...t[38]||(t[38]=[(0,a.createElementVNode)("i",{class:"bi bi-key"},null,-1)])],8,W1),o.url?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,class:"pm-icon-btn",title:"Launch",onClick:(0,a.withModifiers)(t=>e.launchUrl(o.url,o.id),["stop"])},[...t[39]||(t[39]=[(0,a.createElementVNode)("i",{class:"bi bi-box-arrow-up-right"},null,-1)])],8,J1)):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("button",{class:"pm-icon-btn",title:"Edit",onClick:(0,a.withModifiers)(t=>e.editItem(o),["stop"])},[...t[40]||(t[40]=[(0,a.createElementVNode)("i",{class:"bi bi-pencil"},null,-1)])],8,Y1),(0,a.createElementVNode)("button",{class:"pm-icon-btn delete",title:"Delete",onClick:(0,a.withModifiers)(t=>e.deleteItem(o),["stop"])},[...t[41]||(t[41]=[(0,a.createElementVNode)("i",{class:"bi bi-trash"},null,-1)])],8,Z1)])],8,q1))),128))])):((0,a.openBlock)(),(0,a.createElementBlock)("div",e8,[...t[42]||(t[42]=[(0,a.createElementVNode)("div",{class:"pm-empty-icon"},[(0,a.createElementVNode)("i",{class:"bi bi-safe2"})],-1),(0,a.createElementVNode)("h3",null,"Your vault is empty",-1),(0,a.createElementVNode)("p",null,"Store your first password securely.",-1)])]))]))]),e.showViewModal&&e.selectedItem?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,"is-open":e.showViewModal,item:e.selectedItem,"category-name":e.getCategoryName(e.selectedItem.categoryId),onClose:e.closeViewModal,onEdit:e.editItem,onDelete:e.deleteItem,onShare:e.openShareModal},null,8,["is-open","item","category-name","onClose","onEdit","onDelete","onShare"])):(0,a.createCommentVNode)("",!0),e.showAddItemModal?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1,"is-open":e.showAddItemModal,"is-loading":e.isSavingItem,item:e.selectedItem,onClose:e.closeModal,onSave:e.handleSaveItem},null,8,["is-open","is-loading","item","onClose","onSave"])):(0,a.createCommentVNode)("",!0),e.showShareModal&&e.selectedItem?((0,a.openBlock)(),(0,a.createBlock)(c,{key:2,"is-open":e.showShareModal,item:e.selectedItem,onClose:e.closeShareModal},null,8,["is-open","item","onClose"])):(0,a.createCommentVNode)("",!0)])}o(4603),o(7566),o(8721);const o8={class:"modal-content"},a8={class:"modal-header"},l8={class:"header-main"},n8={class:"modal-title"},i8={class:"modal-body"},r8={class:"form-row"},s8={class:"form-group flex-2"},d8={class:"input-wrapper"},c8={key:0,class:"error-text"},u8={class:"form-group flex-1"},m8={class:"input-wrapper"},p8={key:0,class:"premium-section"},h8={class:"form-group"},g8={class:"input-wrapper"},v8={class:"form-group"},f8={class:"input-wrapper"},y8={key:0,class:"generator-wrapper"},C8={class:"form-row"},V8={class:"form-group flex-1"},b8={class:"input-wrapper"},w8={class:"form-group flex-1"},x8={class:"input-wrapper"},N8={class:"form-group mt-20"},k8={class:"input-wrapper"},_8={class:"modal-footer"},S8=["disabled"],D8=["disabled"],$8={key:0,class:"bi bi-arrow-repeat spin"},M8={key:1,class:"bi bi-check2-circle"};function E8(e,t,o,l,n,i){const r=(0,a.resolveComponent)("PasswordGenerator");return e.isOpen?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:t[12]||(t[12]=(0,a.withModifiers)(t=>e.$emit("close"),["self"]))},[(0,a.createElementVNode)("div",o8,[(0,a.createElementVNode)("div",a8,[(0,a.createElementVNode)("div",l8,[t[13]||(t[13]=(0,a.createElementVNode)("div",{class:"header-icon"},[(0,a.createElementVNode)("i",{class:"bi bi-shield-lock-fill"})],-1)),(0,a.createElementVNode)("h3",n8,(0,a.toDisplayString)(e.isEdit?"Edit Vault Entry":"New Vault Entry"),1)]),(0,a.createElementVNode)("button",{class:"modal-close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[...t[14]||(t[14]=[(0,a.createElementVNode)("i",{class:"bi bi-x-lg"},null,-1)])])]),(0,a.createElementVNode)("div",i8,[(0,a.createElementVNode)("div",r8,[(0,a.createElementVNode)("div",s8,[t[16]||(t[16]=(0,a.createElementVNode)("label",{class:"premium-label"},"Item Name",-1)),(0,a.createElementVNode)("div",d8,[t[15]||(t[15]=(0,a.createElementVNode)("i",{class:"bi bi-tag-fill input-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.name=t),placeholder:"e.g. My GitHub Account",class:"premium-input"},null,512),[[a.vModelText,e.form.name]])]),e.errors.name?((0,a.openBlock)(),(0,a.createElementBlock)("span",c8,(0,a.toDisplayString)(e.errors.name),1)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",u8,[t[19]||(t[19]=(0,a.createElementVNode)("label",{class:"premium-label"},"Type",-1)),(0,a.createElementVNode)("div",m8,[t[18]||(t[18]=(0,a.createElementVNode)("i",{class:"bi bi-grid-fill input-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.itemType=t),class:"premium-input premium-select"},[...t[17]||(t[17]=[(0,a.createElementVNode)("option",{value:"login"},"Login",-1),(0,a.createElementVNode)("option",{value:"card"},"Card",-1),(0,a.createElementVNode)("option",{value:"identity"},"Identity",-1),(0,a.createElementVNode)("option",{value:"note"},"Secure Note",-1)])],512),[[a.vModelSelect,e.form.itemType]])])])]),"login"===e.form.itemType?((0,a.openBlock)(),(0,a.createElementBlock)("div",p8,[t[29]||(t[29]=(0,a.createElementVNode)("div",{class:"section-title"},"Login Credentials",-1)),(0,a.createElementVNode)("div",h8,[t[21]||(t[21]=(0,a.createElementVNode)("label",{class:"premium-label"},"Username / Email",-1)),(0,a.createElementVNode)("div",g8,[t[20]||(t[20]=(0,a.createElementVNode)("i",{class:"bi bi-person-fill input-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.form.username=t),class:"premium-input",placeholder:"john.doe@example.com"},null,512),[[a.vModelText,e.form.username]])])]),(0,a.createElementVNode)("div",v8,[t[24]||(t[24]=(0,a.createElementVNode)("label",{class:"premium-label"},"Password",-1)),(0,a.createElementVNode)("div",f8,[t[23]||(t[23]=(0,a.createElementVNode)("i",{class:"bi bi-key-fill input-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.form.password=t),type:"password",class:"premium-input pr-50",placeholder:""},null,512),[[a.vModelText,e.form.password]]),(0,a.createElementVNode)("button",{class:"icon-action-btn",title:"Generate Password",onClick:t[5]||(t[5]=t=>e.showGenerator=!e.showGenerator)},[...t[22]||(t[22]=[(0,a.createElementVNode)("i",{class:"bi bi-magic"},null,-1)])])]),e.showGenerator?((0,a.openBlock)(),(0,a.createElementBlock)("div",y8,[(0,a.createVNode)(r,{onSelect:e.onPasswordSelected},null,8,["onSelect"])])):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("div",C8,[(0,a.createElementVNode)("div",V8,[t[26]||(t[26]=(0,a.createElementVNode)("label",{class:"premium-label"},"Website URL",-1)),(0,a.createElementVNode)("div",b8,[t[25]||(t[25]=(0,a.createElementVNode)("i",{class:"bi bi-link-45deg input-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.form.url=t),placeholder:"https://github.com",class:"premium-input",onBlur:t[7]||(t[7]=(...t)=>e.normalizeUrl&&e.normalizeUrl(...t))},null,544),[[a.vModelText,e.form.url]])])]),(0,a.createElementVNode)("div",w8,[t[28]||(t[28]=(0,a.createElementVNode)("label",{class:"premium-label"},"2FA Secret Key",-1)),(0,a.createElementVNode)("div",x8,[t[27]||(t[27]=(0,a.createElementVNode)("i",{class:"bi bi-clock-fill input-icon"},null,-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.form.totpSecret=t),placeholder:"Optional",class:"premium-input"},null,512),[[a.vModelText,e.form.totpSecret]])])])])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",N8,[t[30]||(t[30]=(0,a.createElementVNode)("label",{class:"premium-label"},"Additional Notes",-1)),(0,a.createElementVNode)("div",k8,[(0,a.withDirectives)((0,a.createElementVNode)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=t=>e.form.notes=t),rows:"3",class:"premium-input premium-textarea",placeholder:"Store any extra details or recovery codes here..."},null,512),[[a.vModelText,e.form.notes]])])])]),(0,a.createElementVNode)("div",_8,[(0,a.createElementVNode)("button",{class:"btn-cancel",disabled:e.isLoading,onClick:t[10]||(t[10]=t=>e.$emit("close"))}," Cancel ",8,S8),(0,a.createElementVNode)("button",{class:"btn-save",disabled:e.isLoading,onClick:t[11]||(t[11]=(...t)=>e.save&&e.save(...t))},[e.isLoading?((0,a.openBlock)(),(0,a.createElementBlock)("i",$8)):((0,a.openBlock)(),(0,a.createElementBlock)("i",M8)),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.isLoading?"Saving...":"Save to Vault"),1)],8,D8)])])])):(0,a.createCommentVNode)("",!0)}o(6573),o(8100),o(7936),o(9577),o(6632),o(4226),o(9486),o(456);class R8{static async deriveKey(e,t){const o=new TextEncoder,a=await window.crypto.subtle.importKey("raw",o.encode(e),"PBKDF2",!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:this.ITERATIONS,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}static async autoUnlock(e){const t=this.hexToBytes(e);this.masterKey=await this.deriveKey(this.APP_SECRET,t),this.masterKeyVersion++,console.log("[VAULT DEBUG] masterKey set, version:",this.masterKeyVersion,"salt prefix:",e.substring(0,16))}static async unlockVault(e,t){const o=new TextEncoder,a=t?this.hexToBytes(t):o.encode("XHRM_VAULT_SALT_V1");this.masterKey=await this.deriveKey(e,a)}static isVaultUnlocked(){return null!==this.masterKey}static lockVault(){this.masterKey=null,this.privateKey=null}static setPrivateKey(e){this.privateKey=e}static getPrivateKey(){return this.privateKey}static async encrypt(e,t){const o=t||this.masterKey;if(!o)throw new Error("Vault is locked and no key provided");if(!e)return"";const a=!t;a&&console.log("[VAULT DEBUG] encrypt() using masterKey v"+this.masterKeyVersion);const l=window.crypto.getRandomValues(new Uint8Array(this.IV_LENGTH)),n=new TextEncoder,i=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:l},o,n.encode(e)),r=this.arrayBufferToBase64(l.buffer),s=this.arrayBufferToBase64(i);return`${r}::${s}`}static async decrypt(e,t){const o=t||this.masterKey;if(!o)throw new Error("Vault is locked and no key provided");if(!e||!e.includes("::"))return"";const a=!t;a&&console.log("[VAULT DEBUG] decrypt() using masterKey v"+this.masterKeyVersion+" data prefix:",e.substring(0,20));try{const t=e.split("::"),a=t[0],l=t.slice(1).join("::"),n=a.replace(/ /g,"+"),i=l.replace(/ /g,"+"),r=this.base64ToArrayBuffer(n),s=this.base64ToArrayBuffer(i),d=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},o,s),c=new TextDecoder;return c.decode(d)}catch(l){return console.error("Decryption failed",l),"[Encrypted Data]"}}static async generateAESKey(){return window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}static async exportAESKey(e){const t=await window.crypto.subtle.exportKey("raw",e);return this.arrayBufferToBase64(t)}static async importAESKey(e){const t=this.base64ToArrayBuffer(e);return window.crypto.subtle.importKey("raw",t,"AES-GCM",!0,["encrypt","decrypt"])}static async generateKeyPair(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}static async exportKey(e){const t="public"===e.type?"spki":"pkcs8",o=await window.crypto.subtle.exportKey(t,e);return this.arrayBufferToBase64(o)}static async importKey(e,t){const o="public"===t?"spki":"pkcs8",a=this.base64ToArrayBuffer(e);return window.crypto.subtle.importKey(o,a,{name:"RSA-OAEP",hash:"SHA-256"},!0,["public"===t?"encrypt":"decrypt"])}static async encryptRSA(e,t){const o=new TextEncoder,a=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},t,o.encode(e));return this.arrayBufferToBase64(a)}static async decryptRSA(e,t){const o=this.base64ToArrayBuffer(e),a=await window.crypto.subtle.decrypt({name:"RSA-OAEP"},t,o),l=new TextDecoder;return l.decode(a)}static arrayBufferToBase64(e){let t="";const o=new Uint8Array(e);for(let a=0;a<o.byteLength;a++)t+=String.fromCharCode(o[a]);return window.btoa(t)}static base64ToArrayBuffer(e){const t=window.atob(e),o=t.length,a=new Uint8Array(o);for(let l=0;l<o;l++)a[l]=t.charCodeAt(l);return a}static hexToBytes(e){const t=new Uint8Array(e.length/2);for(let o=0;o<e.length;o+=2)t[o/2]=parseInt(e.substring(o,o+2),16);return t}static generatePassword(e=16,t=!0,o=!0,a=!0,l=!0){let n="";if(o&&(n+="abcdefghijklmnopqrstuvwxyz"),t&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"),a&&(n+="0123456789"),l&&(n+="!@#$%^&*()_+~`|}{[]:;?><,./-="),!n)return"";const i=new Uint8Array(e);return window.crypto.getRandomValues(i),Array.from(i).map(e=>n[e%n.length]).join("")}static assessPasswordStrength(e){if(!e)return 0;let t=0;t+=Math.min(40,4*e.length);let o=0;return/[a-z]/.test(e)&&o++,/[A-Z]/.test(e)&&o++,/[0-9]/.test(e)&&o++,/[^a-zA-Z0-9]/.test(e)&&o++,t+=10*o,/(.)\1{2,}/.test(e)&&(t-=10),["123456","password","qwerty"].some(t=>e.toLowerCase().includes(t))&&(t-=30),Math.max(0,Math.min(100,t))}}(0,D.A)(R8,"masterKey",null),(0,D.A)(R8,"privateKey",null),(0,D.A)(R8,"SALT_LENGTH",16),(0,D.A)(R8,"IV_LENGTH",12),(0,D.A)(R8,"ITERATIONS",1e5),(0,D.A)(R8,"masterKeyVersion",0),(0,D.A)(R8,"APP_SECRET","XHRM_VAULT_APP_SECRET_V1");var T8=o(2754);class B8{static generateCode(e){if(!e)return null;try{const t=e.replace(/[\s-]/g,"").toUpperCase(),o=new T8._k({issuer:"XHRM Vault",label:"User",algorithm:"SHA1",digits:6,period:30,secret:t});return o.generate()}catch(t){return console.error("Failed to generate TOTP code:",t),null}}static validate(e,t){if(!e||!t)return!1;try{const o=e.replace(/[\s-]/g,"").toUpperCase(),a=new T8._k({algorithm:"SHA1",digits:6,period:30,secret:o}),l=a.validate({token:t,window:1});return null!==l}catch(o){return console.error("Failed to validate TOTP code:",o),!1}}static getRemainingSeconds(){const e=Math.floor(Date.now()/1e3);return 30-e%30}static generateSecret(e=20){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let o="";const a=new Uint8Array(e);window.crypto.getRandomValues(a);for(let l=0;l<e;l++)o+=t[a[l]%t.length];return o}}const I8={class:"pg-container"},A8={class:"pg-display-row"},H8=["value"],X8={class:"pg-strength-bar"},U8={class:"pg-controls"},L8={class:"pg-control-row"},P8={class:"pg-toggles"},q8={class:"pg-toggle",title:"Uppercase (A-Z)"},F8={class:"pg-toggle",title:"Lowercase (a-z)"},z8={class:"pg-toggle",title:"Numbers (0-9)"},j8={class:"pg-toggle",title:"Symbols (!@#)"};function O8(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",I8,[(0,a.createElementVNode)("div",A8,[(0,a.createElementVNode)("input",{type:"text",readonly:"",value:e.generatedPassword,class:"pg-output"},null,8,H8),(0,a.createElementVNode)("button",{class:"pg-icon-btn copy",title:"Copy",onClick:t[0]||(t[0]=(...t)=>e.copyPassword&&e.copyPassword(...t))},[...t[13]||(t[13]=[(0,a.createElementVNode)("i",{class:"bi bi-clipboard"},null,-1)])]),(0,a.createElementVNode)("button",{class:"pg-icon-btn refresh",title:"Regenerate",onClick:t[1]||(t[1]=(...t)=>e.generate&&e.generate(...t))},[(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(["bi bi-arrow-repeat",{spin:e.isGenerating}])},null,2)])]),(0,a.createElementVNode)("div",X8,[(0,a.createElementVNode)("div",{class:"strength-fill",style:(0,a.normalizeStyle)({width:e.strength+"%",background:e.strengthColor})},null,4)]),(0,a.createElementVNode)("div",{class:"pg-strength-text",style:(0,a.normalizeStyle)({color:e.strengthColor})}," Strength: "+(0,a.toDisplayString)(e.strengthLabel),5),(0,a.createElementVNode)("div",U8,[(0,a.createElementVNode)("div",L8,[(0,a.createElementVNode)("label",null,"Length: "+(0,a.toDisplayString)(e.length),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[2]||(t[2]=t=>e.length=t),type:"range",min:"8",max:"64",class:"pg-range",onInput:t[3]||(t[3]=(...t)=>e.generate&&e.generate(...t))},null,544),[[a.vModelText,e.length,void 0,{number:!0}]])]),(0,a.createElementVNode)("div",P8,[(0,a.createElementVNode)("label",q8,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=t=>e.useUpper=t),type:"checkbox",onChange:t[5]||(t[5]=(...t)=>e.generate&&e.generate(...t))},null,544),[[a.vModelCheckbox,e.useUpper]]),t[14]||(t[14]=(0,a.createElementVNode)("span",null,"A-Z",-1))]),(0,a.createElementVNode)("label",F8,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[6]||(t[6]=t=>e.useLower=t),type:"checkbox",onChange:t[7]||(t[7]=(...t)=>e.generate&&e.generate(...t))},null,544),[[a.vModelCheckbox,e.useLower]]),t[15]||(t[15]=(0,a.createElementVNode)("span",null,"a-z",-1))]),(0,a.createElementVNode)("label",z8,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[8]||(t[8]=t=>e.useNumbers=t),type:"checkbox",onChange:t[9]||(t[9]=(...t)=>e.generate&&e.generate(...t))},null,544),[[a.vModelCheckbox,e.useNumbers]]),t[16]||(t[16]=(0,a.createElementVNode)("span",null,"0-9",-1))]),(0,a.createElementVNode)("label",j8,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[10]||(t[10]=t=>e.useSymbols=t),type:"checkbox",onChange:t[11]||(t[11]=(...t)=>e.generate&&e.generate(...t))},null,544),[[a.vModelCheckbox,e.useSymbols]]),t[17]||(t[17]=(0,a.createElementVNode)("span",null,"!@#",-1))])])]),(0,a.createElementVNode)("button",{class:"pg-use-btn",onClick:t[12]||(t[12]=(...t)=>e.usePassword&&e.usePassword(...t))},"Use this Password")])}var G8=(0,a.defineComponent)({name:"PasswordGenerator",emits:["select"],setup(e,{emit:t}){const o=(0,a.ref)(""),l=(0,a.ref)(16),n=(0,a.ref)(!0),i=(0,a.ref)(!0),r=(0,a.ref)(!0),s=(0,a.ref)(!0),d=(0,a.ref)(!1),c=()=>{n.value||i.value||r.value||s.value||(i.value=!0),d.value=!0;try{o.value=R8.generatePassword(l.value,n.value,i.value,r.value,s.value)}finally{setTimeout(()=>{d.value=!1},300)}},u=(0,a.computed)(()=>R8.assessPasswordStrength(o.value)),m=(0,a.computed)(()=>{const e=u.value;return e<40?"Weak":e<70?"Fair":e<90?"Good":"Strong"}),p=(0,a.computed)(()=>{const e=u.value;return e<40?"#ef4444":e<70?"#f59e0b":e<90?"#10b981":"#059669"}),h=async()=>{try{await navigator.clipboard.writeText(o.value)}catch(e){console.error("Failed to copy",e)}},g=()=>{t("select",o.value)};return(0,a.onMounted)(c),{generatedPassword:o,length:l,useUpper:n,useLower:i,useNumbers:r,useSymbols:s,isGenerating:d,generate:c,copyPassword:h,usePassword:g,strength:u,strengthLabel:m,strengthColor:p}}});const Q8=(0,i.A)(G8,[["render",O8],["__scopeId","data-v-4f4588d6"]]);var K8=Q8,W8=(0,a.defineComponent)({name:"VaultItemForm",components:{PasswordGenerator:K8},props:{isOpen:{type:Boolean,required:!0},isLoading:{type:Boolean,default:!1},item:{type:Object,default:null}},emits:["close","save"],setup(e,{emit:t}){const o=(0,a.ref)({name:"",itemType:"login",username:"",password:"",url:"",notes:"",totpSecret:""}),l=(0,a.ref)({}),n=(0,a.ref)(!1),i=(0,a.ref)(null),r=(0,a.ref)(!1);(0,a.watch)(()=>e.item,async e=>{if(e)try{const t=e._decryptedItemKey||void 0,[a,l,i,r,s]=await Promise.all([e.usernameEncrypted?R8.decrypt(e.usernameEncrypted,t):"",e.passwordEncrypted?R8.decrypt(e.passwordEncrypted,t):"",e.urlEncrypted?R8.decrypt(e.urlEncrypted,t):"",e.notesEncrypted?R8.decrypt(e.notesEncrypted,t):"",e.totpSecretEncrypted?R8.decrypt(e.totpSecretEncrypted,t):""]);o.value={...e,username:a,password:l,url:i,notes:r,totpSecret:s},n.value=!0}catch(t){console.error("Failed to decrypt item for editing",t),alert("Failed to decrypt item. Ensure your vault is unlocked.")}else o.value={name:"",itemType:"login",username:"",password:"",url:"",notes:"",totpSecret:""},n.value=!1},{immediate:!0}),(0,a.watch)(()=>o.value.totpSecret,e=>{e&&e.length>=16&&"[Encrypted Data]"!==e?i.value=B8.generateCode(e):i.value=null});const s=()=>{o.value.url&&!o.value.url.match(/^https?:\/\//i)&&(o.value.url="https://"+o.value.url)},d=async()=>{if(o.value.name){s();try{let a;if(n.value&&e.item?.encryptedItemKey){const t=await R8.decrypt(e.item.encryptedItemKey);t&&"[Encrypted Data]"!==t?a=await R8.importAESKey(t):(console.warn("Could not decrypt existing item key, generating new one"),a=await R8.generateAESKey())}else a=await R8.generateAESKey();const l=await R8.exportAESKey(a),i=await R8.encrypt(l),[r,s,d,c,u]=await Promise.all([R8.encrypt(o.value.username||"",a),R8.encrypt(o.value.password||"",a),R8.encrypt(o.value.url||"",a),R8.encrypt(o.value.notes||"",a),R8.encrypt(o.value.totpSecret||"",a)]),m=R8.assessPasswordStrength(o.value.password||""),p=!1,h={name:o.value.name,itemType:o.value.itemType,encryptedItemKey:i,usernameEncrypted:r,passwordEncrypted:s,urlEncrypted:d,notesEncrypted:c,totpSecretEncrypted:u,passwordStrength:m,breachDetected:p};o.value.id&&(h.id=o.value.id),t("save",h)}catch(a){return console.error("VaultItemForm: encryption failed",a),void alert("Encryption failed. Please unlock your vault first before saving items.")}}else l.value={name:"Name is required"}},c=e=>{o.value.password=e,r.value=!1};return{form:o,errors:l,isEdit:n,save:d,totpPreview:i,normalizeUrl:s,showGenerator:r,onPasswordSelected:c}}});const J8=(0,i.A)(W8,[["render",E8],["__scopeId","data-v-17bc2d40"]]);var Y8=J8;const Z8={class:"oxd-text oxd-text--h3"},e2={class:"share-body"},t2={class:"oxd-form-row"},o2={class:"oxd-input-group oxd-input-field-bottom-space"},a2={class:"search-row"},l2=["disabled"],n2={key:0},i2={key:1},r2={key:0,class:"share-error"},s2={key:1,class:"found-user"},d2={class:"found-user-info"},c2={class:"found-user-sub"},u2={key:2,class:"oxd-form-row"},m2={class:"oxd-input-group oxd-input-field-bottom-space"},p2={key:3,class:"share-warning"},h2=["disabled"],g2={key:0},v2={key:1};function f2(e,t,o,l,n,i){const r=(0,a.resolveComponent)("oxd-dialog");return(0,a.openBlock)(),(0,a.createBlock)(r,{"is-open":e.isOpen,onClose:t[6]||(t[6]=t=>e.$emit("close"))},{header:(0,a.withCtx)(()=>[(0,a.createElementVNode)("h3",Z8,'Share "'+(0,a.toDisplayString)(e.item.name)+'"',1)]),footer:(0,a.withCtx)(()=>[(0,a.createElementVNode)("button",{class:"oxd-button oxd-button--medium oxd-button--ghost",onClick:t[4]||(t[4]=t=>e.$emit("close"))}," Cancel "),(0,a.createElementVNode)("button",{class:"oxd-button oxd-button--medium oxd-button--main",disabled:!e.foundUser||!e.item._decryptedItemKey||e.isSharing,onClick:t[5]||(t[5]=(...t)=>e.share&&e.share(...t))},[e.isSharing?((0,a.openBlock)(),(0,a.createElementBlock)("span",g2,"Sharing...")):((0,a.openBlock)(),(0,a.createElementBlock)("span",v2,"Share"))],8,h2)]),default:(0,a.withCtx)(()=>[(0,a.createElementVNode)("div",e2,[(0,a.createElementVNode)("div",t2,[(0,a.createElementVNode)("div",o2,[t[7]||(t[7]=(0,a.createElementVNode)("label",{class:"oxd-label"},"Search User",-1)),(0,a.createElementVNode)("div",a2,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.searchQuery=t),class:"oxd-input oxd-input--active",placeholder:"Enter username or employee name...",onKeyup:t[1]||(t[1]=(0,a.withKeys)((...t)=>e.searchUser&&e.searchUser(...t),["enter"]))},null,544),[[a.vModelText,e.searchQuery]]),(0,a.createElementVNode)("button",{class:"oxd-button oxd-button--medium oxd-button--secondary",disabled:e.isSearching||!e.searchQuery,onClick:t[2]||(t[2]=(...t)=>e.searchUser&&e.searchUser(...t))},[e.isSearching?((0,a.openBlock)(),(0,a.createElementBlock)("span",n2,"...")):((0,a.openBlock)(),(0,a.createElementBlock)("span",i2,"Search"))],8,l2)])])]),e.searchError?((0,a.openBlock)(),(0,a.createElementBlock)("div",r2,(0,a.toDisplayString)(e.searchError),1)):(0,a.createCommentVNode)("",!0),e.foundUser?((0,a.openBlock)(),(0,a.createElementBlock)("div",s2,[t[8]||(t[8]=(0,a.createElementVNode)("i",{class:"bi bi-person-check-fill"},null,-1)),(0,a.createElementVNode)("div",d2,[(0,a.createElementVNode)("strong",null,(0,a.toDisplayString)(e.foundUser.employeeName||e.foundUser.userName),1),(0,a.createElementVNode)("span",c2,"User ID: "+(0,a.toDisplayString)(e.foundUser.id),1)]),t[9]||(t[9]=(0,a.createElementVNode)("i",{class:"bi bi-key-fill key-ready",title:"User has sharing keys set up"},null,-1))])):(0,a.createCommentVNode)("",!0),e.foundUser?((0,a.openBlock)(),(0,a.createElementBlock)("div",u2,[(0,a.createElementVNode)("div",m2,[t[11]||(t[11]=(0,a.createElementVNode)("label",{class:"oxd-label"},"Permission",-1)),(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.permission=t),class:"oxd-select-wrapper"},[...t[10]||(t[10]=[(0,a.createElementVNode)("option",{value:"read"},"Read Only",-1),(0,a.createElementVNode)("option",{value:"write"},"Read/Write",-1)])],512),[[a.vModelSelect,e.permission]])])])):(0,a.createCommentVNode)("",!0),e.foundUser&&!e.item._decryptedItemKey?((0,a.openBlock)(),(0,a.createElementBlock)("div",p2,[...t[12]||(t[12]=[(0,a.createElementVNode)("i",{class:"bi bi-exclamation-triangle-fill"},null,-1),(0,a.createTextVNode)(" This item uses legacy encryption. Please edit and re-save it first to enable sharing. ",-1)])])):(0,a.createCommentVNode)("",!0)])]),_:1},8,["is-open"])}var y2=(0,a.defineComponent)({name:"ShareModal",props:{isOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["close"],setup(e,{emit:t}){const o=(0,a.ref)(""),l=(0,a.ref)("read"),n=(0,a.ref)(!1),i=(0,a.ref)(null),r=(0,a.ref)(""),s=(0,a.ref)(!1),d=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/user-keys"),c=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/shares"),u=async()=>{if(o.value){n.value=!0,r.value="",i.value=null;try{const e=new H(window.appGlobal.baseUrl,"/api/v2/pim/employees"),t=await e.getAll({limit:5,nameOrId:o.value}),a=t.data.data;if(!a||0===a.length)return void(r.value="No employee found with that name.");const l=a[0],n=l.empNumber||l.id,s=new H(window.appGlobal.baseUrl,"/api/v2/admin/users"),c=await s.getAll({limit:5,empNumber:n}),u=c.data.data;if(!u||0===u.length)return void(r.value=`Employee "${l.firstName} ${l.lastName}" has no system user account.`);const m=u[0],p=await d.getAll({userId:String(m.id)}),h=p.data.data;h&&h.length>0&&h[0].publicKey?i.value={id:m.id,employeeName:`${l.firstName} ${l.lastName}`,userName:m.userName,publicKey:h[0].publicKey}:r.value=`User "${l.firstName} ${l.lastName}" hasn't set up their vault yet. They need to unlock their vault at least once.`}catch(e){console.error("Search failed",e),r.value="Error searching for user."}finally{n.value=!1}}},m=async()=>{if(!i.value||!i.value.publicKey)return;const o=e.item._decryptedItemKey;if(o){s.value=!0;try{const a=await R8.importKey(i.value.publicKey,"public"),n=await R8.exportAESKey(o),r=await R8.encryptRSA(n,a);await c.create({vaultItemId:e.item.id,sharedWithUserId:i.value.id,permission:l.value,encryptedKeyForRecipient:r}),alert("Item shared successfully!"),t("close")}catch(a){console.error("Share failed",a),alert("Failed to share item. See console for details.")}finally{s.value=!1}}else alert("This item uses legacy encryption. Please edit and save it to upgrade before sharing.")};return{searchQuery:o,permission:l,share:m,searchUser:u,isSearching:n,foundUser:i,searchError:r,isSharing:s}}});const C2=(0,i.A)(y2,[["render",f2],["__scopeId","data-v-d82e0154"]]);var V2=C2;const b2={class:"modal-content"},w2={class:"modal-header"},x2={class:"modal-body"},N2={class:"item-header-card"},k2={class:"item-header-info"},_2={class:"item-name"},S2={class:"item-category"},D2={class:"section-container"},$2={class:"fields-group"},M2={class:"field-row"},E2={class:"field-value-container"},R2={class:"field-value"},T2={class:"field-row"},B2={class:"field-value-container"},I2={class:"field-value password"},A2={class:"field-actions"},H2={key:0,class:"field-row"},X2={class:"field-value-container"},U2={class:"totp-value"},L2={class:"code"},P2={key:1,class:"field-row empty"},q2={class:"section-container"},F2={class:"fields-group"},z2={class:"field-row"},j2={class:"field-value-container"},O2={class:"field-value url"},G2={key:0,class:"field-actions"},Q2=["href"],K2={key:0,class:"section-container"},W2={class:"fields-group"},J2={class:"field-row vertical"},Y2={class:"field-value-container"},Z2={class:"field-value note-text"},e3={class:"section-container"},t3={class:"history-box"},o3={class:"history-item"},a3={class:"history-item"},l3={class:"modal-footer"};function n3(e,t,o,l,n,i){return e.isOpen?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:t[10]||(t[10]=(0,a.withModifiers)(t=>e.$emit("close"),["self"]))},[(0,a.createElementVNode)("div",b2,[(0,a.createElementVNode)("div",w2,[t[12]||(t[12]=(0,a.createElementVNode)("h3",{class:"modal-title"},"View Login",-1)),(0,a.createElementVNode)("button",{class:"modal-close",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[...t[11]||(t[11]=[(0,a.createElementVNode)("i",{class:"bi bi-x-lg"},null,-1)])])]),(0,a.createElementVNode)("div",x2,[(0,a.createElementVNode)("div",N2,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["item-icon- large",e.item.itemType])},[(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(e.getItemIcon(e.item.itemType))},null,2)],2),(0,a.createElementVNode)("div",k2,[(0,a.createElementVNode)("div",_2,(0,a.toDisplayString)(e.item.name),1),(0,a.createElementVNode)("div",S2,[t[13]||(t[13]=(0,a.createElementVNode)("i",{class:"bi bi-folder"},null,-1)),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.categoryName||"No folder"),1)])])]),(0,a.createElementVNode)("div",D2,[t[21]||(t[21]=(0,a.createElementVNode)("div",{class:"section-title"},"Login credentials",-1)),(0,a.createElementVNode)("div",$2,[(0,a.createElementVNode)("div",M2,[t[15]||(t[15]=(0,a.createElementVNode)("label",null,"Username",-1)),(0,a.createElementVNode)("div",E2,[(0,a.createElementVNode)("div",R2,(0,a.toDisplayString)(e.decryptedData.username),1),(0,a.createElementVNode)("button",{class:"action-btn",title:"Copy Username",onClick:t[1]||(t[1]=t=>e.copyToClipboard(e.decryptedData.username))},[...t[14]||(t[14]=[(0,a.createElementVNode)("i",{class:"bi bi-copy"},null,-1)])])])]),(0,a.createElementVNode)("div",T2,[t[17]||(t[17]=(0,a.createElementVNode)("label",null,"Password",-1)),(0,a.createElementVNode)("div",B2,[(0,a.createElementVNode)("div",I2,(0,a.toDisplayString)(e.showPassword?e.decryptedData.password:""),1),(0,a.createElementVNode)("div",A2,[(0,a.createElementVNode)("button",{class:"action-btn",title:"Toggle Visibility",onClick:t[2]||(t[2]=t=>e.showPassword=!e.showPassword)},[(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(["bi",e.showPassword?"bi-eye":"bi-eye-slash"])},null,2)]),(0,a.createElementVNode)("button",{class:"action-btn",title:"Copy Password",onClick:t[3]||(t[3]=t=>e.copyToClipboard(e.decryptedData.password))},[...t[16]||(t[16]=[(0,a.createElementVNode)("i",{class:"bi bi-copy"},null,-1)])])])])]),e.decryptedData.totpSecret?((0,a.openBlock)(),(0,a.createElementBlock)("div",H2,[t[19]||(t[19]=(0,a.createElementVNode)("label",null,"Verification Code (TOTP)",-1)),(0,a.createElementVNode)("div",X2,[(0,a.createElementVNode)("div",U2,[(0,a.createElementVNode)("span",L2,(0,a.toDisplayString)("[Encrypted Data]"===e.decryptedData.totpSecret?"Unavailable":e.currentTotp||"Generating..."),1),(0,a.createElementVNode)("div",{class:"totp-timer",style:(0,a.normalizeStyle)({width:e.timerWidth+"%"})},null,4)]),(0,a.createElementVNode)("button",{class:"action-btn",title:"Copy Code",onClick:t[4]||(t[4]=t=>e.copyToClipboard(e.currentTotp))},[...t[18]||(t[18]=[(0,a.createElementVNode)("i",{class:"bi bi-copy"},null,-1)])])])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",P2,[...t[20]||(t[20]=[(0,a.createElementVNode)("label",null,"Verification Code (TOTP)",-1),(0,a.createElementVNode)("div",{class:"setup-totp"},[(0,a.createElementVNode)("i",{class:"bi bi-shield-lock"}),(0,a.createTextVNode)(" Not configured ")],-1)])]))])]),(0,a.createElementVNode)("div",q2,[t[25]||(t[25]=(0,a.createElementVNode)("div",{class:"section-title"},"Autofill options",-1)),(0,a.createElementVNode)("div",F2,[(0,a.createElementVNode)("div",z2,[t[24]||(t[24]=(0,a.createElementVNode)("label",null,"Website",-1)),(0,a.createElementVNode)("div",j2,[(0,a.createElementVNode)("div",O2,(0,a.toDisplayString)(e.decryptedData.url||"No URL configured"),1),e.decryptedData.url?((0,a.openBlock)(),(0,a.createElementBlock)("div",G2,[(0,a.createElementVNode)("a",{href:e.normalizeUrl(e.decryptedData.url),target:"_blank",class:"action-btn",title:"Open Website"},[...t[22]||(t[22]=[(0,a.createElementVNode)("i",{class:"bi bi-box-arrow-up-right"},null,-1)])],8,Q2),(0,a.createElementVNode)("button",{class:"action-btn",title:"Copy URL",onClick:t[5]||(t[5]=t=>e.copyToClipboard(e.decryptedData.url))},[...t[23]||(t[23]=[(0,a.createElementVNode)("i",{class:"bi bi-copy"},null,-1)])])])):(0,a.createCommentVNode)("",!0)])])])]),e.decryptedData.notes?((0,a.openBlock)(),(0,a.createElementBlock)("div",K2,[t[28]||(t[28]=(0,a.createElementVNode)("div",{class:"section-title"},"Additional options",-1)),(0,a.createElementVNode)("div",W2,[(0,a.createElementVNode)("div",J2,[t[27]||(t[27]=(0,a.createElementVNode)("label",null,"Note",-1)),(0,a.createElementVNode)("div",Y2,[(0,a.createElementVNode)("div",Z2,(0,a.toDisplayString)(e.decryptedData.notes),1),(0,a.createElementVNode)("button",{class:"action-btn top-right",title:"Copy Note",onClick:t[6]||(t[6]=t=>e.copyToClipboard(e.decryptedData.notes))},[...t[26]||(t[26]=[(0,a.createElementVNode)("i",{class:"bi bi-copy"},null,-1)])])])])])])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",e3,[t[29]||(t[29]=(0,a.createElementVNode)("div",{class:"section-title"},"Item history",-1)),(0,a.createElementVNode)("div",t3,[(0,a.createElementVNode)("div",o3," Last edited: "+(0,a.toDisplayString)(e.formatDate(e.item.updatedAt||e.item.createdAt)),1),(0,a.createElementVNode)("div",a3," Created: "+(0,a.toDisplayString)(e.formatDate(e.item.createdAt)),1)])])]),(0,a.createElementVNode)("div",l3,[(0,a.createElementVNode)("button",{class:"footer-btn edit-btn",onClick:t[7]||(t[7]=t=>e.$emit("edit",e.item))}," Edit "),(0,a.createElementVNode)("button",{class:"footer-btn share-btn",title:"Share this item",onClick:t[8]||(t[8]=t=>e.$emit("share",e.item))},[...t[30]||(t[30]=[(0,a.createElementVNode)("i",{class:"bi bi-person-plus-fill"},null,-1),(0,a.createTextVNode)(" Share ",-1)])]),(0,a.createElementVNode)("button",{class:"footer-btn delete-btn",onClick:t[9]||(t[9]=(...t)=>e.confirmDelete&&e.confirmDelete(...t))},[...t[31]||(t[31]=[(0,a.createElementVNode)("i",{class:"bi bi-trash"},null,-1)])])])])])):(0,a.createCommentVNode)("",!0)}var i3=(0,a.defineComponent)({name:"VaultItemView",props:{isOpen:{type:Boolean,required:!0},item:{type:Object,required:!0},categoryName:{type:String,default:""}},emits:["close","edit","delete","share"],setup(e,{emit:t}){const o=(0,a.ref)({username:"",password:"",url:"",notes:"",totpSecret:""}),l=(0,a.ref)(!1),n=(0,a.ref)(""),i=(0,a.ref)(100);let r=null;(0,a.onMounted)(async()=>{await s(),d()}),(0,a.onUnmounted)(()=>{r&&clearInterval(r)});const s=async()=>{if(e.item)try{let a;if(e.item._decryptedItemKey)a=e.item._decryptedItemKey;else if(e.item.encryptedItemKey)try{const t=await R8.decrypt(e.item.encryptedItemKey);t&&"[Encrypted Data]"!==t&&(a=await R8.importAESKey(t))}catch(t){console.error("Failed to decrypt item key in view",t)}const[l,n,i,r,s]=await Promise.all([e.item.usernameEncrypted?R8.decrypt(e.item.usernameEncrypted,a):"",e.item.passwordEncrypted?R8.decrypt(e.item.passwordEncrypted,a):"",e.item.urlEncrypted?R8.decrypt(e.item.urlEncrypted,a):"",e.item.notesEncrypted?R8.decrypt(e.item.notesEncrypted,a):"",e.item.totpSecretEncrypted?R8.decrypt(e.item.totpSecretEncrypted,a):""]);o.value={username:l,password:n,url:i,notes:r,totpSecret:s}}catch(t){console.error("Decryption failed",t)}},d=()=>{const e=()=>{if(o.value.totpSecret&&"[Encrypted Data]"!==o.value.totpSecret){const e=o.value.totpSecret,t=B8.generateCode(e);t&&(n.value=t);const a=B8.getRemainingSeconds();i.value=a/30*100}};e(),r=setInterval(e,1e3)},c=async e=>{if(e)try{await navigator.clipboard.writeText(e)}catch(t){console.error("Failed to copy",t)}},u=e=>e?e.match(/^https?:\/\//i)?e:"https://"+e:"",m=e=>{if(!e)return"Unknown";try{let t=e;"object"===typeof e&&null!==e&&e.date&&(t=e.date);const o=new Date(t);return isNaN(o.getTime())?(console.warn("Invalid date:",e),"Invalid Date"):(0,ae.A)(o,"MMM d, yyyy, h:mm a")}catch(t){return console.error("Date parse error",t),"Error"}},p=()=>{confirm("Are you sure you want to delete this item?")&&t("delete",e.item)},h=e=>{switch(e){case"login":return"oxd-icon bi-key";case"card":return"oxd-icon bi-credit-card";case"note":return"oxd-icon bi-journal-text";default:return"oxd-icon bi-shield-lock"}};return{decryptedData:o,showPassword:l,currentTotp:n,timerWidth:i,copyToClipboard:c,normalizeUrl:u,formatDate:m,confirmDelete:p,getItemIcon:h}}});const r3=(0,i.A)(i3,[["render",n3],["__scopeId","data-v-0fcedfed"]]);var s3=r3;const d3={class:"security-dashboard"},c3={key:0,class:"sd-start"},u3={class:"sd-empty-state"},m3={key:1,class:"sd-loading"},p3={key:2,class:"sd-results"},h3={class:"score-circle"},g3={viewBox:"0 0 36 36",class:"circular-chart"},v3=["stroke-dasharray"],f3={class:"score-text"},y3={class:"score-value"},C3={class:"score-summary"},V3={class:"sd-stats-grid"},b3={class:"stat-value"},w3={class:"stat-value"},x3={class:"stat-value"},N3={class:"sd-item-list"},k3={class:"list-title"},_3={key:0,class:"list-empty"},S3={key:1,class:"list-content"},D3={class:"item-info"},$3={class:"item-details"},M3={class:"item-name"},E3={class:"item-user"},R3={class:"item-meta"},T3={key:0,class:"meta-tag tag-weak"},B3={key:1,class:"meta-tag tag-reused"},I3=["onClick"];function A3(e,t,o,l,n,i){return(0,a.openBlock)(),(0,a.createElementBlock)("div",d3,[t[18]||(t[18]=(0,a.createElementVNode)("div",{class:"sd-header"},[(0,a.createElementVNode)("h2",null,"Security Dashboard"),(0,a.createElementVNode)("p",null,"Analyze your vault for weak, reused, and compromised passwords.")],-1)),e.isAnalyzing||e.hasAnalyzed?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",c3,[(0,a.createElementVNode)("div",u3,[t[4]||(t[4]=(0,a.createElementVNode)("i",{class:"bi bi-shield-check sd-icon-lg"},null,-1)),t[5]||(t[5]=(0,a.createElementVNode)("h3",null,"Audit Your Vault",-1)),t[6]||(t[6]=(0,a.createElementVNode)("p",null,[(0,a.createTextVNode)(" We will decrypt your passwords locally to check their strength. "),(0,a.createElementVNode)("br"),(0,a.createTextVNode)(" Your passwords never leave your device. ")],-1)),(0,a.createElementVNode)("button",{class:"btn-audit",onClick:t[0]||(t[0]=(...t)=>e.startAudit&&e.startAudit(...t))}," Start Security Audit ")])])),e.isAnalyzing?((0,a.openBlock)(),(0,a.createElementBlock)("div",m3,[t[7]||(t[7]=(0,a.createElementVNode)("i",{class:"bi bi-arrow-repeat spin"},null,-1)),(0,a.createElementVNode)("p",null,"Analyzing "+(0,a.toDisplayString)(e.analyzedCount)+" / "+(0,a.toDisplayString)(e.totalCount)+" items...",1)])):(0,a.createCommentVNode)("",!0),e.hasAnalyzed&&!e.isAnalyzing?((0,a.openBlock)(),(0,a.createElementBlock)("div",p3,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["sd-score-card",e.scoreColorClass])},[(0,a.createElementVNode)("div",h3,[((0,a.openBlock)(),(0,a.createElementBlock)("svg",g3,[t[8]||(t[8]=(0,a.createElementVNode)("path",{class:"circle-bg",d:"M18 2.0845\n                a 15.9155 15.9155 0 0 1 0 31.831\n                a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),(0,a.createElementVNode)("path",{class:"circle","stroke-dasharray":e.overallScore+", 100",d:"M18 2.0845\n                a 15.9155 15.9155 0 0 1 0 31.831\n                a 15.9155 15.9155 0 0 1 0 -31.831"},null,8,v3)])),(0,a.createElementVNode)("div",f3,[(0,a.createElementVNode)("span",y3,(0,a.toDisplayString)(e.overallScore),1),t[9]||(t[9]=(0,a.createElementVNode)("span",{class:"score-label"},"Score",-1))])]),(0,a.createElementVNode)("div",C3,[(0,a.createElementVNode)("h3",null,(0,a.toDisplayString)(e.scoreLabel),1),(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(e.scoreMessage),1)])],2),(0,a.createElementVNode)("div",V3,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["stat-card weak",{active:"weak"===e.filter}]),onClick:t[1]||(t[1]=t=>e.filter="weak")},[t[10]||(t[10]=(0,a.createElementVNode)("i",{class:"bi bi-exclamation-triangle-fill"},null,-1)),(0,a.createElementVNode)("span",b3,(0,a.toDisplayString)(e.weakItems.length),1),t[11]||(t[11]=(0,a.createElementVNode)("span",{class:"stat-label"},"Weak Passwords",-1))],2),(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["stat-card reused",{active:"reused"===e.filter}]),onClick:t[2]||(t[2]=t=>e.filter="reused")},[t[12]||(t[12]=(0,a.createElementVNode)("i",{class:"bi bi-recycle"},null,-1)),(0,a.createElementVNode)("span",w3,(0,a.toDisplayString)(e.reusedItems.length),1),t[13]||(t[13]=(0,a.createElementVNode)("span",{class:"stat-label"},"Reused Passwords",-1))],2),(0,a.createElementVNode)("div",{class:"stat-card safe",onClick:t[3]||(t[3]=t=>e.filter="safe")},[t[14]||(t[14]=(0,a.createElementVNode)("i",{class:"bi bi-shield-check"},null,-1)),(0,a.createElementVNode)("span",x3,(0,a.toDisplayString)(e.safeCount),1),t[15]||(t[15]=(0,a.createElementVNode)("span",{class:"stat-label"},"Safe Items",-1))])]),(0,a.createElementVNode)("div",N3,[(0,a.createElementVNode)("h4",k3,(0,a.toDisplayString)(e.filterTitle),1),0===e.filteredList.length?((0,a.openBlock)(),(0,a.createElementBlock)("div",_3,[...t[16]||(t[16]=[(0,a.createElementVNode)("i",{class:"bi bi-check2-circle"},null,-1),(0,a.createTextVNode)(" No items found in this category. Great job! ",-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",S3,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.filteredList,o=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:o.id,class:"sd-item-row"},[(0,a.createElementVNode)("div",D3,[t[17]||(t[17]=(0,a.createElementVNode)("div",{class:"item-icon"},[(0,a.createElementVNode)("i",{class:"bi bi-key"})],-1)),(0,a.createElementVNode)("div",$3,[(0,a.createElementVNode)("div",M3,(0,a.toDisplayString)(o.name),1),(0,a.createElementVNode)("div",E3,(0,a.toDisplayString)(o.usernameDecrypted),1)])]),(0,a.createElementVNode)("div",R3,["weak"===e.filter?((0,a.openBlock)(),(0,a.createElementBlock)("span",T3," Strength: "+(0,a.toDisplayString)(o.strengthScore)+"/100 ",1)):(0,a.createCommentVNode)("",!0),"reused"===e.filter?((0,a.openBlock)(),(0,a.createElementBlock)("span",B3," Reused "+(0,a.toDisplayString)(o.reuseCount)+" times ",1)):(0,a.createCommentVNode)("",!0)]),(0,a.createElementVNode)("button",{class:"btn-action",onClick:t=>e.$emit("edit",o)}," Change Password ",8,I3)]))),128))]))])])):(0,a.createCommentVNode)("",!0)])}var H3=(0,a.defineComponent)({name:"SecurityDashboard",props:{items:{type:Array,default:()=>[]}},emits:["edit"],setup(e){const t=(0,a.ref)(!1),o=(0,a.ref)(!1),l=(0,a.ref)(0),n=(0,a.computed)(()=>e.items.length),i=(0,a.ref)("weak"),r=(0,a.ref)([]),s=async()=>{if(!R8.isVaultUnlocked())return void alert("Please unlock your vault first.");t.value=!0,o.value=!1,l.value=0,r.value=[];const a=[],n=new Map;for(const t of e.items)if(l.value++,"login"===t.itemType&&t.passwordEncrypted)try{let e;if(t.encryptedItemKey)try{const o=await R8.decrypt(t.encryptedItemKey);o&&"[Encrypted Data]"!==o&&(e=await R8.importAESKey(o))}catch(i){}const[o,r]=await Promise.all([R8.decrypt(t.passwordEncrypted,e),t.usernameEncrypted?R8.decrypt(t.usernameEncrypted,e):Promise.resolve("")]),s=R8.assessPasswordStrength(o);o&&n.set(o,(n.get(o)||0)+1),a.push({...t,passwordDecrypted:o,usernameDecrypted:r||t.username||"Unknown User",strengthScore:s,isWeak:s<60}),l.value%5===0&&await new Promise(e=>setTimeout(e,0))}catch(i){console.error("Failed to analyze item",t.id,i)}r.value=a.map(e=>({...e,isReused:e.passwordDecrypted&&(n.get(e.passwordDecrypted)||0)>1,reuseCount:n.get(e.passwordDecrypted)||0})),t.value=!1,o.value=!0},d=(0,a.computed)(()=>r.value.filter(e=>e.isWeak)),c=(0,a.computed)(()=>r.value.filter(e=>e.isReused)),u=(0,a.computed)(()=>r.value.filter(e=>!e.isWeak&&!e.isReused).length),m=(0,a.computed)(()=>"weak"===i.value?d.value:"reused"===i.value?c.value:r.value.filter(e=>!e.isWeak&&!e.isReused)),p=(0,a.computed)(()=>"weak"===i.value?"Weak Passwords (Score < 60)":"reused"===i.value?"Reused Passwords":"Safe Items"),h=(0,a.computed)(()=>{if(0===r.value.length)return 100;let e=0;return r.value.forEach(t=>{let o=t.strengthScore;t.isReused&&(o-=20),e+=o}),Math.max(0,Math.floor(e/r.value.length))}),g=(0,a.computed)(()=>{const e=h.value;return e>=80?"Excellent!":e>=60?"Good":e>=40?"Fair":"Critical"}),v=(0,a.computed)(()=>{const e=h.value;return e>=80?"Your vault is very secure.":e>=60?"You have a few weak spots.":e>=40?"Time to change some passwords.":"Your security is at risk."}),f=(0,a.computed)(()=>{const e=h.value;return e>=80?"score-green":e>=60?"score-yellow":e>=40?"score-orange":"score-red"});return{isAnalyzing:t,hasAnalyzed:o,analyzedCount:l,totalCount:n,startAudit:s,overallScore:h,scoreLabel:g,scoreMessage:v,scoreColorClass:f,weakItems:d,reusedItems:c,safeCount:u,filter:i,filteredList:m,filterTitle:p}}});const X3=(0,i.A)(H3,[["render",A3],["__scopeId","data-v-0eaf4ad4"]]);var U3=X3,L3=(0,a.defineComponent)({name:"PasswordManagerLayout",components:{VaultItemForm:Y8,ShareModal:V2,VaultItemView:s3,SecurityDashboard:U3},setup(){const e=(0,a.ref)([]),t=(0,a.ref)([]),o=(0,a.ref)("all"),l=(0,a.ref)(""),n=(0,a.ref)(!0),i=(0,a.ref)(null),r=(0,a.ref)([]),s=(0,a.ref)({action:"",from:"",to:""}),d=(0,a.ref)(!1),c=(0,a.ref)(!1),u=(0,a.ref)(!1),m=(0,a.ref)(null),p=(0,a.ref)(!1),h=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/items"),g=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/categories"),v=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/shares"),f=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/user-keys"),y=new H(window.appGlobal.baseUrl,"/api/v2/password-manager/audit-logs"),C=(0,a.ref)([]),V=async()=>{if(R8.isVaultUnlocked())try{const e=await v.getAll(),t=e.data.data,o=R8.getPrivateKey();if(!o)return console.warn("No private key available. Shared items cannot be decrypted."),void(C.value=t.map(e=>({...e,_isShared:!0,username:"[Keys not loaded]",password:"",url:"",notes:""})));C.value=await Promise.all(t.map(async e=>{try{const t=await R8.decryptRSA(e.encryptedKeyForRecipient,o),a=await R8.importAESKey(t),l=await h.get(e.vaultItemId),n=l.data.data;return{...n,_isShared:!0,_sharedBy:e.sharedByUserId,_sharePermission:e.permission,_decryptedItemKey:a,username:n.usernameEncrypted?await R8.decrypt(n.usernameEncrypted,a):"",password:n.passwordEncrypted?await R8.decrypt(n.passwordEncrypted,a):"",url:n.urlEncrypted?await R8.decrypt(n.urlEncrypted,a):"",notes:n.notesEncrypted?await R8.decrypt(n.notesEncrypted,a):"",totpSecret:n.totpSecretEncrypted?await R8.decrypt(n.totpSecretEncrypted,a):""}}catch(t){return console.error("Failed to decrypt shared item",e.vaultItemId,t),{...e,_isShared:!0,name:`Shared Item #${e.vaultItemId}`,itemType:"login",username:"[Decryption Failed]"}}}))}catch(e){console.error("Failed to fetch shared items",e)}},b=async()=>{try{const t=await h.getAll(),o=t.data.data;R8.isVaultUnlocked()?e.value=await Promise.all(o.map(async e=>{try{let o;if(e.encryptedItemKey)try{const t=await R8.decrypt(e.encryptedItemKey);console.log("[VAULT DEBUG] Item",e.id,"itemKey decrypt result:",t?.substring(0,20)),t&&"[Encrypted Data]"!==t&&(o=await R8.importAESKey(t))}catch(t){console.error("Failed to decrypt item key",t)}return{...e,_decryptedItemKey:o,username:e.usernameEncrypted?await R8.decrypt(e.usernameEncrypted,o):"",password:e.passwordEncrypted?await R8.decrypt(e.passwordEncrypted,o):"",url:e.urlEncrypted?await R8.decrypt(e.urlEncrypted,o):"",notes:e.notesEncrypted?await R8.decrypt(e.notesEncrypted,o):"",totpSecret:e.totpSecretEncrypted?await R8.decrypt(e.totpSecretEncrypted,o):""}}catch(t){return console.error(`Failed to decrypt item ${e.id}`,t),e}})):e.value=o}catch(t){console.error("Failed to fetch items",t),t.response?.data?.error&&console.error("Fetch error details:",t.response.data.error)}},w=async()=>{try{const e=await g.getAll();t.value=e.data.data}catch(e){console.error("Failed to fetch categories",e)}},x=async e=>{p.value=!0;try{e.id?await h.update(e.id,e):await h.create(e),B(),await b()}catch(t){console.error("Save failed",t),alert("Failed to save item. See console for details.")}finally{p.value=!1}},N=async()=>{n.value=!0,i.value=null;try{const t=await f.getAll(),o=t.data.data?.[0];if(!o)throw new Error("Could not retrieve vault key from server.");let a;console.log("[VAULT DEBUG] Raw publicKey from server:",o.publicKey?.substring(0,80));let l=null,n=o.encryptedPrivateKey||null;try{const e=JSON.parse(o.publicKey);a=e.salt,l=e.rsaPublicKey||null,console.log("[VAULT DEBUG] Parsed JSON  salt:",a?.substring(0,20),"... hasRSA:",!!l)}catch{a=o.publicKey,console.log("[VAULT DEBUG] Plain hex salt:",a?.substring(0,20))}if(await R8.autoUnlock(a),console.log("[VAULT DEBUG] Master key derived. Vault unlocked:",R8.isVaultUnlocked()),l&&n)try{const e=await R8.decrypt(n);if(e&&"[Encrypted Data]"!==e){const t=await R8.importKey(e,"private");R8.setPrivateKey(t)}else console.warn("Could not decrypt RSA private key  sharing disabled")}catch(e){console.warn("RSA private key decryption failed:",e)}else{console.log("Generating RSA key pair for sharing...");const e=await R8.generateKeyPair();if(e.privateKey&&e.publicKey){R8.setPrivateKey(e.privateKey);const t=await R8.exportKey(e.publicKey),o=await R8.exportKey(e.privateKey),a=await R8.encrypt(o);await f.create({publicKey:t,encryptedPrivateKey:a})}else console.warn("RSA key generation failed  sharing disabled")}await Promise.all([b(),w()])}catch(e){console.error("Auto-unlock failed:",e),i.value=e?.message||"Failed to unlock vault. Please refresh the page."}finally{n.value=!1}},k=async()=>{try{const e={};s.value.action&&(e.action=s.value.action),s.value.from&&(e.from=s.value.from),s.value.to&&(e.to=s.value.to);const t=await y.getAll(e);r.value=t.data.data||[]}catch(e){console.error("Failed to fetch audit log",e)}},_=async(e,t)=>{try{await y.create({action:e,vaultItemId:t||null})}catch(o){}},S=e=>{const t={created:"Created",viewed:"Viewed",updated:"Updated",deleted:"Deleted",password_copied:"Copied Password",url_launched:"Launched URL",shared:"Shared",unshared:"Unshared"};return t[e]||e},D=e=>e?e.includes("Chrome")&&!e.includes("Edg")?"Chrome":e.includes("Firefox")?"Firefox":e.includes("Safari")&&!e.includes("Chrome")?"Safari":e.includes("Edg")?"Edge":e.substring(0,30):"",$=e=>{if(!e)return"";const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},M=()=>{b(),w()},E=()=>{R8.lockVault(),e.value=[],n.value=!1,i.value="Vault locked. Refresh the page to unlock again."},R=e=>{m.value=e,u.value=!0},T=e=>{m.value=e||null,d.value=!0,u.value=!1},B=()=>{m.value=null,d.value=!1},I=()=>{m.value=null,u.value=!1},A=e=>{m.value=e,c.value=!0},X=()=>{c.value=!1},U=async e=>{try{await h.deleteAll({ids:[e.id]}),I(),await b()}catch(t){console.error("Failed to delete item",t),alert("Failed to delete item.")}},L=e=>{switch(e){case"login":return"oxd-icon bi-key";case"card":return"oxd-icon bi-credit-card";case"note":return"oxd-icon bi-journal-text";default:return"oxd-icon bi-shield-lock"}},P=e=>{const o=t.value.find(t=>t.id===e);return o?o.name:""},q=e=>e?e.match(/^https?:\/\//i)?e:"https://"+e:"",F=e=>{if(e.url)try{const t=new URL(q(e.url)).hostname;return`https://www.google.com/s2/favicons?domain=${t}&sz=64`}catch(t){return}},z=async(e,t)=>{if(e)try{await navigator.clipboard.writeText(e),t&&_("password_copied",t)}catch(o){console.error("Failed to copy",o)}},j=(e,t)=>{e&&(window.open(q(e),"_blank"),t&&_("url_launched",t))},O=async e=>{const t=e.favorite;e.favorite=!t;try{await h.update(e.id,e)}catch(o){console.error("Failed to toggle favorite",o),e.favorite=t,alert("Failed to update favorite status.")}},G=(0,a.computed)(()=>{if("shared"===o.value){let e=C.value;if(l.value){const t=l.value.toLowerCase();e=e.filter(e=>e.name?.toLowerCase().includes(t))}return e}let t=e.value;if("favorites"===o.value?t=t.filter(e=>e.favorite):"number"===typeof o.value&&(t=t.filter(e=>e.categoryId===o.value)),l.value){const e=l.value.toLowerCase();t=t.filter(t=>t.name.toLowerCase().includes(e))}return t}),Q=(0,a.computed)(()=>[...e.value,...C.value]);(0,a.onMounted)(async()=>{await N()});const K=(0,a.ref)(!1),W=(0,a.ref)(""),J=async()=>{if(W.value.trim())try{await g.create({name:W.value}),W.value="",K.value=!1,await w()}catch(e){console.error("Failed to create category",e),alert("Failed to create category")}};return{items:G,categories:t,currentFilter:o,searchQuery:l,showAddCategoryInput:K,newCategoryName:W,createCategory:J,allDataForAudit:Q,isUnlocking:n,unlockError:i,initAutoUnlock:N,auditLogs:r,auditFilter:s,fetchAuditLog:k,formatAction:S,formatUserAgent:D,formatDate:$,showAddItemModal:d,showShareModal:c,showViewModal:u,selectedItem:m,isSavingItem:p,handleSaveItem:x,editItem:T,viewItem:R,closeModal:B,closeViewModal:I,openShareModal:A,closeShareModal:X,deleteItem:U,onUnlocked:M,lockVault:E,toggleFavorite:O,copyToClipboard:z,launchUrl:j,normalizeUrl:q,getItemIcon:L,getFaviconUrl:F,getCategoryName:P,fetchSharedWithMe:V}}});const P3=(0,i.A)(L3,[["render",t8],["__scopeId","data-v-25ca0d56"]]);var q3=P3,F3={"password-manager-layout":q3},z3={...Ym,...px,...Ct,...wx,...mS,...LR,...rR,...dB,...VI,...PU,...bz,...dj,...uG,...Ym,...XQ,...YJ,...dY,...V1,...F3};const j3=e=>(...t)=>{const o=(0,a.getCurrentInstance)();if(!o)throw new Error("Vue app context not found!");const l=(0,a.inject)("permissions",void 0);return!!l&&t.reduce((t,o)=>t&&Boolean(l[o])&&l[o][e],!0)};function O3(){return{beforeCreate(){this.$can={read:j3("canRead"),create:j3("canCreate"),update:j3("canUpdate"),delete:j3("canDelete")}}}}var G3={install:e=>{e.mixin(O3())}},Q3=o(4329);const K3=Ee(),W3=(0,a.reactive)({toasts:[],transition:"",class:"",position:""}),J3=(0,a.defineComponent)({name:"OxdToaster",setup(){return{...(0,a.toRefs)(W3)}},computed:{classes(){return{"oxd-toast-container":!0,[`oxd-toast-container--${this.position}`]:!0}}},methods:{onUpdateShow(e,t){!1===e&&this.toasts.splice(t,1)}},render(){return(0,a.h)(a.TransitionGroup,{appear:!0,name:this.transition,tag:"div",class:this.classes},{default:()=>this.toasts.map((e,t)=>(0,a.h)(X.Zc,{key:e.id,type:e.type,title:e.title,message:e.message,show:e.show,class:this.class,"onUpdate:show":e=>this.onUpdateShow(e,t)}))})}});var Y3={install:(e,t)=>{const o=document.createElement("oxd-toaster");o.id="oxd-toaster_1",document.getElementById("app").appendChild(o);const a=e=>{if("string"===typeof e){const t=W3.toasts.findIndex(t=>t.id===e);t>-1&&a(t)}else W3.toasts[e]&&W3.toasts.splice(e,1)},l=e=>new Promise(o=>{const l=(0,Q3.Ak)(8);if(W3.toasts.push({...e,id:l}),t.persist)o(l);else{const e=t.duration?t.duration:2500;setTimeout(()=>{a(l),o(l)},e)}}),n=e=>l({id:"",type:X.kQ.TYPE_SUCCESS,show:!0,...e}),i=e=>l({id:"",type:X.kQ.TYPE_ERROR,show:!0,...e}),r=e=>l({id:"",type:X.kQ.TYPE_INFO,show:!0,...e}),s=e=>l({id:"",type:X.kQ.TYPE_WARN,show:!0,...e}),d=e=>l({id:"",type:X.kQ.TYPE_DEFAULT,show:!0,...e}),c=()=>{W3.toasts=[]},u=()=>n({title:K3("general.success"),message:K3("general.successfully_saved")}),m=()=>n({title:K3("general.success"),message:K3("general.successfully_added")}),p=()=>n({title:K3("general.success"),message:K3("general.successfully_updated")}),h=()=>n({title:K3("general.success"),message:K3("general.successfully_deleted")}),g=()=>i({title:K3("general.error"),message:K3("general.cannot_be_deleted")}),v=()=>r({title:K3("general.info"),message:K3("general.no_records_found")}),f=e=>i({title:K3("general.error"),message:e??K3("general.unexpected_error")});W3.class=t.class?t.class:"oxd-toast-container--toast",W3.transition=t.animation?t.animation:"oxd-toast-list",W3.position=t.position?t.position:"bottom",e.component("OxdToaster",J3);const y={notify:l,show:d,success:n,error:i,info:r,warn:s,clear:a,clearAll:c,saveSuccess:u,addSuccess:m,updateSuccess:p,deleteSuccess:h,cannotDelete:g,noRecordsFound:v,unexpectedError:f};e.config.globalProperties.$toast=y}};(()=>{const e=localStorage.getItem("xhrm-theme");("dark"===e||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.setAttribute("data-theme","dark")})();const Z3=(0,a.createApp)({name:"App",components:z3});Z3.use(ze),Z3.use(Y3,{duration:2500,persist:!1,animation:"oxd-toast-list",position:"bottom"});const e4=window.appGlobal.baseUrl,{i18n:t4,init:o4}=Be({baseUrl:e4,resourceUrl:"/core/i18n/messages"});Z3.use(G3),Z3.use(t4),Z3.config.globalProperties.global={baseUrl:e4},o4().then(()=>Z3.mount("#app"))}},t={};function o(a){var l=t[a];if(void 0!==l)return l.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,a,l,n){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],n=e[c][2];for(var r=!0,s=0;s<a.length;s++)(!1&n||i>=n)&&Object.keys(o.O).every(function(e){return o.O[e](a[s])})?a.splice(s--,1):(r=!1,n<i&&(i=n));if(r){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,l,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};o.t=function(a,l){if(1&l&&(a=this(a)),8&l)return a;if("object"===typeof a&&a){if(4&l&&a.__esModule)return a;if(16&l&&"function"===typeof a.then)return a}var n=Object.create(null);o.r(n);var i={};e=e||[null,t({}),t([]),t(t)];for(var r=2&l&&a;("object"==typeof r||"function"==typeof r)&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach(function(e){i[e]=function(){return a[e]}});return i["default"]=function(){return a},o.d(n,i),n}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce(function(t,a){return o.f[a](e,t),t},[]))}}(),function(){o.u=function(e){return"js/"+({278:"polyfills-dom",329:"polyfills-core-js"}[e]||e)+".js"}}(),function(){o.miniCssF=function(e){}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="xhrm:";o.l=function(a,l,n,i){if(e[a])e[a].push(l);else{var r,s;if(void 0!==n)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+n){r=u;break}}r||(s=!0,r=document.createElement("script"),r.charset="utf-8",o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",t+n),r.src=a),e[a]=[l];var m=function(t,o){r.onerror=r.onload=null,clearTimeout(p);var l=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),l&&l.forEach(function(e){return e(o)}),t)return t(o)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),s&&document.head.appendChild(r)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){var e={524:0};o.f.j=function(t,a){var l=o.o(e,t)?e[t]:void 0;if(0!==l)if(l)a.push(l[2]);else{var n=new Promise(function(o,a){l=e[t]=[o,a]});a.push(l[2]=n);var i=o.p+o.u(t),r=new Error,s=function(a){if(o.o(e,t)&&(l=e[t],0!==l&&(e[t]=void 0),l)){var n=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",r.name="ChunkLoadError",r.type=n,r.request=i,l[1](r)}};o.l(i,s,"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,n,i=a[0],r=a[1],s=a[2],d=0;if(i.some(function(t){return 0!==e[t]})){for(l in r)o.o(r,l)&&(o.m[l]=r[l]);if(s)var c=s(o)}for(t&&t(a);d<i.length;d++)n=i[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},a=self["webpackChunkxhrm"]=self["webpackChunkxhrm"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],function(){return o(78)});a=o.O(a)})();
//# sourceMappingURL=app.js.map