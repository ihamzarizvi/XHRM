{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"XHRM-buzz-create-post-header\"\n};\nconst _hoisted_2 = {\n  class: \"XHRM-buzz-create-post-header-text\"\n};\nconst _hoisted_3 = {\n  class: \"XHRM-buzz-create-post-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_profile_image = _resolveComponent(\"profile-image\");\n  const _component_oxd_button = _resolveComponent(\"oxd-button\");\n  const _component_oxd_buzz_post_input = _resolveComponent(\"oxd-buzz-post-input\");\n  const _component_oxd_form = _resolveComponent(\"oxd-form\");\n  const _component_oxd_divider = _resolveComponent(\"oxd-divider\");\n  const _component_oxd_glass_button = _resolveComponent(\"oxd-glass-button\");\n  const _component_oxd_sheet = _resolveComponent(\"oxd-sheet\");\n  const _component_share_video_modal = _resolveComponent(\"share-video-modal\");\n  const _component_share_photo_modal = _resolveComponent(\"share-photo-modal\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_oxd_sheet, {\n    class: \"XHRM-buzz-create-post\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_profile_image, {\n      employee: $props.employee\n    }, null, 8, [\"employee\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_oxd_form, {\n      onSubmitValid: $setup.onSubmit\n    }, {\n      default: _withCtx(() => [_createVNode(_component_oxd_buzz_post_input, {\n        modelValue: $setup.post,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.post = $event),\n        rules: $setup.rules,\n        placeholder: _ctx.$t('buzz.post_placeholder')\n      }, {\n        default: _withCtx(() => [_createVNode(_component_oxd_button, {\n          type: \"submit\",\n          label: _ctx.$t('buzz.post')\n        }, null, 8, [\"label\"])]),\n        _: 1\n      }, 8, [\"modelValue\", \"rules\", \"placeholder\"])]),\n      _: 1\n    }, 8, [\"onSubmitValid\"])])]), _createVNode(_component_oxd_divider), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_oxd_glass_button, {\n      icon: \"cameraglass\",\n      label: _ctx.$t('buzz.share_photos'),\n      onClick: $setup.onClickSharePhotos\n    }, null, 8, [\"label\", \"onClick\"]), _createVNode(_component_oxd_glass_button, {\n      icon: \"videoglass\",\n      label: _ctx.$t('buzz.share_video'),\n      onClick: $setup.onClickShareVideos\n    }, null, 8, [\"label\", \"onClick\"])])]),\n    _: 1\n  }), $setup.showVideoModal ? (_openBlock(), _createBlock(_component_share_video_modal, {\n    key: 0,\n    text: $setup.post,\n    employee: $props.employee,\n    onClose: $setup.onCloseVideoModal\n  }, null, 8, [\"text\", \"employee\", \"onClose\"])) : _createCommentVNode(\"\", true), $setup.showPhotoModal ? (_openBlock(), _createBlock(_component_share_photo_modal, {\n    key: 1,\n    text: $setup.post,\n    employee: $props.employee,\n    onClose: $setup.onClosePhotoModal\n  }, null, 8, [\"text\", \"employee\", \"onClose\"])) : _createCommentVNode(\"\", true)], 64);\n}","map":{"version":3,"names":["class","_createVNode","_component_oxd_sheet","_createElementVNode","_hoisted_1","_component_profile_image","employee","$props","_hoisted_2","_component_oxd_form","onSubmitValid","$setup","onSubmit","_component_oxd_buzz_post_input","post","$event","rules","placeholder","_ctx","$t","_component_oxd_button","type","label","_component_oxd_divider","_hoisted_3","_component_oxd_glass_button","icon","onClick","onClickSharePhotos","onClickShareVideos","showVideoModal","_createBlock","_component_share_video_modal","text","onClose","onCloseVideoModal","showPhotoModal","_component_share_photo_modal","onClosePhotoModal"],"sources":["C:\\Users\\x\\Documents\\Projects\\HRM\\XHRM\\src\\client\\src\\XHRMBuzzPlugin\\components\\CreatePost.vue"],"sourcesContent":["<!--\n/**\n * XHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 XHRM Inc., http://www.XHRM.com\n *\n * XHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * XHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with XHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <oxd-sheet class=\"XHRM-buzz-create-post\">\n    <div class=\"XHRM-buzz-create-post-header\">\n      <profile-image :employee=\"employee\"></profile-image>\n      <div class=\"XHRM-buzz-create-post-header-text\">\n        <oxd-form @submit-valid=\"onSubmit\">\n          <oxd-buzz-post-input\n            v-model=\"post\"\n            :rules=\"rules\"\n            :placeholder=\"$t('buzz.post_placeholder')\"\n          >\n            <oxd-button type=\"submit\" :label=\"$t('buzz.post')\" />\n          </oxd-buzz-post-input>\n        </oxd-form>\n      </div>\n    </div>\n    <oxd-divider />\n    <div class=\"XHRM-buzz-create-post-actions\">\n      <oxd-glass-button\n        icon=\"cameraglass\"\n        :label=\"$t('buzz.share_photos')\"\n        @click=\"onClickSharePhotos\"\n      ></oxd-glass-button>\n      <oxd-glass-button\n        icon=\"videoglass\"\n        :label=\"$t('buzz.share_video')\"\n        @click=\"onClickShareVideos\"\n      ></oxd-glass-button>\n    </div>\n  </oxd-sheet>\n  <share-video-modal\n    v-if=\"showVideoModal\"\n    :text=\"post\"\n    :employee=\"employee\"\n    @close=\"onCloseVideoModal\"\n  ></share-video-modal>\n  <share-photo-modal\n    v-if=\"showPhotoModal\"\n    :text=\"post\"\n    :employee=\"employee\"\n    @close=\"onClosePhotoModal\"\n  ></share-photo-modal>\n</template>\n\n<script>\nimport {ref} from 'vue';\nimport {OxdBuzzPostInput, OxdGlassButton, OxdSheet} from '@ohrm/oxd';\nimport useToast from '@/core/util/composable/useToast';\nimport {APIService} from '@/core/util/services/api.service';\nimport {shouldNotExceedCharLength} from '@/core/util/validation/rules';\nimport ProfileImage from '@/XHRMBuzzPlugin/components/ProfileImage';\nimport ShareVideoModal from '@/XHRMBuzzPlugin/components/ShareVideoModal';\nimport SharePhotoModal from '@/XHRMBuzzPlugin/components/SharePhotoModal';\n\nexport default {\n  name: 'CreatePost',\n\n  components: {\n    'oxd-sheet': OxdSheet,\n    'profile-image': ProfileImage,\n    'oxd-glass-button': OxdGlassButton,\n    'oxd-buzz-post-input': OxdBuzzPostInput,\n    'share-video-modal': ShareVideoModal,\n    'share-photo-modal': SharePhotoModal,\n  },\n\n  props: {\n    employee: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  emits: ['refresh'],\n\n  setup(_, context) {\n    const post = ref(null);\n    const {saveSuccess} = useToast();\n    const showVideoModal = ref(false);\n    const showPhotoModal = ref(false);\n    const rules = [shouldNotExceedCharLength(65530)];\n    const http = new APIService(window.appGlobal.baseUrl, '/api/v2/buzz/posts');\n\n    const onSubmit = () => {\n      if (post.value === null || String(post.value).trim() === '') return;\n      http\n        .create({\n          type: 'text',\n          text: post.value,\n        })\n        .then(() => {\n          saveSuccess();\n          post.value = null;\n          context.emit('refresh');\n        });\n    };\n\n    const onClickSharePhotos = () => {\n      showPhotoModal.value = true;\n    };\n\n    const onClickShareVideos = () => {\n      showVideoModal.value = true;\n    };\n\n    const onCloseVideoModal = ($event) => {\n      showVideoModal.value = false;\n      if ($event) {\n        saveSuccess();\n        context.emit('refresh');\n      }\n    };\n\n    const onClosePhotoModal = ($event) => {\n      showPhotoModal.value = false;\n      if ($event) {\n        saveSuccess();\n        context.emit('refresh');\n      }\n    };\n\n    return {\n      post,\n      rules,\n      onSubmit,\n      showVideoModal,\n      showPhotoModal,\n      onCloseVideoModal,\n      onClosePhotoModal,\n      onClickSharePhotos,\n      onClickShareVideos,\n    };\n  },\n};\n</script>\n\n<style src=\"./create-post.scss\" lang=\"scss\" scoped></style>\n\r\n"],"mappings":";;EAqBSA,KAAK,EAAC;AAA8B;;EAElCA,KAAK,EAAC;AAAmC;;EAa3CA,KAAK,EAAC;AAA+B;;;;;;;;;;;6DAhB5CC,YAAA,CA4BYC,oBAAA;IA5BDF,KAAK,EAAC;EAAuB;sBACtC,MAaM,CAbNG,mBAAA,CAaM,OAbNC,UAaM,GAZJH,YAAA,CAAoDI,wBAAA;MAApCC,QAAQ,EAAEC,MAAA,CAAAD;IAAQ,2BAClCH,mBAAA,CAUM,OAVNK,UAUM,GATJP,YAAA,CAQWQ,mBAAA;MARAC,aAAY,EAAEC,MAAA,CAAAC;IAAQ;wBAC/B,MAMsB,CANtBX,YAAA,CAMsBY,8BAAA;oBALXF,MAAA,CAAAG,IAAI;mEAAJH,MAAA,CAAAG,IAAI,GAAAC,MAAA;QACZC,KAAK,EAAEL,MAAA,CAAAK,KAAK;QACZC,WAAW,EAAEC,IAAA,CAAAC,EAAE;;0BAEhB,MAAqD,CAArDlB,YAAA,CAAqDmB,qBAAA;UAAzCC,IAAI,EAAC,QAAQ;UAAEC,KAAK,EAAEJ,IAAA,CAAAC,EAAE;;;;;kCAK5ClB,YAAA,CAAesB,sBAAA,GACfpB,mBAAA,CAWM,OAXNqB,UAWM,GAVJvB,YAAA,CAIoBwB,2BAAA;MAHlBC,IAAI,EAAC,aAAa;MACjBJ,KAAK,EAAEJ,IAAA,CAAAC,EAAE;MACTQ,OAAK,EAAEhB,MAAA,CAAAiB;uCAEV3B,YAAA,CAIoBwB,2BAAA;MAHlBC,IAAI,EAAC,YAAY;MAChBJ,KAAK,EAAEJ,IAAA,CAAAC,EAAE;MACTQ,OAAK,EAAEhB,MAAA,CAAAkB;;;MAKNlB,MAAA,CAAAmB,cAAc,I,cADtBC,YAAA,CAKqBC,4BAAA;;IAHlBC,IAAI,EAAEtB,MAAA,CAAAG,IAAI;IACVR,QAAQ,EAAEC,MAAA,CAAAD,QAAQ;IAClB4B,OAAK,EAAEvB,MAAA,CAAAwB;iFAGFxB,MAAA,CAAAyB,cAAc,I,cADtBL,YAAA,CAKqBM,4BAAA;;IAHlBJ,IAAI,EAAEtB,MAAA,CAAAG,IAAI;IACVR,QAAQ,EAAEC,MAAA,CAAAD,QAAQ;IAClB4B,OAAK,EAAEvB,MAAA,CAAA2B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}