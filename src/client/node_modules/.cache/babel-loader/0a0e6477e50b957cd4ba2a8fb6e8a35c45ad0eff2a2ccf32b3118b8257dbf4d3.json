{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"XHRM-buzz-anniversary\"\n};\nconst _hoisted_2 = {\n  class: \"XHRM-buzz-anniversary-profile\"\n};\nconst _hoisted_3 = {\n  class: \"XHRM-buzz-anniversary-profile-details\"\n};\nconst _hoisted_4 = {\n  class: \"XHRM-buzz-anniversary-duration\"\n};\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"XHRM-buzz-anniversary-durations-text\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"XHRM-buzz-anniversary-nocontent\"\n};\nconst _hoisted_8 = [\"src\"];\nconst _hoisted_9 = {\n  key: 0,\n  class: \"XHRM-buzz-anniversary-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  const _component_profile_image = _resolveComponent(\"profile-image\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_oxd_text, {\n    type: \"card-title\",\n    class: \"XHRM-buzz-anniversary-title\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.upcoming_anniversaries')), 1)]),\n    _: 1\n  }), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"XHRM-buzz-anniversary-content\", {\n      '--show-more': $data.anniversariesCount > 5\n    }])\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.anniversaries, anniversary => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: anniversary,\n      class: \"XHRM-buzz-anniversary-item\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_profile_image, {\n      employee: anniversary\n    }, null, 8, [\"employee\"]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"XHRM-buzz-anniversary-emp-name\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.empName), 1)]),\n      _: 2\n    }, 1024), _createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"XHRM-buzz-anniversary-job-details\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.jobTitle), 1)]),\n      _: 2\n    }, 1024)])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"img\", {\n      alt: \"year celebration\",\n      class: \"XHRM-buzz-anniversary-year-celebration\",\n      src: $setup.celebrationPic\n    }, null, 8, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"XHRM-buzz-anniversary-duration-years\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.anniversaryYear), 1)]),\n      _: 2\n    }, 1024), _createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"XHRM-buzz-anniversary-duration-years\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.n_year', {\n        yearsCount: anniversary.anniversaryYear\n      })), 1)]),\n      _: 2\n    }, 1024), _createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"XHRM-buzz-anniversary-duration-date\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(anniversary.joinedDate), 1)]),\n      _: 2\n    }, 1024)])])]);\n  }), 128)), $options.isEmpty ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"img\", {\n    src: $setup.noContentPic,\n    alt: \"No Content\"\n  }, null, 8, _hoisted_8), _createVNode(_component_oxd_text, {\n    tag: \"p\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('general.no_records_found')), 1)]),\n    _: 1\n  })])) : _createCommentVNode(\"\", true)], 2), $data.anniversariesCount > 5 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createVNode(_component_oxd_text, {\n    tag: \"p\",\n    onClick: $options.onSeeMore\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($options.isViewDetails ? _ctx.$t('general.show_more') : _ctx.$t('general.show_less')), 1)]),\n    _: 1\n  }, 8, [\"onClick\"])])) : _createCommentVNode(\"\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_oxd_text","type","_ctx","$t","_createElementVNode","_normalizeClass","$data","anniversariesCount","_Fragment","_renderList","anniversaries","anniversary","key","_hoisted_2","_component_profile_image","employee","_hoisted_3","tag","empName","jobTitle","_hoisted_4","alt","src","$setup","celebrationPic","_hoisted_6","anniversaryYear","yearsCount","joinedDate","$options","isEmpty","_hoisted_7","noContentPic","_hoisted_9","onClick","onSeeMore","isViewDetails"],"sources":["C:\\Users\\x\\Documents\\Projects\\HRM\\XHRM\\src\\client\\src\\XHRMBuzzPlugin\\components\\UpcomingAnniversaries.vue"],"sourcesContent":["<!--\n/**\n * XHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 XHRM Inc., http://www.XHRM.com\n *\n * XHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * XHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with XHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"XHRM-buzz-anniversary\">\n    <oxd-text type=\"card-title\" class=\"XHRM-buzz-anniversary-title\">\n      {{ $t('buzz.upcoming_anniversaries') }}\n    </oxd-text>\n    <div\n      class=\"XHRM-buzz-anniversary-content\"\n      :class=\"{'--show-more': anniversariesCount > 5}\"\n    >\n      <div\n        v-for=\"anniversary in anniversaries\"\n        :key=\"anniversary\"\n        class=\"XHRM-buzz-anniversary-item\"\n      >\n        <div class=\"XHRM-buzz-anniversary-profile\">\n          <profile-image :employee=\"anniversary\"></profile-image>\n          <div class=\"XHRM-buzz-anniversary-profile-details\">\n            <oxd-text tag=\"p\" class=\"XHRM-buzz-anniversary-emp-name\">\n              {{ anniversary.empName }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"XHRM-buzz-anniversary-job-details\">\n              {{ anniversary.jobTitle }}\n            </oxd-text>\n          </div>\n        </div>\n        <div class=\"XHRM-buzz-anniversary-duration\">\n          <img\n            alt=\"year celebration\"\n            class=\"XHRM-buzz-anniversary-year-celebration\"\n            :src=\"celebrationPic\"\n          />\n          <div class=\"XHRM-buzz-anniversary-durations-text\">\n            <oxd-text tag=\"p\" class=\"XHRM-buzz-anniversary-duration-years\">\n              {{ anniversary.anniversaryYear }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"XHRM-buzz-anniversary-duration-years\">\n              {{ $t('buzz.n_year', {yearsCount: anniversary.anniversaryYear}) }}\n            </oxd-text>\n            <oxd-text tag=\"p\" class=\"XHRM-buzz-anniversary-duration-date\">\n              {{ anniversary.joinedDate }}\n            </oxd-text>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"isEmpty\" class=\"XHRM-buzz-anniversary-nocontent\">\n        <img :src=\"noContentPic\" alt=\"No Content\" />\n        <oxd-text tag=\"p\">\n          {{ $t('general.no_records_found') }}\n        </oxd-text>\n      </div>\n    </div>\n    <div\n      v-if=\"anniversariesCount > 5\"\n      class=\"XHRM-buzz-anniversary-footer\"\n    >\n      <oxd-text tag=\"p\" @click=\"onSeeMore\">\n        {{ isViewDetails ? $t('general.show_more') : $t('general.show_less') }}\n      </oxd-text>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useLocale from '@/core/util/composable/useLocale';\nimport {APIService} from '@/core/util/services/api.service';\nimport {parseDate, formatDate} from '@/core/util/helper/datefns';\nimport ProfileImage from '@/XHRMBuzzPlugin/components/ProfileImage';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\n\nexport default {\n  name: 'UpcomingAnniversaries',\n\n  components: {\n    'profile-image': ProfileImage,\n  },\n\n  setup() {\n    const {locale} = useLocale();\n    const {$tEmpName} = useEmployeeNameTranslate();\n    const celebrationPic = `${window.appGlobal.publicPath}/images/year_celebration.png`;\n    const noContentPic = `${window.appGlobal.publicPath}/images/buzz_no_anniversaries.png`;\n\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      '/api/v2/buzz/anniversaries',\n    );\n\n    return {\n      http,\n      locale,\n      noContentPic,\n      celebrationPic,\n      tEmpName: $tEmpName,\n    };\n  },\n\n  data() {\n    return {\n      viewMore: false,\n      isLoading: false,\n      anniversaries: [],\n      anniversariesCount: 0,\n    };\n  },\n\n  computed: {\n    isViewDetails() {\n      return !this.viewMore;\n    },\n    isEmpty() {\n      return !this.isLoading && this.anniversaries.length === 0;\n    },\n  },\n\n  beforeMount() {\n    this.anniversariesLimit = 5;\n    this.getAnniversaries();\n  },\n\n  methods: {\n    onSeeMore() {\n      this.viewMore = !this.viewMore;\n      if (this.viewMore) {\n        this.anniversariesLimit = 0;\n      } else {\n        this.anniversariesLimit = 5;\n      }\n      this.getAnniversaries();\n    },\n    getAnniversaries() {\n      this.isLoading = true;\n      this.http\n        .getAll({limit: this.anniversariesLimit})\n        .then((response) => {\n          const {data, meta} = response.data;\n          this.anniversaries = data.map((item) => {\n            const {employee, jobTitle, joinedDate} = item;\n            return {\n              empNumber: employee.empNumber,\n              empName: this.tEmpName(employee, {\n                includeMiddle: false,\n                excludePastEmpTag: false,\n              }),\n              jobTitle: jobTitle.title,\n              joinedDate: formatDate(parseDate(joinedDate), 'MMM dd', {\n                locale: this.locale,\n              }),\n              anniversaryYear:\n                new Date().getFullYear() - new Date(joinedDate).getFullYear(),\n            };\n          });\n          this.anniversariesCount = meta?.total;\n        })\n        .finally(() => (this.isLoading = false));\n    },\n  },\n};\n</script>\n\n<style src=\"./upcoming-anniversaries.scss\" lang=\"scss\" scoped></style>\n\r\n"],"mappings":";;EAoBOA,KAAK,EAAC;AAAuB;;EAavBA,KAAK,EAAC;AAA+B;;EAEnCA,KAAK,EAAC;AAAuC;;EAS/CA,KAAK,EAAC;AAAgC;;;EAMpCA,KAAK,EAAC;AAAsC;;;EAajCA,KAAK,EAAC;;;;;EAS1BA,KAAK,EAAC;;;;;uBApDVC,mBAAA,CA0DM,OA1DNC,UA0DM,GAzDJC,YAAA,CAEWC,mBAAA;IAFDC,IAAI,EAAC,YAAY;IAACL,KAAK,EAAC;;sBAChC,MAAuC,C,kCAApCM,IAAA,CAAAC,EAAE,qC;;MAEPC,mBAAA,CA6CM;IA5CJR,KAAK,EAAAS,eAAA,EAAC,+BAA+B;MAAA,eACbC,KAAA,CAAAC,kBAAkB;IAAA;yBAE1CV,mBAAA,CAkCMW,SAAA,QAAAC,WAAA,CAjCkBH,KAAA,CAAAI,aAAa,EAA5BC,WAAW;yBADpBd,mBAAA,CAkCM;MAhCHe,GAAG,EAAED,WAAW;MACjBf,KAAK,EAAC;QAENQ,mBAAA,CAUM,OAVNS,UAUM,GATJd,YAAA,CAAuDe,wBAAA;MAAvCC,QAAQ,EAAEJ;IAAW,2BACrCP,mBAAA,CAOM,OAPNY,UAOM,GANJjB,YAAA,CAEWC,mBAAA;MAFDiB,GAAG,EAAC,GAAG;MAACrB,KAAK,EAAC;;wBACtB,MAAyB,C,kCAAtBe,WAAW,CAACO,OAAO,M;;cAExBnB,YAAA,CAEWC,mBAAA;MAFDiB,GAAG,EAAC,GAAG;MAACrB,KAAK,EAAC;;wBACtB,MAA0B,C,kCAAvBe,WAAW,CAACQ,QAAQ,M;;kBAI7Bf,mBAAA,CAiBM,OAjBNgB,UAiBM,GAhBJhB,mBAAA,CAIE;MAHAiB,GAAG,EAAC,kBAAkB;MACtBzB,KAAK,EAAC,wCAAwC;MAC7C0B,GAAG,EAAEC,MAAA,CAAAC;6BAERpB,mBAAA,CAUM,OAVNqB,UAUM,GATJ1B,YAAA,CAEWC,mBAAA;MAFDiB,GAAG,EAAC,GAAG;MAACrB,KAAK,EAAC;;wBACtB,MAAiC,C,kCAA9Be,WAAW,CAACe,eAAe,M;;cAEhC3B,YAAA,CAEWC,mBAAA;MAFDiB,GAAG,EAAC,GAAG;MAACrB,KAAK,EAAC;;wBACtB,MAAkE,C,kCAA/DM,IAAA,CAAAC,EAAE;QAAAwB,UAAA,EAA6BhB,WAAW,CAACe;MAAe,Q;;cAE/D3B,YAAA,CAEWC,mBAAA;MAFDiB,GAAG,EAAC,GAAG;MAACrB,KAAK,EAAC;;wBACtB,MAA4B,C,kCAAzBe,WAAW,CAACiB,UAAU,M;;;aAKtBC,QAAA,CAAAC,OAAO,I,cAAlBjC,mBAAA,CAKM,OALNkC,UAKM,GAJJ3B,mBAAA,CAA4C;IAAtCkB,GAAG,EAAEC,MAAA,CAAAS,YAAY;IAAEX,GAAG,EAAC;2BAC7BtB,YAAA,CAEWC,mBAAA;IAFDiB,GAAG,EAAC;EAAG;sBACf,MAAoC,C,kCAAjCf,IAAA,CAAAC,EAAE,kC;;8CAKHG,KAAA,CAAAC,kBAAkB,Q,cAD1BV,mBAAA,CAOM,OAPNoC,UAOM,GAHJlC,YAAA,CAEWC,mBAAA;IAFDiB,GAAG,EAAC,GAAG;IAAEiB,OAAK,EAAEL,QAAA,CAAAM;;sBACxB,MAAuE,C,kCAApEN,QAAA,CAAAO,aAAa,GAAGlC,IAAA,CAAAC,EAAE,wBAAwBD,IAAA,CAAAC,EAAE,2B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}