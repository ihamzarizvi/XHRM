{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, normalizeClass as _normalizeClass, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vShow as _vShow, createVNode as _createVNode, withDirectives as _withDirectives, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"XHRM-buzz-post-body\"\n};\nconst _hoisted_2 = {\n  key: 1\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  const _component_video_frame = _resolveComponent(\"video-frame\");\n  const _component_oxd_icon = _resolveComponent(\"oxd-icon\");\n  const _component_photo_frame = _resolveComponent(\"photo-frame\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$props.post.text ? (_openBlock(), _createBlock(_component_oxd_text, {\n    key: 0,\n    tag: \"p\",\n    class: _normalizeClass($setup.postClasses)\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($props.post.text), 1)]),\n    _: 1\n  }, 8, [\"class\"])) : _createCommentVNode(\"\", true), _withDirectives(_createVNode(_component_oxd_text, {\n    tag: \"p\",\n    class: \"XHRM-buzz-post-body-readmore\",\n    onClick: $setup.onClickReadMore\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.read_more')), 1)]),\n    _: 1\n  }, 8, [\"onClick\"]), [[_vShow, !_ctx.readMore]]), $props.post.text && ($props.post.type === 'video' || $props.post.type === 'photo') ? (_openBlock(), _createElementBlock(\"br\", _hoisted_2)) : _createCommentVNode(\"\", true), $props.post.type === 'video' ? (_openBlock(), _createBlock(_component_video_frame, {\n    key: 2,\n    \"video-src\": $props.post.video.link\n  }, null, 8, [\"video-src\"])) : _createCommentVNode(\"\", true), $props.post.type === 'photo' ? (_openBlock(), _createBlock(_component_photo_frame, {\n    key: 3,\n    media: $props.post.photoIds\n  }, {\n    content: _withCtx(({\n      index\n    }) => [index === 3 && $props.post.photoIds.length === 5 ? (_openBlock(), _createElementBlock(\"div\", {\n      key: 0,\n      class: \"XHRM-buzz-post-body-picture --more\",\n      onClick: $event => $setup.onClickPicture(index)\n    }, [_createVNode(_component_oxd_text, {\n      tag: \"p\",\n      class: \"XHRM-buzz-post-body-more\"\n    }, {\n      default: _withCtx(() => [...(_cache[0] || (_cache[0] = [_createTextVNode(\"+1\", -1)]))]),\n      _: 1\n    }), _createVNode(_component_oxd_icon, {\n      class: \"XHRM-buzz-post-body-more\",\n      name: \"images\"\n    })], 8, _hoisted_3)) : (_openBlock(), _createElementBlock(\"div\", {\n      key: 1,\n      class: \"XHRM-buzz-post-body-picture\",\n      onClick: $event => $setup.onClickPicture(index)\n    }, null, 8, _hoisted_4))]),\n    _: 1\n  }, 8, [\"media\"])) : _createCommentVNode(\"\", true), $setup.originalPost ? (_openBlock(), _createElementBlock(_Fragment, {\n    key: 4\n  }, [$props.post.text || $props.post.type === 'video' || $props.post.type === 'photo' ? (_openBlock(), _createElementBlock(\"br\", _hoisted_5)) : _createCommentVNode(\"\", true), _createVNode(_component_oxd_text, {\n    tag: \"p\",\n    class: \"XHRM-buzz-post-body-employee\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.originalPost.employee), 1)]),\n    _: 1\n  }), _createVNode(_component_oxd_text, {\n    tag: \"p\",\n    class: \"XHRM-buzz-post-body-date\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.originalPost.dateTime), 1)]),\n    _: 1\n  }), $setup.originalPost.text ? (_openBlock(), _createBlock(_component_oxd_text, {\n    key: 1,\n    tag: \"p\",\n    class: \"XHRM-buzz-post-body-original-text\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.originalPost.text), 1)]),\n    _: 1\n  })) : _createCommentVNode(\"\", true)], 64)) : _createCommentVNode(\"\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$props","post","text","_createBlock","_component_oxd_text","tag","_normalizeClass","$setup","postClasses","_createVNode","onClick","onClickReadMore","_ctx","$t","readMore","type","_hoisted_2","_component_video_frame","video","link","_component_photo_frame","media","photoIds","content","_withCtx","index","length","$event","onClickPicture","_cache","_component_oxd_icon","name","originalPost","_Fragment","key","_hoisted_5","employee","dateTime"],"sources":["C:\\Users\\x\\Documents\\Projects\\HRM\\XHRM\\src\\client\\src\\XHRMBuzzPlugin\\components\\PostBody.vue"],"sourcesContent":["<!--\n/**\n * XHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 XHRM Inc., http://www.XHRM.com\n *\n * XHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * XHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with XHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"XHRM-buzz-post-body\">\n    <oxd-text v-if=\"post.text\" tag=\"p\" :class=\"postClasses\">\n      {{ post.text }}\n    </oxd-text>\n    <oxd-text\n      v-show=\"!readMore\"\n      tag=\"p\"\n      class=\"XHRM-buzz-post-body-readmore\"\n      @click=\"onClickReadMore\"\n    >\n      {{ $t('buzz.read_more') }}\n    </oxd-text>\n    <br v-if=\"post.text && (post.type === 'video' || post.type === 'photo')\" />\n    <video-frame v-if=\"post.type === 'video'\" :video-src=\"post.video.link\">\n    </video-frame>\n    <photo-frame v-if=\"post.type === 'photo'\" :media=\"post.photoIds\">\n      <template #content=\"{index}\">\n        <div\n          v-if=\"index === 3 && post.photoIds.length === 5\"\n          class=\"XHRM-buzz-post-body-picture --more\"\n          @click=\"onClickPicture(index)\"\n        >\n          <oxd-text tag=\"p\" class=\"XHRM-buzz-post-body-more\">+1</oxd-text>\n          <oxd-icon class=\"XHRM-buzz-post-body-more\" name=\"images\" />\n        </div>\n        <div\n          v-else\n          class=\"XHRM-buzz-post-body-picture\"\n          @click=\"onClickPicture(index)\"\n        ></div>\n      </template>\n    </photo-frame>\n    <template v-if=\"originalPost\">\n      <br v-if=\"post.text || post.type === 'video' || post.type === 'photo'\" />\n      <oxd-text tag=\"p\" class=\"XHRM-buzz-post-body-employee\">\n        {{ originalPost.employee }}\n      </oxd-text>\n      <oxd-text tag=\"p\" class=\"XHRM-buzz-post-body-date\">\n        {{ originalPost.dateTime }}\n      </oxd-text>\n      <oxd-text\n        v-if=\"originalPost.text\"\n        tag=\"p\"\n        class=\"XHRM-buzz-post-body-original-text\"\n      >\n        {{ originalPost.text }}\n      </oxd-text>\n    </template>\n  </div>\n</template>\n\n<script>\nimport {computed, reactive, toRefs} from 'vue';\nimport useLocale from '@/core/util/composable/useLocale';\nimport {formatDate, parseDate} from '@/core/util/helper/datefns';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport PhotoFrame from '@/XHRMBuzzPlugin/components/PhotoFrame';\nimport VideoFrame from '@/XHRMBuzzPlugin/components/VideoFrame';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\nimport {OxdIcon} from '@ohrm/oxd';\n\nexport default {\n  name: 'PostBody',\n\n  components: {\n    'oxd-icon': OxdIcon,\n    'photo-frame': PhotoFrame,\n    'video-frame': VideoFrame,\n  },\n\n  props: {\n    post: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  emits: ['close', 'selectPhoto'],\n\n  setup(props, context) {\n    const {locale} = useLocale();\n    const {jsDateFormat, jsTimeFormat} = useDateFormat();\n    const {$tEmpName} = useEmployeeNameTranslate();\n    const state = reactive({\n      readMore: new String(props.post?.text).length < 500,\n    });\n\n    const postClasses = computed(() => ({\n      'XHRM-buzz-post-body-text': true,\n      '--truncate': state.readMore === false,\n    }));\n\n    const onClickReadMore = () => {\n      state.readMore = !state.readMore;\n    };\n\n    const onClickPicture = (index) => {\n      context.emit('selectPhoto', index);\n    };\n\n    const originalPost = computed(() => {\n      if (props.post.originalPost === null) return null;\n      const {createdDate, createdTime} = props.post.originalPost;\n\n      const utcDate = parseDate(\n        `${createdDate} ${createdTime} +00:00`,\n        'yyyy-MM-dd HH:mm xxx',\n      );\n\n      return {\n        text: props.post.originalPost.text,\n        employee: $tEmpName(props.post.originalPost.employee, {\n          includeMiddle: true,\n          excludePastEmpTag: false,\n        }),\n        dateTime: formatDate(utcDate, `${jsDateFormat} ${jsTimeFormat}`, {\n          locale,\n        }),\n      };\n    });\n\n    return {\n      postClasses,\n      originalPost,\n      onClickPicture,\n      onClickReadMore,\n      ...toRefs(state),\n    };\n  },\n};\n</script>\n\n<style src=\"./post-body.scss\" lang=\"scss\" scoped></style>\n"],"mappings":";;EAoBOA,KAAK,EAAC;AAAqB;;;;;;;;;;;;;;uBAAhCC,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CYC,MAAA,CAAAC,IAAI,CAACC,IAAI,I,cAAzBC,YAAA,CAEWC,mBAAA;;IAFgBC,GAAG,EAAC,GAAG;IAAER,KAAK,EAAAS,eAAA,CAAEC,MAAA,CAAAC,WAAW;;sBACpD,MAAe,C,kCAAZR,MAAA,CAAAC,IAAI,CAACC,IAAI,M;;qEAEdO,YAAA,CAOWL,mBAAA;IALTC,GAAG,EAAC,GAAG;IACPR,KAAK,EAAC,8BAA8B;IACnCa,OAAK,EAAEH,MAAA,CAAAI;;sBAER,MAA0B,C,kCAAvBC,IAAA,CAAAC,EAAE,wB;;iCALID,IAAA,CAAAE,QAAQ,E,GAOTd,MAAA,CAAAC,IAAI,CAACC,IAAI,KAAKF,MAAA,CAAAC,IAAI,CAACc,IAAI,gBAAgBf,MAAA,CAAAC,IAAI,CAACc,IAAI,iB,cAA1DjB,mBAAA,CAA2E,MAAAkB,UAAA,K,+BACxDhB,MAAA,CAAAC,IAAI,CAACc,IAAI,gB,cAA5BZ,YAAA,CACcc,sBAAA;;IAD6B,WAAS,EAAEjB,MAAA,CAAAC,IAAI,CAACiB,KAAK,CAACC;+DAE9CnB,MAAA,CAAAC,IAAI,CAACc,IAAI,gB,cAA5BZ,YAAA,CAgBciB,sBAAA;;IAhB6BC,KAAK,EAAErB,MAAA,CAAAC,IAAI,CAACqB;;IAC1CC,OAAO,EAAAC,QAAA,CAId,CASJ;MAbqBC;IAAK,OAEhBA,KAAK,UAAUzB,MAAA,CAAAC,IAAI,CAACqB,QAAQ,CAACI,MAAM,U,cAD3C5B,mBAAA,CAOM;;MALJD,KAAK,EAAC,oCAAoC;MACzCa,OAAK,EAAAiB,MAAA,IAAEpB,MAAA,CAAAqB,cAAc,CAACH,KAAK;QAE5BhB,YAAA,CAAgEL,mBAAA;MAAtDC,GAAG,EAAC,GAAG;MAACR,KAAK,EAAC;;wBAA2B,MAAE,KAAAgC,MAAA,QAAAA,MAAA,O,iBAAF,IAAE,M;;QACrDpB,YAAA,CAA2DqB,mBAAA;MAAjDjC,KAAK,EAAC,0BAA0B;MAACkC,IAAI,EAAC;0CAElDjC,mBAAA,CAIO;;MAFLD,KAAK,EAAC,6BAA6B;MAClCa,OAAK,EAAAiB,MAAA,IAAEpB,MAAA,CAAAqB,cAAc,CAACH,KAAK;;;qDAIlBlB,MAAA,CAAAyB,YAAY,I,cAA5BlC,mBAAA,CAeWmC,SAAA;IAAAC,GAAA;EAAA,IAdClC,MAAA,CAAAC,IAAI,CAACC,IAAI,IAAIF,MAAA,CAAAC,IAAI,CAACc,IAAI,gBAAgBf,MAAA,CAAAC,IAAI,CAACc,IAAI,gB,cAAzDjB,mBAAA,CAAyE,MAAAqC,UAAA,K,+BACzE1B,YAAA,CAEWL,mBAAA;IAFDC,GAAG,EAAC,GAAG;IAACR,KAAK,EAAC;;sBACtB,MAA2B,C,kCAAxBU,MAAA,CAAAyB,YAAY,CAACI,QAAQ,M;;MAE1B3B,YAAA,CAEWL,mBAAA;IAFDC,GAAG,EAAC,GAAG;IAACR,KAAK,EAAC;;sBACtB,MAA2B,C,kCAAxBU,MAAA,CAAAyB,YAAY,CAACK,QAAQ,M;;MAGlB9B,MAAA,CAAAyB,YAAY,CAAC9B,IAAI,I,cADzBC,YAAA,CAMWC,mBAAA;;IAJTC,GAAG,EAAC,GAAG;IACPR,KAAK,EAAC;;sBAEN,MAAuB,C,kCAApBU,MAAA,CAAAyB,YAAY,CAAC9B,IAAI,M","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}