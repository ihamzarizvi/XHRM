{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"XHRM-buzz-pill\"\n};\nconst _hoisted_2 = {\n  class: \"XHRM-buzz-pill-actions\"\n};\nconst _hoisted_3 = {\n  class: \"XHRM-buzz-pill-stats\"\n};\nconst _hoisted_4 = {\n  class: \"XHRM-buzz-pill-stats-likes\"\n};\nconst _hoisted_5 = {\n  class: \"XHRM-buzz-pill-stats-other\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_post_like = _resolveComponent(\"post-like\");\n  const _component_post_comment = _resolveComponent(\"post-comment\");\n  const _component_oxd_icon = _resolveComponent(\"oxd-icon\");\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_post_like, {\n    like: $props.post.liked,\n    onClick: $setup.onClickLike\n  }, null, 8, [\"like\", \"onClick\"]), _createVNode(_component_post_comment, {\n    onClick: $setup.onClickComment\n  }, null, 8, [\"onClick\"])]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_oxd_icon, {\n    name: \"heart-fill\"\n  }), _createVNode(_component_oxd_text, {\n    tag: \"p\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.n_like', {\n      likesCount: $props.post.stats.numOfLikes\n    })), 1)]),\n    _: 1\n  })]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_oxd_text, {\n    tag: \"p\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($options.combinedPostStats), 1)]),\n    _: 1\n  })])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_post_like","like","$props","post","liked","onClick","$setup","onClickLike","_component_post_comment","onClickComment","_hoisted_3","_hoisted_4","_component_oxd_icon","name","_component_oxd_text","tag","_ctx","$t","likesCount","stats","numOfLikes","_hoisted_5","$options","combinedPostStats"],"sources":["C:\\Users\\x\\Documents\\Projects\\HRM\\XHRM\\src\\client\\src\\XHRMBuzzPlugin\\components\\PostActionsPill.vue"],"sourcesContent":["<!--\n/**\n * XHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 XHRM Inc., http://www.XHRM.com\n *\n * XHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * XHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with XHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n<template>\n  <div class=\"XHRM-buzz-pill\">\n    <div class=\"XHRM-buzz-pill-actions\">\n      <post-like :like=\"post.liked\" @click=\"onClickLike\"></post-like>\n      <post-comment @click=\"onClickComment\"></post-comment>\n    </div>\n    <div class=\"XHRM-buzz-pill-stats\">\n      <div class=\"XHRM-buzz-pill-stats-likes\">\n        <oxd-icon name=\"heart-fill\"></oxd-icon>\n        <oxd-text tag=\"p\">\n          {{ $t('buzz.n_like', {likesCount: post.stats.numOfLikes}) }}\n        </oxd-text>\n      </div>\n      <div class=\"XHRM-buzz-pill-stats-other\">\n        <oxd-text tag=\"p\">{{ combinedPostStats }}</oxd-text>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {APIService} from '@/core/util/services/api.service';\nimport useBuzzAPIs from '@/XHRMBuzzPlugin/util/composable/useBuzzAPIs';\nimport PostLikeButton from '@/XHRMBuzzPlugin/components/PostLikeButton';\nimport PostCommentButton from '@/XHRMBuzzPlugin/components/PostCommentButton';\nimport {OxdIcon} from '@ohrm/oxd';\n\nexport default {\n  name: 'PostActionsPill',\n\n  components: {\n    'oxd-icon': OxdIcon,\n    'post-like': PostLikeButton,\n    'post-comment': PostCommentButton,\n  },\n\n  props: {\n    post: {\n      type: Object,\n      required: true,\n    },\n  },\n\n  emits: ['like', 'comment'],\n\n  setup(props, context) {\n    let loading = false;\n    const {updatePostLike} = useBuzzAPIs(\n      new APIService(window.appGlobal.baseUrl, ''),\n    );\n\n    const onClickComment = () => {\n      context.emit('comment');\n    };\n\n    const onClickLike = () => {\n      if (!loading) {\n        loading = true;\n        updatePostLike(props.post.id, props.post.liked).then(() => {\n          loading = false;\n          context.emit('like');\n        });\n      }\n    };\n\n    return {\n      onClickLike,\n      onClickComment,\n    };\n  },\n\n  computed: {\n    combinedPostStats() {\n      const commentsCount = this.$t('buzz.n_comment', {\n        commentCount: this.post.stats?.numOfComments || 0,\n      });\n\n      const sharesCount = this.$t('buzz.n_share', {\n        shareCount: this.post.stats?.numOfShares || 0,\n      });\n\n      return this.post.stats?.numOfShares === null\n        ? commentsCount\n        : `${commentsCount}, ${sharesCount}`;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.XHRM-buzz-pill {\n  display: flex;\n  padding: 0.5rem;\n  border-radius: 1rem;\n  align-items: flex-start;\n  background: $oxd-white-color;\n  justify-content: space-between;\n  &-actions {\n    gap: 5px;\n    display: flex;\n    flex-shrink: 0;\n    align-items: center;\n    justify-content: space-between;\n    ::v-deep(.oxd-icon-button) {\n      width: 36px;\n      height: 36px;\n    }\n  }\n  &-stats {\n    &-likes {\n      display: flex;\n      font-size: 1rem;\n      font-weight: 700;\n      align-items: flex-end;\n      justify-content: flex-end;\n      ::v-deep(.oxd-icon) {\n        margin-right: 5px;\n        color: $oxd-feedback-danger-color;\n      }\n    }\n    &-other {\n      display: flex;\n      font-size: 0.75rem;\n      justify-content: flex-end;\n    }\n  }\n}\n</style>\n\r\n"],"mappings":";;EAmBOA,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAwB;;EAI9BA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAA4B;;EAMlCA,KAAK,EAAC;AAA4B;;;;;;uBAZ3CC,mBAAA,CAgBM,OAhBNC,UAgBM,GAfJC,mBAAA,CAGM,OAHNC,UAGM,GAFJC,YAAA,CAA+DC,oBAAA;IAAnDC,IAAI,EAAEC,MAAA,CAAAC,IAAI,CAACC,KAAK;IAAGC,OAAK,EAAEC,MAAA,CAAAC;oCACtCR,YAAA,CAAqDS,uBAAA;IAAtCH,OAAK,EAAEC,MAAA,CAAAG;EAAc,yB,GAEtCZ,mBAAA,CAUM,OAVNa,UAUM,GATJb,mBAAA,CAKM,OALNc,UAKM,GAJJZ,YAAA,CAAuCa,mBAAA;IAA7BC,IAAI,EAAC;EAAY,IAC3Bd,YAAA,CAEWe,mBAAA;IAFDC,GAAG,EAAC;EAAG;sBACf,MAA4D,C,kCAAzDC,IAAA,CAAAC,EAAE;MAAAC,UAAA,EAA6BhB,MAAA,CAAAC,IAAI,CAACgB,KAAK,CAACC;IAAU,Q;;QAG3DvB,mBAAA,CAEM,OAFNwB,UAEM,GADJtB,YAAA,CAAoDe,mBAAA;IAA1CC,GAAG,EAAC;EAAG;sBAAC,MAAuB,C,kCAApBO,QAAA,CAAAC,iBAAiB,M","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}