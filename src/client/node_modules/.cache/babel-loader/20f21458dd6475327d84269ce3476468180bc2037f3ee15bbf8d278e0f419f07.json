{"ast":null,"code":"import { toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"XHRM-paper-container\"\n};\nconst _hoisted_2 = {\n  class: \"XHRM-header-container\"\n};\nconst _hoisted_3 = {\n  class: \"XHRM-container\"\n};\nconst _hoisted_4 = {\n  class: \"XHRM-bottom-container\"\n};\nconst _hoisted_5 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  const _component_oxd_card_table = _resolveComponent(\"oxd-card-table\");\n  const _component_oxd_pagination = _resolveComponent(\"oxd-pagination\");\n  return $setup.total > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_oxd_text, {\n    tag: \"h6\",\n    class: \"XHRM-main-title\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('time.actions_performed_on_the_timesheet')), 1)]),\n    _: 1\n  })]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_oxd_card_table, {\n    headers: $data.headers,\n    items: $setup.items?.data,\n    selectable: false,\n    clickable: false,\n    loading: $setup.isLoading,\n    \"row-decorator\": \"oxd-table-decorator-card\"\n  }, null, 8, [\"headers\", \"items\", \"loading\"])]), _createElementVNode(\"div\", _hoisted_4, [$setup.showPaginator ? (_openBlock(), _createBlock(_component_oxd_pagination, {\n    key: 0,\n    current: $setup.currentPage,\n    \"onUpdate:current\": _cache[0] || (_cache[0] = $event => $setup.currentPage = $event),\n    length: $setup.pages\n  }, null, 8, [\"current\", \"length\"])) : _createCommentVNode(\"\", true)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_5));\n}","map":{"version":3,"names":["class","$setup","total","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_oxd_text","tag","_ctx","$t","_hoisted_3","_component_oxd_card_table","headers","$data","items","data","selectable","clickable","loading","isLoading","_hoisted_4","showPaginator","_createBlock","_component_oxd_pagination","current","currentPage","$event","length","pages","_hoisted_5"],"sources":["C:\\Users\\x\\Documents\\Projects\\HRM\\XHRM\\src\\client\\src\\XHRMTimePlugin\\components\\TimesheetActions.vue"],"sourcesContent":["<!--\n/**\n * XHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 XHRM Inc., http://www.XHRM.com\n *\n * XHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * XHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with XHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div v-if=\"total > 0\" class=\"XHRM-paper-container\">\n    <div class=\"XHRM-header-container\">\n      <oxd-text tag=\"h6\" class=\"XHRM-main-title\">\n        {{ $t('time.actions_performed_on_the_timesheet') }}\n      </oxd-text>\n    </div>\n    <div class=\"XHRM-container\">\n      <oxd-card-table\n        :headers=\"headers\"\n        :items=\"items?.data\"\n        :selectable=\"false\"\n        :clickable=\"false\"\n        :loading=\"isLoading\"\n        row-decorator=\"oxd-table-decorator-card\"\n      />\n    </div>\n    <div class=\"XHRM-bottom-container\">\n      <oxd-pagination\n        v-if=\"showPaginator\"\n        v-model:current=\"currentPage\"\n        :length=\"pages\"\n      />\n    </div>\n  </div>\n  <div v-else></div>\n</template>\n\n<script>\nimport usePaginate from '@ohrm/core/util/composable/usePaginate';\nimport {APIService} from '@/core/util/services/api.service';\nimport usei18n from '@/core/util/composable/usei18n';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport {formatDate, parseDate} from '@/core/util/helper/datefns';\nimport useLocale from '@/core/util/composable/useLocale';\n\nexport default {\n  name: 'TimesheetActions',\n\n  props: {\n    timesheetId: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const http = new APIService(\n      window.appGlobal.baseUrl,\n      `/api/v2/time/timesheets/${props.timesheetId}/action-logs`,\n    );\n    const {$t} = usei18n();\n    const {jsDateFormat} = useDateFormat();\n    const {locale} = useLocale();\n\n    const actionsNormalizer = (data) => {\n      return data.map((item) => {\n        let performedEmployee;\n        let actionName = item.action?.label;\n        const firstName = item.performedEmployee?.firstName;\n        const lastName = item.performedEmployee?.lastName;\n\n        switch (actionName) {\n          case 'Submitted':\n            actionName = $t('time.submitted');\n            break;\n          case 'Rejected':\n            actionName = $t('leave.rejected');\n            break;\n          case 'Not Submitted':\n            actionName = $t('time.not_submitted');\n            break;\n          case 'Approved':\n            actionName = $t('time.approved');\n            break;\n        }\n\n        if (firstName && lastName) {\n          performedEmployee = `${firstName} ${lastName}`;\n        } else {\n          performedEmployee = $t('general.purged_employee');\n        }\n\n        if (item.performedEmployee?.terminationId) {\n          performedEmployee += ` (${$t('general.past_employee')})`;\n        }\n\n        return {\n          id: item.id,\n          action: actionName,\n          date: formatDate(parseDate(item.date), jsDateFormat, {locale}),\n          comment: item.comment,\n          performedBy: performedEmployee,\n        };\n      });\n    };\n\n    const {\n      showPaginator,\n      currentPage,\n      total,\n      pages,\n      pageSize,\n      response,\n      isLoading,\n      execQuery,\n    } = usePaginate(http, {\n      toastNoRecords: false,\n      normalizer: actionsNormalizer,\n    });\n\n    return {\n      http,\n      showPaginator,\n      currentPage,\n      isLoading,\n      total,\n      pages,\n      pageSize,\n      execQuery,\n      items: response,\n    };\n  },\n  data() {\n    return {\n      headers: [\n        {\n          name: 'action',\n          slot: 'title',\n          title: this.$t('general.actions'),\n          style: {flex: 1},\n        },\n        {\n          name: 'performedBy',\n          title: this.$t('general.performed_by'),\n          style: {flex: 1},\n        },\n        {\n          name: 'date',\n          title: this.$t('general.date'),\n          style: {flex: 1},\n        },\n        {\n          name: 'comment',\n          cellType: 'oxd-table-cell-truncate',\n          title: this.$t('general.comment'),\n          style: {flex: 1},\n        },\n      ],\n    };\n  },\n};\n</script>\n\r\n"],"mappings":";;;EAoBwBA,KAAK,EAAC;;;EACrBA,KAAK,EAAC;AAAuB;;EAK7BA,KAAK,EAAC;AAAgB;;EAUtBA,KAAK,EAAC;AAAuB;;;;;;;;SAhBzBC,MAAA,CAAAC,KAAK,Q,cAAhBC,mBAAA,CAuBM,OAvBNC,UAuBM,GAtBJC,mBAAA,CAIM,OAJNC,UAIM,GAHJC,YAAA,CAEWC,mBAAA;IAFDC,GAAG,EAAC,IAAI;IAACT,KAAK,EAAC;;sBACvB,MAAmD,C,kCAAhDU,IAAA,CAAAC,EAAE,iD;;QAGTN,mBAAA,CASM,OATNO,UASM,GARJL,YAAA,CAOEM,yBAAA;IANCC,OAAO,EAAEC,KAAA,CAAAD,OAAO;IAChBE,KAAK,EAAEf,MAAA,CAAAe,KAAK,EAAEC,IAAI;IAClBC,UAAU,EAAE,KAAK;IACjBC,SAAS,EAAE,KAAK;IAChBC,OAAO,EAAEnB,MAAA,CAAAoB,SAAS;IACnB,eAAa,EAAC;kDAGlBhB,mBAAA,CAMM,OANNiB,UAMM,GAJIrB,MAAA,CAAAsB,aAAa,I,cADrBC,YAAA,CAIEC,yBAAA;;IAFQC,OAAO,EAAEzB,MAAA,CAAA0B,WAAW;4DAAX1B,MAAA,CAAA0B,WAAW,GAAAC,MAAA;IAC3BC,MAAM,EAAE5B,MAAA,CAAA6B;4FAIf3B,mBAAA,CAAkB,OAAA4B,UAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}