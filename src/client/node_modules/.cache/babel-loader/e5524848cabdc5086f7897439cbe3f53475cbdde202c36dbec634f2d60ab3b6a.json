{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"XHRM-post-details\"\n};\nconst _hoisted_2 = {\n  class: \"XHRM-post-details-header\"\n};\nconst _hoisted_3 = {\n  class: \"XHRM-post-details-header-text\"\n};\nconst _hoisted_4 = {\n  class: \"XHRM-post-details-actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_oxd_icon_button = _resolveComponent(\"oxd-icon-button\");\n  const _component_profile_image = _resolveComponent(\"profile-image\");\n  const _component_oxd_text = _resolveComponent(\"oxd-text\");\n  const _component_oxd_divider = _resolveComponent(\"oxd-divider\");\n  const _component_post_like = _resolveComponent(\"post-like\");\n  const _component_post_stats = _resolveComponent(\"post-stats\");\n  const _component_post_comment_container = _resolveComponent(\"post-comment-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_oxd_icon_button, {\n    class: \"XHRM-post-details-close\",\n    name: \"x\",\n    \"with-container\": false,\n    onClick: $setup.onClickClose\n  }, null, 8, [\"onClick\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_profile_image, {\n    employee: $props.post.employee\n  }, null, 8, [\"employee\"]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_oxd_text, {\n    tag: \"p\",\n    class: \"XHRM-post-details-emp-name\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.employeeFullName), 1)]),\n    _: 1\n  }), _createVNode(_component_oxd_text, {\n    tag: \"p\",\n    class: \"XHRM-post-details-time\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($setup.postDateTime), 1)]),\n    _: 1\n  })])]), $props.post.text ? (_openBlock(), _createBlock(_component_oxd_text, {\n    key: 0,\n    tag: \"p\",\n    class: _normalizeClass($setup.postClasses)\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($props.post.text), 1)]),\n    _: 1\n  }, 8, [\"class\"])) : _createCommentVNode(\"\", true), _withDirectives(_createVNode(_component_oxd_text, {\n    tag: \"p\",\n    class: \"XHRM-post-details-readmore\",\n    onClick: $setup.onClickReadMore\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$t('buzz.read_more')), 1)]),\n    _: 1\n  }, 8, [\"onClick\"]), [[_vShow, !$setup.readMore]]), _createVNode(_component_oxd_divider), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_post_like, {\n    like: $props.post.liked,\n    onClick: $setup.onClickLike\n  }, null, 8, [\"like\", \"onClick\"]), _createVNode(_component_post_stats, {\n    post: $props.post,\n    mobile: $props.mobile\n  }, null, 8, [\"post\", \"mobile\"])]), _createVNode(_component_oxd_divider), _createVNode(_component_post_comment_container, {\n    \"post-id\": $props.post.id,\n    employee: $props.post.employee,\n    onCreate: _cache[0] || (_cache[0] = $event => _ctx.$emit('createComment', $event)),\n    onDelete: _cache[1] || (_cache[1] = $event => _ctx.$emit('deleteComment', $event))\n  }, null, 8, [\"post-id\", \"employee\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_oxd_icon_button","name","onClick","$setup","onClickClose","_createElementVNode","_hoisted_2","_component_profile_image","employee","$props","post","_hoisted_3","_component_oxd_text","tag","employeeFullName","postDateTime","text","_createBlock","_normalizeClass","postClasses","onClickReadMore","_ctx","$t","readMore","_component_oxd_divider","_hoisted_4","_component_post_like","like","liked","onClickLike","_component_post_stats","mobile","_component_post_comment_container","id","onCreate","_cache","$event","$emit","onDelete"],"sources":["C:\\Users\\x\\Documents\\Projects\\HRM\\XHRM\\src\\client\\src\\XHRMBuzzPlugin\\components\\PostDetails.vue"],"sourcesContent":["<!--\n/**\n * XHRM is a comprehensive Human Resource Management (HRM) System that captures\n * all the essential functionalities required for any enterprise.\n * Copyright (C) 2006 XHRM Inc., http://www.XHRM.com\n *\n * XHRM is free software: you can redistribute it and/or modify it under the terms of\n * the GNU General Public License as published by the Free Software Foundation, either\n * version 3 of the License, or (at your option) any later version.\n *\n * XHRM is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY;\n * without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n * See the GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License along with XHRM.\n * If not, see <https://www.gnu.org/licenses/>.\n */\n -->\n\n<template>\n  <div class=\"XHRM-post-details\">\n    <oxd-icon-button\n      class=\"XHRM-post-details-close\"\n      name=\"x\"\n      :with-container=\"false\"\n      @click=\"onClickClose\"\n    />\n    <div class=\"XHRM-post-details-header\">\n      <profile-image :employee=\"post.employee\"></profile-image>\n      <div class=\"XHRM-post-details-header-text\">\n        <oxd-text tag=\"p\" class=\"XHRM-post-details-emp-name\">\n          {{ employeeFullName }}\n        </oxd-text>\n        <oxd-text tag=\"p\" class=\"XHRM-post-details-time\">\n          {{ postDateTime }}\n        </oxd-text>\n      </div>\n    </div>\n    <oxd-text v-if=\"post.text\" tag=\"p\" :class=\"postClasses\">\n      {{ post.text }}\n    </oxd-text>\n    <oxd-text\n      v-show=\"!readMore\"\n      tag=\"p\"\n      class=\"XHRM-post-details-readmore\"\n      @click=\"onClickReadMore\"\n    >\n      {{ $t('buzz.read_more') }}\n    </oxd-text>\n    <oxd-divider></oxd-divider>\n    <div class=\"XHRM-post-details-actions\">\n      <post-like :like=\"post.liked\" @click=\"onClickLike\"></post-like>\n      <post-stats :post=\"post\" :mobile=\"mobile\"></post-stats>\n    </div>\n    <oxd-divider></oxd-divider>\n    <post-comment-container\n      :post-id=\"post.id\"\n      :employee=\"post.employee\"\n      @create=\"$emit('createComment', $event)\"\n      @delete=\"$emit('deleteComment', $event)\"\n    ></post-comment-container>\n  </div>\n</template>\n\n<script>\nimport {computed, ref} from 'vue';\nimport useLocale from '@/core/util/composable/useLocale';\nimport {APIService} from '@/core/util/services/api.service';\nimport {formatDate, parseDate} from '@/core/util/helper/datefns';\nimport useDateFormat from '@/core/util/composable/useDateFormat';\nimport PostStats from '@/XHRMBuzzPlugin/components/PostStats';\nimport ProfileImage from '@/XHRMBuzzPlugin/components/ProfileImage';\nimport useBuzzAPIs from '@/XHRMBuzzPlugin/util/composable/useBuzzAPIs';\nimport PostLikeButton from '@/XHRMBuzzPlugin/components/PostLikeButton';\nimport useEmployeeNameTranslate from '@/core/util/composable/useEmployeeNameTranslate';\nimport PostCommentContainer from '@/XHRMBuzzPlugin/components/PostCommentContainer';\n\nexport default {\n  name: 'PostDetails',\n\n  components: {\n    'post-stats': PostStats,\n    'post-like': PostLikeButton,\n    'profile-image': ProfileImage,\n    'post-comment-container': PostCommentContainer,\n  },\n\n  props: {\n    post: {\n      type: Object,\n      required: true,\n    },\n    mobile: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  emits: ['like', 'close', 'createComment', 'deleteComment'],\n\n  setup(props, context) {\n    let loading = false;\n    const {locale} = useLocale();\n    const {jsDateFormat, jsTimeFormat} = useDateFormat();\n    const {$tEmpName} = useEmployeeNameTranslate();\n    const readMore = ref(new String(props.post?.text).length < 500);\n    const {updatePostLike} = useBuzzAPIs(\n      new APIService(window.appGlobal.baseUrl, ''),\n    );\n\n    const postDateTime = computed(() => {\n      const {createdDate, createdTime} = props.post;\n\n      const utcDate = parseDate(\n        `${createdDate} ${createdTime} +00:00`,\n        'yyyy-MM-dd HH:mm xxx',\n      );\n\n      return formatDate(utcDate, `${jsDateFormat} ${jsTimeFormat}`, {\n        locale,\n      });\n    });\n\n    const employeeFullName = computed(() => {\n      return $tEmpName(props.post.employee, {\n        includeMiddle: true,\n        excludePastEmpTag: false,\n      });\n    });\n\n    const onClickClose = () => context.emit('close');\n\n    const onClickLike = () => {\n      if (!loading) {\n        loading = true;\n        updatePostLike(props.post.id, props.post.liked).then(() => {\n          loading = false;\n          context.emit('like');\n        });\n      }\n    };\n\n    const postClasses = computed(() => ({\n      'XHRM-post-details-text': true,\n      '--truncate': readMore.value === false,\n    }));\n\n    const onClickReadMore = () => {\n      readMore.value = !readMore.value;\n    };\n\n    return {\n      readMore,\n      postClasses,\n      onClickLike,\n      onClickClose,\n      postDateTime,\n      onClickReadMore,\n      employeeFullName,\n    };\n  },\n};\n</script>\n\n<style src=\"./post-details.scss\" lang=\"scss\" scoped></style>\n\r\n"],"mappings":";;EAoBOA,KAAK,EAAC;AAAmB;;EAOvBA,KAAK,EAAC;AAA0B;;EAE9BA,KAAK,EAAC;AAA+B;;EAqBvCA,KAAK,EAAC;AAA2B;;;;;;;;;uBA9BxCC,mBAAA,CAyCM,OAzCNC,UAyCM,GAxCJC,YAAA,CAKEC,0BAAA;IAJAJ,KAAK,EAAC,yBAAyB;IAC/BK,IAAI,EAAC,GAAG;IACP,gBAAc,EAAE,KAAK;IACrBC,OAAK,EAAEC,MAAA,CAAAC;4BAEVC,mBAAA,CAUM,OAVNC,UAUM,GATJP,YAAA,CAAyDQ,wBAAA;IAAzCC,QAAQ,EAAEC,MAAA,CAAAC,IAAI,CAACF;6BAC/BH,mBAAA,CAOM,OAPNM,UAOM,GANJZ,YAAA,CAEWa,mBAAA;IAFDC,GAAG,EAAC,GAAG;IAACjB,KAAK,EAAC;;sBACtB,MAAsB,C,kCAAnBO,MAAA,CAAAW,gBAAgB,M;;MAErBf,YAAA,CAEWa,mBAAA;IAFDC,GAAG,EAAC,GAAG;IAACjB,KAAK,EAAC;;sBACtB,MAAkB,C,kCAAfO,MAAA,CAAAY,YAAY,M;;UAILN,MAAA,CAAAC,IAAI,CAACM,IAAI,I,cAAzBC,YAAA,CAEWL,mBAAA;;IAFgBC,GAAG,EAAC,GAAG;IAAEjB,KAAK,EAAAsB,eAAA,CAAEf,MAAA,CAAAgB,WAAW;;sBACpD,MAAe,C,kCAAZV,MAAA,CAAAC,IAAI,CAACM,IAAI,M;;qEAEdjB,YAAA,CAOWa,mBAAA;IALTC,GAAG,EAAC,GAAG;IACPjB,KAAK,EAAC,4BAA4B;IACjCM,OAAK,EAAEC,MAAA,CAAAiB;;sBAER,MAA0B,C,kCAAvBC,IAAA,CAAAC,EAAE,wB;;iCALInB,MAAA,CAAAoB,QAAQ,E,GAOnBxB,YAAA,CAA2ByB,sBAAA,GAC3BnB,mBAAA,CAGM,OAHNoB,UAGM,GAFJ1B,YAAA,CAA+D2B,oBAAA;IAAnDC,IAAI,EAAElB,MAAA,CAAAC,IAAI,CAACkB,KAAK;IAAG1B,OAAK,EAAEC,MAAA,CAAA0B;oCACtC9B,YAAA,CAAuD+B,qBAAA;IAA1CpB,IAAI,EAAED,MAAA,CAAAC,IAAI;IAAGqB,MAAM,EAAEtB,MAAA,CAAAsB;qCAEpChC,YAAA,CAA2ByB,sBAAA,GAC3BzB,YAAA,CAK0BiC,iCAAA;IAJvB,SAAO,EAAEvB,MAAA,CAAAC,IAAI,CAACuB,EAAE;IAChBzB,QAAQ,EAAEC,MAAA,CAAAC,IAAI,CAACF,QAAQ;IACvB0B,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEf,IAAA,CAAAgB,KAAK,kBAAkBD,MAAM;IACrCE,QAAM,EAAAH,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEf,IAAA,CAAAgB,KAAK,kBAAkBD,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}